<!DOCTYPE html>
<html class="RFC" lang="en"><head>
<meta charset="utf-8"/>
<meta content="Common,Latin" name="scripts"/>
<meta content="initial-scale=1.0" name="viewport"/>
<title>RFC 8878: Zstandard Compression and the 'application/zstd' Media Type</title>
<meta content="Yann Collet" name="author"/>
<meta content="Murray S. Kucherawy" name="author"/>
<meta content='
       Zstandard, or "zstd" (pronounced "zee standard"), is a lossless data
compression mechanism.  This document describes the mechanism and
registers a media type, content encoding, and a structured syntax
suffix to be used when transporting zstd-compressed content via MIME. 
        Despite use of the word "standard" as part of Zstandard,
     readers are advised that this document is not an
     Internet Standards Track specification; it is being
     published for informational purposes only.  
        This document replaces and obsoletes RFC 8478.  
    ' name="description"/>
<meta content="xml2rfc 3.5.0" name="generator"/>
<meta content="compression" name="keyword"/>
<meta content="8878" name="rfc.number"/>
<!-- Generator version information:
  xml2rfc 3.5.0
    Python 3.6.10
    appdirs 1.4.4
    ConfigArgParse 1.2.3
    google-i18n-address 2.3.5
    html5lib 1.0.1
    intervaltree 3.0.2
    Jinja2 2.11.2
    kitchen 1.2.6
    lxml 4.4.2
    pycairo 1.19.0
    pycountry 19.8.18
    pyflakes 2.1.1
    PyYAML 5.3.1
    requests 2.22.0
    setuptools 40.6.2
    six 1.14.0
    WeasyPrint 51
-->
<link href="rfc8878.xml" rel="alternate" type="application/rfc+xml"/>
<link href="#copyright" rel="license"/>
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: avoid-page;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css"/>
<link href="https://dx.doi.org/10.17487/rfc8878" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  <link href="https://datatracker.ietf.org/doc/draft-kucherawy-rfc8478bis-05" rel="prev"/>
  </head>
<body>
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 8878</td>
<td class="center">application/zstd</td>
<td class="right">February 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Collet &amp; Kucherawy</td>
<td class="center">Informational</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div class="document-information" id="external-metadata"></div>
<div class="document-information" id="internal-metadata">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Internet Engineering Task Force (IETF)</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a class="eref" href="https://www.rfc-editor.org/rfc/rfc8878">8878</a></dd>
<dt class="label-obsoletes">Obsoletes:</dt>
<dd class="obsoletes">
<a class="eref" href="https://www.rfc-editor.org/rfc/rfc8478">8478</a> </dd>
<dt class="label-category">Category:</dt>
<dd class="category">Informational</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time class="published" datetime="2021-02">February 2021</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">Y. Collet</div>
<div class="org">Facebook</div>
</div>
<div class="author">
      <div class="author-name">M. Kucherawy, <span class="editor">Ed.</span>
</div>
<div class="org">Facebook</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 8878</h1>
<h1 id="title">Zstandard Compression and the 'application/zstd' Media Type</h1>
<section id="section-abstract">
      <h2 id="abstract"><a class="selfRef" href="#abstract">Abstract</a></h2>
<p id="section-abstract-1">Zstandard, or "zstd" (pronounced "zee standard"), is a lossless data
compression mechanism.  This document describes the mechanism and
registers a media type, content encoding, and a structured syntax
suffix to be used when transporting zstd-compressed content via MIME.<a class="pilcrow" href="#section-abstract-1">¶</a></p>
<p id="section-abstract-2"> Despite use of the word "standard" as part of Zstandard,
     readers are advised that this document is not an
     Internet Standards Track specification; it is being
     published for informational purposes only.<a class="pilcrow" href="#section-abstract-2">¶</a></p>
<p id="section-abstract-3"> This document replaces and obsoletes RFC 8478.<a class="pilcrow" href="#section-abstract-3">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a class="section-name selfRef" href="#name-status-of-this-memo">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This document is not an Internet Standards Track specification; it is
            published for informational purposes.<a class="pilcrow" href="#section-boilerplate.1-1">¶</a></p>
<p id="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by the
            Internet Engineering Steering Group (IESG).  Not all documents
            approved by the IESG are candidates for any level of Internet
            Standard; see Section 2 of RFC 7841.<a class="pilcrow" href="#section-boilerplate.1-2">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc8878">https://www.rfc-editor.org/info/rfc8878</a></span>.<a class="pilcrow" href="#section-boilerplate.1-3">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a class="section-name selfRef" href="#name-copyright-notice">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a class="pilcrow" href="#section-boilerplate.2-1">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a class="pilcrow" href="#section-boilerplate.2-2">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a class="toplink" href="#" onclick="scroll(0,0)">▲</a><h2 id="name-table-of-contents">
<a class="section-name selfRef" href="#name-table-of-contents">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="toc compact ulEmpty">
<li class="toc compact ulEmpty" id="section-toc.1-1.1">
            <p class="keepWithNext" id="section-toc.1-1.1.1"><a class="xref" href="#section-1">1</a>.  <a class="xref" href="#name-introduction">Introduction</a><a class="pilcrow" href="#section-toc.1-1.1.1">¶</a></p>
</li>
          <li class="toc compact ulEmpty" id="section-toc.1-1.2">
            <p class="keepWithNext" id="section-toc.1-1.2.1"><a class="xref" href="#section-2">2</a>.  <a class="xref" href="#name-definitions">Definitions</a><a class="pilcrow" href="#section-toc.1-1.2.1">¶</a></p>
</li>
          <li class="toc compact ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a class="xref" href="#section-3">3</a>.  <a class="xref" href="#name-compression-algorithm">Compression Algorithm</a><a class="pilcrow" href="#section-toc.1-1.3.1">¶</a></p>
<ul class="toc compact ulEmpty">
<li class="toc compact ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a class="xref" href="#section-3.1">3.1</a>.  <a class="xref" href="#name-frames">Frames</a><a class="pilcrow" href="#section-toc.1-1.3.2.1.1">¶</a></p>
<ul class="toc compact ulEmpty">
<li class="toc compact ulEmpty" id="section-toc.1-1.3.2.1.2.1">
                    <p id="section-toc.1-1.3.2.1.2.1.1"><a class="xref" href="#section-3.1.1">3.1.1</a>.  <a class="xref" href="#name-zstandard-frames">Zstandard Frames</a><a class="pilcrow" href="#section-toc.1-1.3.2.1.2.1.1">¶</a></p>
<ul class="toc compact ulEmpty">
<li class="toc compact ulEmpty" id="section-toc.1-1.3.2.1.2.1.2.1">
                        <p class="keepWithNext" id="section-toc.1-1.3.2.1.2.1.2.1.1"><a class="xref" href="#section-3.1.1.1">3.1.1.1</a>.  <a class="xref" href="#name-frame-header">Frame Header</a><a class="pilcrow" href="#section-toc.1-1.3.2.1.2.1.2.1.1">¶</a></p>
</li>
                      <li class="toc compact ulEmpty" id="section-toc.1-1.3.2.1.2.1.2.2">
                        <p id="section-toc.1-1.3.2.1.2.1.2.2.1"><a class="xref" href="#section-3.1.1.2">3.1.1.2</a>.  <a class="xref" href="#name-blocks">Blocks</a><a class="pilcrow" href="#section-toc.1-1.3.2.1.2.1.2.2.1">¶</a></p>
</li>
                      <li class="toc compact ulEmpty" id="section-toc.1-1.3.2.1.2.1.2.3">
                        <p id="section-toc.1-1.3.2.1.2.1.2.3.1"><a class="xref" href="#section-3.1.1.3">3.1.1.3</a>.  <a class="xref" href="#name-compressed-blocks">Compressed Blocks</a><a class="pilcrow" href="#section-toc.1-1.3.2.1.2.1.2.3.1">¶</a></p>
</li>
                      <li class="toc compact ulEmpty" id="section-toc.1-1.3.2.1.2.1.2.4">
                        <p id="section-toc.1-1.3.2.1.2.1.2.4.1"><a class="xref" href="#section-3.1.1.4">3.1.1.4</a>.  <a class="xref" href="#name-sequence-execution">Sequence Execution</a><a class="pilcrow" href="#section-toc.1-1.3.2.1.2.1.2.4.1">¶</a></p>
</li>
                      <li class="toc compact ulEmpty" id="section-toc.1-1.3.2.1.2.1.2.5">
                        <p id="section-toc.1-1.3.2.1.2.1.2.5.1"><a class="xref" href="#section-3.1.1.5">3.1.1.5</a>.  <a class="xref" href="#name-repeat-offsets">Repeat Offsets</a><a class="pilcrow" href="#section-toc.1-1.3.2.1.2.1.2.5.1">¶</a></p>
</li>
                    </ul>
</li>
                  <li class="toc compact ulEmpty" id="section-toc.1-1.3.2.1.2.2">
                    <p id="section-toc.1-1.3.2.1.2.2.1"><a class="xref" href="#section-3.1.2">3.1.2</a>.  <a class="xref" href="#name-skippable-frames">Skippable Frames</a><a class="pilcrow" href="#section-toc.1-1.3.2.1.2.2.1">¶</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="toc compact ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a class="xref" href="#section-4">4</a>.  <a class="xref" href="#name-entropy-encoding">Entropy Encoding</a><a class="pilcrow" href="#section-toc.1-1.4.1">¶</a></p>
<ul class="toc compact ulEmpty">
<li class="toc compact ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a class="xref" href="#section-4.1">4.1</a>.  <a class="xref" href="#name-fse">FSE</a><a class="pilcrow" href="#section-toc.1-1.4.2.1.1">¶</a></p>
<ul class="toc compact ulEmpty">
<li class="toc compact ulEmpty" id="section-toc.1-1.4.2.1.2.1">
                    <p id="section-toc.1-1.4.2.1.2.1.1"><a class="xref" href="#section-4.1.1">4.1.1</a>.  <a class="xref" href="#name-fse-table-description">FSE Table Description</a><a class="pilcrow" href="#section-toc.1-1.4.2.1.2.1.1">¶</a></p>
</li>
                </ul>
</li>
              <li class="toc compact ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a class="xref" href="#section-4.2">4.2</a>.  <a class="xref" href="#name-huffman-coding">Huffman Coding</a><a class="pilcrow" href="#section-toc.1-1.4.2.2.1">¶</a></p>
<ul class="toc compact ulEmpty">
<li class="toc compact ulEmpty" id="section-toc.1-1.4.2.2.2.1">
                    <p id="section-toc.1-1.4.2.2.2.1.1"><a class="xref" href="#section-4.2.1">4.2.1</a>.  <a class="xref" href="#name-huffman-tree-description">Huffman Tree Description</a><a class="pilcrow" href="#section-toc.1-1.4.2.2.2.1.1">¶</a></p>
<ul class="toc compact ulEmpty">
<li class="toc compact ulEmpty" id="section-toc.1-1.4.2.2.2.1.2.1">
                        <p id="section-toc.1-1.4.2.2.2.1.2.1.1"><a class="xref" href="#section-4.2.1.1">4.2.1.1</a>.  <a class="xref" href="#name-huffman-tree-header">Huffman Tree Header</a><a class="pilcrow" href="#section-toc.1-1.4.2.2.2.1.2.1.1">¶</a></p>
</li>
                      <li class="toc compact ulEmpty" id="section-toc.1-1.4.2.2.2.1.2.2">
                        <p id="section-toc.1-1.4.2.2.2.1.2.2.1"><a class="xref" href="#section-4.2.1.2">4.2.1.2</a>.  <a class="xref" href="#name-fse-compression-of-huffman-">FSE Compression of Huffman Weights</a><a class="pilcrow" href="#section-toc.1-1.4.2.2.2.1.2.2.1">¶</a></p>
</li>
                      <li class="toc compact ulEmpty" id="section-toc.1-1.4.2.2.2.1.2.3">
                        <p id="section-toc.1-1.4.2.2.2.1.2.3.1"><a class="xref" href="#section-4.2.1.3">4.2.1.3</a>.  <a class="xref" href="#name-conversion-from-weights-to-">Conversion from Weights to Huffman Prefix Codes</a><a class="pilcrow" href="#section-toc.1-1.4.2.2.2.1.2.3.1">¶</a></p>
</li>
                    </ul>
</li>
                  <li class="toc compact ulEmpty" id="section-toc.1-1.4.2.2.2.2">
                    <p id="section-toc.1-1.4.2.2.2.2.1"><a class="xref" href="#section-4.2.2">4.2.2</a>.  <a class="xref" href="#name-huffman-coded-streams">Huffman-Coded Streams</a><a class="pilcrow" href="#section-toc.1-1.4.2.2.2.2.1">¶</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="toc compact ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a class="xref" href="#section-5">5</a>.  <a class="xref" href="#name-dictionary-format">Dictionary Format</a><a class="pilcrow" href="#section-toc.1-1.5.1">¶</a></p>
</li>
          <li class="toc compact ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a class="xref" href="#section-6">6</a>.  <a class="xref" href="#name-use-of-dictionaries">Use of Dictionaries</a><a class="pilcrow" href="#section-toc.1-1.6.1">¶</a></p>
</li>
          <li class="toc compact ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a class="xref" href="#section-7">7</a>.  <a class="xref" href="#name-iana-considerations">IANA Considerations</a><a class="pilcrow" href="#section-toc.1-1.7.1">¶</a></p>
<ul class="toc compact ulEmpty">
<li class="toc compact ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a class="xref" href="#section-7.1">7.1</a>.  <a class="xref" href="#name-the-application-zstd-media-">The 'application/zstd' Media Type</a><a class="pilcrow" href="#section-toc.1-1.7.2.1.1">¶</a></p>
</li>
              <li class="toc compact ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a class="xref" href="#section-7.2">7.2</a>.  <a class="xref" href="#name-content-encoding">Content Encoding</a><a class="pilcrow" href="#section-toc.1-1.7.2.2.1">¶</a></p>
</li>
              <li class="toc compact ulEmpty" id="section-toc.1-1.7.2.3">
                <p id="section-toc.1-1.7.2.3.1"><a class="xref" href="#section-7.3">7.3</a>.  <a class="xref" href="#name-structured-syntax-suffix">Structured Syntax Suffix</a><a class="pilcrow" href="#section-toc.1-1.7.2.3.1">¶</a></p>
</li>
              <li class="toc compact ulEmpty" id="section-toc.1-1.7.2.4">
                <p id="section-toc.1-1.7.2.4.1"><a class="xref" href="#section-7.4">7.4</a>.  <a class="xref" href="#name-dictionaries">Dictionaries</a><a class="pilcrow" href="#section-toc.1-1.7.2.4.1">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc compact ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a class="xref" href="#section-8">8</a>.  <a class="xref" href="#name-security-considerations">Security Considerations</a><a class="pilcrow" href="#section-toc.1-1.8.1">¶</a></p>
</li>
          <li class="toc compact ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a class="xref" href="#section-9">9</a>.  <a class="xref" href="#name-references">References</a><a class="pilcrow" href="#section-toc.1-1.9.1">¶</a></p>
<ul class="toc compact ulEmpty">
<li class="toc compact ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a class="xref" href="#section-9.1">9.1</a>.  <a class="xref" href="#name-normative-references">Normative References</a><a class="pilcrow" href="#section-toc.1-1.9.2.1.1">¶</a></p>
</li>
              <li class="toc compact ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a class="xref" href="#section-9.2">9.2</a>.  <a class="xref" href="#name-informative-references">Informative References</a><a class="pilcrow" href="#section-toc.1-1.9.2.2.1">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc compact ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a class="xref" href="#section-appendix.a">Appendix A</a>.  <a class="xref" href="#name-decoding-tables-for-predefi">Decoding Tables for Predefined Codes</a><a class="pilcrow" href="#section-toc.1-1.10.1">¶</a></p>
<ul class="toc compact ulEmpty">
<li class="toc compact ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a class="xref" href="#section-a.1">A.1</a>.  <a class="xref" href="#name-literals-length-code-table">Literals Length Code Table</a><a class="pilcrow" href="#section-toc.1-1.10.2.1.1">¶</a></p>
</li>
              <li class="toc compact ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a class="xref" href="#section-a.2">A.2</a>.  <a class="xref" href="#name-match-length-code-table">Match Length Code Table</a><a class="pilcrow" href="#section-toc.1-1.10.2.2.1">¶</a></p>
</li>
              <li class="toc compact ulEmpty" id="section-toc.1-1.10.2.3">
                <p id="section-toc.1-1.10.2.3.1"><a class="xref" href="#section-a.3">A.3</a>.  <a class="xref" href="#name-offset-code-table">Offset Code Table</a><a class="pilcrow" href="#section-toc.1-1.10.2.3.1">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc compact ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a class="xref" href="#section-appendix.b">Appendix B</a>.  <a class="xref" href="#name-changes-since-rfc-8478">Changes since RFC 8478</a><a class="pilcrow" href="#section-toc.1-1.11.1">¶</a></p>
</li>
          <li class="toc compact ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a class="xref" href="#section-appendix.c"></a><a class="xref" href="#name-acknowledgments">Acknowledgments</a><a class="pilcrow" href="#section-toc.1-1.12.1">¶</a></p>
</li>
          <li class="toc compact ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a class="xref" href="#section-appendix.d"></a><a class="xref" href="#name-authors-addresses">Authors' Addresses</a><a class="pilcrow" href="#section-toc.1-1.13.1">¶</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="intro">
<section id="section-1">
      <h2 id="name-introduction">
<a class="section-number selfRef" href="#section-1">1. </a><a class="section-name selfRef" href="#name-introduction">Introduction</a>
      </h2>
<p id="section-1-1"> Zstandard, or "zstd" (pronounced "zee standard"), is a
     data compression mechanism, akin to gzip
     <span>[<a class="xref" href="#RFC1952">RFC1952</a>]</span>.<a class="pilcrow" href="#section-1-1">¶</a></p>
<p id="section-1-2"> Despite use of the word "standard" as part of its name,
     readers are advised that this document is not an
     Internet Standards Track specification; it is being
     published for informational purposes only.<a class="pilcrow" href="#section-1-2">¶</a></p>
<p id="section-1-3">This document describes the Zstandard format.  Also, to enable the
      transport of a data object compressed with Zstandard, this document
      registers a media type, content encoding, and structured syntax suffix
      that can be used to identify such content when it is used in a
      payload.<a class="pilcrow" href="#section-1-3">¶</a></p>
</section>
</div>
<div id="definitions">
<section id="section-2">
      <h2 id="name-definitions">
<a class="section-number selfRef" href="#section-2">2. </a><a class="section-name selfRef" href="#name-definitions">Definitions</a>
      </h2>
<p id="section-2-1">Some terms used elsewhere in this document are defined
      here for clarity.<a class="pilcrow" href="#section-2-1">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2-2">
        <dt id="section-2-2.1">uncompressed:</dt>
        <dd id="section-2-2.2" style="margin-left: 1.5em">Describes an arbitrary
 set of bytes in their original form, prior to being
 subjected to compression.<a class="pilcrow" href="#section-2-2.2">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.3">compressed:</dt>
        <dd id="section-2-2.4" style="margin-left: 1.5em">Describes the result of passing
 a set of bytes through this mechanism.  The original
 input has thus been compressed.<a class="pilcrow" href="#section-2-2.4">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.5">decompressed:</dt>
        <dd id="section-2-2.6" style="margin-left: 1.5em">Describes the result of passing
 a set of bytes through the reverse of this mechanism.
 When this is successful, the decompressed payload and
 the uncompressed payload are indistinguishable.<a class="pilcrow" href="#section-2-2.6">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.7">encode:</dt>
        <dd id="section-2-2.8" style="margin-left: 1.5em">The process of translating data
 from one form to another; this may include compression,
 or it may refer to other translations done as part
 of this specification.<a class="pilcrow" href="#section-2-2.8">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.9">decode:</dt>
        <dd id="section-2-2.10" style="margin-left: 1.5em">The reverse of "encode"; describes
 a process of reversing a prior encoding to recover
 the original content.<a class="pilcrow" href="#section-2-2.10">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.11">frame:</dt>
        <dd id="section-2-2.12" style="margin-left: 1.5em">Content compressed by Zstandard is
 transformed into a Zstandard frame. Multiple frames
 can be appended into a single file or stream. A frame
 is completely independent, has a defined beginning
 and end, and has a set of parameters that tells the
 decoder how to decompress it.<a class="pilcrow" href="#section-2-2.12">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.13">block:</dt>
        <dd id="section-2-2.14" style="margin-left: 1.5em">A frame encapsulates one or multiple
 blocks. Each block contains arbitrary content, which
 is described by its header, and has a guaranteed
 maximum content size that depends upon frame
 parameters.  Unlike frames, each block depends
 on previous blocks for proper decoding.  However, each
 block can be decompressed without waiting for its
 successor, allowing streaming operations.<a class="pilcrow" href="#section-2-2.14">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.15">natural order:</dt>
        <dd id="section-2-2.16" style="margin-left: 1.5em">A sequence or ordering of
 objects or values that is typical of that type of
 object or value.  A set of unique integers, for
 example, is in "natural order" if, when progressing
 from one element in the set or sequence to the next,
 there is never a decrease in value.<a class="pilcrow" href="#section-2-2.16">¶</a>
</dd>
      <dd class="break"></dd>
</dl>
<p id="section-2-3">The naming convention for identifiers within the
 specification is Mixed_Case_With_Underscores.  
 Identifiers inside square brackets indicate that the
 identifier is optional in the presented context.<a class="pilcrow" href="#section-2-3">¶</a></p>
</section>
</div>
<div id="compression">
<section id="section-3">
      <h2 id="name-compression-algorithm">
<a class="section-number selfRef" href="#section-3">3. </a><a class="section-name selfRef" href="#name-compression-algorithm">Compression Algorithm</a>
      </h2>
<p id="section-3-1"> This section describes the Zstandard algorithm.<a class="pilcrow" href="#section-3-1">¶</a></p>
<p id="section-3-2"> The purpose of this document is to define a lossless
     compressed data format that is a) independent of the CPU
     type, operating system, file system, and character set and
     b) suitable for file compression and pipe and streaming
     compression, using the Zstandard algorithm. The text of
     the specification assumes a basic background in
     programming at the level of bits and other primitive data
     representations.<a class="pilcrow" href="#section-3-2">¶</a></p>
<p id="section-3-3"> The data can be produced or consumed, even for an
     arbitrarily long sequentially presented input data stream,
     using only an a priori bounded amount of intermediate
     storage; hence, it can be used in data communications.
     The format uses the Zstandard compression method, and
     an optional xxHash-64 checksum method
     <span>[<a class="xref" href="#XXHASH">XXHASH</a>]</span>, for detection of data
     corruption.<a class="pilcrow" href="#section-3-3">¶</a></p>
<p id="section-3-4"> The data format defined by this specification does not
     attempt to allow random access to compressed data.<a class="pilcrow" href="#section-3-4">¶</a></p>
<p id="section-3-5"> Unless otherwise indicated below, a compliant compressor
     must produce data sets that conform to the specifications
     presented here.  However, it does not need to support all
     options.<a class="pilcrow" href="#section-3-5">¶</a></p>
<p id="section-3-6"> A compliant decompressor must be able to decompress at
     least one working set of parameters that conforms to the
     specifications presented here. It may also ignore
     informative fields, such as the checksum. Whenever it does
     not support a parameter defined in the compressed stream,
     it must produce an unambiguous error code and associated
     error message explaining which parameter is
     unsupported.<a class="pilcrow" href="#section-3-6">¶</a></p>
<p id="section-3-7"> This specification is intended for use by implementers
     of software to compress data into Zstandard format and/or
     decompress data from Zstandard format. The Zstandard
     format is supported by an open-source reference
     implementation, written in portable C, and available at
     <span>[<a class="xref" href="#ZSTD">ZSTD</a>]</span>.<a class="pilcrow" href="#section-3-7">¶</a></p>
<div id="comp_frames">
<section id="section-3.1">
        <h3 id="name-frames">
<a class="section-number selfRef" href="#section-3.1">3.1. </a><a class="section-name selfRef" href="#name-frames">Frames</a>
        </h3>
<p id="section-3.1-1"> Zstandard compressed data is made up of one
     or more frames.  Each frame is independent and can
     be decompressed independently of other frames.  The
     decompressed content of multiple concatenated
     frames is the concatenation of each frame's
     decompressed content.<a class="pilcrow" href="#section-3.1-1">¶</a></p>
<p id="section-3.1-2"> There are two frame formats defined for
     Zstandard: Zstandard frames and skippable frames.
     Zstandard frames contain compressed data, while
     skippable frames contain custom user metadata.<a class="pilcrow" href="#section-3.1-2">¶</a></p>
<div id="comp_zstd_frames">
<section id="section-3.1.1">
          <h4 id="name-zstandard-frames">
<a class="section-number selfRef" href="#section-3.1.1">3.1.1. </a><a class="section-name selfRef" href="#name-zstandard-frames">Zstandard Frames</a>
          </h4>
<p id="section-3.1.1-1"> The structure of a single Zstandard frame
     is as follows:<a class="pilcrow" href="#section-3.1.1-1">¶</a></p>
<span id="name-the-structure-of-a-single-z"></span><div id="single-frame">
<table class="center" id="table-1">
            <caption>
<a class="selfRef" href="#table-1">Table 1</a>:
<a class="selfRef" href="#name-the-structure-of-a-single-z">The Structure of a Single Zstandard Frame</a>
            </caption>
<tbody>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">Magic_Number</td>
                <td class="text-left" colspan="1" rowspan="1">4 bytes</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">Frame_Header</td>
                <td class="text-left" colspan="1" rowspan="1">2-14 bytes</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">Data_Block</td>
                <td class="text-left" colspan="1" rowspan="1">n bytes</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">[More Data_Blocks]</td>
                <td class="text-left" colspan="1" rowspan="1"></td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">[Content_Checksum]</td>
                <td class="text-left" colspan="1" rowspan="1">4 bytes</td>
              </tr>
            </tbody>
          </table>
</div>
<span class="break"></span><dl class="dlParallel" id="section-3.1.1-3">
            <dt id="section-3.1.1-3.1">Magic_Number:</dt>
            <dd id="section-3.1.1-3.2" style="margin-left: 1.5em">
       4 bytes, little-endian format.  Value: 0xFD2FB528.<a class="pilcrow" href="#section-3.1.1-3.2">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-3.1.1-3.3">Frame_Header:</dt>
            <dd id="section-3.1.1-3.4" style="margin-left: 1.5em">
       2 to 14 bytes, detailed in
       <a class="xref" href="#comp_frame_hdr">Section 3.1.1.1</a>.<a class="pilcrow" href="#section-3.1.1-3.4">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-3.1.1-3.5">Data_Block:</dt>
            <dd id="section-3.1.1-3.6" style="margin-left: 1.5em">
       Detailed in <a class="xref" href="#blocks">Section 3.1.1.2</a>.
       This is where data appears.<a class="pilcrow" href="#section-3.1.1-3.6">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-3.1.1-3.7">Content_Checksum:</dt>
            <dd id="section-3.1.1-3.8" style="margin-left: 1.5em">
       An optional 32-bit checksum,
       only present if 
       Content_Checksum_Flag is set.
       The content checksum is the
       result of the XXH64() hash
       function
       <span>[<a class="xref" href="#XXHASH">XXHASH</a>]</span>
       digesting the original
        (decoded) data as input, and a
       seed of zero.  The low 4
       bytes of the checksum are
       stored in little-endian format.<a class="pilcrow" href="#section-3.1.1-3.8">¶</a>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-3.1.1-4"> The magic number was selected to be less 
   probable to find at the beginning of an
   arbitrary file.  It avoids trivial
   patterns (0x00, 0xFF, repeated bytes,
   increasing bytes, etc.), contains byte
   values outside of the ASCII range, and doesn't
   map into UTF-8 space, all of which reduce
   the likelihood of its appearance at the
   top of a text file.<a class="pilcrow" href="#section-3.1.1-4">¶</a></p>
<div id="comp_frame_hdr">
<section id="section-3.1.1.1">
            <h5 id="name-frame-header">
<a class="section-number selfRef" href="#section-3.1.1.1">3.1.1.1. </a><a class="section-name selfRef" href="#name-frame-header">Frame Header</a>
            </h5>
<p id="section-3.1.1.1-1"> The frame header has a variable
     size, with a minimum of 2 bytes
     up to a maximum of 14 bytes depending on
     optional parameters. The structure
     of Frame_Header is as follows:<a class="pilcrow" href="#section-3.1.1.1-1">¶</a></p>
<span id="name-the-structure-of-frame_head"></span><div id="frame-header">
<table class="center" id="table-2">
              <caption>
<a class="selfRef" href="#table-2">Table 2</a>:
<a class="selfRef" href="#name-the-structure-of-frame_head">The Structure of Frame_Header</a>
              </caption>
<tbody>
                <tr>
                  <td class="text-left" colspan="1" rowspan="1">Frame_Header_Descriptor </td>
                  <td class="text-left" colspan="1" rowspan="1">1 byte</td>
                </tr>
                <tr>
                  <td class="text-left" colspan="1" rowspan="1">[Window_Descriptor]</td>
                  <td class="text-left" colspan="1" rowspan="1">0-1 byte</td>
                </tr>
                <tr>
                  <td class="text-left" colspan="1" rowspan="1">[Dictionary_ID]</td>
                  <td class="text-left" colspan="1" rowspan="1">0-4 bytes</td>
                </tr>
                <tr>
                  <td class="text-left" colspan="1" rowspan="1">[Frame_Content_Size]</td>
                  <td class="text-left" colspan="1" rowspan="1">0-8 bytes</td>
                </tr>
              </tbody>
            </table>
</div>
<div id="comp_frame_header_desc">
<section id="section-3.1.1.1.1">
              <h6 id="name-frame_header_descriptor">
<a class="section-number selfRef" href="#section-3.1.1.1.1">3.1.1.1.1. </a><a class="section-name selfRef" href="#name-frame_header_descriptor">Frame_Header_Descriptor</a>
              </h6>
<p id="section-3.1.1.1.1-1"> The first header's byte is called the
       Frame_Header_Descriptor. It describes
       which other fields are present. Decoding this
       byte is enough to tell the size of Frame_Header.<a class="pilcrow" href="#section-3.1.1.1.1-1">¶</a></p>
<span id="name-the-frame_header_descriptor"></span><div id="Frame-Header-Descriptor">
<table class="center" id="table-3">
                <caption>
<a class="selfRef" href="#table-3">Table 3</a>:
<a class="selfRef" href="#name-the-frame_header_descriptor">The Frame_Header_Descriptor</a>
                </caption>
<thead>
                  <tr>
                    <th class="text-left" colspan="1" rowspan="1">Bit Number</th>
                    <th class="text-left" colspan="1" rowspan="1">Field Name</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="text-left" colspan="1" rowspan="1">7-6</td>
                    <td class="text-left" colspan="1" rowspan="1">Frame_Content_Size_Flag </td>
                  </tr>
                  <tr>
                    <td class="text-left" colspan="1" rowspan="1">5</td>
                    <td class="text-left" colspan="1" rowspan="1">Single_Segment_Flag  </td>
                  </tr>
                  <tr>
                    <td class="text-left" colspan="1" rowspan="1">4</td>
                    <td class="text-left" colspan="1" rowspan="1">(unused)</td>
                  </tr>
                  <tr>
                    <td class="text-left" colspan="1" rowspan="1">3</td>
                    <td class="text-left" colspan="1" rowspan="1">(reserved)</td>
                  </tr>
                  <tr>
                    <td class="text-left" colspan="1" rowspan="1">2</td>
                    <td class="text-left" colspan="1" rowspan="1">Content_Checksum_Flag</td>
                  </tr>
                  <tr>
                    <td class="text-left" colspan="1" rowspan="1">1-0</td>
                    <td class="text-left" colspan="1" rowspan="1">Dictionary_ID_Flag</td>
                  </tr>
                </tbody>
              </table>
</div>
<p id="section-3.1.1.1.1-3"> In <a class="xref" href="#Frame-Header-Descriptor">Table 3</a>, bit 7 is
       the highest bit, while bit
       0 is the lowest one.<a class="pilcrow" href="#section-3.1.1.1.1-3">¶</a></p>
<section id="section-3.1.1.1.1.1">
                <h6 id="name-frame_content_size_flag">
<a class="section-number selfRef" href="#section-3.1.1.1.1.1">3.1.1.1.1.1. </a><a class="section-name selfRef" href="#name-frame_content_size_flag">Frame_Content_Size_Flag</a>
                </h6>
<p id="section-3.1.1.1.1.1-1">
   This is a 2-bit flag (equivalent to Frame_Header_Descriptor
   right-shifted 6 bits) specifying whether Frame_Content_Size
   (the decompressed data size) is provided within the header.
   Frame_Content_Size_Flag provides FCS_Field_Size, which is the
   number of bytes used by Frame_Content_Size according to
   <a class="xref" href="#frame-content-size-flag">Table 4</a>:<a class="pilcrow" href="#section-3.1.1.1.1.1-1">¶</a></p>
<span id="name-frame_content_size_flag-pro"></span><div id="frame-content-size-flag">
<table class="center" id="table-4">
                  <caption>
<a class="selfRef" href="#table-4">Table 4</a>:
<a class="selfRef" href="#name-frame_content_size_flag-pro">Frame_Content_Size_Flag Provides FCS_Field_Size</a>
                  </caption>
<tbody>
                    <tr>
                      <td class="text-left" colspan="1" rowspan="1">Frame_Content_Size_Flag</td>
                      <td class="text-center" colspan="1" rowspan="1">0</td>
                      <td class="text-left" colspan="1" rowspan="1">1</td>
                      <td class="text-left" colspan="1" rowspan="1">2</td>
                      <td class="text-left" colspan="1" rowspan="1">3</td>
                    </tr>
                    <tr>
                      <td class="text-left" colspan="1" rowspan="1">FCS_Field_Size</td>
                      <td class="text-center" colspan="1" rowspan="1">0 or 1</td>
                      <td class="text-left" colspan="1" rowspan="1">2</td>
                      <td class="text-left" colspan="1" rowspan="1">4</td>
                      <td class="text-left" colspan="1" rowspan="1">8</td>
                    </tr>
                  </tbody>
                </table>
</div>
<p id="section-3.1.1.1.1.1-3">
   When Frame_Content_Size_Flag
   is 0, FCS_Field_Size
   depends on
   Single_Segment_Flag:
   if Single_Segment_Flag
   is set, FCS_Field_Size
   is 1.  Otherwise,
   FCS_Field_Size is 0;
   Frame_Content_Size
   is not provided.<a class="pilcrow" href="#section-3.1.1.1.1.1-3">¶</a></p>
</section>
<section id="section-3.1.1.1.1.2">
                <h6 id="name-single_segment_flag">
<a class="section-number selfRef" href="#section-3.1.1.1.1.2">3.1.1.1.1.2. </a><a class="section-name selfRef" href="#name-single_segment_flag">Single_Segment_Flag</a>
                </h6>
<p id="section-3.1.1.1.1.2-1">
 If this flag is
 set, data must
 be regenerated
 within a single
 continuous
 memory segment.<a class="pilcrow" href="#section-3.1.1.1.1.2-1">¶</a></p>
<p id="section-3.1.1.1.1.2-2">
 In this case,
 Window_Descriptor
 byte is skipped, but
 Frame_Content_Size
 is necessarily
 present.  As a
 consequence,
 the decoder
 must allocate a
 memory segment
 of a size equal to
 or larger than
 Frame_Content_Size.<a class="pilcrow" href="#section-3.1.1.1.1.2-2">¶</a></p>
<p id="section-3.1.1.1.1.2-3">
 In order to protect the
 decoder from
 unreasonable memory
 requirements,
 a decoder is
 allowed to reject a
 compressed frame that
 requests a memory size
 beyond the decoder's
 authorized range.<a class="pilcrow" href="#section-3.1.1.1.1.2-3">¶</a></p>
<p id="section-3.1.1.1.1.2-4">
 For broader
 compatibility,
 decoders are
 recommended to
 support memory
 sizes of at least 8 MB.
 This is only a
 recommendation;
 each decoder is
 free to support
 higher or lower
 limits, depending on
 local limitations.<a class="pilcrow" href="#section-3.1.1.1.1.2-4">¶</a></p>
</section>
<section id="section-3.1.1.1.1.3">
                <h6 id="name-unused-bit">
<a class="section-number selfRef" href="#section-3.1.1.1.1.3">3.1.1.1.1.3. </a><a class="section-name selfRef" href="#name-unused-bit">Unused Bit</a>
                </h6>
<p id="section-3.1.1.1.1.3-1">
 A decoder compliant
 with this specification
 version shall not
 interpret this bit.
 It might
 be used in a future
 version to signal a
 property that is not
 mandatory to properly
 decode the frame.
 An encoder compliant
 with this specification
 must set this bit to
 zero.<a class="pilcrow" href="#section-3.1.1.1.1.3-1">¶</a></p>
</section>
<section id="section-3.1.1.1.1.4">
                <h6 id="name-reserved-bit">
<a class="section-number selfRef" href="#section-3.1.1.1.1.4">3.1.1.1.1.4. </a><a class="section-name selfRef" href="#name-reserved-bit">Reserved Bit</a>
                </h6>
<p id="section-3.1.1.1.1.4-1">
 This bit is reserved
 for some future
 feature. Its value must
 be zero. A decoder
 compliant with this
 specification version
 must ensure it is not
 set. This bit may be
 used in a future
 revision to signal a
 feature that must be
 interpreted to decode
 the frame correctly.<a class="pilcrow" href="#section-3.1.1.1.1.4-1">¶</a></p>
</section>
<section id="section-3.1.1.1.1.5">
                <h6 id="name-content_checksum_flag">
<a class="section-number selfRef" href="#section-3.1.1.1.1.5">3.1.1.1.1.5. </a><a class="section-name selfRef" href="#name-content_checksum_flag">Content_Checksum_Flag</a>
                </h6>
<p id="section-3.1.1.1.1.5-1">
 If this flag is set, a
 32-bit
 Content_Checksum will
 be present at the
 frame's end.
 See the description of
 Content_Checksum above.<a class="pilcrow" href="#section-3.1.1.1.1.5-1">¶</a></p>
</section>
<section id="section-3.1.1.1.1.6">
                <h6 id="name-dictionary_id_flag">
<a class="section-number selfRef" href="#section-3.1.1.1.1.6">3.1.1.1.1.6. </a><a class="section-name selfRef" href="#name-dictionary_id_flag">Dictionary_ID_Flag</a>
                </h6>
<p id="section-3.1.1.1.1.6-1">
   This is a 2-bit flag
   (= Frame_Header_Descriptor &amp; 0x3) indicating
   whether a dictionary ID
   is provided within the
   header.  It also
   specifies the size of
   this field as
   DID_Field_Size:<a class="pilcrow" href="#section-3.1.1.1.1.6-1">¶</a></p>
<span id="name-dictionary_id_flag-2"></span><div id="Dictionary-ID-Flag">
<table class="center" id="table-5">
                  <caption>
<a class="selfRef" href="#table-5">Table 5</a>:
<a class="selfRef" href="#name-dictionary_id_flag-2">Dictionary_ID_Flag</a>
                  </caption>
<tbody>
                    <tr>
                      <td class="text-left" colspan="1" rowspan="1">Dictionary_ID_Flag</td>
                      <td class="text-left" colspan="1" rowspan="1">0</td>
                      <td class="text-left" colspan="1" rowspan="1">1</td>
                      <td class="text-left" colspan="1" rowspan="1">2</td>
                      <td class="text-left" colspan="1" rowspan="1">3</td>
                    </tr>
                    <tr>
                      <td class="text-left" colspan="1" rowspan="1">DID_Field_Size</td>
                      <td class="text-left" colspan="1" rowspan="1">0</td>
                      <td class="text-left" colspan="1" rowspan="1">1</td>
                      <td class="text-left" colspan="1" rowspan="1">2</td>
                      <td class="text-left" colspan="1" rowspan="1">4</td>
                    </tr>
                  </tbody>
                </table>
</div>
</section>
</section>
</div>
<div id="comp_window_descr">
<section id="section-3.1.1.1.2">
              <h6 id="name-window-descriptor">
<a class="section-number selfRef" href="#section-3.1.1.1.2">3.1.1.1.2. </a><a class="section-name selfRef" href="#name-window-descriptor">Window Descriptor</a>
              </h6>
<p id="section-3.1.1.1.2-1">
 This provides guarantees about
 the minimum
 memory buffer required to
 decompress a frame.  This
 information is important for
 decoders to allocate enough
 memory.<a class="pilcrow" href="#section-3.1.1.1.2-1">¶</a></p>
<p id="section-3.1.1.1.2-2">
 The Window_Descriptor byte is
 optional. When
 Single_Segment_Flag is set,
 Window_Descriptor is not
 present. In this case,
 Window_Size is
 Frame_Content_Size, which can
 be any value from 0 to
 2<sup>64</sup> - 1 bytes (16 ExaBytes).<a class="pilcrow" href="#section-3.1.1.1.2-2">¶</a></p>
<span id="name-window_descriptor"></span><div id="window-descriptor">
<table class="center" id="table-6">
                <caption>
<a class="selfRef" href="#table-6">Table 6</a>:
<a class="selfRef" href="#name-window_descriptor">Window_Descriptor</a>
                </caption>
<tbody>
                  <tr>
                    <td class="text-left" colspan="1" rowspan="1">Bit Number</td>
                    <td class="text-center" colspan="1" rowspan="1">7-3</td>
                    <td class="text-center" colspan="1" rowspan="1">2-0</td>
                  </tr>
                  <tr>
                    <td class="text-left" colspan="1" rowspan="1">Field Name</td>
                    <td class="text-left" colspan="1" rowspan="1">Exponent</td>
                    <td class="text-left" colspan="1" rowspan="1">Mantissa</td>
                  </tr>
                </tbody>
              </table>
</div>
<p id="section-3.1.1.1.2-4">
 The minimum memory buffer size
 is called Window_Size. It is
 described by the following
 formulas:<a class="pilcrow" href="#section-3.1.1.1.2-4">¶</a></p>
<div class="artwork art-text alignLeft" id="section-3.1.1.1.2-5">
<pre>  windowLog = 10 + Exponent;
  windowBase = 1 &lt;&lt; windowLog;
  windowAdd = (windowBase / 8) * Mantissa;
  Window_Size = windowBase + windowAdd;
</pre><a class="pilcrow" href="#section-3.1.1.1.2-5">¶</a>
</div>
<p id="section-3.1.1.1.2-6">
 The minimum Window_Size is
 1 KB. The maximum Window_Size
 is (1&lt;&lt;41) +
 7*(1&lt;&lt;38) bytes,
 which is 3.75 TB.<a class="pilcrow" href="#section-3.1.1.1.2-6">¶</a></p>
<p id="section-3.1.1.1.2-7"> In general, larger
 Window_Size values tend to
 improve the compression ratio, but
 at the cost of increased memory
 usage.<a class="pilcrow" href="#section-3.1.1.1.2-7">¶</a></p>
<p id="section-3.1.1.1.2-8">
 To properly decode compressed
 data, a decoder will need to
 allocate a buffer of at least
 Window_Size bytes.<a class="pilcrow" href="#section-3.1.1.1.2-8">¶</a></p>
<p id="section-3.1.1.1.2-9">
 In order to protect
 decoders from unreasonable
 memory requirements, a decoder
 is allowed to reject a
 compressed frame that
 requests a memory size beyond the
 decoder's authorized range.<a class="pilcrow" href="#section-3.1.1.1.2-9">¶</a></p>
<p id="section-3.1.1.1.2-10">
 For improved interoperability,
 it's recommended for decoders
 to support values of
 Window_Size up to 8 MB and
 for encoders not to generate
 frames requiring a Window_Size
 larger than 8 MB.
 
 It's merely a recommendation
 though, and decoders are free
 to support higher or lower
 limits, depending on local
 limitations.<a class="pilcrow" href="#section-3.1.1.1.2-10">¶</a></p>
</section>
</div>
<div id="comp_dictionary_id">
<section id="section-3.1.1.1.3">
              <h6 id="name-dictionary_id">
<a class="section-number selfRef" href="#section-3.1.1.1.3">3.1.1.1.3. </a><a class="section-name selfRef" href="#name-dictionary_id">Dictionary_ID</a>
              </h6>
<p id="section-3.1.1.1.3-1">
 This is a field of variable size,
 which contains the ID of the
 dictionary required to properly
 decode the frame. This field
 is optional. When it's not
 present, it's up to the decoder
 to know which dictionary
 to use.<a class="pilcrow" href="#section-3.1.1.1.3-1">¶</a></p>
<p id="section-3.1.1.1.3-2">
 Dictionary_ID field size is 
 provided by DID_Field_Size.
 DID_Field_Size is directly
 derived from the value
 of Dictionary_ID_Flag. One byte
 can represent an ID 0-255; 2
 bytes can represent an ID
 0-65535; 4 bytes can
 represent an ID 0-4294967295.
 Format is little-endian.<a class="pilcrow" href="#section-3.1.1.1.3-2">¶</a></p>
<p id="section-3.1.1.1.3-3">
 It is permitted to represent a
 small ID (for example, 13) with
 a large 4-byte dictionary
 ID, even if it is less
 efficient.<a class="pilcrow" href="#section-3.1.1.1.3-3">¶</a></p>
<p id="section-3.1.1.1.3-4">
 Within private environments,
 any dictionary ID
 can be used.  However, for
 frames and dictionaries
 distributed in public space,
 Dictionary_ID must be
 attributed carefully.
 The following
 ranges are reserved for use
 only with dictionaries that
 have been registered with
 IANA (see <a class="xref" href="#iana_dict">Section 7.4</a>):<a class="pilcrow" href="#section-3.1.1.1.3-4">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-3.1.1.1.3-5">
                <dt id="section-3.1.1.1.3-5.1">low range:</dt>
                <dd id="section-3.1.1.1.3-5.2" style="margin-left: 1.5em">
 &lt;= 32767<a class="pilcrow" href="#section-3.1.1.1.3-5.2">¶</a>
</dd>
                <dd class="break"></dd>
<dt id="section-3.1.1.1.3-5.3">high range:</dt>
                <dd id="section-3.1.1.1.3-5.4" style="margin-left: 1.5em">
 &gt;= (1 &lt;&lt; 31)<a class="pilcrow" href="#section-3.1.1.1.3-5.4">¶</a>
</dd>
              <dd class="break"></dd>
</dl>
<p id="section-3.1.1.1.3-6"> Any other value for
     Dictionary_ID can be used
     by private arrangement
     between participants.<a class="pilcrow" href="#section-3.1.1.1.3-6">¶</a></p>
<p id="section-3.1.1.1.3-7"> Any payload presented for
     decompression that
     references an unregistered
     reserved dictionary ID
     results in an error.<a class="pilcrow" href="#section-3.1.1.1.3-7">¶</a></p>
</section>
</div>
<div id="comp_frame_content_size">
<section id="section-3.1.1.1.4">
              <h6 id="name-frame_content_size">
<a class="section-number selfRef" href="#section-3.1.1.1.4">3.1.1.1.4. </a><a class="section-name selfRef" href="#name-frame_content_size">Frame_Content_Size</a>
              </h6>
<p id="section-3.1.1.1.4-1">
 This is the original
 (uncompressed) size. This
 information is optional.
 Frame_Content_Size uses a
 variable number of bytes,
 provided by FCS_Field_Size.
 FCS_Field_Size is provided by
 the value of
 Frame_Content_Size_Flag.
 FCS_Field_Size can be equal to
 0 (not present), 1, 2, 4, or
 8 bytes.<a class="pilcrow" href="#section-3.1.1.1.4-1">¶</a></p>
<span id="name-frame_content_size-2"></span><div id="Frame-Content-Size">
<table class="center" id="table-7">
                <caption>
<a class="selfRef" href="#table-7">Table 7</a>:
<a class="selfRef" href="#name-frame_content_size-2">Frame_Content_Size</a>
                </caption>
<thead>
                  <tr>
                    <th class="text-center" colspan="1" rowspan="1">FCS Field Size</th>
                    <th class="text-left" colspan="1" rowspan="1">Range</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="text-center" colspan="1" rowspan="1">0</td>
                    <td class="text-left" colspan="1" rowspan="1">unknown</td>
                  </tr>
                  <tr>
                    <td class="text-center" colspan="1" rowspan="1">1</td>
                    <td class="text-left" colspan="1" rowspan="1">0 - 255</td>
                  </tr>
                  <tr>
                    <td class="text-center" colspan="1" rowspan="1">2</td>
                    <td class="text-left" colspan="1" rowspan="1">256 - 65791</td>
                  </tr>
                  <tr>
                    <td class="text-center" colspan="1" rowspan="1">4</td>
                    <td class="text-left" colspan="1" rowspan="1">0 - 2<sup>32</sup> - 1</td>
                  </tr>
                  <tr>
                    <td class="text-center" colspan="1" rowspan="1">8</td>
                    <td class="text-left" colspan="1" rowspan="1">0 - 2<sup>64</sup> - 1</td>
                  </tr>
                </tbody>
              </table>
</div>
<p id="section-3.1.1.1.4-3">
 Frame_Content_Size format is
 little-endian. When
 FCS_Field_Size is 1, 4, or 8
 bytes, the value is read
 directly. When FCS_Field_Size
 is 2, the offset of 256 is
 added. It's allowed to
 represent a small size (for
 example, 18) using any
 compatible variant.<a class="pilcrow" href="#section-3.1.1.1.4-3">¶</a></p>
</section>
</div>
</section>
</div>
<div id="blocks">
<section id="section-3.1.1.2">
            <h5 id="name-blocks">
<a class="section-number selfRef" href="#section-3.1.1.2">3.1.1.2. </a><a class="section-name selfRef" href="#name-blocks">Blocks</a>
            </h5>
<p id="section-3.1.1.2-1"> After Magic_Number and
     Frame_Header, there are some number of
     blocks. Each frame must have at least
     1 block, but there is no upper
     limit on the number of blocks per
     frame.<a class="pilcrow" href="#section-3.1.1.2-1">¶</a></p>
<p id="section-3.1.1.2-2"> The structure of a block is as
     follows:<a class="pilcrow" href="#section-3.1.1.2-2">¶</a></p>
<span id="name-the-structure-of-a-block"></span><div id="block">
<table class="center" id="table-8">
              <caption>
<a class="selfRef" href="#table-8">Table 8</a>:
<a class="selfRef" href="#name-the-structure-of-a-block">The Structure of a Block</a>
              </caption>
<thead>
                <tr>
                  <th class="text-center" colspan="1" rowspan="1">Block_Header</th>
                  <th class="text-center" colspan="1" rowspan="1">Block_Content</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="text-center" colspan="1" rowspan="1">3 bytes</td>
                  <td class="text-center" colspan="1" rowspan="1">n bytes</td>
                </tr>
              </tbody>
            </table>
</div>
<p id="section-3.1.1.2-4"> Block_Header uses 3 bytes,
     written using little-endian
     convention. It contains three fields:<a class="pilcrow" href="#section-3.1.1.2-4">¶</a></p>
<span id="name-block_header"></span><div id="block-header">
<table class="center" id="table-9">
              <caption>
<a class="selfRef" href="#table-9">Table 9</a>:
<a class="selfRef" href="#name-block_header">Block_Header</a>
              </caption>
<thead>
                <tr>
                  <th class="text-center" colspan="1" rowspan="1">Last_Block</th>
                  <th class="text-center" colspan="1" rowspan="1">Block_Type</th>
                  <th class="text-center" colspan="1" rowspan="1">Block_Size</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="text-center" colspan="1" rowspan="1">bit 0</td>
                  <td class="text-center" colspan="1" rowspan="1">bits 1-2</td>
                  <td class="text-center" colspan="1" rowspan="1">bits 3-23</td>
                </tr>
              </tbody>
            </table>
</div>
<section id="section-3.1.1.2.1">
              <h6 id="name-last_block">
<a class="section-number selfRef" href="#section-3.1.1.2.1">3.1.1.2.1. </a><a class="section-name selfRef" href="#name-last_block">Last_Block</a>
              </h6>
<p id="section-3.1.1.2.1-1"> The lowest bit (Last_Block)
       signals whether
       this block is the last one.
       The frame will end after this
       last block. It may be followed
       by an optional Content_Checksum
       (see
       <a class="xref" href="#comp_zstd_frames">Section 3.1.1</a>).<a class="pilcrow" href="#section-3.1.1.2.1-1">¶</a></p>
</section>
<section id="section-3.1.1.2.2">
              <h6 id="name-block_type">
<a class="section-number selfRef" href="#section-3.1.1.2.2">3.1.1.2.2. </a><a class="section-name selfRef" href="#name-block_type">Block_Type</a>
              </h6>
<p id="section-3.1.1.2.2-1"> The next 2 bits represent
       the Block_Type.  There are four
       block types:<a class="pilcrow" href="#section-3.1.1.2.2-1">¶</a></p>
<span id="name-the-four-block-types"></span><div id="block-types">
<table class="center" id="table-10">
                <caption>
<a class="selfRef" href="#table-10">Table 10</a>:
<a class="selfRef" href="#name-the-four-block-types">The Four Block Types</a>
                </caption>
<thead>
                  <tr>
                    <th class="text-center" colspan="1" rowspan="1">Value</th>
                    <th class="text-left" colspan="1" rowspan="1">Block_Type</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="text-center" colspan="1" rowspan="1">0</td>
                    <td class="text-center" colspan="1" rowspan="1">Raw_Block</td>
                  </tr>
                  <tr>
                    <td class="text-center" colspan="1" rowspan="1">1</td>
                    <td class="text-center" colspan="1" rowspan="1">RLE_Block</td>
                  </tr>
                  <tr>
                    <td class="text-center" colspan="1" rowspan="1">2</td>
                    <td class="text-center" colspan="1" rowspan="1">Compressed_Block</td>
                  </tr>
                  <tr>
                    <td class="text-center" colspan="1" rowspan="1">3</td>
                    <td class="text-center" colspan="1" rowspan="1">Reserved</td>
                  </tr>
                </tbody>
              </table>
</div>
<span class="break"></span><dl class="dlParallel" id="section-3.1.1.2.2-3">
                <dt id="section-3.1.1.2.2-3.1">Raw_Block:</dt>
                <dd id="section-3.1.1.2.2-3.2" style="margin-left: 1.5em">
   This is an
   uncompressed block.
   Block_Content contains
 Block_Size bytes.<a class="pilcrow" href="#section-3.1.1.2.2-3.2">¶</a>
</dd>
                <dd class="break"></dd>
<dt id="section-3.1.1.2.2-3.3">RLE_Block:</dt>
                <dd id="section-3.1.1.2.2-3.4" style="margin-left: 1.5em">
   This is a single byte,
   repeated Block_Size
   times. Block_Content
   consists of a single
   byte. On the
   decompression side,
   this byte must be
   repeated Block_Size
 times.<a class="pilcrow" href="#section-3.1.1.2.2-3.4">¶</a>
</dd>
                <dd class="break"></dd>
<dt id="section-3.1.1.2.2-3.5">Compressed_Block:</dt>
                <dd id="section-3.1.1.2.2-3.6" style="margin-left: 1.5em">
   This is a compressed
   block as described in
   <a class="xref" href="#comp_blocks">Section 3.1.1.3</a>.
   Block_Size is the
   length of
   Block_Content, namely
   the compressed data.
   The decompressed size
   is not known, but its
   maximum possible value
   is guaranteed (see
 below).<a class="pilcrow" href="#section-3.1.1.2.2-3.6">¶</a>
</dd>
                <dd class="break"></dd>
<dt id="section-3.1.1.2.2-3.7">Reserved:</dt>
                <dd id="section-3.1.1.2.2-3.8" style="margin-left: 1.5em">
   This is not a block.
   This value cannot be
   used with the current
   specification. If such
   a value is present,
    it is considered to be
   corrupt data, and a
   compliant decoder must
 reject it.<a class="pilcrow" href="#section-3.1.1.2.2-3.8">¶</a>
</dd>
              <dd class="break"></dd>
</dl>
</section>
<section id="section-3.1.1.2.3">
              <h6 id="name-block_size">
<a class="section-number selfRef" href="#section-3.1.1.2.3">3.1.1.2.3. </a><a class="section-name selfRef" href="#name-block_size">Block_Size</a>
              </h6>
<p id="section-3.1.1.2.3-1"> The upper 21 bits of
       Block_Header represent the
       Block_Size.<a class="pilcrow" href="#section-3.1.1.2.3-1">¶</a></p>
<p id="section-3.1.1.2.3-2"> When Block_Type is
       Compressed_Block or Raw_Block,
       Block_Size is the size of
       Block_Content (hence excluding
       Block_Header).<a class="pilcrow" href="#section-3.1.1.2.3-2">¶</a></p>
<p id="section-3.1.1.2.3-3"> When Block_Type is
       RLE_Block, since Block_Content's
       size is always 1, Block_Size
       represents the number of times
       this byte must be repeated.<a class="pilcrow" href="#section-3.1.1.2.3-3">¶</a></p>
<p id="section-3.1.1.2.3-4"> Block_Size is limited by
       Block_Maximum_Size (see below).<a class="pilcrow" href="#section-3.1.1.2.3-4">¶</a></p>
</section>
<section id="section-3.1.1.2.4">
              <h6 id="name-block_content-and-block_max">
<a class="section-number selfRef" href="#section-3.1.1.2.4">3.1.1.2.4. </a><a class="section-name selfRef" href="#name-block_content-and-block_max">Block_Content and Block_Maximum_Size</a>
              </h6>
<p id="section-3.1.1.2.4-1"> The size of Block_Content
       is limited by
       Block_Maximum_Size, which is
       the smallest of:<a class="pilcrow" href="#section-3.1.1.2.4-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.1.1.2.4-2.1"> Window_Size<a class="pilcrow" href="#section-3.1.1.2.4-2.1">¶</a>
</li>
                <li class="normal" id="section-3.1.1.2.4-2.2"> 128 KB<a class="pilcrow" href="#section-3.1.1.2.4-2.2">¶</a>
</li>
              </ul>
<p id="section-3.1.1.2.4-3"> Block_Maximum_Size is
 constant for a given frame.
 This maximum is applicable to
 both the decompressed size
 and the compressed size of any
 block in the frame.<a class="pilcrow" href="#section-3.1.1.2.4-3">¶</a></p>
<p id="section-3.1.1.2.4-4"> The reasoning for this
 limit is that a decoder can
 read this information at the
 beginning of a frame and use
 it to allocate buffers.
 The guarantees on the size of
 blocks ensure that the buffers
 will be large enough for any
 following block of the valid
       frame.<a class="pilcrow" href="#section-3.1.1.2.4-4">¶</a></p>
<p id="section-3.1.1.2.4-5"> If the compressed block
 is larger than the uncompressed one,
 sending the uncompressed
 block (i.e., a Raw_Block) is
                                         recommended instead.<a class="pilcrow" href="#section-3.1.1.2.4-5">¶</a></p>
</section>
</section>
</div>
<div id="comp_blocks">
<section id="section-3.1.1.3">
            <h5 id="name-compressed-blocks">
<a class="section-number selfRef" href="#section-3.1.1.3">3.1.1.3. </a><a class="section-name selfRef" href="#name-compressed-blocks">Compressed Blocks</a>
            </h5>
<p id="section-3.1.1.3-1"> To decompress a compressed block,
 the compressed size must be provided
 from the Block_Size field within
 Block_Header.<a class="pilcrow" href="#section-3.1.1.3-1">¶</a></p>
<p id="section-3.1.1.3-2"> A compressed block consists of two
 sections: a Literals_Section
 (<a class="xref" href="#comp_literals">Section 3.1.1.3.1</a>) and
 a Sequences_Section
 (<a class="xref" href="#comp_sequences">Section 3.1.1.3.2</a>).
 The results of the two sections are
 then combined to produce the
 decompressed data in Sequence
 Execution
 (<a class="xref" href="#comp_sequence_exec">Section 3.1.1.4</a>).<a class="pilcrow" href="#section-3.1.1.3-2">¶</a></p>
<p id="section-3.1.1.3-3"> To decode a compressed block, the
 following elements are necessary:<a class="pilcrow" href="#section-3.1.1.3-3">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.1.1.3-4.1"> Previous decoded data, up
 to a distance of Window_Size,
 or the beginning of the Frame,
 whichever is smaller.
 Single_Segment_Flag
 will be set in the latter
 case.<a class="pilcrow" href="#section-3.1.1.3-4.1">¶</a>
</li>
              <li class="normal" id="section-3.1.1.3-4.2"> List of "recent offsets"
 from the previous
 Compressed_Block.<a class="pilcrow" href="#section-3.1.1.3-4.2">¶</a>
</li>
              <li class="normal" id="section-3.1.1.3-4.3"> The previous Huffman tree,
 required by
 Treeless_Literals_Block type.<a class="pilcrow" href="#section-3.1.1.3-4.3">¶</a>
</li>
              <li class="normal" id="section-3.1.1.3-4.4"> Previous Finite State Entropy (FSE) decoding
 tables, required by
 Repeat_Mode, for each symbol
 type (literals length codes,
 match length codes, offset codes).<a class="pilcrow" href="#section-3.1.1.3-4.4">¶</a>
</li>
            </ul>
<p id="section-3.1.1.3-5"> Note that decoding tables are not
 always from the previous
 Compressed_Block:<a class="pilcrow" href="#section-3.1.1.3-5">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.1.1.3-6.1"> Every decoding table can
     come from a dictionary.<a class="pilcrow" href="#section-3.1.1.3-6.1">¶</a>
</li>
              <li class="normal" id="section-3.1.1.3-6.2"> The Huffman tree comes from
     the previous
     Compressed_Literals_Block.<a class="pilcrow" href="#section-3.1.1.3-6.2">¶</a>
</li>
            </ul>
<div id="comp_literals">
<section id="section-3.1.1.3.1">
              <h6 id="name-literals_section_header">
<a class="section-number selfRef" href="#section-3.1.1.3.1">3.1.1.3.1. </a><a class="section-name selfRef" href="#name-literals_section_header">Literals_Section_Header</a>
              </h6>
<p id="section-3.1.1.3.1-1"> All literals are regrouped
 in the first part of the
 block. They can be decoded
 first and then copied during
 Sequence Execution (see
 <a class="xref" href="#comp_sequence_exec">Section 3.1.1.4</a>),
 or they can be decoded on the
 flow during Sequence
 Execution.<a class="pilcrow" href="#section-3.1.1.3.1-1">¶</a></p>
<p id="section-3.1.1.3.1-2"> Literals can be stored
 uncompressed or compressed
 using Huffman prefix codes.
 When compressed, an optional
 tree description can be
 present, followed by 1 or
 4 streams.<a class="pilcrow" href="#section-3.1.1.3.1-2">¶</a></p>
<span id="name-compressed-literals"></span><div id="compressed-literals">
<table class="center" id="table-11">
                <caption>
<a class="selfRef" href="#table-11">Table 11</a>:
<a class="selfRef" href="#name-compressed-literals">Compressed Literals</a>
                </caption>
<tbody>
                  <tr>
                    <td class="text-center" colspan="1" rowspan="1">Literals_Section_Header</td>
                  </tr>
                  <tr>
                    <td class="text-center" colspan="1" rowspan="1">[Huffman_Tree_Description]</td>
                  </tr>
                  <tr>
                    <td class="text-center" colspan="1" rowspan="1">[Jump_Table]</td>
                  </tr>
                  <tr>
                    <td class="text-center" colspan="1" rowspan="1">Stream_1</td>
                  </tr>
                  <tr>
                    <td class="text-center" colspan="1" rowspan="1">[Stream_2]</td>
                  </tr>
                  <tr>
                    <td class="text-center" colspan="1" rowspan="1">[Stream_3]</td>
                  </tr>
                  <tr>
                    <td class="text-center" colspan="1" rowspan="1">[Stream_4]</td>
                  </tr>
                </tbody>
              </table>
</div>
<section id="section-3.1.1.3.1.1">
                <h6 id="name-literals_section_header-2">
<a class="section-number selfRef" href="#section-3.1.1.3.1.1">3.1.1.3.1.1. </a><a class="section-name selfRef" href="#name-literals_section_header-2">Literals_Section_Header</a>
                </h6>
<p id="section-3.1.1.3.1.1-1">
   This field describes
   how literals are
   packed. It's a
   byte-aligned
   variable-size bit field,
   ranging from 1 to
   5 bytes, using
   little-endian
   convention.<a class="pilcrow" href="#section-3.1.1.3.1.1-1">¶</a></p>
<span id="name-literals_section_header-3"></span><div id="Literals_Section_Header">
<table class="center" id="table-12">
                  <caption>
<a class="selfRef" href="#table-12">Table 12</a>:
<a class="selfRef" href="#name-literals_section_header-3">Literals_Section_Header</a>
                  </caption>
<tbody>
                    <tr>
                      <td class="text-center" colspan="1" rowspan="1">Literals_Block_Type</td>
                      <td class="text-center" colspan="1" rowspan="1">2 bits</td>
                    </tr>
                    <tr>
                      <td class="text-center" colspan="1" rowspan="1">Size_Format</td>
                      <td class="text-center" colspan="1" rowspan="1">1-2 bits</td>
                    </tr>
                    <tr>
                      <td class="text-center" colspan="1" rowspan="1">Regenerated_Size</td>
                      <td class="text-center" colspan="1" rowspan="1">5-20 bits</td>
                    </tr>
                    <tr>
                      <td class="text-center" colspan="1" rowspan="1">[Compressed_Size] </td>
                      <td class="text-center" colspan="1" rowspan="1">0-18 bits</td>
                    </tr>
                  </tbody>
                </table>
</div>
<p id="section-3.1.1.3.1.1-3"> In this
 representation, bits at
 the top are the lowest
 bits.<a class="pilcrow" href="#section-3.1.1.3.1.1-3">¶</a></p>
<p id="section-3.1.1.3.1.1-4"> The
 Literals_Block_Type
 field uses the two
 lowest bits of the
 first byte, describing
 four different block
 types:<a class="pilcrow" href="#section-3.1.1.3.1.1-4">¶</a></p>
<span id="name-literals_block_type"></span><div id="Literals_Block_Type">
<table class="center" id="table-13">
                  <caption>
<a class="selfRef" href="#table-13">Table 13</a>:
<a class="selfRef" href="#name-literals_block_type">Literals_Block_Type</a>
                  </caption>
<thead>
                    <tr>
                      <th class="text-center" colspan="1" rowspan="1">Literals_Block_Type</th>
                      <th class="text-center" colspan="1" rowspan="1">Value</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="text-center" colspan="1" rowspan="1">Raw_Literals_Block</td>
                      <td class="text-center" colspan="1" rowspan="1">0</td>
                    </tr>
                    <tr>
                      <td class="text-center" colspan="1" rowspan="1">RLE_Literals_Block</td>
                      <td class="text-center" colspan="1" rowspan="1">1</td>
                    </tr>
                    <tr>
                      <td class="text-center" colspan="1" rowspan="1">Compressed_Literals_Block</td>
                      <td class="text-center" colspan="1" rowspan="1">2</td>
                    </tr>
                    <tr>
                      <td class="text-center" colspan="1" rowspan="1">Treeless_Literals_Block</td>
                      <td class="text-center" colspan="1" rowspan="1">3</td>
                    </tr>
                  </tbody>
                </table>
</div>
<span class="break"></span><dl class="dlParallel" id="section-3.1.1.3.1.1-6">
                  <dt id="section-3.1.1.3.1.1-6.1">Raw_Literals_Block:</dt>
                  <dd id="section-3.1.1.3.1.1-6.2" style="margin-left: 1.5em">
     Literals are
     stored
     uncompressed.
     Literals_Section_Content
     is
     Regenerated_Size.<a class="pilcrow" href="#section-3.1.1.3.1.1-6.2">¶</a>
</dd>
                  <dd class="break"></dd>
<dt id="section-3.1.1.3.1.1-6.3">RLE_Literals_Block:</dt>
                  <dd id="section-3.1.1.3.1.1-6.4" style="margin-left: 1.5em">
     Literals consist of a single-byte value repeated
     Regenerated_Size times. Literals_Section_Content is
   1.<a class="pilcrow" href="#section-3.1.1.3.1.1-6.4">¶</a>
</dd>
                  <dd class="break"></dd>
<dt id="section-3.1.1.3.1.1-6.5">Compressed_Literals_Block:</dt>
                  <dd id="section-3.1.1.3.1.1-6.6" style="margin-left: 1.5em">
     This is a standard Huffman-compressed
     block, starting with a Huffman tree description.
     See details below.  Literals_Section_Content
     is Compressed_Size.<a class="pilcrow" href="#section-3.1.1.3.1.1-6.6">¶</a>
</dd>
                  <dd class="break"></dd>
<dt id="section-3.1.1.3.1.1-6.7">Treeless_Literals_Block:</dt>
                  <dd id="section-3.1.1.3.1.1-6.8" style="margin-left: 1.5em">
     This is a
     Huffman-compressed
     block, using the
     Huffman tree
     from the previous
     Compressed_Literals_Block
     or a dictionary
     if there is no previous
     Huffman-compressed
     literals block.
     Huffman_Tree_Description
     will be
skipped. Note that if this mode is triggered without any previous Huffman table
in the frame (or dictionary, per <a class="xref" href="#comp_dict">Section 5</a>),
it should be treated as data corruption. Literals_Section_Content is
Compressed_Size.<a class="pilcrow" href="#section-3.1.1.3.1.1-6.8">¶</a>
</dd>
                <dd class="break"></dd>
</dl>
<p id="section-3.1.1.3.1.1-7"> The Size_Format is divided into two families:<a class="pilcrow" href="#section-3.1.1.3.1.1-7">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.1.1.3.1.1-8.1">
     For Raw_Literals_Block and RLE_Literals_Block,
     it's only necessary to decode Regenerated_Size.
     There is no Compressed_Size field.<a class="pilcrow" href="#section-3.1.1.3.1.1-8.1">¶</a>
</li>
                  <li class="normal" id="section-3.1.1.3.1.1-8.2">
     For Compressed_Block and Treeless_Literals_Block,
     it's required to decode both Compressed_Size
     and Regenerated_Size (the decompressed
     size). It's also necessary to decode the
     number of streams (1 or 4).<a class="pilcrow" href="#section-3.1.1.3.1.1-8.2">¶</a>
</li>
                </ul>
<p id="section-3.1.1.3.1.1-9"> For values
 spanning several bytes,
 the convention is
 little endian.<a class="pilcrow" href="#section-3.1.1.3.1.1-9">¶</a></p>
<p id="section-3.1.1.3.1.1-10"> Size_Format for
 Raw_Literals_Block
 and RLE_Literals_Block
 uses 1 or 2 bits.  Its
 value is (Literals_Section_Header[0]&gt;&gt;2) &amp; 0x3.<a class="pilcrow" href="#section-3.1.1.3.1.1-10">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-3.1.1.3.1.1-11">
                  <dt id="section-3.1.1.3.1.1-11.1">Size_Format == 00 or 10:</dt>
                  <dd id="section-3.1.1.3.1.1-11.2" style="margin-left: 1.5em">
     Size_Format
     uses 1 bit.
     Regenerated_Size
     uses 5 bits
     (value 0-31).
     Literals_Section_Header
     uses 1 byte.
     Regenerated_Size
     = Literal_Section_Header[0]&gt;&gt;3.<a class="pilcrow" href="#section-3.1.1.3.1.1-11.2">¶</a>
</dd>
                  <dd class="break"></dd>
<dt id="section-3.1.1.3.1.1-11.3">Size_Format == 01:</dt>
                  <dd id="section-3.1.1.3.1.1-11.4" style="margin-left: 1.5em">
     Size_Format
     uses 2 bits.
     Regenerated_Size
     uses 12 bits
     (values 0-4095).
     Literals_Section_Header
     uses 2 bytes.
     Regenerated_Size
     =
     (Literals_Section_Header[0]&gt;&gt;4)
     +
     (Literals_Section_Header[1]&lt;&lt;4).<a class="pilcrow" href="#section-3.1.1.3.1.1-11.4">¶</a>
</dd>
                  <dd class="break"></dd>
<dt id="section-3.1.1.3.1.1-11.5">Size_Format == 11:</dt>
                  <dd id="section-3.1.1.3.1.1-11.6" style="margin-left: 1.5em">
     Size_Format
     uses 2 bits.
     Regenerated_Size
     uses 20 bits
     (values
     0-1048575).
     Literals_Section_Header
     uses 3
     bytes.
     Regenerated_Size
     =
     (Literals_Section_Header[0]&gt;&gt;4)
     +
     (Literals_Section_Header[1]&lt;&lt;4)
     +
     (Literals_Section_Header[2]&lt;&lt;12).<a class="pilcrow" href="#section-3.1.1.3.1.1-11.6">¶</a>
</dd>
                <dd class="break"></dd>
</dl>
<p id="section-3.1.1.3.1.1-12"> Only Stream_1 is
 present for these
 cases. Note that it is
 permitted to represent
 a short value (for
 example, 13) using a
 long format, even if
 it's less efficient.<a class="pilcrow" href="#section-3.1.1.3.1.1-12">¶</a></p>
<p id="section-3.1.1.3.1.1-13"> Size_Format for
 Compressed_Literals_Block
 and
 Treeless_Literals_Block
 always uses 2 bits.<a class="pilcrow" href="#section-3.1.1.3.1.1-13">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-3.1.1.3.1.1-14">
                  <dt id="section-3.1.1.3.1.1-14.1">Size_Format == 00:</dt>
                  <dd id="section-3.1.1.3.1.1-14.2" style="margin-left: 1.5em">
 A single
 stream. Both
 Regenerated_Size
 and Compressed_Size
 use 10 bits
 (values
 0-1023).
 Literals_Section_Header
 uses 3
 bytes.<a class="pilcrow" href="#section-3.1.1.3.1.1-14.2">¶</a>
</dd>
                  <dd class="break"></dd>
<dt id="section-3.1.1.3.1.1-14.3">Size_Format == 01:</dt>
                  <dd id="section-3.1.1.3.1.1-14.4" style="margin-left: 1.5em">
 4 streams.
 Both
 Regenerated_Size
 and
 Compressed_Size
 use 10 bits
 (values
 0-1023).
 Literals_Section_Header
 uses 3
 bytes.<a class="pilcrow" href="#section-3.1.1.3.1.1-14.4">¶</a>
</dd>
                  <dd class="break"></dd>
<dt id="section-3.1.1.3.1.1-14.5">Size_Format == 10:</dt>
                  <dd id="section-3.1.1.3.1.1-14.6" style="margin-left: 1.5em">
 4 streams.
 Both
 Regenerated_Size
 and
 Compressed_Size
 use 14 bits
 (values
 0-16383).
 Literals_Section_Header
 uses 4
 bytes.<a class="pilcrow" href="#section-3.1.1.3.1.1-14.6">¶</a>
</dd>
                  <dd class="break"></dd>
<dt id="section-3.1.1.3.1.1-14.7">Size_Format == 11:</dt>
                  <dd id="section-3.1.1.3.1.1-14.8" style="margin-left: 1.5em">
 4 streams.
 Both
 Regenerated_Size
 and
 Compressed_Size
 use 18 bits
 (values
 0-262143).
 Literals_Section_Header
 uses 5
 bytes.<a class="pilcrow" href="#section-3.1.1.3.1.1-14.8">¶</a>
</dd>
                <dd class="break"></dd>
</dl>
<p id="section-3.1.1.3.1.1-15"> Both the
 Compressed_Size and
 Regenerated_Size fields
 follow little-endian
 convention. Note that
 Compressed_Size
 includes the size of
 the Huffman_Tree_Description
 when it is
 present.<a class="pilcrow" href="#section-3.1.1.3.1.1-15">¶</a></p>
</section>
<section id="section-3.1.1.3.1.2">
                <h6 id="name-raw_literals_block">
<a class="section-number selfRef" href="#section-3.1.1.3.1.2">3.1.1.3.1.2. </a><a class="section-name selfRef" href="#name-raw_literals_block">Raw_Literals_Block</a>
                </h6>
<p id="section-3.1.1.3.1.2-1">
 The data in Stream_1 is
 Regenerated_Size bytes
 long.  It contains
 the raw literals data
 to be used during
 Sequence Execution
 (<a class="xref" href="#comp_sequences">Section 3.1.1.3.2</a>).<a class="pilcrow" href="#section-3.1.1.3.1.2-1">¶</a></p>
</section>
<section id="section-3.1.1.3.1.3">
                <h6 id="name-rle_literals_block">
<a class="section-number selfRef" href="#section-3.1.1.3.1.3">3.1.1.3.1.3. </a><a class="section-name selfRef" href="#name-rle_literals_block">RLE_Literals_Block</a>
                </h6>
<p id="section-3.1.1.3.1.3-1">
 Stream_1 consists of a
 single byte that
 should be repeated
 Regenerated_Size times
 to generate the
 decoded literals.<a class="pilcrow" href="#section-3.1.1.3.1.3-1">¶</a></p>
</section>
<section id="section-3.1.1.3.1.4">
                <h6 id="name-compressed_literals_block-a">
<a class="section-number selfRef" href="#section-3.1.1.3.1.4">3.1.1.3.1.4. </a><a class="section-name selfRef" href="#name-compressed_literals_block-a">Compressed_Literals_Block and Treeless_Literals_Block</a>
                </h6>
<p id="section-3.1.1.3.1.4-1">

 Both of these modes
 contain Huffman-coded
 data.
 For Treeless_Literals_Block,
 the Huffman table comes from
 the previously
 compressed literals
 block, or from a
 dictionary;
 see <a class="xref" href="#comp_dict">Section 5</a>.<a class="pilcrow" href="#section-3.1.1.3.1.4-1">¶</a></p>
</section>
<section id="section-3.1.1.3.1.5">
                <h6 id="name-huffman_tree_description">
<a class="section-number selfRef" href="#section-3.1.1.3.1.5">3.1.1.3.1.5. </a><a class="section-name selfRef" href="#name-huffman_tree_description">Huffman_Tree_Description</a>
                </h6>
<p id="section-3.1.1.3.1.5-1">
 This section is
 only present
 when the
 Literals_Block_Type type
 is
 Compressed_Literals_Block
 (2). The format
 of Huffman_Tree_Description
 can be found in
 <a class="xref" href="#huffman_tree_desc">Section 4.2.1</a>.
 The size of
 Huffman_Tree_Description
 is determined
 during the
 decoding process.  It
 must be used
 to determine
 where streams
 begin.<a class="pilcrow" href="#section-3.1.1.3.1.5-1">¶</a></p>
<div class="artwork art-text alignLeft" id="section-3.1.1.3.1.5-2">
<pre>  Total_Streams_Size = Compressed_Size
                       - Huffman_Tree_Description_Size
</pre><a class="pilcrow" href="#section-3.1.1.3.1.5-2">¶</a>
</div>
</section>
<section id="section-3.1.1.3.1.6">
                <h6 id="name-jump_table">
<a class="section-number selfRef" href="#section-3.1.1.3.1.6">3.1.1.3.1.6. </a><a class="section-name selfRef" href="#name-jump_table">Jump_Table</a>
                </h6>
<p id="section-3.1.1.3.1.6-1"> The Jump_Table
     is only present
     when there are
     4 Huffman-coded
     streams.<a class="pilcrow" href="#section-3.1.1.3.1.6-1">¶</a></p>
<p id="section-3.1.1.3.1.6-2"> (Reminder:
 Huffman-compressed
 data
 consists of
 either 1 or
 4
 Huffman-coded
 streams.)<a class="pilcrow" href="#section-3.1.1.3.1.6-2">¶</a></p>
<p id="section-3.1.1.3.1.6-3"> If only 1
 stream is
 present, it is
 a single
 bitstream
 occupying the
 entire
 remaining
 portion of the
 literals
 block, encoded
 as described
 within
 <a class="xref" href="#huffman_coded_streams">Section 4.2.2</a>.<a class="pilcrow" href="#section-3.1.1.3.1.6-3">¶</a></p>
<p id="section-3.1.1.3.1.6-4"> If there are
 4 streams,
 Literals_Section_Header
 only provides
 enough
 information to
 know the
 decompressed
 and compressed
 sizes of all
 4 streams
 combined. The
 decompressed
 size of each
 stream is equal
 to
 (Regenerated_Size+3)/4,
 except for the
 last stream,
 which may be
 up to 3
 bytes smaller,
 to reach a
 total
 decompressed
 size as
 specified in
 Regenerated_Size.<a class="pilcrow" href="#section-3.1.1.3.1.6-4">¶</a></p>
<p id="section-3.1.1.3.1.6-5">
 The compressed
 size of each
 stream is
 provided
 explicitly in
 the Jump_Table.
 The Jump_Table
 is 6 bytes long and
 consists of three
 2-byte
 little-endian
 fields,
 describing the
 compressed
 sizes of the
 first 3
 streams.
 Stream4_Size
 is computed
 from
 Total_Streams_Size
 minus the sizes of
 other streams.<a class="pilcrow" href="#section-3.1.1.3.1.6-5">¶</a></p>
<div class="artwork art-text alignLeft" id="section-3.1.1.3.1.6-6">
<pre>  Stream4_Size = Total_Streams_Size - 6
                 - Stream1_Size - Stream2_Size
                 - Stream3_Size
</pre><a class="pilcrow" href="#section-3.1.1.3.1.6-6">¶</a>
</div>
<p id="section-3.1.1.3.1.6-7">
 Note that if
 Stream1_Size +
 Stream2_Size +
 Stream3_Size 
 exceeds
 Total_Streams_Size,
 the data are
 considered
 corrupted.<a class="pilcrow" href="#section-3.1.1.3.1.6-7">¶</a></p>
<p id="section-3.1.1.3.1.6-8">
 Each of these
 4 bitstreams
 is then decoded
 independently
 as a
 Huffman-coded
 stream, as
 described in
 <a class="xref" href="#huffman_coded_streams">Section 4.2.2</a>.<a class="pilcrow" href="#section-3.1.1.3.1.6-8">¶</a></p>
</section>
</section>
</div>
<div id="comp_sequences">
<section id="section-3.1.1.3.2">
              <h6 id="name-sequences_section">
<a class="section-number selfRef" href="#section-3.1.1.3.2">3.1.1.3.2. </a><a class="section-name selfRef" href="#name-sequences_section">Sequences_Section</a>
              </h6>
<p id="section-3.1.1.3.2-1"> A compressed block is a
     succession of sequences.  
     A sequence is a literal
     copy command, followed by
     a match copy command.  A
     literal copy command
     specifies a length.  It is
     the number of bytes to be
     copied (or extracted) from
     the Literals_Section.
     A match copy command
     specifies an offset and a
     length.<a class="pilcrow" href="#section-3.1.1.3.2-1">¶</a></p>
<p id="section-3.1.1.3.2-2"> When all sequences are
     decoded, if there are
     literals left in the
     Literals_Section, these
     bytes are added at the
     end of the block.<a class="pilcrow" href="#section-3.1.1.3.2-2">¶</a></p>
<p id="section-3.1.1.3.2-3"> This is described in more
     detail in
     <a class="xref" href="#comp_sequence_exec">Section 3.1.1.4</a>.<a class="pilcrow" href="#section-3.1.1.3.2-3">¶</a></p>
<p id="section-3.1.1.3.2-4"> The Sequences_Section
      regroups all symbols
     required to decode
     commands.  There are three
     symbol types: literals
     length codes, offset codes, and match
     length codes.  They are encoded
     together, interleaved, in
     a single "bitstream".<a class="pilcrow" href="#section-3.1.1.3.2-4">¶</a></p>
<p id="section-3.1.1.3.2-5"> The Sequences_Section
     starts by a header,
     followed by optional
     probability tables for
     each symbol type, followed
     by the bitstream.<a class="pilcrow" href="#section-3.1.1.3.2-5">¶</a></p>
<div class="artwork art-text alignLeft" id="section-3.1.1.3.2-6">
<pre>  Sequences_Section_Header
    [Literals_Length_Table]
    [Offset_Table]
    [Match_Length_Table]
    bitStream
</pre><a class="pilcrow" href="#section-3.1.1.3.2-6">¶</a>
</div>
<p id="section-3.1.1.3.2-7"> To decode the
     Sequences_Section, it's
     necessary to know its
     size. This size is deduced
     from the size of the Literals_Section:
     Sequences_Section_Size = Block_Size - Literals_Section_Header - Literals_Section_Content.<a class="pilcrow" href="#section-3.1.1.3.2-7">¶</a></p>
<div id="seq_sec_hdr">
<section id="section-3.1.1.3.2.1">
                <h6 id="name-sequences_section_header">
<a class="section-number selfRef" href="#section-3.1.1.3.2.1">3.1.1.3.2.1. </a><a class="section-name selfRef" href="#name-sequences_section_header">Sequences_Section_Header</a>
                </h6>
<p id="section-3.1.1.3.2.1-1"> This header
     consists of two
     items:<a class="pilcrow" href="#section-3.1.1.3.2.1-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.1.1.3.2.1-2.1"> Number_of_Sequences<a class="pilcrow" href="#section-3.1.1.3.2.1-2.1">¶</a>
</li>
                  <li class="normal" id="section-3.1.1.3.2.1-2.2"> Symbol_Compression_Modes<a class="pilcrow" href="#section-3.1.1.3.2.1-2.2">¶</a>
</li>
                </ul>
<p id="section-3.1.1.3.2.1-3"> Number_of_Sequences
 is a variable size
 field using between
 1 and 3
 bytes.  If the
 first byte is
 "byte0":<a class="pilcrow" href="#section-3.1.1.3.2.1-3">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.1.1.3.2.1-4.1"> if
     (byte0 ==
     0): there
     are no
     sequences.
     The
     sequence
     section
     stops here.
     Decompressed
     content is
     defined
     entirely as
     Literals_Section
     content. 
     The FSE
     tables used
     in Repeat_Mode
     are not
     updated.<a class="pilcrow" href="#section-3.1.1.3.2.1-4.1">¶</a>
</li>
                  <li class="normal" id="section-3.1.1.3.2.1-4.2"> if (byte0
     &lt; 128):
     Number_of_Sequences
     = byte0.
     Uses 1
     byte.<a class="pilcrow" href="#section-3.1.1.3.2.1-4.2">¶</a>
</li>
                  <li class="normal" id="section-3.1.1.3.2.1-4.3"> if (byte0
     &lt; 255):
     Number_of_Sequences
     =
     ((byte0 - 128)
     &lt;&lt; 8) +
     byte1. Uses
     2 bytes.<a class="pilcrow" href="#section-3.1.1.3.2.1-4.3">¶</a>
</li>
                  <li class="normal" id="section-3.1.1.3.2.1-4.4"> if (byte0
     == 255):
     Number_of_Sequences
     = byte1 +
     (byte2 &lt;&lt; 8)
     + 0x7F00.
     Uses 3
     bytes.<a class="pilcrow" href="#section-3.1.1.3.2.1-4.4">¶</a>
</li>
                </ul>
<p id="section-3.1.1.3.2.1-5"> Symbol_Compression_Modes
 is a single byte,
 defining the
 compression mode of
 each symbol type.<a class="pilcrow" href="#section-3.1.1.3.2.1-5">¶</a></p>
<span id="name-symbol_compression_modes"></span><div id="Symbol_Compression_Modes">
<table class="center" id="table-14">
                  <caption>
<a class="selfRef" href="#table-14">Table 14</a>:
<a class="selfRef" href="#name-symbol_compression_modes">Symbol_Compression_Modes</a>
                  </caption>
<thead>
                    <tr>
                      <th class="text-center" colspan="1" rowspan="1">Bit Number</th>
                      <th class="text-center" colspan="1" rowspan="1">Field Name</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="text-center" colspan="1" rowspan="1">7-6</td>
                      <td class="text-center" colspan="1" rowspan="1">Literal_Lengths_Mode</td>
                    </tr>
                    <tr>
                      <td class="text-center" colspan="1" rowspan="1">5-4</td>
                      <td class="text-center" colspan="1" rowspan="1">Offsets_Mode</td>
                    </tr>
                    <tr>
                      <td class="text-center" colspan="1" rowspan="1">3-2</td>
                      <td class="text-center" colspan="1" rowspan="1">Match_Lengths_Mode</td>
                    </tr>
                    <tr>
                      <td class="text-center" colspan="1" rowspan="1">1-0</td>
                      <td class="text-center" colspan="1" rowspan="1">Reserved</td>
                    </tr>
                  </tbody>
                </table>
</div>
<p id="section-3.1.1.3.2.1-7"> The last field,
Reserved, must be
all zeroes.<a class="pilcrow" href="#section-3.1.1.3.2.1-7">¶</a></p>
<p id="section-3.1.1.3.2.1-8"> Literals_Lengths_Mode,
Offsets_Mode, and
Match_Lengths_Mode
define the
Compression_Mode of
literals length codes,
offset codes, and match
length codes,
respectively. They
follow the same
enumeration:<a class="pilcrow" href="#section-3.1.1.3.2.1-8">¶</a></p>
<span id="name-literals_lengths_mode-offse"></span><div id="literals">
<table class="center" id="table-15">
                  <caption>
<a class="selfRef" href="#table-15">Table 15</a>:
<a class="selfRef" href="#name-literals_lengths_mode-offse">Literals_Lengths_Mode, Offsets_Mode, and Match_Lengths_Mode</a>
                  </caption>
<thead>
                    <tr>
                      <th class="text-center" colspan="1" rowspan="1">Value</th>
                      <th class="text-center" colspan="1" rowspan="1">Compression_Mode</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="text-center" colspan="1" rowspan="1">0</td>
                      <td class="text-center" colspan="1" rowspan="1">Predefined_Mode</td>
                    </tr>
                    <tr>
                      <td class="text-center" colspan="1" rowspan="1">1</td>
                      <td class="text-center" colspan="1" rowspan="1">RLE_Mode</td>
                    </tr>
                    <tr>
                      <td class="text-center" colspan="1" rowspan="1">2</td>
                      <td class="text-center" colspan="1" rowspan="1">FSE_Compressed_Mode</td>
                    </tr>
                    <tr>
                      <td class="text-center" colspan="1" rowspan="1">3</td>
                      <td class="text-center" colspan="1" rowspan="1">Repeat_Mode</td>
                    </tr>
                  </tbody>
                </table>
</div>
<span class="break"></span><dl class="dlParallel" id="section-3.1.1.3.2.1-10">
                  <dt id="section-3.1.1.3.2.1-10.1">Predefined_Mode:</dt>
                  <dd id="section-3.1.1.3.2.1-10.2" style="margin-left: 1.5em">
 A predefined
 FSE
 (see <a class="xref" href="#comp_fse">Section 4.1</a>)
 distribution
 table is used, as
 defined in
 <a class="xref" href="#default_dist">Section 3.1.1.3.2.2</a>.
 No distribution
 table will be
 present.<a class="pilcrow" href="#section-3.1.1.3.2.1-10.2">¶</a>
</dd>
                  <dd class="break"></dd>
<dt id="section-3.1.1.3.2.1-10.3">RLE_Mode:</dt>
                  <dd id="section-3.1.1.3.2.1-10.4" style="margin-left: 1.5em">
 The table
 description
 consists of a
 single byte,
 which contains
 the symbol's
 value.  This
 symbol will
 be used for
 all sequences.<a class="pilcrow" href="#section-3.1.1.3.2.1-10.4">¶</a>
</dd>
                  <dd class="break"></dd>
<dt id="section-3.1.1.3.2.1-10.5">FSE_Compressed_Mode:</dt>
                  <dd id="section-3.1.1.3.2.1-10.6" style="margin-left: 1.5em">
 Standard FSE
 compression. A
 distribution
 table will be
 present. The
 format of this
 distribution
 table is
 described in
 <a class="xref" href="#comp_fse_table">Section 4.1.1</a>.
 Note that the
 maximum allowed
 accuracy log
 for literals
 length code and
 match length code
 tables is 9,
 and the
 maximum
 accuracy log
 for the
 offset code table
 is 8. 
 This mode must
 not be used when
 only one symbol
 is present;
 RLE_Mode should
 be used instead
 (although any
 other mode
 will work).<a class="pilcrow" href="#section-3.1.1.3.2.1-10.6">¶</a>
</dd>
                  <dd class="break"></dd>
<dt id="section-3.1.1.3.2.1-10.7">Repeat_Mode:</dt>
                  <dd id="section-3.1.1.3.2.1-10.8" style="margin-left: 1.5em">
 The table used
 in the previous
 Compressed_Block
 with
 Number_Of_Sequences &gt; 0
 will be
 used again, or
 if this is the
 first block,
 the table in
 the dictionary
 will be used.
 Note that this
 includes
 RLE_Mode,
 so if
 Repeat_Mode
 follows
 RLE_Mode, the
 same symbol
 will be
 repeated. It
 also
 includes
 Predefined_Mode,
 in which case
 Repeat_Mode
 will have the
 same outcome
 as
 Predefined_Mode.
 No distribution
 table will be
 present.
 If this mode is
 used without
 any previous
 sequence table
 in the frame
 (or dictionary;
 see
 <a class="xref" href="#comp_dict">Section 5</a>)
 to repeat, this
 should be
 treated as
 corruption.<a class="pilcrow" href="#section-3.1.1.3.2.1-10.8">¶</a>
</dd>
                <dd class="break"></dd>
</dl>
<div id="codes_lengths_offsets">
<section id="section-3.1.1.3.2.1.1">
                  <h6 id="name-sequence-codes-for-lengths-">
<a class="section-number selfRef" href="#section-3.1.1.3.2.1.1">3.1.1.3.2.1.1. </a><a class="section-name selfRef" href="#name-sequence-codes-for-lengths-">Sequence Codes for Lengths and Offsets</a>
                  </h6>
<p id="section-3.1.1.3.2.1.1-1"> Each symbol is a
     code in its own
     context, which
     specifies Baseline
     and Number_of_Bits
     to add. Codes are
     FSE compressed
     and interleaved
     with raw additional
     bits in the same
     bitstream.<a class="pilcrow" href="#section-3.1.1.3.2.1.1-1">¶</a></p>
<p id="section-3.1.1.3.2.1.1-2"> Literals length
     codes are values
     ranging from 0 to
     35, inclusive. They
     define lengths from
     0 to 131071 bytes.
     The literals length
     is equal to the
     decoded Baseline
     plus the result of
     reading
     Number_of_Bits bits
     from the bitstream,
     as a little-endian
     value.<a class="pilcrow" href="#section-3.1.1.3.2.1.1-2">¶</a></p>
<span id="name-literals-length-codes"></span><div id="length">
<table class="center" id="table-16">
                    <caption>
<a class="selfRef" href="#table-16">Table 16</a>:
<a class="selfRef" href="#name-literals-length-codes">Literals Length Codes</a>
                    </caption>
<thead>
                      <tr>
                        <th class="text-center" colspan="1" rowspan="1">Literals_Length_Code</th>
                        <th class="text-center" colspan="1" rowspan="1">Baseline</th>
                        <th class="text-center" colspan="1" rowspan="1">Number_of_Bits</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">0-15</td>
                        <td class="text-center" colspan="1" rowspan="1">length</td>
                        <td class="text-center" colspan="1" rowspan="1">0</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">16</td>
                        <td class="text-center" colspan="1" rowspan="1">16</td>
                        <td class="text-center" colspan="1" rowspan="1">1</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">17</td>
                        <td class="text-center" colspan="1" rowspan="1">18</td>
                        <td class="text-center" colspan="1" rowspan="1">1</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">18</td>
                        <td class="text-center" colspan="1" rowspan="1">20</td>
                        <td class="text-center" colspan="1" rowspan="1">1</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">19</td>
                        <td class="text-center" colspan="1" rowspan="1">22</td>
                        <td class="text-center" colspan="1" rowspan="1">1</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">20</td>
                        <td class="text-center" colspan="1" rowspan="1">24</td>
                        <td class="text-center" colspan="1" rowspan="1">2</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">21</td>
                        <td class="text-center" colspan="1" rowspan="1">28</td>
                        <td class="text-center" colspan="1" rowspan="1">2</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">22</td>
                        <td class="text-center" colspan="1" rowspan="1">32</td>
                        <td class="text-center" colspan="1" rowspan="1">3</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">23</td>
                        <td class="text-center" colspan="1" rowspan="1">40</td>
                        <td class="text-center" colspan="1" rowspan="1">3</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">24</td>
                        <td class="text-center" colspan="1" rowspan="1">48</td>
                        <td class="text-center" colspan="1" rowspan="1">4</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">25</td>
                        <td class="text-center" colspan="1" rowspan="1">64</td>
                        <td class="text-center" colspan="1" rowspan="1">6</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">26</td>
                        <td class="text-center" colspan="1" rowspan="1">128</td>
                        <td class="text-center" colspan="1" rowspan="1">7</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">27</td>
                        <td class="text-center" colspan="1" rowspan="1">256</td>
                        <td class="text-center" colspan="1" rowspan="1">8</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">28</td>
                        <td class="text-center" colspan="1" rowspan="1">512</td>
                        <td class="text-center" colspan="1" rowspan="1">9</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">29</td>
                        <td class="text-center" colspan="1" rowspan="1">1024</td>
                        <td class="text-center" colspan="1" rowspan="1">10</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">30</td>
                        <td class="text-center" colspan="1" rowspan="1">2048</td>
                        <td class="text-center" colspan="1" rowspan="1">11</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">31</td>
                        <td class="text-center" colspan="1" rowspan="1">4096</td>
                        <td class="text-center" colspan="1" rowspan="1">12</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">32</td>
                        <td class="text-center" colspan="1" rowspan="1">8192</td>
                        <td class="text-center" colspan="1" rowspan="1">13</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">33</td>
                        <td class="text-center" colspan="1" rowspan="1">16384</td>
                        <td class="text-center" colspan="1" rowspan="1">14</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">34</td>
                        <td class="text-center" colspan="1" rowspan="1">32768</td>
                        <td class="text-center" colspan="1" rowspan="1">15</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">35</td>
                        <td class="text-center" colspan="1" rowspan="1">65536</td>
                        <td class="text-center" colspan="1" rowspan="1">16</td>
                      </tr>
                    </tbody>
                  </table>
</div>
<p id="section-3.1.1.3.2.1.1-4"> Match length codes
     are values ranging
     from 0 to 52,
     inclusive. They
     define lengths from
     3 to 131074 bytes.
     The match length is
     equal to the
     decoded Baseline
     plus the result of
     reading
     Number_of_Bits bits
     from the bitstream,
     as a little-endian
     value.<a class="pilcrow" href="#section-3.1.1.3.2.1.1-4">¶</a></p>
<span id="name-match-length-codes"></span><div id="Match_Length_Code">
<table class="center" id="table-17">
                    <caption>
<a class="selfRef" href="#table-17">Table 17</a>:
<a class="selfRef" href="#name-match-length-codes">Match Length Codes</a>
                    </caption>
<thead>
                      <tr>
                        <th class="text-center" colspan="1" rowspan="1">Match_Length_Code</th>
                        <th class="text-center" colspan="1" rowspan="1">Baseline</th>
                        <th class="text-center" colspan="1" rowspan="1">Number_of_Bits</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">0-31</td>
                        <td class="text-center" colspan="1" rowspan="1">Match_Length_Code + 3</td>
                        <td class="text-center" colspan="1" rowspan="1">0</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">32</td>
                        <td class="text-center" colspan="1" rowspan="1">35</td>
                        <td class="text-center" colspan="1" rowspan="1">1</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">33</td>
                        <td class="text-center" colspan="1" rowspan="1">37</td>
                        <td class="text-center" colspan="1" rowspan="1">1</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">34</td>
                        <td class="text-center" colspan="1" rowspan="1">39</td>
                        <td class="text-center" colspan="1" rowspan="1">1</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">35</td>
                        <td class="text-center" colspan="1" rowspan="1">41</td>
                        <td class="text-center" colspan="1" rowspan="1">1</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">36</td>
                        <td class="text-center" colspan="1" rowspan="1">43</td>
                        <td class="text-center" colspan="1" rowspan="1">2</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">37</td>
                        <td class="text-center" colspan="1" rowspan="1">47</td>
                        <td class="text-center" colspan="1" rowspan="1">2</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">38</td>
                        <td class="text-center" colspan="1" rowspan="1">51</td>
                        <td class="text-center" colspan="1" rowspan="1">3</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">39</td>
                        <td class="text-center" colspan="1" rowspan="1">59</td>
                        <td class="text-center" colspan="1" rowspan="1">3</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">40</td>
                        <td class="text-center" colspan="1" rowspan="1">67</td>
                        <td class="text-center" colspan="1" rowspan="1">4</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">41</td>
                        <td class="text-center" colspan="1" rowspan="1">83</td>
                        <td class="text-center" colspan="1" rowspan="1">4</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">42</td>
                        <td class="text-center" colspan="1" rowspan="1">99</td>
                        <td class="text-center" colspan="1" rowspan="1">5</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">43</td>
                        <td class="text-center" colspan="1" rowspan="1">131</td>
                        <td class="text-center" colspan="1" rowspan="1">7</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">44</td>
                        <td class="text-center" colspan="1" rowspan="1">259</td>
                        <td class="text-center" colspan="1" rowspan="1">8</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">45</td>
                        <td class="text-center" colspan="1" rowspan="1">515</td>
                        <td class="text-center" colspan="1" rowspan="1">9</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">46</td>
                        <td class="text-center" colspan="1" rowspan="1">1027</td>
                        <td class="text-center" colspan="1" rowspan="1">10</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">47</td>
                        <td class="text-center" colspan="1" rowspan="1">2051</td>
                        <td class="text-center" colspan="1" rowspan="1">11</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">48</td>
                        <td class="text-center" colspan="1" rowspan="1">4099</td>
                        <td class="text-center" colspan="1" rowspan="1">12</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">49</td>
                        <td class="text-center" colspan="1" rowspan="1">8195</td>
                        <td class="text-center" colspan="1" rowspan="1">13</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">50</td>
                        <td class="text-center" colspan="1" rowspan="1">16387</td>
                        <td class="text-center" colspan="1" rowspan="1">14</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">51</td>
                        <td class="text-center" colspan="1" rowspan="1">32771</td>
                        <td class="text-center" colspan="1" rowspan="1">15</td>
                      </tr>
                      <tr>
                        <td class="text-center" colspan="1" rowspan="1">52</td>
                        <td class="text-center" colspan="1" rowspan="1">65539</td>
                        <td class="text-center" colspan="1" rowspan="1">16</td>
                      </tr>
                    </tbody>
                  </table>
</div>
<p id="section-3.1.1.3.2.1.1-6"> Offset codes are
     values ranging from
     0 to N.<a class="pilcrow" href="#section-3.1.1.3.2.1.1-6">¶</a></p>
<p id="section-3.1.1.3.2.1.1-7"> A decoder is free
     to limit its
     maximum supported
     value for N.
     Support for values
     of at least 22 is
     recommended.
     At the time of this
     writing, the
     reference decoder
     supports a maximum
     N value of 31.<a class="pilcrow" href="#section-3.1.1.3.2.1.1-7">¶</a></p>
<p id="section-3.1.1.3.2.1.1-8"> An offset code is
     also the number of
     additional bits to
     read in
     little-endian
     fashion and can
     be translated into
     an Offset_Value
     using the following
     formulas:<a class="pilcrow" href="#section-3.1.1.3.2.1.1-8">¶</a></p>
<div class="artwork art-text alignLeft" id="section-3.1.1.3.2.1.1-9">
<pre>  Offset_Value = (1 &lt;&lt; offsetCode) + readNBits(offsetCode);
  if (Offset_Value &gt; 3) Offset = Offset_Value - 3;
</pre><a class="pilcrow" href="#section-3.1.1.3.2.1.1-9">¶</a>
</div>
<p id="section-3.1.1.3.2.1.1-10"> This means that
   maximum
   Offset_Value is
   (2<sup>N+1</sup>) - 1,
   supporting
   back-reference
   distance up to
   (2<sup>N+1</sup>) - 4, but it is
   limited by the
   maximum
   back-reference
   distance (see
   <a class="xref" href="#comp_window_descr">Section 3.1.1.1.2</a>).<a class="pilcrow" href="#section-3.1.1.3.2.1.1-10">¶</a></p>
<p id="section-3.1.1.3.2.1.1-11"> Offset_Value from
     1 to 3 are special:
     they define "repeat
     codes". This is
     described in more
     detail in 
     <a class="xref" href="#repeat_offsets">Section 3.1.1.5</a>.<a class="pilcrow" href="#section-3.1.1.3.2.1.1-11">¶</a></p>
</section>
</div>
<section id="section-3.1.1.3.2.1.2">
                  <h6 id="name-decoding-sequences">
<a class="section-number selfRef" href="#section-3.1.1.3.2.1.2">3.1.1.3.2.1.2. </a><a class="section-name selfRef" href="#name-decoding-sequences">Decoding Sequences</a>
                  </h6>
<p id="section-3.1.1.3.2.1.2-1"> FSE bitstreams are
     read in reverse of
     the direction they
     are written. In zstd,
     the compressor
     writes bits forward
     into a block, and
     the decompressor
     must read the
     bitstream
     backwards.<a class="pilcrow" href="#section-3.1.1.3.2.1.2-1">¶</a></p>
<p id="section-3.1.1.3.2.1.2-2"> To find the start
     of the bitstream, it
     is therefore
     necessary to know
     the offset of the
     last byte of the
     block, which can be
     found by counting
     Block_Size bytes
     after the block
     header.<a class="pilcrow" href="#section-3.1.1.3.2.1.2-2">¶</a></p>
<p id="section-3.1.1.3.2.1.2-3"> After writing the
     last bit containing
     information, the
     compressor writes a
     single 1 bit and
                  then fills the rest
                  of the byte with 
                  zero bits. The
     last byte of the
     compressed
     bitstream cannot be
     zero for that
     reason.<a class="pilcrow" href="#section-3.1.1.3.2.1.2-3">¶</a></p>
<p id="section-3.1.1.3.2.1.2-4"> When decompressing,
     the last byte
     containing the
     padding is the
     first byte to read.
     The decompressor
                  needs to skip the
                  up to 7 bits of
                  0-padding as well
                  as the first 1
                  bit that occurs.
     Afterwards, the
     useful part of the
     bitstream
     begins.<a class="pilcrow" href="#section-3.1.1.3.2.1.2-4">¶</a></p>
<p id="section-3.1.1.3.2.1.2-5"> FSE decoding
   requires a 'state'
   to be carried from
   symbol to symbol.
   For more
   explanation on FSE
   decoding, see 
   <a class="xref" href="#comp_fse">Section 4.1</a>.<a class="pilcrow" href="#section-3.1.1.3.2.1.2-5">¶</a></p>
<p id="section-3.1.1.3.2.1.2-6"> For sequence
     decoding, a
     separate state
     keeps track of
     each literals
     length, offset,
     and match length
     code. Some FSE
     primitives are
     also used. For
     more details on
     the operation of
     these primitives,
     see
     <a class="xref" href="#comp_fse">Section 4.1</a>.<a class="pilcrow" href="#section-3.1.1.3.2.1.2-6">¶</a></p>
<p id="section-3.1.1.3.2.1.2-7"> The bitstream
     starts with initial
     FSE state values,
     each using the
     required number of
     bits in their
     respective
     accuracy, decoded
     previously from
     their normalized
     distribution. It
     starts with
     Literals_Length_State,
     followed by
     Offset_State, and
     finally
     Match_Length_State.<a class="pilcrow" href="#section-3.1.1.3.2.1.2-7">¶</a></p>
<p id="section-3.1.1.3.2.1.2-8"> Note that all
     values are read
     backward, so the
     'start' of the
     bitstream is at the
     highest position in
     memory, immediately
     before the last
     1 bit for
     padding.<a class="pilcrow" href="#section-3.1.1.3.2.1.2-8">¶</a></p>
<p id="section-3.1.1.3.2.1.2-9"> After decoding the
     starting states, a
     single sequence is
     decoded
     Number_Of_Sequences
     times. These
     sequences are
     decoded in order
     from first to last.
     Since the
     compressor writes
     the bitstream in
     the forward
     direction, this
     means the
     compressor must
     encode the
     sequences starting
     with the last one
     and ending with the
     first.<a class="pilcrow" href="#section-3.1.1.3.2.1.2-9">¶</a></p>
<p id="section-3.1.1.3.2.1.2-10"> For each of the
     symbol types, the
     FSE state can be
     used to determine
     the appropriate
     code. The code then
     defines the
     Baseline and Number_of_Bits
     to read for
     each type.  The
     description of the
     codes for how to
     determine these
     values can be
     found in
     <a class="xref" href="#seq_sec_hdr">Section 3.1.1.3.2.1</a>.<a class="pilcrow" href="#section-3.1.1.3.2.1.2-10">¶</a></p>
<p id="section-3.1.1.3.2.1.2-11"> Decoding starts by
     reading the
     Number_of_Bits
     required to decode
     offset. It
     does the same for
     Match_Length and
     then for
     Literals_Length.
     This sequence is
     then used for
     Sequence Execution
     (see
     <a class="xref" href="#comp_sequence_exec">Section 3.1.1.4</a>).<a class="pilcrow" href="#section-3.1.1.3.2.1.2-11">¶</a></p>
<p id="section-3.1.1.3.2.1.2-12"> If it is not the
     last sequence in
     the block, the next
     operation is to
     update states.

     Using the rules
     precalculated in
     the decoding
     tables,
     Literals_Length_State
     is updated,
     followed by
     Match_Length_State,
     and then
     Offset_State.
     See
     <a class="xref" href="#comp_fse">Section 4.1</a>
     for details on how
     to update states
     from the
     bitstream.<a class="pilcrow" href="#section-3.1.1.3.2.1.2-12">¶</a></p>
<p id="section-3.1.1.3.2.1.2-13"> This operation will
     be repeated
     Number_of_Sequences
     times. At the end,
     the bitstream shall
     be entirely
     consumed; otherwise,
     the bitstream is
     considered
     corrupted.<a class="pilcrow" href="#section-3.1.1.3.2.1.2-13">¶</a></p>
</section>
</section>
</div>
<div id="default_dist">
<section id="section-3.1.1.3.2.2">
                <h6 id="name-default-distributions">
<a class="section-number selfRef" href="#section-3.1.1.3.2.2">3.1.1.3.2.2. </a><a class="section-name selfRef" href="#name-default-distributions">Default Distributions</a>
                </h6>
<p id="section-3.1.1.3.2.2-1"> If Predefined_Mode
     is selected for a
     symbol type, its
     FSE decoding table
     is generated from a
     predefined
     distribution table
     defined here. For
     details on how to
     convert this
     distribution into
     a decoding table,
     see <a class="xref" href="#comp_fse">Section 4.1</a>.<a class="pilcrow" href="#section-3.1.1.3.2.2-1">¶</a></p>
<section id="section-3.1.1.3.2.2.1">
                  <h6 id="name-literals-length-codes-2">
<a class="section-number selfRef" href="#section-3.1.1.3.2.2.1">3.1.1.3.2.2.1. </a><a class="section-name selfRef" href="#name-literals-length-codes-2">Literals Length Codes</a>
                  </h6>
<p id="section-3.1.1.3.2.2.1-1"> The decoding
 table uses an
 accuracy log of
 6 bits (64
 states).<a class="pilcrow" href="#section-3.1.1.3.2.2.1-1">¶</a></p>
<div class="artwork art-text alignLeft" id="section-3.1.1.3.2.2.1-2">
<pre>  short literalsLength_defaultDistribution[36] =
    { 4, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1,
      2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 2, 1, 1, 1, 1, 1,
      -1,-1,-1,-1
    };
</pre><a class="pilcrow" href="#section-3.1.1.3.2.2.1-2">¶</a>
</div>
</section>
<section id="section-3.1.1.3.2.2.2">
                  <h6 id="name-match-length-codes-2">
<a class="section-number selfRef" href="#section-3.1.1.3.2.2.2">3.1.1.3.2.2.2. </a><a class="section-name selfRef" href="#name-match-length-codes-2">Match Length Codes</a>
                  </h6>
<p id="section-3.1.1.3.2.2.2-1"> The decoding
 table uses an
 accuracy log of
 6 bits (64
 states).<a class="pilcrow" href="#section-3.1.1.3.2.2.2-1">¶</a></p>
<div class="artwork art-text alignLeft" id="section-3.1.1.3.2.2.2-2">
<pre>  short matchLengths_defaultDistribution[53] =
    { 1, 4, 3, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1,
      1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
      1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,-1,-1,
      -1,-1,-1,-1,-1
    };
</pre><a class="pilcrow" href="#section-3.1.1.3.2.2.2-2">¶</a>
</div>
</section>
<section id="section-3.1.1.3.2.2.3">
                  <h6 id="name-offset-codes">
<a class="section-number selfRef" href="#section-3.1.1.3.2.2.3">3.1.1.3.2.2.3. </a><a class="section-name selfRef" href="#name-offset-codes">Offset Codes</a>
                  </h6>
<p id="section-3.1.1.3.2.2.3-1"> The decoding
 table uses an
 accuracy log of
 5 bits (32
 states) and
 supports a
 maximum N value
 of 28, allowing
 offset values
 up to
 536,870,908.<a class="pilcrow" href="#section-3.1.1.3.2.2.3-1">¶</a></p>
<p id="section-3.1.1.3.2.2.3-2"> If any sequence
 in the
 compressed
 block requires
 a larger offset
 than this, it's
 not possible to
 use the default
 distribution to
 represent it.<a class="pilcrow" href="#section-3.1.1.3.2.2.3-2">¶</a></p>
<div class="artwork art-text alignLeft" id="section-3.1.1.3.2.2.3-3">
<pre>  short offsetCodes_defaultDistribution[29] =
    { 1, 1, 1, 1, 1, 1, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1,
      1, 1, 1, 1, 1, 1, 1, 1,-1,-1,-1,-1,-1
    };
</pre><a class="pilcrow" href="#section-3.1.1.3.2.2.3-3">¶</a>
</div>
</section>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="comp_sequence_exec">
<section id="section-3.1.1.4">
            <h5 id="name-sequence-execution">
<a class="section-number selfRef" href="#section-3.1.1.4">3.1.1.4. </a><a class="section-name selfRef" href="#name-sequence-execution">Sequence Execution</a>
            </h5>
<p id="section-3.1.1.4-1"> Once literals and sequences have been decoded,
     they are combined to produce the decoded content
     of a block.<a class="pilcrow" href="#section-3.1.1.4-1">¶</a></p>
<p id="section-3.1.1.4-2"> Each sequence consists of a tuple of
     (literals_length, offset_value, match_length),
     decoded as described in the Sequences_Section
     (<a class="xref" href="#comp_sequences">Section 3.1.1.3.2</a>). To execute a
     sequence, first copy literals_length bytes from
     the decoded literals to the output.<a class="pilcrow" href="#section-3.1.1.4-2">¶</a></p>
<p id="section-3.1.1.4-3"> Then, match_length bytes are copied from previous
     decoded data. The offset to copy from is
     determined by offset_value:<a class="pilcrow" href="#section-3.1.1.4-3">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.1.1.4-4.1"> if Offset_Value &gt; 3, then the offset is
     Offset_Value - 3;<a class="pilcrow" href="#section-3.1.1.4-4.1">¶</a>
</li>
              <li class="normal" id="section-3.1.1.4-4.2"> if Offset_Value is from 1-3, the offset is
     a special repeat offset value. See
     <a class="xref" href="#repeat_offsets">Section 3.1.1.5</a> for how
     the offset is determined in this case.<a class="pilcrow" href="#section-3.1.1.4-4.2">¶</a>
</li>
            </ul>
<p id="section-3.1.1.4-5"> The offset is defined as from the current
     position (after copying the literals), so an
     offset of 6 and a match length of
     3 means that 3 bytes should be copied from 6 bytes
     back. Note that all offsets leading to previously
     decoded data must be smaller than Window_Size
     defined in Frame_Header_Descriptor
     (<a class="xref" href="#comp_frame_header_desc">Section 3.1.1.1.1</a>).<a class="pilcrow" href="#section-3.1.1.4-5">¶</a></p>
</section>
</div>
<div id="repeat_offsets">
<section id="section-3.1.1.5">
            <h5 id="name-repeat-offsets">
<a class="section-number selfRef" href="#section-3.1.1.5">3.1.1.5. </a><a class="section-name selfRef" href="#name-repeat-offsets">Repeat Offsets</a>
            </h5>
<p id="section-3.1.1.5-1"> As seen above, the first three values
     define a repeated offset; we will call
     them Repeated_Offset1, Repeated_Offset2,
     and Repeated_Offset3.  They are sorted in
     recency order, with Repeated_Offset1
     meaning "most recent one".<a class="pilcrow" href="#section-3.1.1.5-1">¶</a></p>
<p id="section-3.1.1.5-2"> If offset_value is 1, then the offset used
     is Repeated_Offset1, etc.<a class="pilcrow" href="#section-3.1.1.5-2">¶</a></p>
<p id="section-3.1.1.5-3"> There is one exception: when the current
     sequence's literals_length is 0, repeated
     offsets are shifted by 1, so an
     offset_value of 1 means Repeated_Offset2,
     an offset_value of 2 means Repeated_Offset3,
     and an offset_value of 3 means
     Repeated_Offset1 - 1_byte.<a class="pilcrow" href="#section-3.1.1.5-3">¶</a></p>
<p id="section-3.1.1.5-4"> For the first block, the starting offset
     history is populated with the following
     values: Repeated_Offset1 (1),
     Repeated_Offset2 (4), and
     Repeated_Offset3 (8), unless
     a dictionary is used, in which case they
     come from the dictionary.<a class="pilcrow" href="#section-3.1.1.5-4">¶</a></p>
<p id="section-3.1.1.5-5"> Then each block gets its starting offset
     history from the ending values of the most
     recent Compressed_Block. Note that blocks
     that are not Compressed_Block are skipped;
     they do not contribute to offset
                             history.<a class="pilcrow" href="#section-3.1.1.5-5">¶</a></p>
<p id="section-3.1.1.5-6"> During the execution of the sequences of a
     Compressed_Block, the Repeated_Offsets'
     values are kept up to date, so that they
     always represent the three most recently
     used offsets. In order to achieve that,
     they are updated after executing each
     sequence in the following way:<a class="pilcrow" href="#section-3.1.1.5-6">¶</a></p>
<p id="section-3.1.1.5-7"> When the sequence's offset_value does not
     refer to one of the Repeated_Offsets --
     when it has value greater than 3, or when
     it has value 3 and the sequence's
     literals_length is zero -- the
     Repeated_Offsets' values are shifted back
     one, and Repeated_Offset1 takes on the
     value of the offset that was just used.<a class="pilcrow" href="#section-3.1.1.5-7">¶</a></p>
<p id="section-3.1.1.5-8"> Otherwise, when the sequence's offset_value
     refers to one of the Repeated_Offsets --
     when it has value 1 or 2, or when it has
     value 3 and the sequence's literals_length
     is non-zero -- the Repeated_Offsets are
     reordered, so that Repeated_Offset1 takes
     on the value of the used Repeated_Offset,
     and the existing values are pushed back
     from the first Repeated_Offset through to
     the Repeated_Offset selected by the
     offset_value. This effectively performs a
     single-stepped wrapping rotation of the
     values of these offsets, so that their
     order again reflects the recency of their
     use.<a class="pilcrow" href="#section-3.1.1.5-8">¶</a></p>
<p id="section-3.1.1.5-9">The following table shows the values of
     the Repeated_Offsets as a series of
 sequences are applied to them:<a class="pilcrow" href="#section-3.1.1.5-9">¶</a></p>
<span id="name-repeated_offsets"></span><div id="repeated_offsets">
<table class="center" id="table-18">
              <caption>
<a class="selfRef" href="#table-18">Table 18</a>:
<a class="selfRef" href="#name-repeated_offsets">Repeated_Offsets</a>
              </caption>
<thead>
                <tr>
                  <th class="text-center" colspan="1" rowspan="1">offset_​value</th>
                  <th class="text-center" colspan="1" rowspan="1">literals_​length</th>
                  <th class="text-center" colspan="1" rowspan="1">Repeated_​Offset1</th>
                  <th class="text-center" colspan="1" rowspan="1">Repeated_​Offset2</th>
                  <th class="text-center" colspan="1" rowspan="1">Repeated_​Offset3</th>
                  <th class="text-left" colspan="1" rowspan="1">Comment</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="text-right" colspan="1" rowspan="1"></td>
                  <td class="text-center" colspan="1" rowspan="1"></td>
                  <td class="text-center" colspan="1" rowspan="1">1</td>
                  <td class="text-center" colspan="1" rowspan="1">4</td>
                  <td class="text-center" colspan="1" rowspan="1">8</td>
                  <td class="text-left" colspan="1" rowspan="1">starting values</td>
                </tr>
                <tr>
                  <td class="text-right" colspan="1" rowspan="1">1114</td>
                  <td class="text-center" colspan="1" rowspan="1">11</td>
                  <td class="text-center" colspan="1" rowspan="1">1111</td>
                  <td class="text-center" colspan="1" rowspan="1">1</td>
                  <td class="text-center" colspan="1" rowspan="1">4</td>
                  <td class="text-left" colspan="1" rowspan="1">non-repeat</td>
                </tr>
                <tr>
                  <td class="text-right" colspan="1" rowspan="1">1</td>
                  <td class="text-center" colspan="1" rowspan="1">22</td>
                  <td class="text-center" colspan="1" rowspan="1">1111</td>
                  <td class="text-center" colspan="1" rowspan="1">1</td>
                  <td class="text-center" colspan="1" rowspan="1">4</td>
                  <td class="text-left" colspan="1" rowspan="1">repeat 1; no change</td>
                </tr>
                <tr>
                  <td class="text-right" colspan="1" rowspan="1">2225</td>
                  <td class="text-center" colspan="1" rowspan="1">22</td>
                  <td class="text-center" colspan="1" rowspan="1">2222</td>
                  <td class="text-center" colspan="1" rowspan="1">1111</td>
                  <td class="text-center" colspan="1" rowspan="1">1</td>
                  <td class="text-left" colspan="1" rowspan="1">non-repeat</td>
                </tr>
                <tr>
                  <td class="text-right" colspan="1" rowspan="1">1114</td>
                  <td class="text-center" colspan="1" rowspan="1">111</td>
                  <td class="text-center" colspan="1" rowspan="1">1111</td>
                  <td class="text-center" colspan="1" rowspan="1">2222</td>
                  <td class="text-center" colspan="1" rowspan="1">1111</td>
                  <td class="text-left" colspan="1" rowspan="1">non-repeat</td>
                </tr>
                <tr>
                  <td class="text-right" colspan="1" rowspan="1">3336</td>
                  <td class="text-center" colspan="1" rowspan="1">33</td>
                  <td class="text-center" colspan="1" rowspan="1">3333</td>
                  <td class="text-center" colspan="1" rowspan="1">1111</td>
                  <td class="text-center" colspan="1" rowspan="1">2222</td>
                  <td class="text-left" colspan="1" rowspan="1">non-repeat</td>
                </tr>
                <tr>
                  <td class="text-right" colspan="1" rowspan="1">2</td>
                  <td class="text-center" colspan="1" rowspan="1">22</td>
                  <td class="text-center" colspan="1" rowspan="1">1111</td>
                  <td class="text-center" colspan="1" rowspan="1">3333</td>
                  <td class="text-center" colspan="1" rowspan="1">2222</td>
                  <td class="text-left" colspan="1" rowspan="1">repeat 2; swap 1 &amp; 2</td>
                </tr>
                <tr>
                  <td class="text-right" colspan="1" rowspan="1">3</td>
                  <td class="text-center" colspan="1" rowspan="1">33</td>
                  <td class="text-center" colspan="1" rowspan="1">2222</td>
                  <td class="text-center" colspan="1" rowspan="1">1111</td>
                  <td class="text-center" colspan="1" rowspan="1">3333</td>
                  <td class="text-left" colspan="1" rowspan="1">repeat 3; rotate 3 to 1</td>
                </tr>
                <tr>
                  <td class="text-right" colspan="1" rowspan="1">1</td>
                  <td class="text-center" colspan="1" rowspan="1">0</td>
                  <td class="text-center" colspan="1" rowspan="1">2221</td>
                  <td class="text-center" colspan="1" rowspan="1">2222</td>
                  <td class="text-center" colspan="1" rowspan="1">1111</td>
                  <td class="text-left" colspan="1" rowspan="1">insert resolved offset</td>
                </tr>
                <tr>
                  <td class="text-right" colspan="1" rowspan="1">1</td>
                  <td class="text-center" colspan="1" rowspan="1">0</td>
                  <td class="text-center" colspan="1" rowspan="1">2222</td>
                  <td class="text-center" colspan="1" rowspan="1">2221</td>
                  <td class="text-center" colspan="1" rowspan="1">3333</td>
                  <td class="text-left" colspan="1" rowspan="1">repeat 2</td>
                </tr>
              </tbody>
            </table>
</div>
</section>
</div>
</section>
</div>
<div id="comp_skippable">
<section id="section-3.1.2">
          <h4 id="name-skippable-frames">
<a class="section-number selfRef" href="#section-3.1.2">3.1.2. </a><a class="section-name selfRef" href="#name-skippable-frames">Skippable Frames</a>
          </h4>
<span id="name-skippable-frames-2"></span><div id="skippable">
<table class="center" id="table-19">
            <caption>
<a class="selfRef" href="#table-19">Table 19</a>:
<a class="selfRef" href="#name-skippable-frames-2">Skippable Frames</a>
            </caption>
<thead>
              <tr>
                <th class="text-center" colspan="1" rowspan="1">Magic_Number</th>
                <th class="text-center" colspan="1" rowspan="1">Frame_Size</th>
                <th class="text-center" colspan="1" rowspan="1">User_Data</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">4 bytes</td>
                <td class="text-center" colspan="1" rowspan="1">4 bytes</td>
                <td class="text-center" colspan="1" rowspan="1">n bytes</td>
              </tr>
            </tbody>
          </table>
</div>
<p id="section-3.1.2-2"> Skippable frames allow the insertion of
     user-defined metadata into a flow of concatenated
     frames.<a class="pilcrow" href="#section-3.1.2-2">¶</a></p>
<p id="section-3.1.2-3"> Skippable frames defined in this specification are
     compatible with skippable frames in
     <span>[<a class="xref" href="#LZ4">LZ4</a>]</span>.<a class="pilcrow" href="#section-3.1.2-3">¶</a></p>
<p id="section-3.1.2-4"> From a compliant decoder perspective, skippable
     frames simply need to be skipped, and their
     content ignored, resuming decoding after the
     skippable frame.<a class="pilcrow" href="#section-3.1.2-4">¶</a></p>
<p id="section-3.1.2-5"> It should be noted that a skippable frame can be
     used to watermark a stream of concatenated frames
     embedding any kind of tracking information (even
     just a Universally Unique Identifier (UUID)). Users wary of such possibility
     should scan the stream of concatenated frames in
     an attempt to detect such frames for analysis or
     removal.<a class="pilcrow" href="#section-3.1.2-5">¶</a></p>
<p id="section-3.1.2-6"> The fields are:<a class="pilcrow" href="#section-3.1.2-6">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-3.1.2-7">
            <dt id="section-3.1.2-7.1">Magic_Number:</dt>
            <dd id="section-3.1.2-7.2" style="margin-left: 1.5em">4 bytes, little-endian format. Value:
 0x184D2A5?, which means any value from
 0x184D2A50 to 0x184D2A5F. All 16
 values are valid to identify a
 skippable frame.  This specification
 does not detail any specific tagging
 methods for skippable frames.<a class="pilcrow" href="#section-3.1.2-7.2">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-3.1.2-7.3">Frame_Size:</dt>
            <dd id="section-3.1.2-7.4" style="margin-left: 1.5em">
 This is the size, in bytes, of the
 following User_Data (without including
 the magic number nor the size field
 itself). This field is represented
 using 4 bytes, little-endian format,
 unsigned 32 bits. This means User_Data
 can't be bigger than
 (2<sup>32</sup> -1) bytes.<a class="pilcrow" href="#section-3.1.2-7.4">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-3.1.2-7.5">User_Data:</dt>
            <dd id="section-3.1.2-7.6" style="margin-left: 1.5em">
 This field can be anything. Data will
 just be skipped by the decoder.<a class="pilcrow" href="#section-3.1.2-7.6">¶</a>
</dd>
          <dd class="break"></dd>
</dl>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="comp_entropy">
<section id="section-4">
      <h2 id="name-entropy-encoding">
<a class="section-number selfRef" href="#section-4">4. </a><a class="section-name selfRef" href="#name-entropy-encoding">Entropy Encoding</a>
      </h2>
<p id="section-4-1"> Two types of entropy encoding are used by the
     Zstandard format: FSE and Huffman coding. 
     Huffman is used to compress literals, while FSE
     is used for all other symbols
     (Literals_Length_Code, Match_Length_Code, and offset
     codes) and to compress Huffman headers.<a class="pilcrow" href="#section-4-1">¶</a></p>
<div id="comp_fse">
<section id="section-4.1">
        <h3 id="name-fse">
<a class="section-number selfRef" href="#section-4.1">4.1. </a><a class="section-name selfRef" href="#name-fse">FSE</a>
        </h3>
<p id="section-4.1-1"> FSE, short for Finite State Entropy, is
     an entropy codec based on
     <span>[<a class="xref" href="#ANS">ANS</a>]</span>.
     FSE encoding/decoding involves
     a state that is carried over between
     symbols, so decoding must be done in the
     opposite direction as encoding. Therefore,
     all FSE bitstreams are read from end to
     beginning. Note that the order of the
     bits in the stream is not reversed;
     they are simply read in the reverse
     order from which they were written.<a class="pilcrow" href="#section-4.1-1">¶</a></p>
<p id="section-4.1-2"> For additional details on FSE, see
 "FiniteStateEntropy" <span>[<a class="xref" href="#FSE">FSE</a>]</span>.<a class="pilcrow" href="#section-4.1-2">¶</a></p>
<p id="section-4.1-3"> FSE decoding involves a decoding table
     that has a power-of-2 size and contains
     three elements: Symbol, Num_Bits, and
     Baseline. The base 2 logarithm
     of the table size is its Accuracy_Log.
     An FSE state value represents an index in
     this table.<a class="pilcrow" href="#section-4.1-3">¶</a></p>
<p id="section-4.1-4"> To obtain the initial state value,
     consume Accuracy_Log bits from the stream
     as a little-endian value. The next symbol
     in the stream is the Symbol indicated in
     the table for that state. To obtain the
     next state value, the decoder should
     consume Num_Bits bits from the stream as a
     little-endian value and add it to
     Baseline.<a class="pilcrow" href="#section-4.1-4">¶</a></p>
<div id="comp_fse_table">
<section id="section-4.1.1">
          <h4 id="name-fse-table-description">
<a class="section-number selfRef" href="#section-4.1.1">4.1.1. </a><a class="section-name selfRef" href="#name-fse-table-description">FSE Table Description</a>
          </h4>
<p id="section-4.1.1-1"> To decode FSE streams, it is necessary
 to construct the decoding table. The
 Zstandard format encodes FSE table
 descriptions as described here.<a class="pilcrow" href="#section-4.1.1-1">¶</a></p>
<p id="section-4.1.1-2"> An FSE distribution table describes the
 probabilities of all symbols from 0 to
 the last present one (included) on a
 normalized scale of
 (1 &lt;&lt; Accuracy_Log).

 Note that there must be two or
 more symbols with nonzero probability.<a class="pilcrow" href="#section-4.1.1-2">¶</a></p>
<p id="section-4.1.1-3"> A bitstream is read forward, in
 little-endian fashion. It is not
 necessary to know its exact size,
 since the size will be discovered and
 reported by the decoding process.  The
 bitstream starts by reporting on which
 scale it operates.  If low4bits
 designates the lowest 4 bits of
 the first byte, then
 Accuracy_Log = low4bits + 5.<a class="pilcrow" href="#section-4.1.1-3">¶</a></p>
<p id="section-4.1.1-4"> This is followed by each symbol value,
 from 0 to the last present one. The
 number of bits used by each field is
 variable and depends on:<a class="pilcrow" href="#section-4.1.1-4">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-4.1.1-5">
            <dt id="section-4.1.1-5.1">Remaining probabilities + 1:</dt>
            <dd id="section-4.1.1-5.2" style="margin-left: 1.5em">
 For example, presuming an
 Accuracy_Log of 8, and
 presuming 100 probabilities
 points have already been
 distributed, the decoder may
 read any value from 0 to
 (256 - 100 + 1) == 157,
 inclusive. Therefore, it must
 read log<sub>2</sub>sup(157) == 8
 bits.<a class="pilcrow" href="#section-4.1.1-5.2">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-4.1.1-5.3">Value decoded:</dt>
            <dd id="section-4.1.1-5.4" style="margin-left: 1.5em">
              <p id="section-4.1.1-5.4.1">
 Small values use 1 fewer bit.
 For example, presuming values
 from 0 to 157, inclusive, are
 possible, 255 - 157 = 98 values
 are remaining in an 8-bit
 field.  The first 98 values
 (hence, from 0 to 97) use only
 7 bits, and values from 98 to
 157 use 8 bits. This is
 achieved through the scheme in
 <a class="xref" href="#value">Table 20</a>:<a class="pilcrow" href="#section-4.1.1-5.4.1">¶</a></p>
<span id="name-values-decoded"></span><div id="value">
<table class="center" id="table-20">
                <caption>
<a class="selfRef" href="#table-20">Table 20</a>:
<a class="selfRef" href="#name-values-decoded">Values Decoded</a>
                </caption>
<thead>
                  <tr>
                    <th class="text-center" colspan="1" rowspan="1">Value Read</th>
                    <th class="text-center" colspan="1" rowspan="1">Value Decoded</th>
                    <th class="text-center" colspan="1" rowspan="1">Bits Used</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="text-center" colspan="1" rowspan="1">0 - 97</td>
                    <td class="text-center" colspan="1" rowspan="1">0 - 97</td>
                    <td class="text-center" colspan="1" rowspan="1">7</td>
                  </tr>
                  <tr>
                    <td class="text-center" colspan="1" rowspan="1">98 - 127</td>
                    <td class="text-center" colspan="1" rowspan="1">98 - 127</td>
                    <td class="text-center" colspan="1" rowspan="1">8</td>
                  </tr>
                  <tr>
                    <td class="text-center" colspan="1" rowspan="1">128 - 225</td>
                    <td class="text-center" colspan="1" rowspan="1">0 - 97</td>
                    <td class="text-center" colspan="1" rowspan="1">7</td>
                  </tr>
                  <tr>
                    <td class="text-center" colspan="1" rowspan="1">226 - 255</td>
                    <td class="text-center" colspan="1" rowspan="1">128 - 157</td>
                    <td class="text-center" colspan="1" rowspan="1">8</td>
                  </tr>
                </tbody>
              </table>
</div>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-4.1.1-6"> Symbol probabilities are read
 one by one, in order.  The
 probability is obtained from
 Value Decoded using the
 formula P = Value - 1.  This
 means the value 0 becomes the
 negative probability -1.  This
 is a special probability that
 means "less than 1".  Its
 effect on the distribution
 table is described below.  For
 the purpose of calculating
 total allocated probability
 points, it counts as 1.<a class="pilcrow" href="#section-4.1.1-6">¶</a></p>
<p id="section-4.1.1-7"> When a symbol has a
 probability of zero, it is
 followed by a 2-bit repeat
 flag. This repeat flag tells
 how many probabilities of
 zeroes follow the current one.
 It provides a number ranging
 from 0 to 3. If it is a 3,
 another 2-bit repeat flag
 follows, and so on.<a class="pilcrow" href="#section-4.1.1-7">¶</a></p>
<p id="section-4.1.1-8"> When the last symbol reaches
 a cumulated total of
 (1 &lt;&lt; Accuracy_Log),
 decoding is complete.  If the
 last symbol makes the cumulated
 total go above
 (1 &lt;&lt; Accuracy_Log),
 distribution is considered
 corrupted.<a class="pilcrow" href="#section-4.1.1-8">¶</a></p>
<p id="section-4.1.1-9"> Finally, the decoder can tell
 how many bytes were used in
 this process and how many
 symbols are present. The
 bitstream consumes a round
 number of bytes. Any remaining
 bit within the last byte is
 simply unused.<a class="pilcrow" href="#section-4.1.1-9">¶</a></p>
<p id="section-4.1.1-10"> The context in which the table
            is to be used specifies an expected
            number of symbols. That expected
            number of symbols never exceeds 256.
            If the number of symbols decoded
            is not equal to the expected, the
            header should be considered
            corrupt.<a class="pilcrow" href="#section-4.1.1-10">¶</a></p>
<p id="section-4.1.1-11"> The distribution of normalized
 probabilities is enough to
 create a unique decoding
 table.  The table has a size
 of (1 &lt;&lt; Accuracy_Log).
 Each cell describes the symbol
 decoded and instructions to
 get the next state.<a class="pilcrow" href="#section-4.1.1-11">¶</a></p>
<p id="section-4.1.1-12"> Symbols are scanned in their
 natural order for "less than 1"
 probabilities as described
 above.  Symbols with this
 probability are being
 attributed a single cell,
 starting from the end of the
 table and retreating. These
 symbols define a
 full state reset, reading
 Accuracy_Log bits.<a class="pilcrow" href="#section-4.1.1-12">¶</a></p>
<p id="section-4.1.1-13"> All remaining symbols are
 allocated in their natural
 order.  Starting from symbol 0
 and table position 0, each
 symbol gets allocated as many
 cells as its probability. Cell
 allocation is spread, not
 linear; each successor
 position follows this rule:<a class="pilcrow" href="#section-4.1.1-13">¶</a></p>
<div class="artwork art-text alignLeft" id="section-4.1.1-14">
<pre>  position += (tableSize &gt;&gt; 1) + (tableSize &gt;&gt; 3) + 3;
  position &amp;= tableSize - 1;
</pre><a class="pilcrow" href="#section-4.1.1-14">¶</a>
</div>
<p id="section-4.1.1-15"> A position is skipped if it is
 already occupied by a "less
 than 1" probability symbol.
 Position does not reset between
 symbols; it simply iterates
 through each position in the
 table, switching to the next
 symbol when enough states have
 been allocated to the current
 one.<a class="pilcrow" href="#section-4.1.1-15">¶</a></p>
<p id="section-4.1.1-16"> The result is a list of state
 values. Each state will decode
 the current symbol.<a class="pilcrow" href="#section-4.1.1-16">¶</a></p>
<p id="section-4.1.1-17"> To get the Number_of_Bits and
 Baseline required for the next
 state, it is first necessary
 to sort all states in their
 natural order. The lower
 states will need 1 more bit
 than higher ones. The process
 is repeated for each symbol.<a class="pilcrow" href="#section-4.1.1-17">¶</a></p>
<p id="section-4.1.1-18"> For example, presuming a symbol
 has a probability of 5, it
 receives five state values.
 States are sorted in natural
 order.  The next power of
 2 is 8.  The space of
 probabilities is divided into
 8 equal parts.  Presuming the
 Accuracy_Log is 7, this
 defines 128 states, and each
 share (divided by 8) is 16
 in size.  In order to reach
 8, 8 - 5 = 3 lowest states will
 count "double", doubling the
 number of shares (32 in width),
 requiring 1 more bit in the
 process.<a class="pilcrow" href="#section-4.1.1-18">¶</a></p>
<p id="section-4.1.1-19"> Baseline is assigned starting
 from the higher states using
 fewer bits, and proceeding
 naturally, then resuming at
 the first state, each taking
 its allocated width from
 Baseline.<a class="pilcrow" href="#section-4.1.1-19">¶</a></p>
<span id="name-baseline-assignments"></span><div id="state">
<table class="center" id="table-21">
            <caption>
<a class="selfRef" href="#table-21">Table 21</a>:
<a class="selfRef" href="#name-baseline-assignments">Baseline Assignments</a>
            </caption>
<tbody>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">state order</td>
                <td class="text-center" colspan="1" rowspan="1">0</td>
                <td class="text-center" colspan="1" rowspan="1">1</td>
                <td class="text-center" colspan="1" rowspan="1">2</td>
                <td class="text-center" colspan="1" rowspan="1">3</td>
                <td class="text-center" colspan="1" rowspan="1">4</td>
              </tr>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">width</td>
                <td class="text-center" colspan="1" rowspan="1">32</td>
                <td class="text-center" colspan="1" rowspan="1">32</td>
                <td class="text-center" colspan="1" rowspan="1">32</td>
                <td class="text-center" colspan="1" rowspan="1">16</td>
                <td class="text-center" colspan="1" rowspan="1">16</td>
              </tr>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">Number_of_Bits</td>
                <td class="text-center" colspan="1" rowspan="1">5</td>
                <td class="text-center" colspan="1" rowspan="1">5</td>
                <td class="text-center" colspan="1" rowspan="1">5</td>
                <td class="text-center" colspan="1" rowspan="1">4</td>
                <td class="text-center" colspan="1" rowspan="1">4</td>
              </tr>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">range number</td>
                <td class="text-center" colspan="1" rowspan="1">2</td>
                <td class="text-center" colspan="1" rowspan="1">4</td>
                <td class="text-center" colspan="1" rowspan="1">6</td>
                <td class="text-center" colspan="1" rowspan="1">0</td>
                <td class="text-center" colspan="1" rowspan="1">1</td>
              </tr>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">Baseline</td>
                <td class="text-center" colspan="1" rowspan="1">32</td>
                <td class="text-center" colspan="1" rowspan="1">64</td>
                <td class="text-center" colspan="1" rowspan="1">96</td>
                <td class="text-center" colspan="1" rowspan="1">0</td>
                <td class="text-center" colspan="1" rowspan="1">16</td>
              </tr>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">range</td>
                <td class="text-center" colspan="1" rowspan="1">32-63</td>
                <td class="text-center" colspan="1" rowspan="1">64-95</td>
                <td class="text-center" colspan="1" rowspan="1">96-127</td>
                <td class="text-center" colspan="1" rowspan="1">0-15</td>
                <td class="text-center" colspan="1" rowspan="1">16-31</td>
              </tr>
            </tbody>
          </table>
</div>
<p id="section-4.1.1-21"> The next state is determined
 from the current state by
 reading the required
 Number_of_Bits and adding the
 specified Baseline.<a class="pilcrow" href="#section-4.1.1-21">¶</a></p>
<p id="section-4.1.1-22"> See <a class="xref" href="#app_tables">Appendix A</a>
 for the results of this
 process that are applied to the
 default distributions.<a class="pilcrow" href="#section-4.1.1-22">¶</a></p>
</section>
</div>
</section>
</div>
<div id="comp_huffman">
<section id="section-4.2">
        <h3 id="name-huffman-coding">
<a class="section-number selfRef" href="#section-4.2">4.2. </a><a class="section-name selfRef" href="#name-huffman-coding">Huffman Coding</a>
        </h3>
<p id="section-4.2-1"> Zstandard Huffman-coded streams are read
     backwards, similar to the FSE bitstreams.
     Therefore, to find the start of the
     bitstream, it is necessary to know the
     offset of the last byte of the
     Huffman-coded stream.<a class="pilcrow" href="#section-4.2-1">¶</a></p>
<p id="section-4.2-2"> After writing the last bit containing
     information, the compressor writes a
            single 1 bit and then fills the rest of
            the byte with 0 bits. The last byte of
     the compressed bitstream cannot be 0 for
     that reason.<a class="pilcrow" href="#section-4.2-2">¶</a></p>
<p id="section-4.2-3"> When decompressing, the last byte
     containing the padding is the first byte
     to read. The decompressor needs to skip
            the up to 7 bits of 0-padding as well as
            the first 1 bit that occurs. Afterwards,
            the useful part of the bitstream
            begins.<a class="pilcrow" href="#section-4.2-3">¶</a></p>
<p id="section-4.2-4"> The bitstream contains Huffman-coded
     symbols in little-endian order, with the
     codes defined by the method below.<a class="pilcrow" href="#section-4.2-4">¶</a></p>
<div id="huffman_tree_desc">
<section id="section-4.2.1">
          <h4 id="name-huffman-tree-description">
<a class="section-number selfRef" href="#section-4.2.1">4.2.1. </a><a class="section-name selfRef" href="#name-huffman-tree-description">Huffman Tree Description</a>
          </h4>
<p id="section-4.2.1-1"> Prefix coding represents symbols
     from an a priori known alphabet by
     bit sequences (codewords), one
     codeword for each symbol, in a
     manner such that different symbols
     may be represented by bit sequences
     of different lengths, but a parser
     can always parse an encoded string
     unambiguously,
     symbol by symbol.<a class="pilcrow" href="#section-4.2.1-1">¶</a></p>
<p id="section-4.2.1-2"> Given an alphabet with known symbol
     frequencies, the Huffman algorithm
     allows the construction of an
     optimal prefix code using the
     fewest bits of any possible prefix
     codes for that alphabet.<a class="pilcrow" href="#section-4.2.1-2">¶</a></p>
<p id="section-4.2.1-3"> The prefix code must not exceed a
     maximum code length. More bits
     improve accuracy but yield a larger
     header size and require more
     memory or more complex decoding
     operations. This specification
     limits the maximum code length to
     11 bits.<a class="pilcrow" href="#section-4.2.1-3">¶</a></p>
<p id="section-4.2.1-4"> All literal values from zero
     (included) to the last present one
     (excluded) are represented by
     Weight with values from 0 to
     Max_Number_of_Bits. Transformation
     from Weight to Number_of_Bits
     follows this pseudocode:<a class="pilcrow" href="#section-4.2.1-4">¶</a></p>
<div id="section-4.2.1-5">
<pre class="sourcecode lang-pseudocode">  if Weight == 0
    Number_of_Bits = 0
  else
    Number_of_Bits = Max_Number_of_Bits + 1 - Weight
</pre><a class="pilcrow" href="#section-4.2.1-5">¶</a>
</div>
<p id="section-4.2.1-6"> The last symbol's Weight is
     deduced from previously decoded
     ones, by completing to the nearest
     power of 2. This power of 2 gives
     Max_Number_of_Bits the depth of
     the current tree.<a class="pilcrow" href="#section-4.2.1-6">¶</a></p>
<p id="section-4.2.1-7"> For example, presume the following
     Huffman tree must be described:<a class="pilcrow" href="#section-4.2.1-7">¶</a></p>
<span id="name-huffman-tree"></span><div id="Huffman">
<table class="center" id="table-22">
            <caption>
<a class="selfRef" href="#table-22">Table 22</a>:
<a class="selfRef" href="#name-huffman-tree">Huffman Tree</a>
            </caption>
<thead>
              <tr>
                <th class="text-center" colspan="1" rowspan="1">Literal Value</th>
                <th class="text-center" colspan="1" rowspan="1">Number_of_Bits</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">0</td>
                <td class="text-center" colspan="1" rowspan="1">1</td>
              </tr>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">1</td>
                <td class="text-center" colspan="1" rowspan="1">2</td>
              </tr>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">2</td>
                <td class="text-center" colspan="1" rowspan="1">3</td>
              </tr>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">3</td>
                <td class="text-center" colspan="1" rowspan="1">0</td>
              </tr>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">4</td>
                <td class="text-center" colspan="1" rowspan="1">4</td>
              </tr>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">5</td>
                <td class="text-center" colspan="1" rowspan="1">4</td>
              </tr>
            </tbody>
          </table>
</div>
<p id="section-4.2.1-9"> The tree depth is 4, since its
     longest element uses 4 bits.
     (The longest elements are those
     with the smallest frequencies.)
     Value 5 will not be listed as it
     can be determined from the values
     for 0-4, nor will values above 5
     as they are all 0. Values from 0
     to 4 will be listed using Weight
     instead of Number_of_Bits. The
     pseudocode to determine Weight is:<a class="pilcrow" href="#section-4.2.1-9">¶</a></p>
<div id="section-4.2.1-10">
<pre class="sourcecode lang-pseudocode">  if Number_of_Bits == 0
    Weight = 0
  else
    Weight = Max_Number_of_Bits + 1 - Number_of_Bits
</pre><a class="pilcrow" href="#section-4.2.1-10">¶</a>
</div>
<p id="section-4.2.1-11"> It gives the following series of
     weights:<a class="pilcrow" href="#section-4.2.1-11">¶</a></p>
<span id="name-weights"></span><div id="weights">
<table class="center" id="table-23">
            <caption>
<a class="selfRef" href="#table-23">Table 23</a>:
<a class="selfRef" href="#name-weights">Weights</a>
            </caption>
<thead>
              <tr>
                <th class="text-center" colspan="1" rowspan="1">Literal Value</th>
                <th class="text-center" colspan="1" rowspan="1">Weight</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">0</td>
                <td class="text-center" colspan="1" rowspan="1">4</td>
              </tr>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">1</td>
                <td class="text-center" colspan="1" rowspan="1">3</td>
              </tr>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">2</td>
                <td class="text-center" colspan="1" rowspan="1">2</td>
              </tr>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">3</td>
                <td class="text-center" colspan="1" rowspan="1">0</td>
              </tr>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">4</td>
                <td class="text-center" colspan="1" rowspan="1">1</td>
              </tr>
            </tbody>
          </table>
</div>
<p id="section-4.2.1-13"> The decoder will do the inverse
     operation: having collected weights
     of literals from 0 to 4, it knows
     the last literal, 5, is present
     with a nonzero Weight. The Weight
     of 5 can be determined by advancing
     to the next power of 2. The sum of
     2<sup>(Weight-1)</sup> (excluding 0's) is 15.
     The nearest power of 2 is 16.
     Therefore, Max_Number_of_Bits = 4
     and Weight[5] = 16 - 15 = 1.<a class="pilcrow" href="#section-4.2.1-13">¶</a></p>
<div id="huffman_tree_header">
<section id="section-4.2.1.1">
            <h5 id="name-huffman-tree-header">
<a class="section-number selfRef" href="#section-4.2.1.1">4.2.1.1. </a><a class="section-name selfRef" href="#name-huffman-tree-header">Huffman Tree Header</a>
            </h5>
<p id="section-4.2.1.1-1"> This is a single byte value
 (0-255), which describes how
 the series of weights is
 encoded.<a class="pilcrow" href="#section-4.2.1.1-1">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-4.2.1.1-2">
              <dt id="section-4.2.1.1-2.1">headerByte &lt; 128:</dt>
              <dd id="section-4.2.1.1-2.2" style="margin-left: 1.5em">
 The series of weights
 is compressed using
 FSE (see below).  The
 length of the
 FSE-compressed series
 is equal to headerByte
 (0-127).<a class="pilcrow" href="#section-4.2.1.1-2.2">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-4.2.1.1-2.3">headerByte &gt;= 128:</dt>
              <dd id="section-4.2.1.1-2.4" style="margin-left: 1.5em">
                <p id="section-4.2.1.1-2.4.1">
 This is a direct
 representation, where
 each Weight is written
 directly as a 4-bit
 field (0-15). They are
 encoded forward, 2
 weights to a byte with
 the first weight taking
 the top 4 bits and
 the second taking the
 bottom 4; for example, the
 following operations
 could be used to read
 the weights:<a class="pilcrow" href="#section-4.2.1.1-2.4.1">¶</a></p>
<div class="artwork art-text alignLeft" id="section-4.2.1.1-2.4.2">
<pre>  Weight[0] = (Byte[0] &gt;&gt; 4)
  Weight[1] = (Byte[0] &amp; 0xf),
  etc.
</pre><a class="pilcrow" href="#section-4.2.1.1-2.4.2">¶</a>
</div>
<p id="section-4.2.1.1-2.4.3">
 The full representation
 occupies
 ceiling(Number_of_Symbols/2)
 bytes, meaning it uses
 only full bytes even
 if Number_of_Symbols is
 odd.  Number_of_Symbols
 = headerByte - 127.
 Note that maximum
 Number_of_Symbols is
 255 - 127 = 128. If any
 literal
 has a value over 128,
 raw header mode is not
 possible, and it is
 necessary to use FSE
 compression.<a class="pilcrow" href="#section-4.2.1.1-2.4.3">¶</a></p>
</dd>
            <dd class="break"></dd>
</dl>
</section>
</div>
<div id="huffman_tree_fse">
<section id="section-4.2.1.2">
            <h5 id="name-fse-compression-of-huffman-">
<a class="section-number selfRef" href="#section-4.2.1.2">4.2.1.2. </a><a class="section-name selfRef" href="#name-fse-compression-of-huffman-">FSE Compression of Huffman Weights</a>
            </h5>
<p id="section-4.2.1.2-1"> In this case, the series of
 Huffman weights is compressed
 using FSE compression. It is a
 single bitstream with two
 interleaved states, sharing a
 single distribution table.<a class="pilcrow" href="#section-4.2.1.2-1">¶</a></p>
<p id="section-4.2.1.2-2"> To decode an FSE bitstream, it
 is necessary to know its
 compressed size. Compressed
 size is provided by headerByte.
 It's also necessary to know its
 maximum possible decompressed
 size, which is 255, since
 literal values span from 0 to
 255, and the last symbol's
 Weight is not represented.<a class="pilcrow" href="#section-4.2.1.2-2">¶</a></p>
<p id="section-4.2.1.2-3"> An FSE bitstream starts by
 a header, describing
 probabilities distribution. It
 will create a decoding table.
 For a list of Huffman weights,
 the maximum accuracy log is 6
 bits. For more details, see
 <a class="xref" href="#comp_fse_table">Section 4.1.1</a>.<a class="pilcrow" href="#section-4.2.1.2-3">¶</a></p>
<p id="section-4.2.1.2-4"> The Huffman header compression
 uses two states, which share
 the same FSE distribution
 table. 

The first state (State1)
 encodes the even-numbered index
 symbols, and the second
 (State2) encodes the odd-numbered
 index symbols. State1 is initialized
 first, and then State2, and
 they take turns decoding a
 single symbol and updating
 their state.

 For more details
 on these FSE operations, see
 <a class="xref" href="#comp_fse">Section 4.1</a>.<a class="pilcrow" href="#section-4.2.1.2-4">¶</a></p>
<p id="section-4.2.1.2-5"> The number of symbols to be
 decoded is determined by
 tracking the bitStream overflow
 condition: if updating state
 after decoding a symbol would
 require more bits than remain
 in the stream, it is assumed
 that extra bits are zero. Then,
 symbols for each of the
 final states are decoded and
 the process is complete.<a class="pilcrow" href="#section-4.2.1.2-5">¶</a></p>
</section>
</div>
<div id="huffman_tree_conv">
<section id="section-4.2.1.3">
            <h5 id="name-conversion-from-weights-to-">
<a class="section-number selfRef" href="#section-4.2.1.3">4.2.1.3. </a><a class="section-name selfRef" href="#name-conversion-from-weights-to-">Conversion from Weights to Huffman Prefix Codes</a>
            </h5>
<p id="section-4.2.1.3-1"> All present symbols will now
 have a Weight value. It is
 possible to transform weights
 into Number_of_Bits, using
 this formula:<a class="pilcrow" href="#section-4.2.1.3-1">¶</a></p>
<div id="section-4.2.1.3-2">
<pre class="sourcecode lang-pseudocode">  if Weight &gt; 0
      Number_of_Bits = Max_Number_of_Bits + 1 - Weight
  else
      Number_of_Bits = 0
</pre><a class="pilcrow" href="#section-4.2.1.3-2">¶</a>
</div>
<p id="section-4.2.1.3-3"> Symbols are sorted by Weight.
 Within the same Weight, symbols
 keep natural sequential
 order. Symbols
 with a Weight of zero are
 removed. Then, starting from
 the 
 lowest Weight, prefix codes
 are distributed in sequential
 order.<a class="pilcrow" href="#section-4.2.1.3-3">¶</a></p>
<p id="section-4.2.1.3-4"> For example, assume the
 following list of weights
 has been decoded:<a class="pilcrow" href="#section-4.2.1.3-4">¶</a></p>
<span id="name-decoded-weights"></span><div id="decoded-weights">
<table class="center" id="table-24">
              <caption>
<a class="selfRef" href="#table-24">Table 24</a>:
<a class="selfRef" href="#name-decoded-weights">Decoded Weights</a>
              </caption>
<thead>
                <tr>
                  <th class="text-center" colspan="1" rowspan="1">Literal</th>
                  <th class="text-center" colspan="1" rowspan="1">Weight</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="text-center" colspan="1" rowspan="1">0</td>
                  <td class="text-center" colspan="1" rowspan="1">4</td>
                </tr>
                <tr>
                  <td class="text-center" colspan="1" rowspan="1">1</td>
                  <td class="text-center" colspan="1" rowspan="1">3</td>
                </tr>
                <tr>
                  <td class="text-center" colspan="1" rowspan="1">2</td>
                  <td class="text-center" colspan="1" rowspan="1">2</td>
                </tr>
                <tr>
                  <td class="text-center" colspan="1" rowspan="1">3</td>
                  <td class="text-center" colspan="1" rowspan="1">0</td>
                </tr>
                <tr>
                  <td class="text-center" colspan="1" rowspan="1">4</td>
                  <td class="text-center" colspan="1" rowspan="1">1</td>
                </tr>
                <tr>
                  <td class="text-center" colspan="1" rowspan="1">5</td>
                  <td class="text-center" colspan="1" rowspan="1">1</td>
                </tr>
              </tbody>
            </table>
</div>
<p id="section-4.2.1.3-6"> Sorting by weight and then
 the natural sequential order
 yields the following
 distribution:<a class="pilcrow" href="#section-4.2.1.3-6">¶</a></p>
<span id="name-sorting-by-weight"></span><div id="sorting-by-weight">
<table class="center" id="table-25">
              <caption>
<a class="selfRef" href="#table-25">Table 25</a>:
<a class="selfRef" href="#name-sorting-by-weight">Sorting by Weight</a>
              </caption>
<thead>
                <tr>
                  <th class="text-center" colspan="1" rowspan="1">Literal</th>
                  <th class="text-center" colspan="1" rowspan="1">Weight</th>
                  <th class="text-center" colspan="1" rowspan="1">Number_Of_Bits</th>
                  <th class="text-center" colspan="1" rowspan="1">Prefix Codes</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="text-center" colspan="1" rowspan="1">3</td>
                  <td class="text-center" colspan="1" rowspan="1">0</td>
                  <td class="text-center" colspan="1" rowspan="1">0</td>
                  <td class="text-center" colspan="1" rowspan="1">N/A</td>
                </tr>
                <tr>
                  <td class="text-center" colspan="1" rowspan="1">4</td>
                  <td class="text-center" colspan="1" rowspan="1">1</td>
                  <td class="text-center" colspan="1" rowspan="1">4</td>
                  <td class="text-center" colspan="1" rowspan="1">0000</td>
                </tr>
                <tr>
                  <td class="text-center" colspan="1" rowspan="1">5</td>
                  <td class="text-center" colspan="1" rowspan="1">1</td>
                  <td class="text-center" colspan="1" rowspan="1">4</td>
                  <td class="text-center" colspan="1" rowspan="1">0001</td>
                </tr>
                <tr>
                  <td class="text-center" colspan="1" rowspan="1">2</td>
                  <td class="text-center" colspan="1" rowspan="1">2</td>
                  <td class="text-center" colspan="1" rowspan="1">3</td>
                  <td class="text-center" colspan="1" rowspan="1">001</td>
                </tr>
                <tr>
                  <td class="text-center" colspan="1" rowspan="1">1</td>
                  <td class="text-center" colspan="1" rowspan="1">3</td>
                  <td class="text-center" colspan="1" rowspan="1">2</td>
                  <td class="text-center" colspan="1" rowspan="1">01</td>
                </tr>
                <tr>
                  <td class="text-center" colspan="1" rowspan="1">0</td>
                  <td class="text-center" colspan="1" rowspan="1">4</td>
                  <td class="text-center" colspan="1" rowspan="1">1</td>
                  <td class="text-center" colspan="1" rowspan="1">1</td>
                </tr>
              </tbody>
            </table>
</div>
</section>
</div>
</section>
</div>
<div id="huffman_coded_streams">
<section id="section-4.2.2">
          <h4 id="name-huffman-coded-streams">
<a class="section-number selfRef" href="#section-4.2.2">4.2.2. </a><a class="section-name selfRef" href="#name-huffman-coded-streams">Huffman-Coded Streams</a>
          </h4>
<p id="section-4.2.2-1"> Given a Huffman decoding table, it is
 possible to decode a Huffman-coded
 stream.<a class="pilcrow" href="#section-4.2.2-1">¶</a></p>
<p id="section-4.2.2-2"> Each bitstream must be read backward, starting from the end and going up to
 the beginning. Therefore, it is
 necessary to know the size of each
 bitstream.<a class="pilcrow" href="#section-4.2.2-2">¶</a></p>
<p id="section-4.2.2-3"> It is also necessary to know exactly
 which bit is the last. This is
 detected by a final bit flag: the
 highest bit of the last byte is a
 final-bit-flag. Consequently, a last
 byte of 0 is not possible. And the
 final-bit-flag itself is not part of
 the useful bitstream. Hence, the last
 byte contains between 0 and 7 useful
 bits.<a class="pilcrow" href="#section-4.2.2-3">¶</a></p>
<p id="section-4.2.2-4"> Starting from the end, it is possible
 to read the bitstream in a
 little-endian fashion, keeping track
 of already used bits. Since the
 bitstream is encoded in reverse order,
 starting from the end, read symbols in
 forward order.<a class="pilcrow" href="#section-4.2.2-4">¶</a></p>
<p id="section-4.2.2-5"> For example, if the literal sequence
 "0145" was encoded using the above prefix
 code, it would be encoded (in reverse
 order) as:<a class="pilcrow" href="#section-4.2.2-5">¶</a></p>
<span id="name-literal-sequence-0145"></span><div id="coded-example">
<table class="center" id="table-26">
            <caption>
<a class="selfRef" href="#table-26">Table 26</a>:
<a class="selfRef" href="#name-literal-sequence-0145">Literal Sequence "0145"</a>
            </caption>
<thead>
              <tr>
                <th class="text-center" colspan="1" rowspan="1">Symbol</th>
                <th class="text-center" colspan="1" rowspan="1">Encoding</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">5</td>
                <td class="text-center" colspan="1" rowspan="1">0000</td>
              </tr>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">4</td>
                <td class="text-center" colspan="1" rowspan="1">0001</td>
              </tr>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">1</td>
                <td class="text-center" colspan="1" rowspan="1">01</td>
              </tr>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">0</td>
                <td class="text-center" colspan="1" rowspan="1">1</td>
              </tr>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">Padding</td>
                <td class="text-center" colspan="1" rowspan="1">00001</td>
              </tr>
            </tbody>
          </table>
</div>
<p id="section-4.2.2-7"> This results in the following 2-byte
 bitstream:<a class="pilcrow" href="#section-4.2.2-7">¶</a></p>
<div class="artwork art-text alignLeft" id="section-4.2.2-8">
<pre>  00010000 00001101
</pre><a class="pilcrow" href="#section-4.2.2-8">¶</a>
</div>
<p id="section-4.2.2-9"> Here is an alternative representation
 with the symbol codes separated by
 underscores:<a class="pilcrow" href="#section-4.2.2-9">¶</a></p>
<div class="artwork art-text alignLeft" id="section-4.2.2-10">
<pre>  0001_0000 00001_1_01
</pre><a class="pilcrow" href="#section-4.2.2-10">¶</a>
</div>
<p id="section-4.2.2-11"> Reading the highest Max_Number_of_Bits
 bits, it's possible to compare the
 extracted value to the decoding table,
 determining the symbol to decode and
 number of bits to discard.<a class="pilcrow" href="#section-4.2.2-11">¶</a></p>
<p id="section-4.2.2-12"> The process continues reading up to 
 the required number of symbols per
 stream. If a bitstream is not entirely
 and exactly consumed, hence reaching
 exactly its beginning position with
 all bits consumed, the decoding process
 is considered faulty.<a class="pilcrow" href="#section-4.2.2-12">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="comp_dict">
<section id="section-5">
      <h2 id="name-dictionary-format">
<a class="section-number selfRef" href="#section-5">5. </a><a class="section-name selfRef" href="#name-dictionary-format">Dictionary Format</a>
      </h2>
<p id="section-5-1"> Zstandard is compatible with "raw content"
     dictionaries, free of any format restriction,
     except that they must be at least 8 bytes.
     These dictionaries function as if they were just
     the content part of a formatted dictionary.<a class="pilcrow" href="#section-5-1">¶</a></p>
<p id="section-5-2"> However, dictionaries created by "zstd --train"
     in the reference implementation follow a specific
     format, described here.<a class="pilcrow" href="#section-5-2">¶</a></p>
<p id="section-5-3"> Dictionaries are not included in the compressed
     content but rather are provided out of band.
     That is, the Dictionary_ID identifies which should
     be used, but this specification does not describe
     the mechanism by which the dictionary is obtained
     prior to use during compression or
     decompression.<a class="pilcrow" href="#section-5-3">¶</a></p>
<p id="section-5-4"> A dictionary has a size, defined either by a
     buffer limit or a file size.  The general format
     is:<a class="pilcrow" href="#section-5-4">¶</a></p>
<span id="name-dictionary-general-format"></span><div id="dictionary">
<table class="center" id="table-27">
        <caption>
<a class="selfRef" href="#table-27">Table 27</a>:
<a class="selfRef" href="#name-dictionary-general-format">Dictionary General Format</a>
        </caption>
<tbody>
          <tr>
            <th class="text-left" colspan="1" rowspan="1">Magic_Number</th>
            <th class="text-left" colspan="1" rowspan="1">Dictionary_ID</th>
            <th class="text-left" colspan="1" rowspan="1">Entropy_Tables</th>
            <th class="text-left" colspan="1" rowspan="1">Content</th>
          </tr>
        </tbody>
      </table>
</div>
<span class="break"></span><dl class="dlParallel" id="section-5-6">
        <dt id="section-5-6.1">Magic_Number:</dt>
        <dd id="section-5-6.2" style="margin-left: 1.5em"> 4 bytes ID,
 value 0xEC30A437, little-endian
 format.<a class="pilcrow" href="#section-5-6.2">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-5-6.3">Dictionary_ID:</dt>
        <dd id="section-5-6.4" style="margin-left: 1.5em">
          <p id="section-5-6.4.1"> 4 bytes, stored
 in little-endian format. Dictionary_ID
 can be any value, except 0 (which
 means no Dictionary_ID). It is used by
 decoders to check if they use the
 correct dictionary. If the frame is
 going to be distributed in a private
 environment, any Dictionary_ID can be
 used. However, for public distribution
 of compressed frames, the following
 ranges are reserved and shall not be
 used:<a class="pilcrow" href="#section-5-6.4.1">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-5-6.4.2">
            <dt id="section-5-6.4.2.1"></dt>
            <dd id="section-5-6.4.2.2" style="margin-left: 1.5em">low range: &lt;= 32767<a class="pilcrow" href="#section-5-6.4.2.2">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-5-6.4.2.3"></dt>
            <dd id="section-5-6.4.2.4" style="margin-left: 1.5em">high range: &gt;= (2<sup>31</sup>)<a class="pilcrow" href="#section-5-6.4.2.4">¶</a>
</dd>
          <dd class="break"></dd>
</dl>
</dd>
        <dd class="break"></dd>
<dt id="section-5-6.5">Entropy_Tables:</dt>
        <dd id="section-5-6.6" style="margin-left: 1.5em"> Follow the
 same format as the tables in
 compressed blocks. See the relevant
 FSE and Huffman sections for how to
 decode these tables. They are stored
 in the following order: Huffman table for
 literals, FSE table for offsets, FSE
 table for match lengths, and FSE table
 for literals lengths. These tables
 populate the Repeat Stats literals
 mode and Repeat distribution mode for
 sequence decoding. It is finally
 followed by 3 offset values,
 populating repeat offsets (instead of
 using {1,4,8}), stored in order,
 4 bytes little-endian each, for a
 total of 12 bytes. Each repeat offset
 must have a value less than the
 dictionary size.<a class="pilcrow" href="#section-5-6.6">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-5-6.7">Content:</dt>
        <dd id="section-5-6.8" style="margin-left: 1.5em"> The rest of the
 dictionary is its content. The content
 acts as a "past" in front of data to be
 compressed or decompressed, so it can be
 referenced in sequence commands. As
 long as the amount of data decoded
 from this frame is less than or equal
 to Window_Size, sequence commands may
 specify offsets longer than the total
 length of decoded output so far to
 reference back to the dictionary,
 even parts of the dictionary with
 offsets larger than Window_Size.
 After the total output has surpassed
 Window_Size, however, this is no longer
 allowed, and the dictionary is no
 longer accessible.<a class="pilcrow" href="#section-5-6.8">¶</a>
</dd>
      <dd class="break"></dd>
</dl>
</section>
</div>
<div id="dict_future">
<section id="section-6">
      <h2 id="name-use-of-dictionaries">
<a class="section-number selfRef" href="#section-6">6. </a><a class="section-name selfRef" href="#name-use-of-dictionaries">Use of Dictionaries</a>
      </h2>
<p id="section-6-1"> Provisioning for use of dictionaries with zstd is being
     explored.  See, for example, <span>[<a class="xref" href="#I-D.handte-httpbis-dict-sec">DICT-SEC</a>]</span>.
     The likely outcome will be a registry of well-tested
     dictionaries optimized for different use cases and
     identifiers for each, possibly with a private negotiation
     mechanism for use of unregistered dictionaries.<a class="pilcrow" href="#section-6-1">¶</a></p>
<p id="section-6-2"> To ensure compatibility with the
     future specification of use of dictionaries with zstd
     payloads, especially with MIME, content encoded with the
     media type registered here should not use a dictionary.
     The exception to this requirement might be a private
     dictionary negotiation, suggested above, which is not part
     of this specification.<a class="pilcrow" href="#section-6-2">¶</a></p>
</section>
</div>
<div id="iana">
<section id="section-7">
      <h2 id="name-iana-considerations">
<a class="section-number selfRef" href="#section-7">7. </a><a class="section-name selfRef" href="#name-iana-considerations">IANA Considerations</a>
      </h2>
<p id="section-7-1"> IANA has updated two previously existing registrations and
                    made one new registration as described below.<a class="pilcrow" href="#section-7-1">¶</a></p>
<div id="iana_media_type">
<section id="section-7.1">
        <h3 id="name-the-application-zstd-media-">
<a class="section-number selfRef" href="#section-7.1">7.1. </a><a class="section-name selfRef" href="#name-the-application-zstd-media-">The 'application/zstd' Media Type</a>
        </h3>
<p id="section-7.1-1"> The 'application/zstd' media type identifies a
     block of data that is compressed using zstd
     compression.  The data is a stream of bytes as
     described in this document.  IANA has
     added the following to the "Media Types"
     registry:<a class="pilcrow" href="#section-7.1-1">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-7.1-2">
          <dt id="section-7.1-2.1">Type name:</dt>
          <dd id="section-7.1-2.2" style="margin-left: 1.5em">application<a class="pilcrow" href="#section-7.1-2.2">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-7.1-2.3">Subtype name:</dt>
          <dd id="section-7.1-2.4" style="margin-left: 1.5em">zstd<a class="pilcrow" href="#section-7.1-2.4">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-7.1-2.5">Required parameters:</dt>
          <dd id="section-7.1-2.6" style="margin-left: 1.5em">N/A<a class="pilcrow" href="#section-7.1-2.6">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-7.1-2.7">Optional parameters:</dt>
          <dd id="section-7.1-2.8" style="margin-left: 1.5em">N/A<a class="pilcrow" href="#section-7.1-2.8">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-7.1-2.9">Encoding considerations:</dt>
          <dd id="section-7.1-2.10" style="margin-left: 1.5em">
 binary<a class="pilcrow" href="#section-7.1-2.10">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-7.1-2.11">Security considerations:</dt>
          <dd id="section-7.1-2.12" style="margin-left: 1.5em">
     See <a class="xref" href="#security">Section 8</a> of
     RFC 8878.<a class="pilcrow" href="#section-7.1-2.12">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-7.1-2.13">Interoperability considerations:</dt>
          <dd id="section-7.1-2.14" style="margin-left: 1.5em">
 N/A<a class="pilcrow" href="#section-7.1-2.14">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-7.1-2.15">Published specification:</dt>
          <dd id="section-7.1-2.16" style="margin-left: 1.5em">
     RFC 8878<a class="pilcrow" href="#section-7.1-2.16">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-7.1-2.17">Applications which use this media type:</dt>
          <dd id="section-7.1-2.18" style="margin-left: 1.5em">
 anywhere data size is an issue<a class="pilcrow" href="#section-7.1-2.18">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-7.1-2.19">Fragment identifier considerations:</dt>
          <dd id="section-7.1-2.20" style="margin-left: 1.5em">
 No fragment identifiers are defined
 for this type.<a class="pilcrow" href="#section-7.1-2.20">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-7.1-2.21">Additional information:</dt>
          <dd id="section-7.1-2.22" style="margin-left: 1.5em">
            <p id="section-7.1-2.22.1"><br/></p>
<span class="break"></span><dl class="dlParallel dlCompact" id="section-7.1-2.22.2">
              <dt id="section-7.1-2.22.2.1">Deprecated alias names for this type:</dt>
              <dd id="section-7.1-2.22.2.2" style="margin-left: 1.5em">
 N/A<a class="pilcrow" href="#section-7.1-2.22.2.2">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-7.1-2.22.2.3">Magic number(s):</dt>
              <dd id="section-7.1-2.22.2.4" style="margin-left: 1.5em">
 4 bytes, little-endian format. Value: 0xFD2FB528<a class="pilcrow" href="#section-7.1-2.22.2.4">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-7.1-2.22.2.5">File extension(s):</dt>
              <dd id="section-7.1-2.22.2.6" style="margin-left: 1.5em">
 zst<a class="pilcrow" href="#section-7.1-2.22.2.6">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-7.1-2.22.2.7">Macintosh file type code(s):</dt>
              <dd id="section-7.1-2.22.2.8" style="margin-left: 1.5em">
 N/A<a class="pilcrow" href="#section-7.1-2.22.2.8">¶</a>
</dd>
            <dd class="break"></dd>
</dl>
</dd>
          <dd class="break"></dd>
<dt id="section-7.1-2.23">Person &amp; email address to contact for further
 information:</dt>
          <dd id="section-7.1-2.24" style="margin-left: 1.5em">Yann Collet &lt;cyan@fb.com&gt;<a class="pilcrow" href="#section-7.1-2.24">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-7.1-2.25">Intended usage:</dt>
          <dd id="section-7.1-2.26" style="margin-left: 1.5em">
 common<a class="pilcrow" href="#section-7.1-2.26">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-7.1-2.27">Restrictions on usage:</dt>
          <dd id="section-7.1-2.28" style="margin-left: 1.5em">
 N/A<a class="pilcrow" href="#section-7.1-2.28">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-7.1-2.29">Author:</dt>
          <dd id="section-7.1-2.30" style="margin-left: 1.5em">
 Murray S. Kucherawy<a class="pilcrow" href="#section-7.1-2.30">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-7.1-2.31">Change Controller:</dt>
          <dd id="section-7.1-2.32" style="margin-left: 1.5em">
 IETF<a class="pilcrow" href="#section-7.1-2.32">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-7.1-2.33">Provisional registration:</dt>
          <dd id="section-7.1-2.34" style="margin-left: 1.5em">
 no<a class="pilcrow" href="#section-7.1-2.34">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-7.1-2.35">For further information:</dt>
          <dd id="section-7.1-2.36" style="margin-left: 1.5em">
 See <span>[<a class="xref" href="#ZSTD">ZSTD</a>]</span><a class="pilcrow" href="#section-7.1-2.36">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="iana_content_encoding">
<section id="section-7.2">
        <h3 id="name-content-encoding">
<a class="section-number selfRef" href="#section-7.2">7.2. </a><a class="section-name selfRef" href="#name-content-encoding">Content Encoding</a>
        </h3>
<p id="section-7.2-1"> IANA has added the following entry
     to the "HTTP Content Coding Registry"
     within the "Hypertext Transfer Protocol (HTTP)
     Parameters" registry:<a class="pilcrow" href="#section-7.2-1">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-7.2-2">
          <dt id="section-7.2-2.1">Name:</dt>
          <dd id="section-7.2-2.2" style="margin-left: 1.5em"> zstd<a class="pilcrow" href="#section-7.2-2.2">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-7.2-2.3">Description:</dt>
          <dd id="section-7.2-2.4" style="margin-left: 1.5em"> A stream of bytes
 compressed using the Zstandard
 protocol<a class="pilcrow" href="#section-7.2-2.4">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-7.2-2.5">Reference:</dt>
          <dd id="section-7.2-2.6" style="margin-left: 1.5em">
   RFC 8878<a class="pilcrow" href="#section-7.2-2.6">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="iana_suffix">
<section id="section-7.3">
        <h3 id="name-structured-syntax-suffix">
<a class="section-number selfRef" href="#section-7.3">7.3. </a><a class="section-name selfRef" href="#name-structured-syntax-suffix">Structured Syntax Suffix</a>
        </h3>
<p id="section-7.3-1"> IANA has registered the following
     into the "Structured Syntax Suffix"
     registry:<a class="pilcrow" href="#section-7.3-1">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-7.3-2">
          <dt id="section-7.3-2.1">Name:</dt>
          <dd id="section-7.3-2.2" style="margin-left: 1.5em"> Zstandard<a class="pilcrow" href="#section-7.3-2.2">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-7.3-2.3">+suffix:</dt>
          <dd id="section-7.3-2.4" style="margin-left: 1.5em"> +zstd<a class="pilcrow" href="#section-7.3-2.4">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-7.3-2.5">Encoding Considerations:</dt>
          <dd id="section-7.3-2.6" style="margin-left: 1.5em">
 binary<a class="pilcrow" href="#section-7.3-2.6">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-7.3-2.7">Interoperability Considerations:</dt>
          <dd id="section-7.3-2.8" style="margin-left: 1.5em">
 N/A<a class="pilcrow" href="#section-7.3-2.8">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-7.3-2.9">Fragment Identifier Considerations:</dt>
          <dd id="section-7.3-2.10" style="margin-left: 1.5em">
 The syntax and semantics of fragment
 identifiers specified for +zstd should
 be as specified for 'application/zstd'.<a class="pilcrow" href="#section-7.3-2.10">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-7.3-2.11">Security Considerations:</dt>
          <dd id="section-7.3-2.12" style="margin-left: 1.5em">
          See <a class="xref" href="#security">Section 8</a> of
   RFC 8878.<a class="pilcrow" href="#section-7.3-2.12">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-7.3-2.13">Contact:</dt>
          <dd id="section-7.3-2.14" style="margin-left: 1.5em">
          Refer to the author for the
          'application/zstd' media type.<a class="pilcrow" href="#section-7.3-2.14">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-7.3-2.15">Author/Change Controller:</dt>
          <dd id="section-7.3-2.16" style="margin-left: 1.5em">
          IETF<a class="pilcrow" href="#section-7.3-2.16">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="iana_dict">
<section id="section-7.4">
        <h3 id="name-dictionaries">
<a class="section-number selfRef" href="#section-7.4">7.4. </a><a class="section-name selfRef" href="#name-dictionaries">Dictionaries</a>
        </h3>
<p id="section-7.4-1"> Work in progress includes
     development of dictionaries that will optimize
     compression and decompression of particular
     types of data.  Specification of such
     dictionaries for public use will necessitate
     registration of a code point from the reserved
     range described in
     <a class="xref" href="#comp_dictionary_id">Section 3.1.1.1.3</a> and its
     association with a specific dictionary.<a class="pilcrow" href="#section-7.4-1">¶</a></p>
<p id="section-7.4-2"> At present, there are no such dictionaries
     published for public use, so this document
     has made
     no immediate request of IANA to create such a
     registry.<a class="pilcrow" href="#section-7.4-2">¶</a></p>
</section>
</div>
</section>
</div>
<div id="security">
<section id="section-8">
      <h2 id="name-security-considerations">
<a class="section-number selfRef" href="#section-8">8. </a><a class="section-name selfRef" href="#name-security-considerations">Security Considerations</a>
      </h2>
<p id="section-8-1"> Any data-compression method involves the reduction of
     redundancy in the data.  Zstandard is no exception,
     and the usual precautions apply.<a class="pilcrow" href="#section-8-1">¶</a></p>
<p id="section-8-2"> One should never compress a message whose
     content must remain secret with a message generated by
     a third party.  Such a compression can be used to guess the
     content of the secret message through analysis of
     entropy reduction.  

                    This was demonstrated in the Compression Ratio 
   Info-leak Made Easy (CRIME) attack <span>[<a class="xref" href="#CRIME">CRIME</a>]</span>, for example.<a class="pilcrow" href="#section-8-2">¶</a></p>
<p id="section-8-3"> A decoder has to demonstrate capabilities to detect
     and prevent any kind of data tampering in the compressed
     frame from triggering system faults, such as reading or
     writing beyond allowed memory ranges.  This can be
     guaranteed by either the implementation language
     or careful bound checkings.  Of particular note is the
     encoding of Number_of_Sequences values that cause the
     decoder to read into the block header (and beyond), as
     well as the indication of a Frame_Content_Size that is
     smaller than the actual decompressed data, in an attempt
     to trigger a buffer overflow.  It is highly recommended
     to fuzz-test (i.e., provide invalid, unexpected, or
     random input and verify safe operation of) decoder
     implementations to test and harden their capability to
     detect bad frames and deal with them without any adverse
     system side effect.<a class="pilcrow" href="#section-8-3">¶</a></p>
<p id="section-8-4"> An attacker may provide correctly formed compressed frames
     with unreasonable memory requirements.  A decoder must
     always control memory requirements and enforce some
     (system-specific) limits in order to protect memory usage
     from such scenarios.<a class="pilcrow" href="#section-8-4">¶</a></p>
<p id="section-8-5"> Compression can be optimized by training a dictionary
     on a variety of related content payloads.  This dictionary
     must then be available at the decoder for decompression
     of the payload to be possible.  While this document does
     not specify how to acquire a dictionary for a given
     compressed payload, it is worth noting that third-party
     dictionaries may interact unexpectedly with a decoder,
     leading to possible memory or other resource-exhaustion
     attacks.  We expect such topics to be discussed in further
     detail in the Security Considerations section of a
     forthcoming RFC for dictionary acquisition and
     transmission, but highlight this issue now out of an
     abundance of caution.<a class="pilcrow" href="#section-8-5">¶</a></p>
<p id="section-8-6"> As discussed in <a class="xref" href="#comp_skippable">Section 3.1.2</a>, it is
     possible to store arbitrary user metadata in skippable
     frames.  While such frames are ignored during decompression
     of the data, they can be used as a watermark to track
     the path of the compressed payload.<a class="pilcrow" href="#section-8-6">¶</a></p>
</section>
</div>
<section id="section-9">
      <h2 id="name-references">
<a class="section-number selfRef" href="#section-9">9. </a><a class="section-name selfRef" href="#name-references">References</a>
      </h2>
<section id="section-9.1">
        <h3 id="name-normative-references">
<a class="section-number selfRef" href="#section-9.1">9.1. </a><a class="section-name selfRef" href="#name-normative-references">Normative References</a>
        </h3>
<dl class="references">
<dt id="ZSTD">[ZSTD]</dt>
      <dd>
<span class="refTitle">"Zstandard"</span>, <span>&lt;<a href="http://www.zstd.net">http://www.zstd.net</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-9.2">
        <h3 id="name-informative-references">
<a class="section-number selfRef" href="#section-9.2">9.2. </a><a class="section-name selfRef" href="#name-informative-references">Informative References</a>
        </h3>
<dl class="references">
<dt id="ANS">[ANS]</dt>
        <dd>
<span class="refAuthor">Duda, J.</span>, <span class="refTitle">"Asymmetric numeral systems: entropy coding combining speed of Huffman coding with compression rate of arithmetic coding"</span>, <time class="refDate" datetime="2014-01">January 2014</time>, <span>&lt;<a href="https://arxiv.org/pdf/1311.2540">https://arxiv.org/pdf/1311.2540</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="CRIME">[CRIME]</dt>
        <dd>
<span class="refTitle">"CRIME"</span>, <time class="refDate" datetime="2018-06">June 2018</time>, <span>&lt;<a href="https://en.wikipedia.org/w/index.php?title=CRIME&amp;oldid=844538656">https://en.wikipedia.org/w/index.php?title=CRIME&amp;oldid=844538656</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.handte-httpbis-dict-sec">[DICT-SEC]</dt>
        <dd>
<span class="refAuthor">Handte, F.</span>, <span class="refTitle">"Security Considerations Regarding Compression Dictionaries"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-handte-httpbis-dict-sec-00</span>, <time class="refDate" datetime="2019-10-29">29 October 2019</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-handte-httpbis-dict-sec-00">https://tools.ietf.org/html/draft-handte-httpbis-dict-sec-00</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="Err5786">[Err5786]</dt>
        <dd>
<span class="refAuthor">RFC Errata</span>, <span class="refTitle">"Erratum ID 5786"</span>, <span class="refContent">RFC 8478</span>, <span>&lt;<a href="https://www.rfc-editor.org/errata/eid5786">https://www.rfc-editor.org/errata/eid5786</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="Err6303">[Err6303]</dt>
        <dd>
<span class="refAuthor">RFC Errata</span>, <span class="refTitle">"Erratum ID 6303"</span>, <span class="refContent">RFC 8478</span>, <span>&lt;<a href="https://www.rfc-editor.org/errata/eid6303">https://www.rfc-editor.org/errata/eid6303</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="FSE">[FSE]</dt>
        <dd>
<span class="refTitle">"FiniteStateEntropy"</span>, <span class="refContent">commit 12a533a</span>, <time class="refDate" datetime="2020-07">July 2020</time>, <span>&lt;<a href="https://github.com/Cyan4973/FiniteStateEntropy/">https://github.com/Cyan4973/FiniteStateEntropy/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="LZ4">[LZ4]</dt>
        <dd>
<span class="refTitle">"LZ4 Frame Format Description"</span>, <span class="refContent">commit ec735ac</span>, <time class="refDate" datetime="2019-01">January 2019</time>, <span>&lt;<a href="https://github.com/lz4/lz4/blob/master/doc/lz4_Frame_format.md">https://github.com/lz4/lz4/blob/master/doc/lz4_Frame_format.md</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC1952">[RFC1952]</dt>
        <dd>
<span class="refAuthor">Deutsch, P.</span>, <span class="refTitle">"GZIP file format specification version 4.3"</span>, <span class="seriesInfo">RFC 1952</span>, <span class="seriesInfo">DOI 10.17487/RFC1952</span>, <time class="refDate" datetime="1996-05">May 1996</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc1952">https://www.rfc-editor.org/info/rfc1952</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="XXHASH">[XXHASH]</dt>
      <dd>
<span class="refTitle">"xxHash"</span>, <span>&lt;<a href="http://www.xxhash.org">http://www.xxhash.org</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="app_tables">
<section id="section-appendix.a">
      <h2 id="name-decoding-tables-for-predefi">
<a class="section-number selfRef" href="#section-appendix.a">Appendix A. </a><a class="section-name selfRef" href="#name-decoding-tables-for-predefi">Decoding Tables for Predefined Codes</a>
      </h2>
<p id="section-appendix.a-1"> This appendix contains FSE decoding tables for the
     predefined literals length, match length, and offset codes.

     The tables have been constructed using the algorithm as
     given above in <a class="xref" href="#comp_fse_table">Section 4.1.1</a>. The tables here can be used as examples
     to crosscheck that an implementation has built its decoding
     tables correctly.<a class="pilcrow" href="#section-appendix.a-1">¶</a></p>
<div id="app_tables_literal">
<section id="section-a.1">
        <h2 id="name-literals-length-code-table">
<a class="section-number selfRef" href="#section-a.1">A.1. </a><a class="section-name selfRef" href="#name-literals-length-code-table">Literals Length Code Table</a>
        </h2>
<span id="name-literals-length-code"></span><div id="lit-length-code">
<table class="center" id="table-28">
          <caption>
<a class="selfRef" href="#table-28">Table 28</a>:
<a class="selfRef" href="#name-literals-length-code">Literals Length Code</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" colspan="1" rowspan="1">State</th>
              <th class="text-left" colspan="1" rowspan="1">Symbol</th>
              <th class="text-left" colspan="1" rowspan="1">Number_Of_Bits</th>
              <th class="text-left" colspan="1" rowspan="1">Base</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">0</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">0</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
              <td class="text-center" colspan="1" rowspan="1">4</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">1</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
              <td class="text-center" colspan="1" rowspan="1">4</td>
              <td class="text-center" colspan="1" rowspan="1">16</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">2</td>
              <td class="text-center" colspan="1" rowspan="1">1</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">3</td>
              <td class="text-center" colspan="1" rowspan="1">3</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">4</td>
              <td class="text-center" colspan="1" rowspan="1">4</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">7</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">7</td>
              <td class="text-center" colspan="1" rowspan="1">9</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">8</td>
              <td class="text-center" colspan="1" rowspan="1">10</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">9</td>
              <td class="text-center" colspan="1" rowspan="1">12</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">10</td>
              <td class="text-center" colspan="1" rowspan="1">14</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">11</td>
              <td class="text-center" colspan="1" rowspan="1">16</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">12</td>
              <td class="text-center" colspan="1" rowspan="1">18</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">13</td>
              <td class="text-center" colspan="1" rowspan="1">19</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">14</td>
              <td class="text-center" colspan="1" rowspan="1">21</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">15</td>
              <td class="text-center" colspan="1" rowspan="1">22</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">16</td>
              <td class="text-center" colspan="1" rowspan="1">24</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">17</td>
              <td class="text-center" colspan="1" rowspan="1">25</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">18</td>
              <td class="text-center" colspan="1" rowspan="1">26</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">19</td>
              <td class="text-center" colspan="1" rowspan="1">27</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">20</td>
              <td class="text-center" colspan="1" rowspan="1">29</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">21</td>
              <td class="text-center" colspan="1" rowspan="1">31</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">22</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
              <td class="text-center" colspan="1" rowspan="1">4</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">23</td>
              <td class="text-center" colspan="1" rowspan="1">1</td>
              <td class="text-center" colspan="1" rowspan="1">4</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">24</td>
              <td class="text-center" colspan="1" rowspan="1">2</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">25</td>
              <td class="text-center" colspan="1" rowspan="1">4</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">26</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">27</td>
              <td class="text-center" colspan="1" rowspan="1">7</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">28</td>
              <td class="text-center" colspan="1" rowspan="1">8</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">29</td>
              <td class="text-center" colspan="1" rowspan="1">10</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">30</td>
              <td class="text-center" colspan="1" rowspan="1">11</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">31</td>
              <td class="text-center" colspan="1" rowspan="1">13</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">32</td>
              <td class="text-center" colspan="1" rowspan="1">16</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">33</td>
              <td class="text-center" colspan="1" rowspan="1">17</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">34</td>
              <td class="text-center" colspan="1" rowspan="1">19</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">35</td>
              <td class="text-center" colspan="1" rowspan="1">20</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">36</td>
              <td class="text-center" colspan="1" rowspan="1">22</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">37</td>
              <td class="text-center" colspan="1" rowspan="1">23</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">38</td>
              <td class="text-center" colspan="1" rowspan="1">25</td>
              <td class="text-center" colspan="1" rowspan="1">4</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">39</td>
              <td class="text-center" colspan="1" rowspan="1">25</td>
              <td class="text-center" colspan="1" rowspan="1">4</td>
              <td class="text-center" colspan="1" rowspan="1">16</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">40</td>
              <td class="text-center" colspan="1" rowspan="1">26</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">41</td>
              <td class="text-center" colspan="1" rowspan="1">28</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">42</td>
              <td class="text-center" colspan="1" rowspan="1">30</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">43</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
              <td class="text-center" colspan="1" rowspan="1">4</td>
              <td class="text-center" colspan="1" rowspan="1">48</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">44</td>
              <td class="text-center" colspan="1" rowspan="1">1</td>
              <td class="text-center" colspan="1" rowspan="1">4</td>
              <td class="text-center" colspan="1" rowspan="1">16</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">45</td>
              <td class="text-center" colspan="1" rowspan="1">2</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">46</td>
              <td class="text-center" colspan="1" rowspan="1">3</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">47</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">48</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">49</td>
              <td class="text-center" colspan="1" rowspan="1">8</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">50</td>
              <td class="text-center" colspan="1" rowspan="1">9</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">51</td>
              <td class="text-center" colspan="1" rowspan="1">11</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">52</td>
              <td class="text-center" colspan="1" rowspan="1">12</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">53</td>
              <td class="text-center" colspan="1" rowspan="1">15</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">54</td>
              <td class="text-center" colspan="1" rowspan="1">17</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">55</td>
              <td class="text-center" colspan="1" rowspan="1">18</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">56</td>
              <td class="text-center" colspan="1" rowspan="1">20</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">57</td>
              <td class="text-center" colspan="1" rowspan="1">21</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">58</td>
              <td class="text-center" colspan="1" rowspan="1">23</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">59</td>
              <td class="text-center" colspan="1" rowspan="1">24</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">60</td>
              <td class="text-center" colspan="1" rowspan="1">35</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">61</td>
              <td class="text-center" colspan="1" rowspan="1">34</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">62</td>
              <td class="text-center" colspan="1" rowspan="1">33</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">63</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
          </tbody>
        </table>
</div>
</section>
</div>
<div id="app_tables_match">
<section id="section-a.2">
        <h2 id="name-match-length-code-table">
<a class="section-number selfRef" href="#section-a.2">A.2. </a><a class="section-name selfRef" href="#name-match-length-code-table">Match Length Code Table</a>
        </h2>
<span id="name-match-length-code-table-2"></span><div id="match-length">
<table class="center" id="table-29">
          <caption>
<a class="selfRef" href="#table-29">Table 29</a>:
<a class="selfRef" href="#name-match-length-code-table-2">Match Length Code Table</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" colspan="1" rowspan="1">State</th>
              <th class="text-left" colspan="1" rowspan="1">Symbol</th>
              <th class="text-left" colspan="1" rowspan="1">Number_Of_Bits</th>
              <th class="text-left" colspan="1" rowspan="1">Base</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">0</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">0</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">1</td>
              <td class="text-center" colspan="1" rowspan="1">1</td>
              <td class="text-center" colspan="1" rowspan="1">4</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">2</td>
              <td class="text-center" colspan="1" rowspan="1">2</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">3</td>
              <td class="text-center" colspan="1" rowspan="1">3</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">4</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">8</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">7</td>
              <td class="text-center" colspan="1" rowspan="1">10</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">8</td>
              <td class="text-center" colspan="1" rowspan="1">13</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">9</td>
              <td class="text-center" colspan="1" rowspan="1">16</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">10</td>
              <td class="text-center" colspan="1" rowspan="1">19</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">11</td>
              <td class="text-center" colspan="1" rowspan="1">22</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">12</td>
              <td class="text-center" colspan="1" rowspan="1">25</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">13</td>
              <td class="text-center" colspan="1" rowspan="1">28</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">14</td>
              <td class="text-center" colspan="1" rowspan="1">31</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">15</td>
              <td class="text-center" colspan="1" rowspan="1">33</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">16</td>
              <td class="text-center" colspan="1" rowspan="1">35</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">17</td>
              <td class="text-center" colspan="1" rowspan="1">37</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">18</td>
              <td class="text-center" colspan="1" rowspan="1">39</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">19</td>
              <td class="text-center" colspan="1" rowspan="1">41</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">20</td>
              <td class="text-center" colspan="1" rowspan="1">43</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">21</td>
              <td class="text-center" colspan="1" rowspan="1">45</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">22</td>
              <td class="text-center" colspan="1" rowspan="1">1</td>
              <td class="text-center" colspan="1" rowspan="1">4</td>
              <td class="text-center" colspan="1" rowspan="1">16</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">23</td>
              <td class="text-center" colspan="1" rowspan="1">2</td>
              <td class="text-center" colspan="1" rowspan="1">4</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">24</td>
              <td class="text-center" colspan="1" rowspan="1">3</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">25</td>
              <td class="text-center" colspan="1" rowspan="1">4</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">26</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">27</td>
              <td class="text-center" colspan="1" rowspan="1">7</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">28</td>
              <td class="text-center" colspan="1" rowspan="1">9</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">29</td>
              <td class="text-center" colspan="1" rowspan="1">12</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">30</td>
              <td class="text-center" colspan="1" rowspan="1">15</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">31</td>
              <td class="text-center" colspan="1" rowspan="1">18</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">32</td>
              <td class="text-center" colspan="1" rowspan="1">21</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">33</td>
              <td class="text-center" colspan="1" rowspan="1">24</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">34</td>
              <td class="text-center" colspan="1" rowspan="1">27</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">35</td>
              <td class="text-center" colspan="1" rowspan="1">30</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">36</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">37</td>
              <td class="text-center" colspan="1" rowspan="1">34</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">38</td>
              <td class="text-center" colspan="1" rowspan="1">36</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">39</td>
              <td class="text-center" colspan="1" rowspan="1">38</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">40</td>
              <td class="text-center" colspan="1" rowspan="1">40</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">41</td>
              <td class="text-center" colspan="1" rowspan="1">42</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">42</td>
              <td class="text-center" colspan="1" rowspan="1">44</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">43</td>
              <td class="text-center" colspan="1" rowspan="1">1</td>
              <td class="text-center" colspan="1" rowspan="1">4</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">44</td>
              <td class="text-center" colspan="1" rowspan="1">1</td>
              <td class="text-center" colspan="1" rowspan="1">4</td>
              <td class="text-center" colspan="1" rowspan="1">48</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">45</td>
              <td class="text-center" colspan="1" rowspan="1">2</td>
              <td class="text-center" colspan="1" rowspan="1">4</td>
              <td class="text-center" colspan="1" rowspan="1">16</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">46</td>
              <td class="text-center" colspan="1" rowspan="1">4</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">47</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">48</td>
              <td class="text-center" colspan="1" rowspan="1">7</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">49</td>
              <td class="text-center" colspan="1" rowspan="1">8</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">32</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">50</td>
              <td class="text-center" colspan="1" rowspan="1">11</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">51</td>
              <td class="text-center" colspan="1" rowspan="1">14</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">52</td>
              <td class="text-center" colspan="1" rowspan="1">17</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">53</td>
              <td class="text-center" colspan="1" rowspan="1">20</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">54</td>
              <td class="text-center" colspan="1" rowspan="1">23</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">55</td>
              <td class="text-center" colspan="1" rowspan="1">26</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">56</td>
              <td class="text-center" colspan="1" rowspan="1">29</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">57</td>
              <td class="text-center" colspan="1" rowspan="1">52</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">58</td>
              <td class="text-center" colspan="1" rowspan="1">51</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">59</td>
              <td class="text-center" colspan="1" rowspan="1">50</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">60</td>
              <td class="text-center" colspan="1" rowspan="1">49</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">61</td>
              <td class="text-center" colspan="1" rowspan="1">48</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">62</td>
              <td class="text-center" colspan="1" rowspan="1">47</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">63</td>
              <td class="text-center" colspan="1" rowspan="1">46</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
          </tbody>
        </table>
</div>
</section>
</div>
<div id="app_tables_offset">
<section id="section-a.3">
        <h2 id="name-offset-code-table">
<a class="section-number selfRef" href="#section-a.3">A.3. </a><a class="section-name selfRef" href="#name-offset-code-table">Offset Code Table</a>
        </h2>
<span id="name-offset-code"></span><div id="offset-code">
<table class="center" id="table-30">
          <caption>
<a class="selfRef" href="#table-30">Table 30</a>:
<a class="selfRef" href="#name-offset-code">Offset Code</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" colspan="1" rowspan="1">State</th>
              <th class="text-left" colspan="1" rowspan="1">Symbol</th>
              <th class="text-left" colspan="1" rowspan="1">Number_Of_Bits</th>
              <th class="text-left" colspan="1" rowspan="1">Base</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">0</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">0</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">1</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">4</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">2</td>
              <td class="text-center" colspan="1" rowspan="1">9</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">3</td>
              <td class="text-center" colspan="1" rowspan="1">15</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">4</td>
              <td class="text-center" colspan="1" rowspan="1">21</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">3</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">7</td>
              <td class="text-center" colspan="1" rowspan="1">4</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">7</td>
              <td class="text-center" colspan="1" rowspan="1">12</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">8</td>
              <td class="text-center" colspan="1" rowspan="1">18</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">9</td>
              <td class="text-center" colspan="1" rowspan="1">23</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">10</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">11</td>
              <td class="text-center" colspan="1" rowspan="1">8</td>
              <td class="text-center" colspan="1" rowspan="1">4</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">12</td>
              <td class="text-center" colspan="1" rowspan="1">14</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">13</td>
              <td class="text-center" colspan="1" rowspan="1">20</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">14</td>
              <td class="text-center" colspan="1" rowspan="1">2</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">15</td>
              <td class="text-center" colspan="1" rowspan="1">7</td>
              <td class="text-center" colspan="1" rowspan="1">4</td>
              <td class="text-center" colspan="1" rowspan="1">16</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">16</td>
              <td class="text-center" colspan="1" rowspan="1">11</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">17</td>
              <td class="text-center" colspan="1" rowspan="1">17</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">18</td>
              <td class="text-center" colspan="1" rowspan="1">22</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">19</td>
              <td class="text-center" colspan="1" rowspan="1">4</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">20</td>
              <td class="text-center" colspan="1" rowspan="1">8</td>
              <td class="text-center" colspan="1" rowspan="1">4</td>
              <td class="text-center" colspan="1" rowspan="1">16</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">21</td>
              <td class="text-center" colspan="1" rowspan="1">13</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">22</td>
              <td class="text-center" colspan="1" rowspan="1">19</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">23</td>
              <td class="text-center" colspan="1" rowspan="1">1</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">24</td>
              <td class="text-center" colspan="1" rowspan="1">6</td>
              <td class="text-center" colspan="1" rowspan="1">4</td>
              <td class="text-center" colspan="1" rowspan="1">16</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">25</td>
              <td class="text-center" colspan="1" rowspan="1">10</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">26</td>
              <td class="text-center" colspan="1" rowspan="1">16</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">27</td>
              <td class="text-center" colspan="1" rowspan="1">28</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">28</td>
              <td class="text-center" colspan="1" rowspan="1">27</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">29</td>
              <td class="text-center" colspan="1" rowspan="1">26</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">30</td>
              <td class="text-center" colspan="1" rowspan="1">25</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td class="text-center" colspan="1" rowspan="1">31</td>
              <td class="text-center" colspan="1" rowspan="1">24</td>
              <td class="text-center" colspan="1" rowspan="1">5</td>
              <td class="text-center" colspan="1" rowspan="1">0</td>
            </tr>
          </tbody>
        </table>
</div>
</section>
</div>
</section>
</div>
<div id="changes">
<section id="section-appendix.b">
      <h2 id="name-changes-since-rfc-8478">
<a class="section-number selfRef" href="#section-appendix.b">Appendix B. </a><a class="section-name selfRef" href="#name-changes-since-rfc-8478">Changes since RFC 8478</a>
      </h2>
<p id="section-appendix.b-1"> The following are the changes in this document relative
      to RFC 8478:<a class="pilcrow" href="#section-appendix.b-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-appendix.b-2.1"> Applied errata <span>[<a class="xref" href="#Err5786">Err5786</a>]</span> and <span>[<a class="xref" href="#Err6303">Err6303</a>]</span>.<a class="pilcrow" href="#section-appendix.b-2.1">¶</a>
</li>
        <li class="normal" id="section-appendix.b-2.2">
      Clarified forward compatibility regarding dictionaries.<a class="pilcrow" href="#section-appendix.b-2.2">¶</a>
</li>
        <li class="normal" id="section-appendix.b-2.3">
      Clarified application of Block_Maximum_Size.<a class="pilcrow" href="#section-appendix.b-2.3">¶</a>
</li>
        <li class="normal" id="section-appendix.b-2.4"> Added
      structured media type suffix registration.<a class="pilcrow" href="#section-appendix.b-2.4">¶</a>
</li>
        <li class="normal" id="section-appendix.b-2.5"> Clarified
      that the content checksum is always 4 bytes.<a class="pilcrow" href="#section-appendix.b-2.5">¶</a>
</li>
        <li class="normal" id="section-appendix.b-2.6"> Clarified
      handling of reserved and corrupt inputs.<a class="pilcrow" href="#section-appendix.b-2.6">¶</a>
</li>
        <li class="normal" id="section-appendix.b-2.7"> Added fragment
      identifier considerations to the media type registration.<a class="pilcrow" href="#section-appendix.b-2.7">¶</a>
</li>
      </ul>
</section>
</div>
<div id="ack">
<section id="section-appendix.c">
      <h2 id="name-acknowledgments">
<a class="section-name selfRef" href="#name-acknowledgments">Acknowledgments</a>
      </h2>
<p id="section-appendix.c-1">zstd was
      developed by <span class="contact-name">Yann Collet</span>.<a class="pilcrow" href="#section-appendix.c-1">¶</a></p>
<p id="section-appendix.c-2"><span class="contact-name">Felix       Handte</span> and <span class="contact-name">Nick Terrell</span> provided
      feedback that went into this revision and RFC 8478.  RFC 8478
      also received contributions from <span class="contact-name">Bobo       Bose-Kolanu</span>, <span class="contact-name">Kyle Nekritz</span>, and
      <span class="contact-name">David Schleimer</span>.<a class="pilcrow" href="#section-appendix.c-2">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="section-appendix.d">
      <h2 id="name-authors-addresses">
<a class="section-name selfRef" href="#name-authors-addresses">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Yann Collet</span></div>
<div class="left" dir="auto"><span class="org">Facebook</span></div>
<div class="left" dir="auto"><span class="street-address">1 Hacker Way</span></div>
<div class="left" dir="auto">
<span class="locality">Menlo Park</span>, <span class="region">CA</span> <span class="postal-code">94025</span>
</div>
<div class="left" dir="auto"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:cyan@fb.com">cyan@fb.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Murray S. Kucherawy (<span class="role">editor</span>)</span></div>
<div class="left" dir="auto"><span class="org">Facebook</span></div>
<div class="left" dir="auto"><span class="street-address">1 Hacker Way</span></div>
<div class="left" dir="auto">
<span class="locality">Menlo Park</span>, <span class="region">CA</span> <span class="postal-code">94025</span>
</div>
<div class="left" dir="auto"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:msk@fb.com">msk@fb.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>


</body></html>