<html><head></head><body><pre>Network Working Group                                        A. Johnston
Request for Comments: 4317                             Tello Corporation
Category: Informational                                        R. Sparks
                                                        Estacado Systems
                                                           December 2005


                   <span class="h1">Session Description Protocol (SDP)</span>
                         <span class="h1">Offer/Answer Examples</span>

Status of this Memo

   This memo provides information for the Internet community.  It does
   not specify an Internet standard of any kind.  Distribution of this
   memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (2005).

Abstract

   This document gives examples of Session Description Protocol (SDP)
   offer/answer exchanges.  Examples include codec negotiation and
   selection, hold and resume, and addition and deletion of media
   streams.  The examples show multiple media types, bidirectional,
   unidirectional, inactive streams, and dynamic payload types.  Common
   Third Party Call Control (3pcc) examples are also given.























<span class="grey">Johnston &amp; Sparks            Informational                      [Page 1]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-2"></span>
<span class="grey"><a href="./rfc4317">RFC 4317</a>               SDP Offer/Answer Examples           December 2005</span>


Table of Contents

   <a href="#section-1">1</a>. Overview ........................................................<a href="#page-3">3</a>
   <a href="#section-2">2</a>. Codec Negotiation and Selection .................................<a href="#page-3">3</a>
      <a href="#section-2.1">2.1</a>. Audio and Video 1 ..........................................<a href="#page-3">3</a>
      <a href="#section-2.2">2.2</a>. Audio and Video 2 ..........................................<a href="#page-4">4</a>
      <a href="#section-2.3">2.3</a>. Audio and Video 3 ..........................................<a href="#page-5">5</a>
      <a href="#section-2.4">2.4</a>. Two Audio Streams ..........................................<a href="#page-6">6</a>
      <a href="#section-2.5">2.5</a>. Audio and Video 4 ..........................................<a href="#page-7">7</a>
      <a href="#section-2.6">2.6</a>. Audio Only 1 ...............................................<a href="#page-8">8</a>
      <a href="#section-2.7">2.7</a>. Audio and Video 5 ..........................................<a href="#page-9">9</a>
      <a href="#section-2.8">2.8</a>. Audio and Video 6 .........................................<a href="#page-10">10</a>
   <a href="#section-3">3</a>. Hold and Resume Scenarios ......................................<a href="#page-12">12</a>
      <a href="#section-3.1">3.1</a>. Hold and Unhold 1 .........................................<a href="#page-12">12</a>
      <a href="#section-3.2">3.2</a>. Hold with Two Streams .....................................<a href="#page-13">13</a>
   <a href="#section-4">4</a>. Addition and Deletion of Media Streams .........................<a href="#page-15">15</a>
      <a href="#section-4.1">4.1</a>. Second Audio Stream Added .................................<a href="#page-15">15</a>
      <a href="#section-4.2">4.2</a>. Audio, then Video Added ...................................<a href="#page-16">16</a>
      <a href="#section-4.3">4.3</a>. Audio and Video, Then Video Deleted .......................<a href="#page-17">17</a>
   <a href="#section-5">5</a>. Third Party Call Control (3pcc) ................................<a href="#page-19">19</a>
      <a href="#section-5.1">5.1</a>. No Media, Then Audio Added ................................<a href="#page-19">19</a>
      <a href="#section-5.2">5.2</a>. Hold and Unhold 2 .........................................<a href="#page-20">20</a>
      <a href="#section-5.3">5.3</a>. Hold and Unhold 3 .........................................<a href="#page-21">21</a>
   <a href="#section-6">6</a>. Security Considerations ........................................<a href="#page-22">22</a>
   <a href="#section-7">7</a>. Informative References .........................................<a href="#page-22">22</a>


























<span class="grey">Johnston &amp; Sparks            Informational                      [Page 2]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-3"></span>
<span class="grey"><a href="./rfc4317">RFC 4317</a>               SDP Offer/Answer Examples           December 2005</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.%20%20Overview"></a><a class="selflink" href="#section-1" id="section-1">1</a>.  Overview</span>

   This document describes offer/answer examples of Session Description
   Protocol (SDP) based on <a href="./rfc3264">RFC 3264</a> [<a href="#ref-1" title='"An Offer/Answer Model with Session Description Protocol (SDP)"'>1</a>].  The SDP in these examples is
   defined by <a href="./rfc2327">RFC 2327</a> [<a href="#ref-2" title='"SDP: Session Description Protocol"'>2</a>].  The offers and answers are assumed to be
   transported using a protocol such as Session Initiation Protocol
   (SIP) [<a href="#ref-3" title='"SIP: Session Initiation Protocol"'>3</a>].

   Examples include codec negotiation and selection, hold and resume,
   and addition and deletion of media streams.  The examples show
   multiple media types, bidirectional, unidirectional, inactive
   streams, and dynamic payload types.  Common Third Party Call Control
   (3pcc) [<a href="#ref-5" title='"Best Current Practices for Third Party Call Control (3pcc) in the Session Initiation Protocol (SIP)"'>5</a>] examples are also given.

   The following sections contain examples in which two parties, Alice
   and Bob, exchange SDP offers, answers, and, in some cases, additional
   offers and answers.  Note that the subject line (s=) contains a
   single space character.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.%20%20Codec%20Negotiation%20and%20Selection"></a><a class="selflink" href="#section-2" id="section-2">2</a>.  Codec Negotiation and Selection</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.1.%20%20Audio%20and%20Video%201"></a><a class="selflink" href="#section-2.1" id="section-2.1">2.1</a>.  Audio and Video 1</span>

   This common scenario shows a video and audio session in which
   multiple codecs are offered but only one is accepted.  As a result of
   the exchange shown below, Alice and Bob may send only PCMU audio and
   MPV video.  Note: Dynamic payload type 97 is used for iLBC codec [<a href="#ref-6" title='"Real-time Transport Protocol (RTP) Payload Format for internet Low Bit Rate Codec (iLBC) Speech"'>6</a>].

    [<a id="ref-Offer">Offer</a>]

      v=0
      o=alice 2890844526 2890844526 IN IP4 host.atlanta.example.com
      s=
      c=IN IP4 host.atlanta.example.com
      t=0 0
      m=audio 49170 RTP/AVP 0 8 97
      a=rtpmap:0 PCMU/8000
      a=rtpmap:8 PCMA/8000
      a=rtpmap:97 iLBC/8000
      m=video 51372 RTP/AVP 31 32
      a=rtpmap:31 H261/90000
      a=rtpmap:32 MPV/90000









<span class="grey">Johnston &amp; Sparks            Informational                      [Page 3]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-4"></span>
<span class="grey"><a href="./rfc4317">RFC 4317</a>               SDP Offer/Answer Examples           December 2005</span>


    [<a id="ref-Answer">Answer</a>]

      v=0
      o=bob 2808844564 2808844564 IN IP4 host.biloxi.example.com
      s=
      c=IN IP4 host.biloxi.example.com
      t=0 0
      m=audio 49174 RTP/AVP 0
      a=rtpmap:0 PCMU/8000
      m=video 49170 RTP/AVP 32
      a=rtpmap:32 MPV/90000

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.2.%20%20Audio%20and%20Video%202"></a><a class="selflink" href="#section-2.2" id="section-2.2">2.2</a>.  Audio and Video 2</span>

   Alice can support PCMU, PCMA, and iLBC codecs, but not more than one
   at the same time.  Alice offers all three to maximize chances of a
   successful exchange, and Bob accepts two of them.  An audio-only
   session is established in the initial exchange between Alice and Bob,
   using either PCMU or PCMA codecs (payload type in RTP packet tells
   which is being used).  Since Alice only supports one audio codec at a
   time, a second offer is made with just that one codec, to limit the
   codec choice to just one.

   Note: the version number is incremented in both SDP messages in the
   second exchange.  After this exchange, only the PCMU codec may be
   used for media session between Alice and Bob.

   Note: The declined video stream still present in the second exchange
   of SDP with ports set to zero.

    [<a id="ref-Offer">Offer</a>]

      v=0
      o=alice 2890844526 2890844526 IN IP4 host.atlanta.example.com
      s=
      c=IN IP4 host.atlanta.example.com
      t=0 0
      m=audio 49170 RTP/AVP 0 8 97
      a=rtpmap:0 PCMU/8000
      a=rtpmap:8 PCMA/8000
      a=rtpmap:97 iLBC/8000
      m=video 51372 RTP/AVP 31 32
      a=rtpmap:31 H261/90000
      a=rtpmap:32 MPV/90000







<span class="grey">Johnston &amp; Sparks            Informational                      [Page 4]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-5"></span>
<span class="grey"><a href="./rfc4317">RFC 4317</a>               SDP Offer/Answer Examples           December 2005</span>


    [<a id="ref-Answer">Answer</a>]

      v=0
      o=bob 2808844564 2808844564 IN IP4 host.biloxi.example.com
      s=
      c=IN IP4 host.biloxi.example.com
      t=0 0
      m=audio 49172 RTP/AVP 0 8
      a=rtpmap:0 PCMU/8000
      a=rtpmap:8 PCMA/8000
      m=video 0 RTP/AVP 31
      a=rtpmap:31 H261/90000

    [<a id="ref-Second-Offer">Second-Offer</a>]

      v=0
      o=alice 2890844526 2890844527 IN IP4 host.atlanta.example.com
      s=
      c=IN IP4 host.atlanta.example.com
      t=0 0
      m=audio 51372 RTP/AVP 0
      a=rtpmap:0 PCMU/8000
      m=video 0 RTP/AVP 31
      a=rtpmap:31 H261/90000

    [<a id="ref-Second-Answer">Second-Answer</a>]

      v=0
      o=bob 2808844564 2808844565 IN IP4 host.biloxi.example.com
      s=
      c=IN IP4 host.biloxi.example.com
      t=0 0
      m=audio 49172 RTP/AVP 0
      a=rtpmap:0 PCMU/8000
      m=video 0 RTP/AVP 31
      a=rtpmap:31 H261/90000

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.3.%20%20Audio%20and%20Video%203"></a><a class="selflink" href="#section-2.3" id="section-2.3">2.3</a>.  Audio and Video 3</span>

   Alice offers three audio and two video codecs, while Bob accepts with
   a single audio and video codec.  As a result of this exchange, Bob
   and Alice use iLBC for audio and H261 for video.

   Note: change of dynamic payload type from 97 to 99 between the offer
   and the answer is OK since the same codec is referenced.






<span class="grey">Johnston &amp; Sparks            Informational                      [Page 5]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-6"></span>
<span class="grey"><a href="./rfc4317">RFC 4317</a>               SDP Offer/Answer Examples           December 2005</span>


    [<a id="ref-Offer">Offer</a>]

      v=0
      o=alice 2890844526 2890844526 IN IP4 host.atlanta.example.com
      s=
      c=IN IP4 host.atlanta.example.com
      t=0 0
      m=audio 49170 RTP/AVP 0 8 97
      a=rtpmap:0 PCMU/8000
      a=rtpmap:8 PCMA/8000
      a=rtpmap:97 iLBC/8000
      m=video 51372 RTP/AVP 31 32
      a=rtpmap:31 H261/90000
      a=rtpmap:32 MPV/90000

    [<a id="ref-Answer">Answer</a>]

      v=0
      o=bob 2808844564 2808844564 IN IP4 host.biloxi.example.com
      s=
      c=IN IP4 host.biloxi.example.com
      t=0 0
      m=audio 49172 RTP/AVP 99
      a=rtpmap:99 iLBC/8000
      m=video 51374 RTP/AVP 31
      a=rtpmap:31 H261/90000

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.4.%20%20Two%20Audio%20Streams"></a><a class="selflink" href="#section-2.4" id="section-2.4">2.4</a>.  Two Audio Streams</span>

   In this example, Alice wishes to establish separate audio streams,
   one for normal audio and the other for telephone-events.  Alice
   offers two separate streams, one audio with two codecs and the other
   with <a href="./rfc2833">RFC 2833</a> [<a href="#ref-4" title='"RTP Payload for DTMF Digits, Telephony Tones and Telephony Signals"'>4</a>] tones (for DTMF).  Bob accepts both audio streams
   choosing the iLBC codec and telephone-events.

















<span class="grey">Johnston &amp; Sparks            Informational                      [Page 6]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-7"></span>
<span class="grey"><a href="./rfc4317">RFC 4317</a>               SDP Offer/Answer Examples           December 2005</span>


    [<a id="ref-Offer">Offer</a>]

      v=0
      o=alice 2890844526 2890844526 IN IP4 host.atlanta.example.com
      s=
      c=IN IP4 host.atlanta.example.com
      t=0 0
      m=audio 49170 RTP/AVP 0 97
      a=rtpmap:0 PCMU/8000
      a=rtpmap:97 iLBC/8000
      m=audio 49172 RTP/AVP 98
      a=rtpmap:98 telephone-event/8000
      a=sendonly

    [<a id="ref-Answer">Answer</a>]

      v=0
      o=bob 2808844564 2808844564 IN IP4 host.biloxi.example.com
      s=
      c=IN IP4 host.biloxi.example.com
      t=0 0
      m=audio 49172 RTP/AVP 97
      a=rtpmap:97 iLBC/8000
      m=audio 49174 RTP/AVP 98
      a=rtpmap:98 telephone-event/8000
      a=recvonly

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.5.%20%20Audio%20and%20Video%204"></a><a class="selflink" href="#section-2.5" id="section-2.5">2.5</a>.  Audio and Video 4</span>

   Alice and Bob establish an audio and video session with a single
   audio and video codec.  In a second exchange, Bob changes his address
   for media and Alice accepts with the same SDP as the initial exchange
   (and as a result does not increment the version number).

    [<a id="ref-Offer">Offer</a>]

      v=0
      o=alice 2890844526 2890844526 IN IP4 host.atlanta.example.com
      s=
      c=IN IP4 host.atlanta.example.com
      t=0 0
      m=audio 49170 RTP/AVP 97
      a=rtpmap:97 iLBC/8000
      m=video 51372 RTP/AVP 31
      a=rtpmap:31 H261/90000






<span class="grey">Johnston &amp; Sparks            Informational                      [Page 7]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-8"></span>
<span class="grey"><a href="./rfc4317">RFC 4317</a>               SDP Offer/Answer Examples           December 2005</span>


    [<a id="ref-Answer">Answer</a>]

      v=0
      o=bob 2808844564 2808844564 IN IP4 host.biloxi.example.com
      s=
      c=IN IP4 host.biloxi.example.com
      t=0 0
      m=audio 49174 RTP/AVP 97
      a=rtpmap:97 iLBC/8000
      m=video 49170 RTP/AVP 31
      a=rtpmap:31 H261/90000

    [<a id="ref-Second-Offer">Second-Offer</a>]

      v=0
      o=bob 2808844564 2808844565 IN IP4 host.biloxi.example.com
      s=
      c=IN IP4 newhost.biloxi.example.com
      t=0 0
      m=audio 49178 RTP/AVP 97
      a=rtpmap:97 iLBC/8000
      m=video 49188 RTP/AVP 31
      a=rtpmap:31 H261/90000

    [<a id="ref-Second-Answer">Second-Answer</a>]

      v=0
      o=alice 2890844526 2890844526 IN IP4 host.atlanta.example.com
      s=
      c=IN IP4 host.atlanta.example.com
      t=0 0
      m=audio 49170 RTP/AVP 97
      a=rtpmap:97 iLBC/8000
      m=video 51372 RTP/AVP 31
      a=rtpmap:31 H261/90000

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.6.%20%20Audio%20Only%201"></a><a class="selflink" href="#section-2.6" id="section-2.6">2.6</a>.  Audio Only 1</span>

   Alice wishes to establish an audio session with Bob using either PCMU
   codec or iLBC codec with <a href="./rfc2833">RFC2833</a> tones, but not both at the same
   time.  The offer contains these two media streams.  Bob declines the
   first one and accepts the second one.  If both media streams had been
   accepted, Alice would have sent a second declining one of the
   streams, as shown in <a href="#section-4.3">Section 4.3</a>.







<span class="grey">Johnston &amp; Sparks            Informational                      [Page 8]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-9"></span>
<span class="grey"><a href="./rfc4317">RFC 4317</a>               SDP Offer/Answer Examples           December 2005</span>


    [<a id="ref-Offer">Offer</a>]

      v=0
      o=alice 2890844526 2890844526 IN IP4 host.atlanta.example.com
      s=
      c=IN IP4 host.atlanta.example.com
      t=0 0
      m=audio 49170 RTP/AVP 0
      a=rtpmap:0 PCMU/8000
      m=audio 51372 RTP/AVP 97 101
      a=rtpmap:97 iLBC/8000
      a=rtpmap:101 telephone-event/8000

    [<a id="ref-Answer">Answer</a>]

      v=0
      o=bob 2808844564 2808844564 IN IP4 host.biloxi.example.com
      s=
      c=IN IP4 host.biloxi.example.com
      t=0 0
      m=audio 0 RTP/AVP 0
      a=rtpmap:0 PCMU/8000
      m=audio 49170 RTP/AVP 97 101
      a=rtpmap:97 iLBC/8000
      a=rtpmap:101 telephone-event/8000

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.7.%20%20Audio%20and%20Video%205"></a><a class="selflink" href="#section-2.7" id="section-2.7">2.7</a>.  Audio and Video 5</span>

   Alice and Bob establish an audio and video session in the first
   exchange with a single audio and video codec.  In the second
   exchange, Alice adds a second video codec, which Bob accepts.  This
   allows Alice and Bob to switch between the two video codecs without
   another offer/answer exchange.

    [<a id="ref-Offer">Offer</a>]

      v=0
      o=alice 2890844526 2890844526 IN IP4 host.atlanta.example.com
      s=
      c=IN IP4 host.atlanta.example.com
      t=0 0
      m=audio 49170 RTP/AVP 99
      a=rtpmap:99 iLBC/8000
      m=video 51372 RTP/AVP 31
      a=rtpmap:31 H261/90000






<span class="grey">Johnston &amp; Sparks            Informational                      [Page 9]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-10"></span>
<span class="grey"><a href="./rfc4317">RFC 4317</a>               SDP Offer/Answer Examples           December 2005</span>



    [<a id="ref-Answer">Answer</a>]

      v=0
      o=bob 2808844564 2808844564 IN IP4 host.biloxi.example.com
      s=
      c=IN IP4 host.biloxi.example.com
      t=0 0
      m=audio 49172 RTP/AVP 99
      a=rtpmap:99 iLBC/8000
      m=video 51374 RTP/AVP 31
      a=rtpmap:31 H261/90000

    [<a id="ref-Second-Offer">Second-Offer</a>]

      v=0
      o=alice 2890844526 2890844527 IN IP4 host.atlanta.example.com
      s=
      c=IN IP4 host.atlanta.example.com
      t=0 0
      m=audio 49170 RTP/AVP 99
      a=rtpmap:99 iLBC/8000
      m=video 51372 RTP/AVP 31 32
      a=rtpmap:31 H261/90000
      a=rtpmap:32 MPV/90000

    [<a id="ref-Second-Answer">Second-Answer</a>]

      v=0
      o=bob 2808844564 2808844565 IN IP4 host.biloxi.example.com
      s=
      c=IN IP4 host.biloxi.example.com
      t=0 0
      m=audio 49172 RTP/AVP 99
      a=rtpmap:99 iLBC/8000
      m=video 51374 RTP/AVP 31 32
      a=rtpmap:31 H261/90000
      a=rtpmap:32 MPV/90000

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.8.%20%20Audio%20and%20Video%206"></a><a class="selflink" href="#section-2.8" id="section-2.8">2.8</a>.  Audio and Video 6</span>

   This example shows an audio and video offer that is accepted, but the
   answerer wants the video sent to a different address than that of the
   audio.  This is a common scenario in conferencing where the video and
   audio mixing utilizes different servers.  In this example, Alice
   offers audio and video, and Bob accepts.





<span class="grey">Johnston &amp; Sparks            Informational                     [Page 10]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-11"></span>
<span class="grey"><a href="./rfc4317">RFC 4317</a>               SDP Offer/Answer Examples           December 2005</span>


    [<a id="ref-Offer">Offer</a>]

      v=0
      o=alice 2890844526 2890844526 IN IP4 host.atlanta.example.com
      s=
      c=IN IP4 host.atlanta.example.com
      t=0 0
      m=audio 49170 RTP/AVP 0 8 97
      a=rtpmap:0 PCMU/8000
      a=rtpmap:8 PCMA/8000
      a=rtpmap:97 iLBC/8000
      m=video 51372 RTP/AVP 31 32
      a=rtpmap:31 H261/90000
      a=rtpmap:32 MPV/90000

    [<a id="ref-Answer">Answer</a>]

      v=0
      o=bob 2808844564 2808844564 IN IP4 host.biloxi.example.com
      s=
      c=IN IP4 host.biloxi.example.com
      t=0 0
      m=audio 49174 RTP/AVP 0
      a=rtpmap:0 PCMU/8000
      m=video 49172 RTP/AVP 32
      c=IN IP4 otherhost.biloxi.example.com
      a=rtpmap:32 MPV/90000
























<span class="grey">Johnston &amp; Sparks            Informational                     [Page 11]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-12"></span>
<span class="grey"><a href="./rfc4317">RFC 4317</a>               SDP Offer/Answer Examples           December 2005</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.%20%20Hold%20and%20Resume%20Scenarios"></a><a class="selflink" href="#section-3" id="section-3">3</a>.  Hold and Resume Scenarios</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.1.%20%20Hold%20and%20Unhold%201"></a><a class="selflink" href="#section-3.1" id="section-3.1">3.1</a>.  Hold and Unhold 1</span>

   Alice calls Bob, but when Bob answers he places Alice on hold.  Bob
   then takes Alice off hold in the second offer.  Alice changes port
   number in the second exchange.  The media session between Alice and
   Bob is now active after Alice's second answer.  Note that a=sendrecv
   could be present in both second offer and answer exchange.  This is a
   common flow in 3pcc [<a href="#ref-5" title='"Best Current Practices for Third Party Call Control (3pcc) in the Session Initiation Protocol (SIP)"'>5</a>] scenarios.

    [<a id="ref-Offer">Offer</a>]

      v=0
      o=alice 2890844526 2890844526 IN IP4 host.atlanta.example.com
      s=
      c=IN IP4 host.atlanta.example.com
      t=0 0
      m=audio 49170 RTP/AVP 0 97
      a=rtpmap:0 PCMU/8000
      a=rtpmap:97 iLBC/8000

    [<a id="ref-Answer">Answer</a>]

      v=0
      o=bob 2808844564 2808844564 IN IP4 host.biloxi.example.com
      s=
      c=IN IP4 placeholder.biloxi.example.com
      t=0 0
      m=audio 49172 RTP/AVP 97
      a=rtpmap:97 iLBC/8000
      a=sendonly

    [<a id="ref-Second-Offer">Second-Offer</a>]

      v=0
      o=bob 2808844564 2808844565 IN IP4 host.biloxi.example.com
      s=
      c=IN IP4 host.biloxi.example.com
      t=0 0
      m=audio 49170 RTP/AVP 97
      a=rtpmap:97 iLBC/8000









<span class="grey">Johnston &amp; Sparks            Informational                     [Page 12]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-13"></span>
<span class="grey"><a href="./rfc4317">RFC 4317</a>               SDP Offer/Answer Examples           December 2005</span>



    [<a id="ref-Second-Answer">Second-Answer</a>]

      v=0
      o=alice 2890844526 2890844527 IN IP4 host.atlanta.example.com
      s=
      c=IN IP4 host.atlanta.example.com
      t=0 0
      m=audio 49178 RTP/AVP 97
      a=rtpmap:97 iLBC/8000

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.2.%20%20Hold%20with%20Two%20Streams"></a><a class="selflink" href="#section-3.2" id="section-3.2">3.2</a>.  Hold with Two Streams</span>

   In this example, two audio streams have been established in the first
   offer/answer exchange.  In this second offer/answer exchange, one of
   the audio streams is placed on hold.  Alice offers two media streams,
   a bidirectional audio stream and a send-only telephone event stream.
   Bob accepts both streams.  Bob then puts Alice's audio stream on hold
   but not the tone stream.  Alice responds with identical SDP to the
   initial offer.

    [<a id="ref-Offer">Offer</a>]

      v=0
      o=alice 2890844526 2890844526 IN IP4 host.atlanta.example.com
      s=
      c=IN IP4 host.atlanta.example.com
      t=0 0
      m=audio 49170 RTP/AVP 0 97
      a=rtpmap:0 PCMU/8000
      a=rtpmap:97 iLBC/8000
      m=audio 49172 RTP/AVP 98
      a=rtpmap:98 telephone-event/8000
      a=sendonly

    [<a id="ref-Answer">Answer</a>]

      v=0
      o=bob 2808844564 2808844564 IN IP4 host.biloxi.example.com
      s=
      c=IN IP4 host.biloxi.example.com
      t=0 0
      m=audio 49172 RTP/AVP 97
      a=rtpmap:97 iLBC/8000
      m=audio 49174 RTP/AVP 98
      a=rtpmap:98 telephone-event/8000
      a=recvonly




<span class="grey">Johnston &amp; Sparks            Informational                     [Page 13]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-14"></span>
<span class="grey"><a href="./rfc4317">RFC 4317</a>               SDP Offer/Answer Examples           December 2005</span>


    [<a id="ref-Second-Offer">Second-Offer</a>]

      v=0
      o=bob 2808844564 2808844565 IN IP4 host.biloxi.example.com
      s=
      c=IN IP4 host.biloxi.example.com
      t=0 0
      m=audio 49172 RTP/AVP 97
      a=rtpmap:97 iLBC/8000
      a=sendonly
      m=audio 49174 RTP/AVP 98
      a=rtpmap:98 telephone-event/8000
      a=recvonly

    [<a id="ref-Second-Answer">Second-Answer</a>]

      v=0
      o=alice 2890844526 2890844527 IN IP4 host.atlanta.example.com
      s=
      c=IN IP4 host.atlanta.example.com
      t=0 0
      m=audio 49170 RTP/AVP 0 97
      a=rtpmap:0 PCMU/8000
      a=rtpmap:97 iLBC/8000
      m=audio 49172 RTP/AVP 98
      a=rtpmap:98 telephone-event/8000
      a=sendonly
























<span class="grey">Johnston &amp; Sparks            Informational                     [Page 14]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-15"></span>
<span class="grey"><a href="./rfc4317">RFC 4317</a>               SDP Offer/Answer Examples           December 2005</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.%20%20Addition%20and%20Deletion%20of%20Media%20Streams"></a><a class="selflink" href="#section-4" id="section-4">4</a>.  Addition and Deletion of Media Streams</span>

   This section shows addition and deletion of media streams.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.1.%20%20Second%20Audio%20Stream%20Added"></a><a class="selflink" href="#section-4.1" id="section-4.1">4.1</a>.  Second Audio Stream Added</span>

   In this example, the first offer/answer exchange establishes a single
   audio stream with a single codec.  The second offer/answer exchange
   adds a second audio stream for telephone events.  The second stream
   is added by Bob's media server (different connection address) to
   receive <a href="./rfc2833">RFC 2833</a> telephone-events (DTMF digits, typically) from
   Alice.  Alice accepts.  Even though the second stream is
   unidirectional, Alice receives RTCP packets on port 49173 from the
   media server.

    [<a id="ref-Offer">Offer</a>]

      v=0
      o=alice 2890844526 2890844526 IN IP4 host.atlanta.example.com
      s=
      c=IN IP4 host.atlanta.example.com
      t=0 0
      m=audio 49170 RTP/AVP 0 97
      a=rtpmap:0 PCMU/8000
      a=rtpmap:97 iLBC/8000

   [<a id="ref-Answer">Answer</a>]

      v=0
      o=bob 2808844564 2808844564 IN IP4 host.biloxi.example.com
      s=
      c=IN IP4 host.biloxi.example.com
      t=0 0
      m=audio 49170 RTP/AVP 97
      a=rtpmap:97 iLBC/8000
















<span class="grey">Johnston &amp; Sparks            Informational                     [Page 15]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-16"></span>
<span class="grey"><a href="./rfc4317">RFC 4317</a>               SDP Offer/Answer Examples           December 2005</span>



    [<a id="ref-Second-Offer">Second-Offer</a>]

      v=0
      o=bob 2808844564 2808844565 IN IP4 host.biloxi.example.com
      s=
      c=IN IP4 host.biloxi.example.com
      t=0 0
      m=audio 49170 RTP/AVP 97
      a=rtpmap:97 iLBC/8000
      m=audio 48282 RTP/AVP 98
      c=IN IP4 mediaserver.biloxi.example.com
      a=rtpmap:98 telephone-event/8000
      a=recvonly

    [<a id="ref-Second-Answer">Second-Answer</a>]

      v=0
      o=alice 2890844526 2890844527 IN IP4 host.atlanta.example.com
      s=
      c=IN IP4 host.atlanta.example.com
      t=0 0
      m=audio 49170 RTP/AVP 97
      a=rtpmap:97 iLBC/8000
      m=audio 49172 RTP/AVP 98
      c=IN IP4 host.atlanta.example.com
      a=rtpmap:98 telephone-event/8000
      a=sendonly

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.2.%20%20Audio%2C%20then%20Video%20Added"></a><a class="selflink" href="#section-4.2" id="section-4.2">4.2</a>.  Audio, then Video Added</span>

   An audio-only session is established in the initial exchange between
   Alice and Bob using PCMU codec.  Alice adds a video stream that is
   accepted by Bob.

    [<a id="ref-Offer">Offer</a>]

      v=0
      o=alice 2890844526 2890844526 IN IP4 host.atlanta.example.com
      s=
      c=IN IP4 host.atlanta.example.com
      t=0 0
      m=audio 49170 RTP/AVP 0
      a=rtpmap:0 PCMU/8000







<span class="grey">Johnston &amp; Sparks            Informational                     [Page 16]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-17"></span>
<span class="grey"><a href="./rfc4317">RFC 4317</a>               SDP Offer/Answer Examples           December 2005</span>



    [<a id="ref-Answer">Answer</a>]

      v=0
      o=bob 2808844564 2808844564 IN IP4 host.biloxi.example.com
      s=
      c=IN IP4 host.biloxi.example.com
      t=0 0
      m=audio 49172 RTP/AVP 0
      a=rtpmap:0 PCMU/8000

    [<a id="ref-Second-Offer">Second-Offer</a>]

      v=0
      o=alice 2890844526 2890844527 IN IP4 host.atlanta.example.com
      s=
      c=IN IP4 host.atlanta.example.com
      t=0 0
      m=audio 49170 RTP/AVP 0
      a=rtpmap:0 PCMU/8000
      m=video 49172 RTP/AVP 31
      a=rtpmap:31 H261/90000

    [<a id="ref-Second-Answer">Second-Answer</a>]

      v=0
      o=bob 2808844564 2808844565 IN IP4 host.biloxi.example.com
      s=
      c=IN IP4 host.biloxi.example.com
      t=0 0
      m=audio 49172 RTP/AVP 0
      a=rtpmap:0 PCMU/8000
      m=video 49168 RTP/AVP 31
      a=rtpmap:31 H261/90000

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.3.%20%20Audio%20and%20Video%2C%20Then%20Video%20Deleted"></a><a class="selflink" href="#section-4.3" id="section-4.3">4.3</a>.  Audio and Video, Then Video Deleted</span>

   Alice and Bob establish an audio and video session.  In a second
   exchange, Bob deletes the video session, resulting in an audio-only
   session.











<span class="grey">Johnston &amp; Sparks            Informational                     [Page 17]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-18"></span>
<span class="grey"><a href="./rfc4317">RFC 4317</a>               SDP Offer/Answer Examples           December 2005</span>


    [<a id="ref-Offer">Offer</a>]

      v=0
      o=alice 2890844526 2890844526 IN IP4 host.atlanta.example.com
      s=
      c=IN IP4 host.atlanta.example.com
      t=0 0
      m=audio 49170 RTP/AVP 97
      a=rtpmap:97 iLBC/8000
      m=video 51372 RTP/AVP 31
      a=rtpmap:31 H261/90000

    [<a id="ref-Answer">Answer</a>]

      v=0
      o=bob 2808844564 2808844564 IN IP4 host.biloxi.example.com
      s=
      c=IN IP4 host.biloxi.example.com
      t=0 0
      m=audio 49174 RTP/AVP 97
      a=rtpmap:97 iLBC/8000
      m=video 49170 RTP/AVP 31
      a=rtpmap:31 H261/90000

    [<a id="ref-Second-Offer">Second-Offer</a>]

      v=0
      o=bob 2808844564 2808844565 IN IP4 host.biloxi.example.com
      s=
      c=IN IP4 host.biloxi.example.com
      t=0 0
      m=audio 49174 RTP/AVP 97
      a=rtpmap:97 iLBC/8000
      m=video 0 RTP/AVP 31
      a=rtpmap:31 H261/90000

    [<a id="ref-Second-Answer">Second-Answer</a>]

      v=0
      o=alice 2890844526 2890844527 IN IP4 host.atlanta.example.com
      s=
      c=IN IP4 host.atlanta.example.com
      t=0 0
      m=audio 49170 RTP/AVP 97
      a=rtpmap:97 iLBC/8000
      m=video 0 RTP/AVP 31
      a=rtpmap:31 H261/90000




<span class="grey">Johnston &amp; Sparks            Informational                     [Page 18]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-19"></span>
<span class="grey"><a href="./rfc4317">RFC 4317</a>               SDP Offer/Answer Examples           December 2005</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.%20%20Third%20Party%20Call%20Control%20%283pcc%29"></a><a class="selflink" href="#section-5" id="section-5">5</a>.  Third Party Call Control (3pcc)</span>

   This section shows examples common in Third Party Call Control (3pcc)
   flows [<a href="#ref-5" title='"Best Current Practices for Third Party Call Control (3pcc) in the Session Initiation Protocol (SIP)"'>5</a>].  Call hold and resume flows are also common in 3pcc.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.1.%20%20No%20Media%2C%20Then%20Audio%20Added"></a><a class="selflink" href="#section-5.1" id="section-5.1">5.1</a>.  No Media, Then Audio Added</span>

   The first offer from Alice contains no media lines, so Bob accepts
   with no media lines.  In the second exchange, Alice adds an audio
   stream that Bob accepts.

    [<a id="ref-Offer">Offer</a>]

      v=0
      o=alice 2890844526 2890844526 IN IP4 host.atlanta.example.com
      s=
      c=IN IP4 host.atlanta.example.com
      t=0 0

    [<a id="ref-Answer">Answer</a>]

      v=0
      o=bob 2808844564 2808844564 IN IP4 host.biloxi.example.com
      s=
      c=IN IP4 host.biloxi.example.com
      t=0 0

    [<a id="ref-Second-Offer">Second-Offer</a>]

      v=0
      o=alice 2890844526 2890844527 IN IP4 host.atlanta.example.com
      s=
      c=IN IP4 host.atlanta.example.com
      t=0 0
      m=audio 49170 RTP/AVP 97
      a=rtpmap:97 iLBC/8000

    [<a id="ref-Second-Answer">Second-Answer</a>]

      v=0
      o=bob 2808844564 2808844565 IN IP4 host.biloxi.example.com
      s=
      c=IN IP4 host.biloxi.example.com
      t=0 0
      m=audio 49172 RTP/AVP 97
      a=rtpmap:97 iLBC/8000





<span class="grey">Johnston &amp; Sparks            Informational                     [Page 19]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-20"></span>
<span class="grey"><a href="./rfc4317">RFC 4317</a>               SDP Offer/Answer Examples           December 2005</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.2.%20%20Hold%20and%20Unhold%202"></a><a class="selflink" href="#section-5.2" id="section-5.2">5.2</a>.  Hold and Unhold 2</span>

   The first offer from Alice contains the connection address 0.0.0.0
   and a random port number, which means that Bob can not send media to
   Alice (the media stream is "black holed" or "bh").  Bob accepts with
   normal SDP.  In the second exchange, Alice changes the connection
   address, Bob accepts, and a media session is established.

    [<a id="ref-Offer">Offer</a>]

      v=0
      o=alice 2890844526 2890844526 IN IP4 host.atlanta.example.com
      s=
      c=IN IP4 0.0.0.0
      t=0 0
      m=audio 23442 RTP/AVP 97
      a=rtpmap:97 iLBC/8000

    [<a id="ref-Answer">Answer</a>]

      v=0
      o=bob 2808844564 2808844564 IN IP4 host.biloxi.example.com
      s=
      c=IN IP4 host.biloxi.example.com
      t=0 0
      m=audio 49170 RTP/AVP 97
      a=rtpmap:97 iLBC/8000

    [<a id="ref-Second-Offer">Second-Offer</a>]

      v=0
      o=alice 2890844526 2890844527 IN IP4 host.atlanta.example.com
      s=
      c=IN IP4 host.atlanta.example.com
      t=0 0
      m=audio 49170 RTP/AVP 97
      a=rtpmap:97 iLBC/8000

    [<a id="ref-Second-Answer">Second-Answer</a>]

      v=0
      o=bob 2808844564 2808844564 IN IP4 host.biloxi.example.com
      s=
      c=IN IP4 host.biloxi.example.com
      t=0 0
      m=audio 49170 RTP/AVP 97
      a=rtpmap:97 iLBC/8000




<span class="grey">Johnston &amp; Sparks            Informational                     [Page 20]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-21"></span>
<span class="grey"><a href="./rfc4317">RFC 4317</a>               SDP Offer/Answer Examples           December 2005</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.3.%20%20Hold%20and%20Unhold%203"></a><a class="selflink" href="#section-5.3" id="section-5.3">5.3</a>.  Hold and Unhold 3</span>

   The first offer from Alice contains an audio stream, but the answer
   from Bob contains the connection address 0.0.0.0 and a random port
   number, which means that Alice can not send media to Bob (the media
   stream is "black holed" or "bh").  In the second exchange, Bob
   changes the connection address, Alice accepts, and a media session is
   established.

    [<a id="ref-Offer">Offer</a>]

      v=0
      o=alice 2890844526 2890844526 IN IP4 host.atlanta.example.com
      s=
      c=IN IP4 host.atlanta.example.com
      t=0 0
      m=audio 49170 RTP/AVP 97
      a=rtpmap:97 iLBC/8000

    [<a id="ref-Answer">Answer</a>]

      v=0
      o=bob 2808844564 2808844564 IN IP4 host.biloxi.example.com
      s=
      c=IN IP4 0.0.0.0
      t=0 0
      m=audio 9322 RTP/AVP 97
      a=rtpmap:97 iLBC/8000

    [<a id="ref-Second-Offer">Second-Offer</a>]

      v=0
      o=bob 2808844564 2808844565 IN IP4 host.biloxi.example.com
      s=
      c=IN IP4 host.biloxi.example.com
      t=0 0
      m=audio 49172 RTP/AVP 97
      a=rtpmap:97 iLBC/8000

    [<a id="ref-Second-Answer">Second-Answer</a>]

      v=0
      o=alice 2890844526 2890844526 IN IP4 host.atlanta.example.com
      s=
      c=IN IP4 host.atlanta.example.com
      t=0 0
      m=audio 49170 RTP/AVP 97
      a=rtpmap:97 iLBC/8000



<span class="grey">Johnston &amp; Sparks            Informational                     [Page 21]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-22"></span>
<span class="grey"><a href="./rfc4317">RFC 4317</a>               SDP Offer/Answer Examples           December 2005</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.%20%20Security%20Considerations"></a><a class="selflink" href="#section-6" id="section-6">6</a>.  Security Considerations</span>

   SDP offer and answer messages can contain private information about
   addresses and sessions to be established between parties.  If this
   information needs to be kept private, some security mechanism in the
   protocol used to carry the offers and answers must be used.  For SIP,
   this means using TLS transport and/or S/MIME encryption of the SDP
   message body.

   It is important that SDP offer and answer messages be properly
   authenticated and authorized before they are used to establish a
   media session.  Examples of SIP mechanisms include SIP Digest, certs,
   and cryptographically-verified SIP identity.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/7.%20%20Informative%20References"></a><a class="selflink" href="#section-7" id="section-7">7</a>.  Informative References</span>

   [<a id="ref-1">1</a>]  Rosenberg, J. and H. Schulzrinne, "An Offer/Answer Model with
        Session Description Protocol (SDP)", <a href="./rfc3264">RFC 3264</a>, June 2002.

   [<a id="ref-2">2</a>]  Handley, M. and V. Jacobson, "SDP: Session Description
        Protocol", <a href="./rfc2327">RFC 2327</a>, April 1998.

   [<a id="ref-3">3</a>]  Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A.,
        Peterson, J., Sparks, R., Handley, M., and E. Schooler, "SIP:
        Session Initiation Protocol", <a href="./rfc3261">RFC 3261</a>, June 2002.

   [<a id="ref-4">4</a>]  Schulzrinne, H. and S. Petrack, "RTP Payload for DTMF Digits,
        Telephony Tones and Telephony Signals", <a href="./rfc2833">RFC 2833</a>, May 2000.

   [<a id="ref-5">5</a>]  Rosenberg, J., Peterson, J., Schulzrinne, H., and G. Camarillo,
        "Best Current Practices for Third Party Call Control (3pcc) in
        the Session Initiation Protocol (SIP)", <a href="https://www.rfc-editor.org/bcp/bcp85">BCP 85</a>, <a href="./rfc3725">RFC 3725</a>,
        April 2004.

   [<a id="ref-6">6</a>]  Duric, A. and S. Andersen, "Real-time Transport Protocol (RTP)
        Payload Format for internet Low Bit Rate Codec (iLBC) Speech",
        <a href="./rfc3952">RFC 3952</a>, December 2004.














<span class="grey">Johnston &amp; Sparks            Informational                     [Page 22]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-23"></span>
<span class="grey"><a href="./rfc4317">RFC 4317</a>               SDP Offer/Answer Examples           December 2005</span>


Authors' Addresses

   Alan Johnston
   Tello Corporation
   999 Baker Way, Suite 250
   San Mateo, CA 94404

   EMail: ajohnston@tello.com


   Robert J. Sparks
   Estacado Systems

   EMail: rjsparks@estacado.net





































<span class="grey">Johnston &amp; Sparks            Informational                     [Page 23]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-24"></span>
<span class="grey"><a href="./rfc4317">RFC 4317</a>               SDP Offer/Answer Examples           December 2005</span>


Full Copyright Statement

   Copyright (C) The Internet Society (2005).

   This document is subject to the rights, licenses and restrictions
   contained in <a href="https://www.rfc-editor.org/bcp/bcp78">BCP 78</a>, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in <a href="https://www.rfc-editor.org/bcp/bcp78">BCP 78</a> and <a href="https://www.rfc-editor.org/bcp/bcp79">BCP 79</a>.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   <a href="http://www.ietf.org/ipr">http://www.ietf.org/ipr</a>.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at ietf-
   ipr@ietf.org.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.







Johnston &amp; Sparks            Informational                     [Page 24]
</pre>
</body></html>