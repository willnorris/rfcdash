<!DOCTYPE html>
<html class="RFC" lang="en"><head>
<meta charset="utf-8"/>
<meta content="Common,Latin" name="scripts"/>
<meta content="initial-scale=1.0" name="viewport"/>
<title>RFC 8927: JSON Type Definition</title>
<meta content="Ulysse Carion" name="author"/>
<meta content="
       This document proposes a format, called JSON Type Definition (JTD),
      for describing the shape of JavaScript Object Notation (JSON)
      messages. Its main goals are to enable code generation from schemas as
      well as portable validation with standardized error indicators. To this
      end, JTD is intentionally limited to be no more expressive than the type
      systems of mainstream programming languages. This intentional
      limitation, as well as the decision to make JTD schemas be JSON
      documents, makes tooling atop of JTD easier to build. 
       This document does not have IETF consensus and is presented here to
      facilitate experimentation with the concept of JTD. 
    " name="description"/>
<meta content="xml2rfc 3.4.0" name="generator"/>
<meta content="data interchange format" name="keyword"/>
<meta content="description language" name="keyword"/>
<meta content="schema language" name="keyword"/>
<meta content="tree grammar" name="keyword"/>
<meta content="8927" name="rfc.number"/>
<!-- Generator version information:
  xml2rfc 3.4.0
    Python 3.6.10
    appdirs 1.4.4
    ConfigArgParse 1.2.3
    google-i18n-address 2.3.5
    html5lib 1.0.1
    intervaltree 3.0.2
    Jinja2 2.11.2
    kitchen 1.2.6
    lxml 4.4.2
    pycairo 1.19.0
    pycountry 19.8.18
    pyflakes 2.1.1
    PyYAML 5.3.1
    requests 2.22.0
    setuptools 40.6.2
    six 1.14.0
    WeasyPrint 51
-->
<link href="rfc8927.xml" rel="alternate" type="application/rfc+xml"/>
<link href="#copyright" rel="license"/>
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: avoid-page;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css"/>
<link href="https://dx.doi.org/10.17487/rfc8927" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  <link href="https://datatracker.ietf.org/doc/draft-ucarion-json-type-definition-04" rel="prev"/>
  </head>
<body>
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 8927</td>
<td class="center">JSON Type Definition</td>
<td class="right">November 2020</td>
</tr></thead>
<tfoot><tr>
<td class="left">Carion</td>
<td class="center">Experimental</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div class="document-information" id="external-metadata"></div>
<div class="document-information" id="internal-metadata">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Independent Submission</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a class="eref" href="https://www.rfc-editor.org/rfc/rfc8927">8927</a></dd>
<dt class="label-category">Category:</dt>
<dd class="category">Experimental</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time class="published" datetime="2020-11">November 2020</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Author:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">U. Carion</div>
<div class="org">Segment</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 8927</h1>
<h1 id="title">JSON Type Definition</h1>
<section id="section-abstract">
      <h2 id="abstract"><a class="selfRef" href="#abstract">Abstract</a></h2>
<p id="section-abstract-1">This document proposes a format, called JSON Type Definition (JTD),
      for describing the shape of JavaScript Object Notation (JSON)
      messages. Its main goals are to enable code generation from schemas as
      well as portable validation with standardized error indicators. To this
      end, JTD is intentionally limited to be no more expressive than the type
      systems of mainstream programming languages. This intentional
      limitation, as well as the decision to make JTD schemas be JSON
      documents, makes tooling atop of JTD easier to build.<a class="pilcrow" href="#section-abstract-1">¶</a></p>
<p id="section-abstract-2">This document does not have IETF consensus and is presented here to
      facilitate experimentation with the concept of JTD.<a class="pilcrow" href="#section-abstract-2">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a class="section-name selfRef" href="#name-status-of-this-memo">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This document is not an Internet Standards Track specification; it is
            published for examination, experimental implementation, and
            evaluation.<a class="pilcrow" href="#section-boilerplate.1-1">¶</a></p>
<p id="section-boilerplate.1-2">
            This document defines an Experimental Protocol for the Internet
            community.  This is a contribution to the RFC Series,
            independently of any other RFC stream.  The RFC Editor has chosen to publish this
            document at its discretion and makes no statement about its value
            for implementation or deployment.  Documents approved for publication
            by the RFC Editor are not candidates for any level of Internet
            Standard; see Section 2 of RFC 7841.<a class="pilcrow" href="#section-boilerplate.1-2">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc8927">https://www.rfc-editor.org/info/rfc8927</a></span>.<a class="pilcrow" href="#section-boilerplate.1-3">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a class="section-name selfRef" href="#name-copyright-notice">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2020 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a class="pilcrow" href="#section-boilerplate.2-1">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document.<a class="pilcrow" href="#section-boilerplate.2-2">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a class="toplink" href="#" onclick="scroll(0,0)">▲</a><h2 id="name-table-of-contents">
<a class="section-name selfRef" href="#name-table-of-contents">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.1">
            <p class="keepWithNext" id="section-toc.1-1.1.1"><a class="xref" href="#section-1">1</a>.  <a class="xref" href="#name-introduction">Introduction</a><a class="pilcrow" href="#section-toc.1-1.1.1">¶</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.1.2.1">
                <p class="keepWithNext" id="section-toc.1-1.1.2.1.1"><a class="xref" href="#section-1.1">1.1</a>.  <a class="xref" href="#name-terminology">Terminology</a><a class="pilcrow" href="#section-toc.1-1.1.2.1.1">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.1.2.2">
                <p class="keepWithNext" id="section-toc.1-1.1.2.2.1"><a class="xref" href="#section-1.2">1.2</a>.  <a class="xref" href="#name-scope-of-experiment">Scope of Experiment</a><a class="pilcrow" href="#section-toc.1-1.1.2.2.1">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a class="xref" href="#section-2">2</a>.  <a class="xref" href="#name-syntax">Syntax</a><a class="pilcrow" href="#section-toc.1-1.2.1">¶</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a class="xref" href="#section-2.1">2.1</a>.  <a class="xref" href="#name-root-vs-non-root-schemas">Root vs. Non-root Schemas</a><a class="pilcrow" href="#section-toc.1-1.2.2.1.1">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a class="xref" href="#section-2.2">2.2</a>.  <a class="xref" href="#name-forms">Forms</a><a class="pilcrow" href="#section-toc.1-1.2.2.2.1">¶</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.2.2.2.2.1">
                    <p id="section-toc.1-1.2.2.2.2.1.1"><a class="xref" href="#section-2.2.1">2.2.1</a>.  <a class="xref" href="#name-empty">Empty</a><a class="pilcrow" href="#section-toc.1-1.2.2.2.2.1.1">¶</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.2.2.2.2.2">
                    <p id="section-toc.1-1.2.2.2.2.2.1"><a class="xref" href="#section-2.2.2">2.2.2</a>.  <a class="xref" href="#name-ref">Ref</a><a class="pilcrow" href="#section-toc.1-1.2.2.2.2.2.1">¶</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.2.2.2.2.3">
                    <p id="section-toc.1-1.2.2.2.2.3.1"><a class="xref" href="#section-2.2.3">2.2.3</a>.  <a class="xref" href="#name-type">Type</a><a class="pilcrow" href="#section-toc.1-1.2.2.2.2.3.1">¶</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.2.2.2.2.4">
                    <p id="section-toc.1-1.2.2.2.2.4.1"><a class="xref" href="#section-2.2.4">2.2.4</a>.  <a class="xref" href="#name-enum">Enum</a><a class="pilcrow" href="#section-toc.1-1.2.2.2.2.4.1">¶</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.2.2.2.2.5">
                    <p id="section-toc.1-1.2.2.2.2.5.1"><a class="xref" href="#section-2.2.5">2.2.5</a>.  <a class="xref" href="#name-elements">Elements</a><a class="pilcrow" href="#section-toc.1-1.2.2.2.2.5.1">¶</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.2.2.2.2.6">
                    <p id="section-toc.1-1.2.2.2.2.6.1"><a class="xref" href="#section-2.2.6">2.2.6</a>.  <a class="xref" href="#name-properties">Properties</a><a class="pilcrow" href="#section-toc.1-1.2.2.2.2.6.1">¶</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.2.2.2.2.7">
                    <p id="section-toc.1-1.2.2.2.2.7.1"><a class="xref" href="#section-2.2.7">2.2.7</a>.  <a class="xref" href="#name-values">Values</a><a class="pilcrow" href="#section-toc.1-1.2.2.2.2.7.1">¶</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.2.2.2.2.8">
                    <p id="section-toc.1-1.2.2.2.2.8.1"><a class="xref" href="#section-2.2.8">2.2.8</a>.  <a class="xref" href="#name-discriminator">Discriminator</a><a class="pilcrow" href="#section-toc.1-1.2.2.2.2.8.1">¶</a></p>
</li>
                </ul>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.2.2.3">
                <p id="section-toc.1-1.2.2.3.1"><a class="xref" href="#section-2.3">2.3</a>.  <a class="xref" href="#name-extending-jtds-syntax">Extending JTD's Syntax</a><a class="pilcrow" href="#section-toc.1-1.2.2.3.1">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a class="xref" href="#section-3">3</a>.  <a class="xref" href="#name-semantics">Semantics</a><a class="pilcrow" href="#section-toc.1-1.3.1">¶</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a class="xref" href="#section-3.1">3.1</a>.  <a class="xref" href="#name-allowing-additional-propert">Allowing Additional            Properties</a><a class="pilcrow" href="#section-toc.1-1.3.2.1.1">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a class="xref" href="#section-3.2">3.2</a>.  <a class="xref" href="#name-errors">Errors</a><a class="pilcrow" href="#section-toc.1-1.3.2.2.1">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a class="xref" href="#section-3.3">3.3</a>.  <a class="xref" href="#name-forms-2">Forms</a><a class="pilcrow" href="#section-toc.1-1.3.2.3.1">¶</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.3.2.3.2.1">
                    <p id="section-toc.1-1.3.2.3.2.1.1"><a class="xref" href="#section-3.3.1">3.3.1</a>.  <a class="xref" href="#name-empty-2">Empty</a><a class="pilcrow" href="#section-toc.1-1.3.2.3.2.1.1">¶</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.3.2.3.2.2">
                    <p id="section-toc.1-1.3.2.3.2.2.1"><a class="xref" href="#section-3.3.2">3.3.2</a>.  <a class="xref" href="#name-ref-2">Ref</a><a class="pilcrow" href="#section-toc.1-1.3.2.3.2.2.1">¶</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.3.2.3.2.3">
                    <p id="section-toc.1-1.3.2.3.2.3.1"><a class="xref" href="#section-3.3.3">3.3.3</a>.  <a class="xref" href="#name-type-2">Type</a><a class="pilcrow" href="#section-toc.1-1.3.2.3.2.3.1">¶</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.3.2.3.2.4">
                    <p id="section-toc.1-1.3.2.3.2.4.1"><a class="xref" href="#section-3.3.4">3.3.4</a>.  <a class="xref" href="#name-enum-2">Enum</a><a class="pilcrow" href="#section-toc.1-1.3.2.3.2.4.1">¶</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.3.2.3.2.5">
                    <p id="section-toc.1-1.3.2.3.2.5.1"><a class="xref" href="#section-3.3.5">3.3.5</a>.  <a class="xref" href="#name-elements-2">Elements</a><a class="pilcrow" href="#section-toc.1-1.3.2.3.2.5.1">¶</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.3.2.3.2.6">
                    <p id="section-toc.1-1.3.2.3.2.6.1"><a class="xref" href="#section-3.3.6">3.3.6</a>.  <a class="xref" href="#name-properties-2">Properties</a><a class="pilcrow" href="#section-toc.1-1.3.2.3.2.6.1">¶</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.3.2.3.2.7">
                    <p id="section-toc.1-1.3.2.3.2.7.1"><a class="xref" href="#section-3.3.7">3.3.7</a>.  <a class="xref" href="#name-values-2">Values</a><a class="pilcrow" href="#section-toc.1-1.3.2.3.2.7.1">¶</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.3.2.3.2.8">
                    <p id="section-toc.1-1.3.2.3.2.8.1"><a class="xref" href="#section-3.3.8">3.3.8</a>.  <a class="xref" href="#name-discriminator-2">Discriminator</a><a class="pilcrow" href="#section-toc.1-1.3.2.3.2.8.1">¶</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a class="xref" href="#section-4">4</a>.  <a class="xref" href="#name-iana-considerations">IANA Considerations</a><a class="pilcrow" href="#section-toc.1-1.4.1">¶</a></p>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a class="xref" href="#section-5">5</a>.  <a class="xref" href="#name-security-considerations">Security Considerations</a><a class="pilcrow" href="#section-toc.1-1.5.1">¶</a></p>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a class="xref" href="#section-6">6</a>.  <a class="xref" href="#name-references">References</a><a class="pilcrow" href="#section-toc.1-1.6.1">¶</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a class="xref" href="#section-6.1">6.1</a>.  <a class="xref" href="#name-normative-references">Normative References</a><a class="pilcrow" href="#section-toc.1-1.6.2.1.1">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a class="xref" href="#section-6.2">6.2</a>.  <a class="xref" href="#name-informative-references">Informative References</a><a class="pilcrow" href="#section-toc.1-1.6.2.2.1">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a class="xref" href="#section-appendix.a">Appendix A</a>.  <a class="xref" href="#name-rationale-for-omitted-featu">Rationale for Omitted Features</a><a class="pilcrow" href="#section-toc.1-1.7.1">¶</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a class="xref" href="#section-a.1">A.1</a>.  <a class="xref" href="#name-support-for-64-bit-numbers">Support for 64-Bit Numbers</a><a class="pilcrow" href="#section-toc.1-1.7.2.1.1">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a class="xref" href="#section-a.2">A.2</a>.  <a class="xref" href="#name-support-for-non-root-defini">Support for Non-root Definitions</a><a class="pilcrow" href="#section-toc.1-1.7.2.2.1">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a class="xref" href="#section-appendix.b">Appendix B</a>.  <a class="xref" href="#name-comparison-with-cddl">Comparison with CDDL</a><a class="pilcrow" href="#section-toc.1-1.8.1">¶</a></p>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a class="xref" href="#section-appendix.c">Appendix C</a>.  <a class="xref" href="#name-example">Example</a><a class="pilcrow" href="#section-toc.1-1.9.1">¶</a></p>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a class="xref" href="#section-appendix.d"></a><a class="xref" href="#name-acknowledgments">Acknowledgments</a><a class="pilcrow" href="#section-toc.1-1.10.1">¶</a></p>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a class="xref" href="#section-appendix.e"></a><a class="xref" href="#name-authors-address">Author's Address</a><a class="pilcrow" href="#section-toc.1-1.11.1">¶</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a class="section-number selfRef" href="#section-1">1. </a><a class="section-name selfRef" href="#name-introduction">Introduction</a>
      </h2>
<p id="section-1-1">This document describes a schema language for JSON <span>[<a class="xref" href="#RFC8259">RFC8259</a>]</span> called JSON Type Definition
      (JTD).<a class="pilcrow" href="#section-1-1">¶</a></p>
<p id="section-1-2">There exist many options for describing JSON data. JTD's niche is to
      focus on enabling code generation from schemas; to this end, JTD's
      expressiveness is intentionally limited to be no more powerful than what
      can be expressed in the type systems of mainstream programming
      languages.<a class="pilcrow" href="#section-1-2">¶</a></p>
<p id="section-1-3">The goals of JTD are to:<a class="pilcrow" href="#section-1-3">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1-4.1">Provide an unambiguous description of the overall structure of a
 JSON document.<a class="pilcrow" href="#section-1-4.1">¶</a>
</li>
        <li class="normal" id="section-1-4.2">Be able to describe common JSON data types and structures (that
        is, the data types and structures necessary to support most JSON
        documents and that are widely understood in an interoperable way by
        JSON implementations).<a class="pilcrow" href="#section-1-4.2">¶</a>
</li>
        <li class="normal" id="section-1-4.3">Provide a single format that is readable and editable by both
 humans and machines and that can be embedded within other JSON
 documents. This makes JTD a convenient format for tooling to accept as
 input or produce as output.<a class="pilcrow" href="#section-1-4.3">¶</a>
</li>
        <li class="normal" id="section-1-4.4">Enable code generation from JTD schemas. JTD schemas are meant to
 be easy to convert into data structures idiomatic to mainstream
 programming languages.<a class="pilcrow" href="#section-1-4.4">¶</a>
</li>
        <li class="normal" id="section-1-4.5">Provide a standardized format for error indicators when data does
 not conform with a schema.<a class="pilcrow" href="#section-1-4.5">¶</a>
</li>
      </ul>
<p id="section-1-5">JTD is intentionally designed as a rather minimal schema
      language. Thus, although JTD can describe some categories of JSON, it is
      not able to describe its own structure; this document uses Concise Data
      Definition Language (CDDL) <span>[<a class="xref" href="#RFC8610">RFC8610</a>]</span> to
      describe JTD's syntax. By keeping the expressiveness of the schema
      language minimal, JTD makes code generation and standardized error
      indicators easier to implement.<a class="pilcrow" href="#section-1-5">¶</a></p>
<p id="section-1-6">Examples in this document use constructs from the C++ programming
      language. These examples are provided to aid the reader in understanding
      the principles of JTD but are not limiting in any way.<a class="pilcrow" href="#section-1-6">¶</a></p>
<p id="section-1-7">JTD's feature set is designed to represent common patterns in
      JSON-using applications, while still having a clear correspondence to
      programming languages in widespread use. Thus, JTD supports:<a class="pilcrow" href="#section-1-7">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1-8.1">Signed and unsigned 8-, 16-, and 32-bit integers. A tool that
 converts JTD schemas into code can use "int8_t",
 "uint8_t", "int16_t", etc., or their equivalents in the
 target language, to represent these JTD types.<a class="pilcrow" href="#section-1-8.1">¶</a>
</li>
        <li class="normal" id="section-1-8.2">A distinction between "float32" and "float64". Code
 generators can use "float" and "double", or their
 equivalents, for these JTD types.<a class="pilcrow" href="#section-1-8.2">¶</a>
</li>
        <li class="normal" id="section-1-8.3">A "properties" form of JSON objects, corresponding to some sort of
 struct or record. The "properties" form of JSON objects is akin to a
 C++ "struct".<a class="pilcrow" href="#section-1-8.3">¶</a>
</li>
        <li class="normal" id="section-1-8.4">A "values" form of JSON objects, corresponding to some sort of
 dictionary or associative array. The "values" form of JSON objects is
 akin to a C++ "std::map".<a class="pilcrow" href="#section-1-8.4">¶</a>
</li>
        <li class="normal" id="section-1-8.5">A "discriminator" form of JSON objects, corresponding to a
 discriminated (or "tagged") union. The "discriminator" form of JSON
 objects is akin to a C++ "std::variant".<a class="pilcrow" href="#section-1-8.5">¶</a>
</li>
      </ul>
<p id="section-1-9">The principle of common patterns in JSON is why JTD does not support
      64-bit integers, as these are usually transmitted over JSON in
      non-interoperable (i.e., ignoring the recommendations in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc7493#section-2.2">Section 2.2</a> of [<a class="xref" href="#RFC7493">RFC7493</a>]</span>) or mutually
      inconsistent ways. <a class="xref" href="#other-considerations-int64">Appendix A.1</a> further elaborates on why JTD does not support 64-bit
      integers.<a class="pilcrow" href="#section-1-9">¶</a></p>
<p id="section-1-10">The principle of clear correspondence to common programming languages
      is why JTD does not support, for example, a data type for integers up to
      2**53-1.<a class="pilcrow" href="#section-1-10">¶</a></p>
<p id="section-1-11">It is expected that for many use cases, a schema language of JTD's
      expressiveness is sufficient. Where a more expressive language is
      required, alternatives exist in CDDL and others.<a class="pilcrow" href="#section-1-11">¶</a></p>
<p id="section-1-12">This document does not have IETF consensus and is presented here to
      facilitate experimentation with the concept of JTD. The purpose of the
      experiment is to gain experience with JTD and to possibly revise this
      work accordingly.  If JTD is determined to be a valuable and popular
      approach, it may be taken to the IETF for further discussion and
      revision.<a class="pilcrow" href="#section-1-12">¶</a></p>
<p id="section-1-13">This document has the following structure.
      <a class="xref" href="#syntax">Section 2</a> defines the syntax of
      JTD. <a class="xref" href="#semantics">Section 3</a> describes the semantics
      of JTD; this includes determining whether some data satisfies a schema
      and what error indicators should be produced when the data is
      unsatisfactory. <a class="xref" href="#other-considerations">Appendix A</a>
      discusses why certain features are omitted from JTD. <a class="xref" href="#comparison-with-cddl">Appendix B</a> presents various JTD
      schemas and their CDDL equivalents.<a class="pilcrow" href="#section-1-13">¶</a></p>
<div id="terminology">
<section id="section-1.1">
        <h3 id="name-terminology">
<a class="section-number selfRef" href="#section-1.1">1.1. </a><a class="section-name selfRef" href="#name-terminology">Terminology</a>
        </h3>
<p id="section-1.1-1">
    The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>",
    "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>",
    "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
    "<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are
    to be interpreted as
    described in BCP 14 <span>[<a class="xref" href="#RFC2119">RFC2119</a>]</span> <span>[<a class="xref" href="#RFC8174">RFC8174</a>]</span> 
    when, and only when, they appear in all capitals, as shown here.<a class="pilcrow" href="#section-1.1-1">¶</a></p>
<p id="section-1.1-2">The term "JSON Pointer", when it appears in this document, is to be
 understood as it is defined in <span>[<a class="xref" href="#RFC6901">RFC6901</a>]</span>.<a class="pilcrow" href="#section-1.1-2">¶</a></p>
<p id="section-1.1-3">The terms "object", "member", "array", "number", "name", and
 "string" in this document are to be interpreted as described in <span>[<a class="xref" href="#RFC8259">RFC8259</a>]</span>.<a class="pilcrow" href="#section-1.1-3">¶</a></p>
<p id="section-1.1-4">The term "instance", when it appears in this document, refers to a
 JSON value being validated against a JTD schema. This value can be an
 entire JSON document, or it can be a value embedded within a JSON
 document.<a class="pilcrow" href="#section-1.1-4">¶</a></p>
</section>
</div>
<div id="scope-of-experiment">
<section id="section-1.2">
        <h3 id="name-scope-of-experiment">
<a class="section-number selfRef" href="#section-1.2">1.2. </a><a class="section-name selfRef" href="#name-scope-of-experiment">Scope of Experiment</a>
        </h3>
<p id="section-1.2-1">JTD is an experiment. Participation in this experiment consists of
 using JTD to validate or document interchanged JSON messages or
 building tooling atop of JTD. Feedback on the results of this
 experiment may be emailed to the author. Participants in this
 experiment are anticipated to mostly be nodes that provide or consume
 JSON-based APIs.<a class="pilcrow" href="#section-1.2-1">¶</a></p>
<p id="section-1.2-2">Nodes know if they are participating in the experiment if they are
 validating JSON messages against a JTD schema or if they are relying
 on another node to do so. Nodes are also participating in the
 experiment if they are running code generated from a JTD schema.<a class="pilcrow" href="#section-1.2-2">¶</a></p>
<p id="section-1.2-3">The risk of this experiment "escaping" takes the form of a
 JTD-supporting node expecting another node, which lacks such support,
 to validate messages against some JTD schema. In such a case, the
 outcome will likely be that the nodes fail to interchange information correctly.<a class="pilcrow" href="#section-1.2-3">¶</a></p>
<p id="section-1.2-4">This experiment will be deemed successful when JTD has been
 implemented by multiple independent parties and these parties
 successfully use JTD to facilitate information interchange within
 their internal systems or between systems operated by independent parties.<a class="pilcrow" href="#section-1.2-4">¶</a></p>
<p id="section-1.2-5">If this experiment is deemed successful, and JTD is determined to
 be a valuable and popular approach, it may be taken to the IETF for
 further discussion and revision. One possible outcome of this
 discussion and revision could be that a working group produces a
 Standards Track specification of JTD.<a class="pilcrow" href="#section-1.2-5">¶</a></p>
<p id="section-1.2-6">Some implementations of JTD, as well as code generators and other
 tooling related to JTD, are available at
 <span>&lt;<a href="https://github.com/jsontypedef">https://github.com/jsontypedef</a>&gt;</span>.<a class="pilcrow" href="#section-1.2-6">¶</a></p>
</section>
</div>
</section>
</div>
<div id="syntax">
<section id="section-2">
      <h2 id="name-syntax">
<a class="section-number selfRef" href="#section-2">2. </a><a class="section-name selfRef" href="#name-syntax">Syntax</a>
      </h2>
<p id="section-2-1">This section describes when a JSON document is a correct JTD
      schema. Because Concise Data Definition Language (CDDL) is well suited
      to the task of defining complex JSON formats, such as JTD schemas, this
      section uses CDDL to describe the format of JTD schemas.<a class="pilcrow" href="#section-2-1">¶</a></p>
<p id="section-2-2">JTD schemas may recursively contain other schemas. In this document,
      a "root schema" is one that is not contained within another schema,
      i.e., it is "top level".<a class="pilcrow" href="#section-2-2">¶</a></p>
<p id="section-2-3">A JTD schema is a JSON object taking on an appropriate form. JTD
      schemas may contain "additional data", discussed in <a class="xref" href="#extending-JTD-syntax">Section 2.3</a>. Root JTD schemas may
      optionally contain definitions (a mapping from names to schemas).<a class="pilcrow" href="#section-2-3">¶</a></p>
<p id="section-2-4">A correct root JTD schema <span class="bcp14">MUST</span> match the "root-schema" CDDL
      rule described in this section. A correct non-root JTD schema <span class="bcp14">MUST</span> match
      the "schema" CDDL rule described in this section.<a class="pilcrow" href="#section-2-4">¶</a></p>
<span id="name-cddl-definition-of-a-schema"></span><div id="cddl-schema">
<figure id="figure-1">
        <div id="section-2-5.1">
<pre class="sourcecode lang-cddl">; root-schema is identical to schema, but additionally allows for
; definitions.
;
; definitions are prohibited from appearing on non-root schemas.
root-schema = {
  ? definitions: { * tstr =&gt; { schema}},
  schema,
}
; schema is the main CDDL rule defining a JTD schema.
;
; All JTD schemas are JSON objects taking on one of eight forms
; listed here.
schema = (
  ref //
  type //
  enum //
  elements //
  properties //
  values //
  discriminator //
  empty //
)
; shared is a CDDL rule containing properties that all eight schema
; forms share.
shared = (
  ? metadata: { * tstr =&gt; any },
  ? nullable: bool,
)
; empty describes the "empty" schema form.
empty = shared
; ref describes the "ref" schema form.
;
; There are additional constraints on this form that cannot be
; expressed in CDDL. Section 2.2.2 describes these additional
; constraints in detail.
ref = ( ref: tstr, shared )
; type describes the "type" schema form.
type = (
  type: "boolean"
    / "float32"
    / "float64"
    / "int8"
    / "uint8"
    / "int16"
    / "uint16"
    / "int32"
    / "uint32"
    / "string"
    / "timestamp",
  shared,
)
; enum describes the "enum" schema form.
;
; There are additional constraints on this form that cannot be
; expressed in CDDL. Section 2.2.4 describes these additional
; constraints in detail.
enum = ( enum: [+ tstr], shared )
; elements describes the "elements" schema form.
elements = ( elements: { schema }, shared )
; properties describes the "properties" schema form.
;
; This CDDL rule is defined so that a schema of the "properties" form
; may omit a member named "properties" or a member named
; "optionalProperties", but not both.
;
; There are additional constraints on this form that cannot be
; expressed in CDDL. Section 2.2.6 describes these additional
; constraints in detail.
properties = (with-properties // with-optional-properties)
with-properties = (
  properties: { * tstr =&gt; { schema }},
  ? optionalProperties: { * tstr =&gt; { schema }},
  ? additionalProperties: bool,
  shared,
)
with-optional-properties = (
  ? properties: { * tstr =&gt; { schema }},
  optionalProperties: { * tstr =&gt; { schema }},
  ? additionalProperties: bool,
  shared,
)
; values describes the "values" schema form.
values = ( values: { schema }, shared )
; discriminator describes the "discriminator" schema form.
;
; There are additional constraints on this form that cannot be
; expressed in CDDL. Section 2.2.8 describes these additional
; constraints in detail.
discriminator = (
  discriminator: tstr,
  ; Note well: this rule is defined in terms of the "properties"
  ; CDDL rule, not the "schema" CDDL rule.
  mapping: { * tstr =&gt; { properties } }
  shared,
)
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-1">Figure 1</a>:
<a class="selfRef" href="#name-cddl-definition-of-a-schema">CDDL Definition of a Schema</a>
        </figcaption></figure>
</div>
<p id="section-2-6">The remainder of this section will describe constraints on JTD
      schemas that cannot be expressed in CDDL. It will also provide examples of
      valid and invalid JTD schemas.<a class="pilcrow" href="#section-2-6">¶</a></p>
<div id="root-vs-non-root-schemas">
<section id="section-2.1">
        <h3 id="name-root-vs-non-root-schemas">
<a class="section-number selfRef" href="#section-2.1">2.1. </a><a class="section-name selfRef" href="#name-root-vs-non-root-schemas">Root vs. Non-root Schemas</a>
        </h3>
<p id="section-2.1-1">The "root-schema" rule in <a class="xref" href="#cddl-schema">Figure 1</a> permits a member named "definitions",
 but the "schema" rule does not permit for such a member. This
 means that only root (i.e., "top-level") JTD schemas can have a
 "definitions" object, and subschemas may not.<a class="pilcrow" href="#section-2.1-1">¶</a></p>
<p id="section-2.1-2">Thus,<a class="pilcrow" href="#section-2.1-2">¶</a></p>
<div id="section-2.1-3">
<pre class="sourcecode lang-json">   { "definitions": {} }
</pre><a class="pilcrow" href="#section-2.1-3">¶</a>
</div>
<p id="section-2.1-4">is a correct JTD schema, but<a class="pilcrow" href="#section-2.1-4">¶</a></p>
<div id="section-2.1-5">
<pre class="sourcecode lang-json">   {
     "definitions": {
       "foo": {
         "definitions": {}
       }
     }
   }
</pre><a class="pilcrow" href="#section-2.1-5">¶</a>
</div>
<p id="section-2.1-6">is not, because subschemas (such as the object at
 "/definitions/foo") must not have a member named
 "definitions".<a class="pilcrow" href="#section-2.1-6">¶</a></p>
</section>
</div>
<div id="forms">
<section id="section-2.2">
        <h3 id="name-forms">
<a class="section-number selfRef" href="#section-2.2">2.2. </a><a class="section-name selfRef" href="#name-forms">Forms</a>
        </h3>
<p id="section-2.2-1">JTD schemas (i.e., JSON objects satisfying the "schema" CDDL
 rule in <a class="xref" href="#cddl-schema">Figure 1</a>) must take on
 one of eight forms. These forms are defined so as to be mutually
 exclusive; a schema cannot satisfy multiple forms at once.<a class="pilcrow" href="#section-2.2-1">¶</a></p>
<div id="syntax-form-empty">
<section id="section-2.2.1">
          <h4 id="name-empty">
<a class="section-number selfRef" href="#section-2.2.1">2.2.1. </a><a class="section-name selfRef" href="#name-empty">Empty</a>
          </h4>
<p id="section-2.2.1-1">The "empty" form is defined by the "empty" CDDL
   rule in <a class="xref" href="#cddl-schema">Figure 1</a>. The semantics
   of the "empty" form are described in <a class="xref" href="#semantics-form-empty">Section 3.3.1</a>.<a class="pilcrow" href="#section-2.2.1-1">¶</a></p>
<p id="section-2.2.1-2">Despite the name "empty", schemas of the "empty" form are
   not necessarily empty JSON objects. Like schemas of any of the eight
   forms, schemas of the "empty" form may contain members named
   "nullable" (whose value must be "true" or
   "false") or "metadata" (whose value must be an object)
   or both.<a class="pilcrow" href="#section-2.2.1-2">¶</a></p>
<p id="section-2.2.1-3">Thus,<a class="pilcrow" href="#section-2.2.1-3">¶</a></p>
<div id="section-2.2.1-4">
<pre class="sourcecode lang-json">   {}
</pre><a class="pilcrow" href="#section-2.2.1-4">¶</a>
</div>
<p id="section-2.2.1-5">and<a class="pilcrow" href="#section-2.2.1-5">¶</a></p>
<div id="section-2.2.1-6">
<pre class="sourcecode lang-json">   { "nullable": true }
</pre><a class="pilcrow" href="#section-2.2.1-6">¶</a>
</div>
<p id="section-2.2.1-7">and<a class="pilcrow" href="#section-2.2.1-7">¶</a></p>
<div id="section-2.2.1-8">
<pre class="sourcecode lang-json">   { "nullable": true, "metadata": { "foo": "bar" }}
</pre><a class="pilcrow" href="#section-2.2.1-8">¶</a>
</div>
<p id="section-2.2.1-9">are correct JTD schemas of the "empty" form, but<a class="pilcrow" href="#section-2.2.1-9">¶</a></p>
<div id="section-2.2.1-10">
<pre class="sourcecode lang-json">   { "nullable": "foo" }
</pre><a class="pilcrow" href="#section-2.2.1-10">¶</a>
</div>
<p id="section-2.2.1-11">is not, because the value of the member named "nullable"
   must be "true" or "false".<a class="pilcrow" href="#section-2.2.1-11">¶</a></p>
</section>
</div>
<div id="syntax-form-ref">
<section id="section-2.2.2">
          <h4 id="name-ref">
<a class="section-number selfRef" href="#section-2.2.2">2.2.2. </a><a class="section-name selfRef" href="#name-ref">Ref</a>
          </h4>
<p id="section-2.2.2-1">The "ref" form is defined by the "ref" CDDL rule in
   <a class="xref" href="#cddl-schema">Figure 1</a>. The semantics of the
   "ref" form are described in <a class="xref" href="#semantics-form-ref">Section 3.3.2</a>.<a class="pilcrow" href="#section-2.2.2-1">¶</a></p>
<p id="section-2.2.2-2">For a schema of the "ref" form to be correct, the value of
   the member named "ref" must refer to one of the definitions
   found at the root level of the schema it appears in. More formally,
   for a schema <em>S</em> of the "ref" form:<a class="pilcrow" href="#section-2.2.2-2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2.2-3.1">Let <em>B</em> be the root schema containing the schema or
     the schema itself if it is a root schema.<a class="pilcrow" href="#section-2.2.2-3.1">¶</a>
</li>
            <li class="normal" id="section-2.2.2-3.2">Let <em>R</em> be the value of the member of <em>S</em> with
     the name "ref".<a class="pilcrow" href="#section-2.2.2-3.2">¶</a>
</li>
          </ul>
<p id="section-2.2.2-4">If the schema is correct, then <em>B</em> <span class="bcp14">MUST</span> have a member
   <em>D</em> with the name "definitions", and <em>D</em> <span class="bcp14">MUST</span>
   contain a member whose name equals <em>R</em>.<a class="pilcrow" href="#section-2.2.2-4">¶</a></p>
<p id="section-2.2.2-5">Thus,<a class="pilcrow" href="#section-2.2.2-5">¶</a></p>
<div id="section-2.2.2-6">
<pre class="sourcecode lang-json">   {
     "definitions": {
       "coordinates": {
         "properties": {
           "lat": { "type": "float32" },
           "lng": { "type": "float32" }
         }
       }
     },
     "properties": {
       "user_location": { "ref": "coordinates" },
       "server_location": { "ref": "coordinates" }
     }
   }
</pre><a class="pilcrow" href="#section-2.2.2-6">¶</a>
</div>
<p id="section-2.2.2-7">is a correct JTD schema and demonstrates the point of the
   "ref" form: to avoid redefining the same thing
   twice. However,<a class="pilcrow" href="#section-2.2.2-7">¶</a></p>
<div id="section-2.2.2-8">
<pre class="sourcecode lang-json">   { "ref": "foo" }
</pre><a class="pilcrow" href="#section-2.2.2-8">¶</a>
</div>
<p id="section-2.2.2-9">is not a correct JTD schema, as there are no top-level
   "definitions", and so the "ref" form cannot be
   correct. Similarly,<a class="pilcrow" href="#section-2.2.2-9">¶</a></p>
<div id="section-2.2.2-10">
<pre class="sourcecode lang-json">   { "definitions": { "foo": {}}, "ref": "bar" }
</pre><a class="pilcrow" href="#section-2.2.2-10">¶</a>
</div>
<p id="section-2.2.2-11">is not a correct JTD schema, as there is no member named
   "bar" in the top-level "definitions".<a class="pilcrow" href="#section-2.2.2-11">¶</a></p>
</section>
</div>
<div id="syntax-form-type">
<section id="section-2.2.3">
          <h4 id="name-type">
<a class="section-number selfRef" href="#section-2.2.3">2.2.3. </a><a class="section-name selfRef" href="#name-type">Type</a>
          </h4>
<p id="section-2.2.3-1">The "type" form is defined by the "type" CDDL rule
   in <a class="xref" href="#cddl-schema">Figure 1</a>. The semantics of
   the "type" form are described in <a class="xref" href="#semantics-form-type">Section 3.3.3</a>.<a class="pilcrow" href="#section-2.2.3-1">¶</a></p>
<p id="section-2.2.3-2">As an example of a correct JTD schema of the "type"
   form,<a class="pilcrow" href="#section-2.2.3-2">¶</a></p>
<div id="section-2.2.3-3">
<pre class="sourcecode lang-json">   { "type": "uint8" }
</pre><a class="pilcrow" href="#section-2.2.3-3">¶</a>
</div>
<p id="section-2.2.3-4">is a correct JTD schema, whereas<a class="pilcrow" href="#section-2.2.3-4">¶</a></p>
<div id="section-2.2.3-5">
<pre class="sourcecode lang-json">   { "type": true }
</pre><a class="pilcrow" href="#section-2.2.3-5">¶</a>
</div>
<p id="section-2.2.3-6">and<a class="pilcrow" href="#section-2.2.3-6">¶</a></p>
<div id="section-2.2.3-7">
<pre class="sourcecode lang-json">   { "type": "foo" }
</pre><a class="pilcrow" href="#section-2.2.3-7">¶</a>
</div>
<p id="section-2.2.3-8">are not correct schemas, as neither "true" nor the JSON
   string "foo" are in the list of permitted values of the
   "type" member described in the "type" CDDL rule in
   <a class="xref" href="#cddl-schema">Figure 1</a>.<a class="pilcrow" href="#section-2.2.3-8">¶</a></p>
</section>
</div>
<div id="syntax-form-enum">
<section id="section-2.2.4">
          <h4 id="name-enum">
<a class="section-number selfRef" href="#section-2.2.4">2.2.4. </a><a class="section-name selfRef" href="#name-enum">Enum</a>
          </h4>
<p id="section-2.2.4-1">The "enum" form is defined by the "enum" CDDL rule
   in <a class="xref" href="#cddl-schema">Figure 1</a>. The semantics of
   the "enum" form are described in <a class="xref" href="#semantics-form-enum">Section 3.3.4</a>.<a class="pilcrow" href="#section-2.2.4-1">¶</a></p>
<p id="section-2.2.4-2">For a schema of the "enum" form to be correct, the value
   of the member named "enum" must be a nonempty array of
   strings, and that array must not contain duplicate values. More
   formally, for a schema <em>S</em> of the "enum" form:<a class="pilcrow" href="#section-2.2.4-2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2.4-3.1">Let <em>E</em> be the value of the member of <em>S</em> with
     name "enum".<a class="pilcrow" href="#section-2.2.4-3.1">¶</a>
</li>
          </ul>
<p id="section-2.2.4-4">If the schema is correct, then there <span class="bcp14">MUST NOT</span> exist any pair of
   elements of <em>E</em> that encode equal string values, where
   string equality is defined as in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8259#section-8.3">Section 8.3</a> of [<a class="xref" href="#RFC8259">RFC8259</a>]</span>.<a class="pilcrow" href="#section-2.2.4-4">¶</a></p>
<p id="section-2.2.4-5">Thus,<a class="pilcrow" href="#section-2.2.4-5">¶</a></p>
<div id="section-2.2.4-6">
<pre class="sourcecode lang-json">   { "enum": [] }
</pre><a class="pilcrow" href="#section-2.2.4-6">¶</a>
</div>
<p id="section-2.2.4-7">is not a correct JTD schema, as the value of the member named
   "enum" must be nonempty, and<a class="pilcrow" href="#section-2.2.4-7">¶</a></p>
<div id="section-2.2.4-8">
<pre class="sourcecode lang-json">   { "enum": ["a\\b", "a\u005Cb"] }
</pre><a class="pilcrow" href="#section-2.2.4-8">¶</a>
</div>
<p id="section-2.2.4-9">is not a correct JTD schema, as<a class="pilcrow" href="#section-2.2.4-9">¶</a></p>
<div id="section-2.2.4-10">
<pre class="sourcecode lang-json">   "a\\b"
</pre><a class="pilcrow" href="#section-2.2.4-10">¶</a>
</div>
<p id="section-2.2.4-11">and<a class="pilcrow" href="#section-2.2.4-11">¶</a></p>
<div id="section-2.2.4-12">
<pre class="sourcecode lang-json">   "a\u005Cb"
</pre><a class="pilcrow" href="#section-2.2.4-12">¶</a>
</div>
<p id="section-2.2.4-13">encode strings that are equal by the definition of string
   equality given in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8259#section-8.3">Section 8.3</a> of [<a class="xref" href="#RFC8259">RFC8259</a>]</span>. By contrast,<a class="pilcrow" href="#section-2.2.4-13">¶</a></p>
<div id="section-2.2.4-14">
<pre class="sourcecode lang-json">   { "enum": ["PENDING", "IN_PROGRESS", "DONE" ]}
</pre><a class="pilcrow" href="#section-2.2.4-14">¶</a>
</div>
<p id="section-2.2.4-15">is an example of a correct JTD schema of the "enum"
   form.<a class="pilcrow" href="#section-2.2.4-15">¶</a></p>
</section>
</div>
<div id="syntax-form-elements">
<section id="section-2.2.5">
          <h4 id="name-elements">
<a class="section-number selfRef" href="#section-2.2.5">2.2.5. </a><a class="section-name selfRef" href="#name-elements">Elements</a>
          </h4>
<p id="section-2.2.5-1">The "elements" form is defined by the "elements"
   CDDL rule in <a class="xref" href="#cddl-schema">Figure 1</a>. The
   semantics of the "elements" form are described in <a class="xref" href="#semantics-form-elements">Section 3.3.5</a>.<a class="pilcrow" href="#section-2.2.5-1">¶</a></p>
<p id="section-2.2.5-2">As an example of a correct JTD schema of the "elements"
   form,<a class="pilcrow" href="#section-2.2.5-2">¶</a></p>
<div id="section-2.2.5-3">
<pre class="sourcecode lang-json">   { "elements": { "type": "uint8" }}
</pre><a class="pilcrow" href="#section-2.2.5-3">¶</a>
</div>
<p id="section-2.2.5-4">is a correct JTD schema, whereas<a class="pilcrow" href="#section-2.2.5-4">¶</a></p>
<div id="section-2.2.5-5">
<pre class="sourcecode lang-json">   { "elements": true }
</pre><a class="pilcrow" href="#section-2.2.5-5">¶</a>
</div>
<p id="section-2.2.5-6">and<a class="pilcrow" href="#section-2.2.5-6">¶</a></p>
<div id="section-2.2.5-7">
<pre class="sourcecode lang-json">   { "elements": { "type": "foo" } }
</pre><a class="pilcrow" href="#section-2.2.5-7">¶</a>
</div>
<p id="section-2.2.5-8">are not correct schemas, as neither<a class="pilcrow" href="#section-2.2.5-8">¶</a></p>
<div id="section-2.2.5-9">
<pre class="sourcecode lang-json">   true
</pre><a class="pilcrow" href="#section-2.2.5-9">¶</a>
</div>
<p id="section-2.2.5-10">nor<a class="pilcrow" href="#section-2.2.5-10">¶</a></p>
<div id="section-2.2.5-11">
<pre class="sourcecode lang-json">   { "type": "foo" }
</pre><a class="pilcrow" href="#section-2.2.5-11">¶</a>
</div>
<p id="section-2.2.5-12">are correct JTD schemas, and the value of the member named
   "elements" must be a correct JTD schema.<a class="pilcrow" href="#section-2.2.5-12">¶</a></p>
</section>
</div>
<div id="syntax-form-properties">
<section id="section-2.2.6">
          <h4 id="name-properties">
<a class="section-number selfRef" href="#section-2.2.6">2.2.6. </a><a class="section-name selfRef" href="#name-properties">Properties</a>
          </h4>
<p id="section-2.2.6-1">The "properties" form is defined by the
   "properties" CDDL rule in <a class="xref" href="#cddl-schema">Figure 1</a>. The semantics of the "properties" form
   are described in <a class="xref" href="#semantics-form-props">Section 3.3.6</a>.<a class="pilcrow" href="#section-2.2.6-1">¶</a></p>
<p id="section-2.2.6-2">For a schema of the "properties" form to be correct,
   properties must either be required (i.e., in "properties") or
   optional (i.e., in "optionalProperties"), but not both.<a class="pilcrow" href="#section-2.2.6-2">¶</a></p>
<p id="section-2.2.6-3">More formally, if a schema has both a member named
          "properties" (with value <em>P</em>) and another member named
          "optionalProperties" (with value <em>O</em>), then <em>O</em>
          and <em>P</em> <span class="bcp14">MUST NOT</span> have any member names in
          common; that is, no member of <em>P</em> may have a name equal to
          the name of any member of <em>O</em>, under the definition of string
          equality given in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8259#section-8.3">Section 8.3</a> of [<a class="xref" href="#RFC8259">RFC8259</a>]</span>.<a class="pilcrow" href="#section-2.2.6-3">¶</a></p>
<p id="section-2.2.6-4">Thus,<a class="pilcrow" href="#section-2.2.6-4">¶</a></p>
<div id="section-2.2.6-5">
<pre class="sourcecode lang-json">   {
     "properties": { "confusing": {} },
     "optionalProperties": { "confusing": {} }
   }
</pre><a class="pilcrow" href="#section-2.2.6-5">¶</a>
</div>
<p id="section-2.2.6-6">is not a correct JTD schema, as "confusing" appears in
   both "properties" and "optionalProperties". By
   contrast,<a class="pilcrow" href="#section-2.2.6-6">¶</a></p>
<div id="section-2.2.6-7">
<pre class="sourcecode lang-json">   {
     "properties": {
       "users": {
         "elements": {
           "properties": {
             "id": { "type": "string" },
             "name": { "type": "string" },
             "create_time": { "type": "timestamp" }
           },
           "optionalProperties": {
             "delete_time": { "type": "timestamp" }
           }
         }
       },
       "next_page_token": { "type": "string" }
     }
   }
</pre><a class="pilcrow" href="#section-2.2.6-7">¶</a>
</div>
<p id="section-2.2.6-8">is a correct JTD schema of the "properties" form,
   describing a paginated list of users and demonstrating the recursive
   nature of the syntax of JTD schemas.<a class="pilcrow" href="#section-2.2.6-8">¶</a></p>
</section>
</div>
<div id="syntax-form-values">
<section id="section-2.2.7">
          <h4 id="name-values">
<a class="section-number selfRef" href="#section-2.2.7">2.2.7. </a><a class="section-name selfRef" href="#name-values">Values</a>
          </h4>
<p id="section-2.2.7-1">The "values" form is defined by the "values" CDDL
   rule in <a class="xref" href="#cddl-schema">Figure 1</a>. The semantics
   of the "values" form are described in <a class="xref" href="#semantics-form-values">Section 3.3.7</a>.<a class="pilcrow" href="#section-2.2.7-1">¶</a></p>
<p id="section-2.2.7-2">As an example of a correct JTD schema of the "values"
   form,<a class="pilcrow" href="#section-2.2.7-2">¶</a></p>
<div id="section-2.2.7-3">
<pre class="sourcecode lang-json">   { "values": { "type": "uint8" }}
</pre><a class="pilcrow" href="#section-2.2.7-3">¶</a>
</div>
<p id="section-2.2.7-4">is a correct JTD schema, whereas<a class="pilcrow" href="#section-2.2.7-4">¶</a></p>
<div id="section-2.2.7-5">
<pre class="sourcecode lang-json">   { "values": true }
</pre><a class="pilcrow" href="#section-2.2.7-5">¶</a>
</div>
<p id="section-2.2.7-6">and<a class="pilcrow" href="#section-2.2.7-6">¶</a></p>
<div id="section-2.2.7-7">
<pre class="sourcecode lang-json">   { "values": { "type": "foo" } }
</pre><a class="pilcrow" href="#section-2.2.7-7">¶</a>
</div>
<p id="section-2.2.7-8">are not correct schemas, as neither<a class="pilcrow" href="#section-2.2.7-8">¶</a></p>
<div id="section-2.2.7-9">
<pre class="sourcecode lang-json">   true
</pre><a class="pilcrow" href="#section-2.2.7-9">¶</a>
</div>
<p id="section-2.2.7-10">nor<a class="pilcrow" href="#section-2.2.7-10">¶</a></p>
<div id="section-2.2.7-11">
<pre class="sourcecode lang-json">   { "type": "foo" }
</pre><a class="pilcrow" href="#section-2.2.7-11">¶</a>
</div>
<p id="section-2.2.7-12">are correct JTD schemas, and the value of the member named
   "values" must be a correct JTD schema.<a class="pilcrow" href="#section-2.2.7-12">¶</a></p>
</section>
</div>
<div id="syntax-form-discriminator">
<section id="section-2.2.8">
          <h4 id="name-discriminator">
<a class="section-number selfRef" href="#section-2.2.8">2.2.8. </a><a class="section-name selfRef" href="#name-discriminator">Discriminator</a>
          </h4>
<p id="section-2.2.8-1">The "discriminator" form is defined by the
   "discriminator" CDDL rule in <a class="xref" href="#cddl-schema">Figure 1</a>. The semantics of the "discriminator" form
   are described in <a class="xref" href="#semantics-form-discriminator">Section 3.3.8</a>. Understanding the semantics of the
   "discriminator" form will likely aid the reader in
   understanding why this section provides constraints on the
   "discriminator" form beyond those in <a class="xref" href="#cddl-schema">Figure 1</a>.<a class="pilcrow" href="#section-2.2.8-1">¶</a></p>
<p id="section-2.2.8-2">To prevent ambiguous or unsatisfiable constraints on the
   "discriminator" property of a tagged union, an additional
   constraint on schemas of the "discriminator" form exists. For
   schemas of the "discriminator" form:<a class="pilcrow" href="#section-2.2.8-2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2.8-3.1">Let <em>D</em> be the member of the schema with the name
     "discriminator".<a class="pilcrow" href="#section-2.2.8-3.1">¶</a>
</li>
            <li class="normal" id="section-2.2.8-3.2">Let <em>M</em> be the member of the schema with the name
     "mapping".<a class="pilcrow" href="#section-2.2.8-3.2">¶</a>
</li>
          </ul>
<p id="section-2.2.8-4">If the schema is correct, then all member values <em>S</em> of
   <em>M</em> will be schemas of the "properties" form. For each
   <em>S</em>:<a class="pilcrow" href="#section-2.2.8-4">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2.8-5.1">If <em>S</em> has a member <em>N</em> whose name equals
     "nullable", <em>N</em>'s value <span class="bcp14">MUST NOT</span> be the JSON
     primitive value "true".<a class="pilcrow" href="#section-2.2.8-5.1">¶</a>
</li>
            <li class="normal" id="section-2.2.8-5.2">For each member <em>P</em> of <em>S</em> whose name equals
     "properties" or "optionalProperties", <em>P</em>'s
     value, which must be an object, <span class="bcp14">MUST NOT</span> contain any members whose
     name equals <em>D</em>'s value.<a class="pilcrow" href="#section-2.2.8-5.2">¶</a>
</li>
          </ul>
<p id="section-2.2.8-6">Thus,<a class="pilcrow" href="#section-2.2.8-6">¶</a></p>
<div id="section-2.2.8-7">
<pre class="sourcecode lang-json">   {
     "discriminator": "event_type",
     "mapping": {
       "can_the_object_be_null_or_not?": {
         "nullable": true,
         "properties": { "foo": { "type": "string" } }}
       }
     }
   }
</pre><a class="pilcrow" href="#section-2.2.8-7">¶</a>
</div>
<p id="section-2.2.8-8">is an incorrect schema, as a member of "mapping" has a
   member named "nullable" whose value is "true". This
   would suggest that the instance may be null. Yet, the top-level
   schema lacks such a "nullable" set to "true", which
   would suggest that the instance in fact cannot be null. If this were
   a correct JTD schema, it would be unclear which piece of information
   takes precedence.<a class="pilcrow" href="#section-2.2.8-8">¶</a></p>
<p id="section-2.2.8-9">JTD handles such possible ambiguity by disallowing, at the
   syntactic level, the possibility of contradictory specifications of
   whether an instance described by a schema of the
   "discriminator" form may be null. The schemas in a
   discriminator "mapping" cannot have "nullable" set to
   "true"; only the discriminator itself can use
   "nullable" in this way.<a class="pilcrow" href="#section-2.2.8-9">¶</a></p>
<p id="section-2.2.8-10">It also follows that<a class="pilcrow" href="#section-2.2.8-10">¶</a></p>
<div id="section-2.2.8-11">
<pre class="sourcecode lang-json">   {
     "discriminator": "event_type",
     "mapping": {
       "is_event_type_a_string_or_a_float32?": {
         "properties": { "event_type": { "type": "float32" }}
       }
     }
   }
</pre><a class="pilcrow" href="#section-2.2.8-11">¶</a>
</div>
<p id="section-2.2.8-12">and<a class="pilcrow" href="#section-2.2.8-12">¶</a></p>
<div id="section-2.2.8-13">
<pre class="sourcecode lang-json">   {
     "discriminator": "event_type",
     "mapping": {
       "is_event_type_a_string_or_an_optional_float32?": {
         "optionalProperties": { "event_type": { "type": "float32" }}
       }
     }
   }
</pre><a class="pilcrow" href="#section-2.2.8-13">¶</a>
</div>
<p id="section-2.2.8-14">are incorrect schemas, as "event_type" is both the value
   of "discriminator" and a member name in one of the
   "mapping" member "properties" or
   "optionalProperties". This is ambiguous, because ordinarily
   the "discriminator" keyword would indicate that
   "event_type" is expected to be a string, but another part of
   the schema specifies that "event_type" is expected to be a
   number.<a class="pilcrow" href="#section-2.2.8-14">¶</a></p>
<p id="section-2.2.8-15">JTD handles such possible ambiguity by disallowing, at the
   syntactic level, the possibility of contradictory specifications of
   discriminator "tags". Discriminator "tags" cannot be redefined in
   other parts of the schema.<a class="pilcrow" href="#section-2.2.8-15">¶</a></p>
<p id="section-2.2.8-16">By contrast,<a class="pilcrow" href="#section-2.2.8-16">¶</a></p>
<div id="section-2.2.8-17">
<pre class="sourcecode lang-json">   {
     "discriminator": "event_type",
     "mapping": {
       "account_deleted": {
         "properties": {
           "account_id": { "type": "string" }
         }
       },
       "account_payment_plan_changed": {
         "properties": {
           "account_id": { "type": "string" },
           "payment_plan": { "enum": ["FREE", "PAID"] }
         },
         "optionalProperties": {
           "upgraded_by": { "type": "string" }
         }
       }
     }
   }
</pre><a class="pilcrow" href="#section-2.2.8-17">¶</a>
</div>
<p id="section-2.2.8-18">is a correct schema, describing a pattern of data common in
   JSON-based messaging systems. <a class="xref" href="#semantics-form-discriminator">Section 3.3.8</a> provides
   examples of what this schema accepts and rejects.<a class="pilcrow" href="#section-2.2.8-18">¶</a></p>
</section>
</div>
</section>
</div>
<div id="extending-JTD-syntax">
<section id="section-2.3">
        <h3 id="name-extending-jtds-syntax">
<a class="section-number selfRef" href="#section-2.3">2.3. </a><a class="section-name selfRef" href="#name-extending-jtds-syntax">Extending JTD's Syntax</a>
        </h3>
<p id="section-2.3-1">This document does not describe any extension mechanisms for JTD
 schema validation, which is described in <a class="xref" href="#semantics">Section 3</a>. However, schemas are defined to optionally contain
 a "metadata" keyword, whose value is an arbitrary JSON
 object. Call the members of this object "metadata members".<a class="pilcrow" href="#section-2.3-1">¶</a></p>
<p id="section-2.3-2">Users <span class="bcp14">MAY</span> add metadata members to JTD schemas to convey information
 that is not pertinent to validation. For example, such metadata
 members could provide hints to code generators or trigger some
 special behavior for a library that generates user interfaces from
 schemas.<a class="pilcrow" href="#section-2.3-2">¶</a></p>
<p id="section-2.3-3">Users <span class="bcp14">SHOULD NOT</span> expect metadata members to be understood by other
 parties. As a result, if consistent validation with other parties is a
 requirement, users <span class="bcp14">MUST NOT</span> use metadata members to affect how schema
 validation, as described in <a class="xref" href="#semantics">Section 3</a>, works.<a class="pilcrow" href="#section-2.3-3">¶</a></p>
<p id="section-2.3-4">Users <span class="bcp14">MAY</span> expect metadata members to be understood by other
 parties and <span class="bcp14">MAY</span> use metadata members to affect how schema validation
 works, if these other parties are somehow known to support these
 metadata members. For example, two parties may agree, out of band,
 that they will support an extended JTD with a custom metadata member
 that affects validation.<a class="pilcrow" href="#section-2.3-4">¶</a></p>
</section>
</div>
</section>
</div>
<div id="semantics">
<section id="section-3">
      <h2 id="name-semantics">
<a class="section-number selfRef" href="#section-3">3. </a><a class="section-name selfRef" href="#name-semantics">Semantics</a>
      </h2>
<p id="section-3-1">This section describes when an instance is valid against a correct
      JTD schema and the error indicators to produce when an instance is
      invalid.<a class="pilcrow" href="#section-3-1">¶</a></p>
<div id="allow-additional-properties">
<section id="section-3.1">
        <h3 id="name-allowing-additional-propert">
<a class="section-number selfRef" href="#section-3.1">3.1. </a><a class="section-name selfRef" href="#name-allowing-additional-propert">Allowing Additional            Properties</a>
        </h3>
<p id="section-3.1-1">Users will have different desired behavior with respect to
 "unspecified" members in an instance. For example, consider the JTD
 schema in <a class="xref" href="#JTD-properties-a">Figure 2</a>:<a class="pilcrow" href="#section-3.1-1">¶</a></p>
<span id="name-an-illustrative-jtd-schema"></span><div id="JTD-properties-a">
<figure id="figure-2">
          <div id="section-3.1-2.1">
<pre class="sourcecode lang-json">{ "properties": { "a": { "type": "string" }}}
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-2">Figure 2</a>:
<a class="selfRef" href="#name-an-illustrative-jtd-schema">An Illustrative JTD Schema</a>
          </figcaption></figure>
</div>
<p id="section-3.1-3">Some users may expect that<a class="pilcrow" href="#section-3.1-3">¶</a></p>
<div id="section-3.1-4">
<pre class="sourcecode lang-json">   {"a": "foo", "b": "bar"}
</pre><a class="pilcrow" href="#section-3.1-4">¶</a>
</div>
<p id="section-3.1-5">satisfies the schema in <a class="xref" href="#JTD-properties-a">Figure 2</a>. Others may disagree, as "b" is not one of
 the properties described in the schema. In this document, allowing
 such "unspecified" members, like "b" in this example, happens
 when evaluation is in "allow additional properties" mode.<a class="pilcrow" href="#section-3.1-5">¶</a></p>
<p id="section-3.1-6">Evaluation of a schema does not allow additional properties by
        default, but this can be overridden by having the schema include a
        member named "additionalProperties", where that member has a
        value of "true".<a class="pilcrow" href="#section-3.1-6">¶</a></p>
<p id="section-3.1-7">More formally, evaluation of a schema <em>S</em> is in "allow
 additional properties" mode if there exists a member of <em>S</em>
 whose name equals "additionalProperties" and whose value is a
 boolean "true". Otherwise, evaluation of <em>S</em> is not in
 "allow additional properties" mode.<a class="pilcrow" href="#section-3.1-7">¶</a></p>
<p id="section-3.1-8">See <a class="xref" href="#semantics-form-props">Section 3.3.6</a> for how
 allowing unknown properties affects schema evaluation, but briefly,
 the schema<a class="pilcrow" href="#section-3.1-8">¶</a></p>
<div id="section-3.1-9">
<pre class="sourcecode lang-json">   { "properties": { "a": { "type": "string" }}}
</pre><a class="pilcrow" href="#section-3.1-9">¶</a>
</div>
<p id="section-3.1-10">rejects<a class="pilcrow" href="#section-3.1-10">¶</a></p>
<div id="section-3.1-11">
<pre class="sourcecode lang-json">   { "a": "foo", "b": "bar" }
</pre><a class="pilcrow" href="#section-3.1-11">¶</a>
</div>
<p id="section-3.1-12">However, the schema<a class="pilcrow" href="#section-3.1-12">¶</a></p>
<div id="section-3.1-13">
<pre class="sourcecode lang-json">   {
     "additionalProperties": true,
     "properties": { "a": { "type": "string" }}
   }
</pre><a class="pilcrow" href="#section-3.1-13">¶</a>
</div>
<p id="section-3.1-14">accepts<a class="pilcrow" href="#section-3.1-14">¶</a></p>
<div id="section-3.1-15">
<pre class="sourcecode lang-json">   { "a": "foo", "b": "bar" }
</pre><a class="pilcrow" href="#section-3.1-15">¶</a>
</div>
<p id="section-3.1-16">Note that "additionalProperties" does not get "inherited" by
 subschemas. For example, the JTD schema<a class="pilcrow" href="#section-3.1-16">¶</a></p>
<div id="section-3.1-17">
<pre class="sourcecode lang-json">   {
     "additionalProperties": true,
     "properties": {
       "a": {
         "properties": {
           "b": { "type": "string" }
         }
       }
     }
   }
</pre><a class="pilcrow" href="#section-3.1-17">¶</a>
</div>
<p id="section-3.1-18">accepts<a class="pilcrow" href="#section-3.1-18">¶</a></p>
<div id="section-3.1-19">
<pre class="sourcecode lang-json">   { "a": { "b": "c" }, "foo": "bar" }
</pre><a class="pilcrow" href="#section-3.1-19">¶</a>
</div>
<p id="section-3.1-20">but rejects<a class="pilcrow" href="#section-3.1-20">¶</a></p>
<div id="section-3.1-21">
<pre class="sourcecode lang-json">   { "a": { "b": "c", "foo": "bar" }}
</pre><a class="pilcrow" href="#section-3.1-21">¶</a>
</div>
<p id="section-3.1-22">because the "additionalProperties" at the root level does
 not affect the behavior of subschemas.<a class="pilcrow" href="#section-3.1-22">¶</a></p>
<p id="section-3.1-23">Note from <a class="xref" href="#cddl-schema">Figure 1</a> that only
 schemas of the "properties" form may have a member named
 "additionalProperties".<a class="pilcrow" href="#section-3.1-23">¶</a></p>
</section>
</div>
<div id="errors">
<section id="section-3.2">
        <h3 id="name-errors">
<a class="section-number selfRef" href="#section-3.2">3.2. </a><a class="section-name selfRef" href="#name-errors">Errors</a>
        </h3>
<p id="section-3.2-1">To facilitate consistent validation error handling, this document
 specifies a standard error indicator format. Implementations <span class="bcp14">SHOULD</span>
 support producing error indicators in this standard form.<a class="pilcrow" href="#section-3.2-1">¶</a></p>
<p id="section-3.2-2">The standard error indicator format is a JSON array. The order of
 the elements of this array is not specified. The elements of this
 array are JSON objects with:<a class="pilcrow" href="#section-3.2-2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2-3.1">A member with the name "instancePath", whose value is a
   JSON string encoding a JSON Pointer. This JSON Pointer will point to
   the part of the instance that was rejected.<a class="pilcrow" href="#section-3.2-3.1">¶</a>
</li>
          <li class="normal" id="section-3.2-3.2">A member with the name "schemaPath", whose value is a
   JSON string encoding a JSON Pointer. This JSON Pointer will point to
   the part of the schema that rejected the instance.<a class="pilcrow" href="#section-3.2-3.2">¶</a>
</li>
        </ul>
<p id="section-3.2-4">The values for "instancePath" and "schemaPath" depend
 on the form of the schema and are described in detail in <a class="xref" href="#semantics-forms">Section 3.3</a>.<a class="pilcrow" href="#section-3.2-4">¶</a></p>
</section>
</div>
<div id="semantics-forms">
<section id="section-3.3">
        <h3 id="name-forms-2">
<a class="section-number selfRef" href="#section-3.3">3.3. </a><a class="section-name selfRef" href="#name-forms-2">Forms</a>
        </h3>
<p id="section-3.3-1">This section describes, for each of the eight JTD schema forms, the
 rules dictating whether an instance is accepted, as well as the error
 indicators to produce when an instance is invalid.<a class="pilcrow" href="#section-3.3-1">¶</a></p>
<p id="section-3.3-2">The forms a correct schema may take on are formally described in
 <a class="xref" href="#syntax">Section 2</a>.<a class="pilcrow" href="#section-3.3-2">¶</a></p>
<div id="semantics-form-empty">
<section id="section-3.3.1">
          <h4 id="name-empty-2">
<a class="section-number selfRef" href="#section-3.3.1">3.3.1. </a><a class="section-name selfRef" href="#name-empty-2">Empty</a>
          </h4>
<p id="section-3.3.1-1">The "empty" form is meant to describe instances whose
   values are unknown, unpredictable, or otherwise unconstrained by the
   schema. The syntax of the "empty" form is described in <a class="xref" href="#syntax-form-empty">Section 2.2.1</a>.<a class="pilcrow" href="#section-3.3.1-1">¶</a></p>
<p id="section-3.3.1-2">If a schema is of the "empty" form, then it accepts all
   instances. A schema of the "empty" form will never produce any error
   indicators.<a class="pilcrow" href="#section-3.3.1-2">¶</a></p>
</section>
</div>
<div id="semantics-form-ref">
<section id="section-3.3.2">
          <h4 id="name-ref-2">
<a class="section-number selfRef" href="#section-3.3.2">3.3.2. </a><a class="section-name selfRef" href="#name-ref-2">Ref</a>
          </h4>
<p id="section-3.3.2-1">The "ref" form is for when a schema is defined in terms of
   something in the "definitions" of the root schema. The "ref"
   form enables schemas to be less repetitive and also enables
   describing recursive structures. The syntax of the "ref" form
   is described in <a class="xref" href="#syntax-form-ref">Section 2.2.2</a>.<a class="pilcrow" href="#section-3.3.2-1">¶</a></p>
<p id="section-3.3.2-2">If a schema is of the "ref" form, then:<a class="pilcrow" href="#section-3.3.2-2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3.2-3.1">
              <p id="section-3.3.2-3.1.1">If the schema has a member named "nullable" whose value
     is the boolean "true", and the instance is the JSON
     primitive value "null", then the schema accepts the
     instance.<a class="pilcrow" href="#section-3.3.2-3.1.1">¶</a></p>
<p id="section-3.3.2-3.1.2">Otherwise:<a class="pilcrow" href="#section-3.3.2-3.1.2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3.2-3.1.3.1">Let <em>R</em> be the value of the schema member with the name
     "ref".<a class="pilcrow" href="#section-3.3.2-3.1.3.1">¶</a>
</li>
                <li class="normal" id="section-3.3.2-3.1.3.2">Let <em>B</em> be the root schema containing the schema or
     the schema itself if it is a root schema.<a class="pilcrow" href="#section-3.3.2-3.1.3.2">¶</a>
</li>
                <li class="normal" id="section-3.3.2-3.1.3.3">Let <em>D</em> be the member of <em>B</em> with the name

     "definitions". Per <a class="xref" href="#syntax">Section 2</a>,
     we know <em>D</em> exists.<a class="pilcrow" href="#section-3.3.2-3.1.3.3">¶</a>
</li>
                <li class="normal" id="section-3.3.2-3.1.3.4">Let <em>S</em> be the value of the member of <em>D</em> whose
     name equals <em>R</em>. Per <a class="xref" href="#syntax-form-ref">Section 2.2.2</a>, we know <em>S</em> exists and is a schema.<a class="pilcrow" href="#section-3.3.2-3.1.3.4">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-3.3.2-4">The schema accepts the instance if and only if <em>S</em> accepts
   the instance. Otherwise, the error indicators to return in this case
   are the union of the error indicators from evaluating <em>S</em>
   against the instance.<a class="pilcrow" href="#section-3.3.2-4">¶</a></p>
<p id="section-3.3.2-5">For example, the schema<a class="pilcrow" href="#section-3.3.2-5">¶</a></p>
<div id="section-3.3.2-6">
<pre class="sourcecode lang-json">   {
     "definitions": { "a": { "type": "float32" }},
     "ref": "a"
   }
</pre><a class="pilcrow" href="#section-3.3.2-6">¶</a>
</div>
<p id="section-3.3.2-7">accepts<a class="pilcrow" href="#section-3.3.2-7">¶</a></p>
<div id="section-3.3.2-8">
<pre class="sourcecode lang-json">   123
</pre><a class="pilcrow" href="#section-3.3.2-8">¶</a>
</div>
<p id="section-3.3.2-9">but rejects<a class="pilcrow" href="#section-3.3.2-9">¶</a></p>
<div id="section-3.3.2-10">
<pre class="sourcecode lang-json">   null
</pre><a class="pilcrow" href="#section-3.3.2-10">¶</a>
</div>
<p id="section-3.3.2-11">with the error indicator<a class="pilcrow" href="#section-3.3.2-11">¶</a></p>
<div id="section-3.3.2-12">
<pre class="sourcecode lang-json">   [{ "instancePath": "", "schemaPath": "/definitions/a/type" }]
</pre><a class="pilcrow" href="#section-3.3.2-12">¶</a>
</div>
<p id="section-3.3.2-13">The schema<a class="pilcrow" href="#section-3.3.2-13">¶</a></p>
<div id="section-3.3.2-14">
<pre class="sourcecode lang-json">   {
     "definitions": { "a": { "type": "float32" }},
     "ref": "a",
     "nullable": true
   }
</pre><a class="pilcrow" href="#section-3.3.2-14">¶</a>
</div>
<p id="section-3.3.2-15">accepts<a class="pilcrow" href="#section-3.3.2-15">¶</a></p>
<div id="section-3.3.2-16">
<pre class="sourcecode lang-json">   null
</pre><a class="pilcrow" href="#section-3.3.2-16">¶</a>
</div>
<p id="section-3.3.2-17">because the schema has a "nullable" member whose value is
   "true".<a class="pilcrow" href="#section-3.3.2-17">¶</a></p>
<p id="section-3.3.2-18">Note that "nullable" being "false" has no effect in
   any of the forms described in this document. For example, the
   schema<a class="pilcrow" href="#section-3.3.2-18">¶</a></p>
<div id="section-3.3.2-19">
<pre class="sourcecode lang-json">   {
     "definitions": { "a": { "nullable": false, "type": "float32" }},
     "ref": "a",
     "nullable": true
   }
</pre><a class="pilcrow" href="#section-3.3.2-19">¶</a>
</div>
<p id="section-3.3.2-20">accepts<a class="pilcrow" href="#section-3.3.2-20">¶</a></p>
<div id="section-3.3.2-21">
<pre class="sourcecode lang-json">   null
</pre><a class="pilcrow" href="#section-3.3.2-21">¶</a>
</div>
<p id="section-3.3.2-22">In other words, it is not the case that putting a "false"
   value for "nullable" will ever override a "nullable"
   member in schemas of the "ref" form; it is correct, though
   ineffectual, to have a value of "false" for the
   "nullable" member in a schema.<a class="pilcrow" href="#section-3.3.2-22">¶</a></p>
</section>
</div>
<div id="semantics-form-type">
<section id="section-3.3.3">
          <h4 id="name-type-2">
<a class="section-number selfRef" href="#section-3.3.3">3.3.3. </a><a class="section-name selfRef" href="#name-type-2">Type</a>
          </h4>
<p id="section-3.3.3-1">The "type" form is meant to describe instances whose value
   is a boolean, number, string, or timestamp <span>[<a class="xref" href="#RFC3339">RFC3339</a>]</span>. The syntax of the "type" form is
   described in <a class="xref" href="#syntax-form-type">Section 2.2.3</a>.<a class="pilcrow" href="#section-3.3.3-1">¶</a></p>
<p id="section-3.3.3-2">If a schema is of the "type" form, then:<a class="pilcrow" href="#section-3.3.3-2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3.3-3.1">
              <p id="section-3.3.3-3.1.1">If the schema has a member named "nullable" whose value
     is the boolean "true", and the instance is the JSON
     primitive value "null", then the schema accepts the
     instance.<a class="pilcrow" href="#section-3.3.3-3.1.1">¶</a></p>
<p id="section-3.3.3-3.1.2">Otherwise:<a class="pilcrow" href="#section-3.3.3-3.1.2">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-3.3.3-3.1.3.1">Let <em>T</em> be the value of the member with the name "type". The
following table describes whether the instance is accepted, as a function of
<em>T</em>'s value:<a class="pilcrow" href="#section-3.3.3-3.1.3.1">¶</a>
</li>
                <li class="normal ulEmpty" id="section-3.3.3-3.1.3.2">
                  <span id="name-accepted-values-for-type"></span><div id="type-values">
<table class="center" id="table-1">
                    <caption>
<a class="selfRef" href="#table-1">Table 1</a>:
<a class="selfRef" href="#name-accepted-values-for-type">Accepted Values for Type</a>
                    </caption>
<thead>
                      <tr>
                        <th class="text-left" colspan="1" rowspan="1">If <em>"T"</em> equals ...</th>
                        <th class="text-left" colspan="1" rowspan="1">then the instance is accepted if it is ...</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td class="text-left" colspan="1" rowspan="1">boolean</td>
                        <td class="text-left" colspan="1" rowspan="1">equal to "true" or "false"</td>
                      </tr>
                      <tr>
                        <td class="text-left" colspan="1" rowspan="1">float32</td>
                        <td class="text-left" colspan="1" rowspan="1">a JSON number</td>
                      </tr>
                      <tr>
                        <td class="text-left" colspan="1" rowspan="1">float64</td>
                        <td class="text-left" colspan="1" rowspan="1">a JSON number</td>
                      </tr>
                      <tr>
                        <td class="text-left" colspan="1" rowspan="1">int8</td>
                        <td class="text-left" colspan="1" rowspan="1">See <a class="xref" href="#int-ranges">Table 2</a>
</td>
                      </tr>
                      <tr>
                        <td class="text-left" colspan="1" rowspan="1">uint8</td>
                        <td class="text-left" colspan="1" rowspan="1">See <a class="xref" href="#int-ranges">Table 2</a>
</td>
                      </tr>
                      <tr>
                        <td class="text-left" colspan="1" rowspan="1">int16</td>
                        <td class="text-left" colspan="1" rowspan="1">See <a class="xref" href="#int-ranges">Table 2</a>
</td>
                      </tr>
                      <tr>
                        <td class="text-left" colspan="1" rowspan="1">uint16</td>
                        <td class="text-left" colspan="1" rowspan="1">See <a class="xref" href="#int-ranges">Table 2</a>
</td>
                      </tr>
                      <tr>
                        <td class="text-left" colspan="1" rowspan="1">int32</td>
                        <td class="text-left" colspan="1" rowspan="1">See <a class="xref" href="#int-ranges">Table 2</a>
</td>
                      </tr>
                      <tr>
                        <td class="text-left" colspan="1" rowspan="1">uint32</td>
                        <td class="text-left" colspan="1" rowspan="1">See <a class="xref" href="#int-ranges">Table 2</a>
</td>
                      </tr>
                      <tr>
                        <td class="text-left" colspan="1" rowspan="1">string</td>
                        <td class="text-left" colspan="1" rowspan="1">a JSON string</td>
                      </tr>
                      <tr>
                        <td class="text-left" colspan="1" rowspan="1">timestamp</td>
                        <td class="text-left" colspan="1" rowspan="1">a JSON string that follows the standard
 format described in <span>[<a class="xref" href="#RFC3339">RFC3339</a>]</span>,
 as refined by <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc4287#section-3.3">Section 3.3</a> of [<a class="xref" href="#RFC4287">RFC4287</a>]</span>
</td>
                      </tr>
                    </tbody>
                  </table>
</div>
<p id="section-3.3.3-3.1.3.2.2">"float32" and "float64" are distinguished from each
   other in their intent. "float32" indicates data intended to
   be processed as an IEEE 754 single-precision float, whereas
   "float64" indicates data intended to be processed as an IEEE
   754 double-precision float. Tools that generate code from JTD
   schemas will likely produce different code for "float32" than
   for "float64".<a class="pilcrow" href="#section-3.3.3-3.1.3.2.2">¶</a></p>
</li>
              </ul>
</li>
          </ul>
<p id="section-3.3.3-4">If <em>T</em> starts with "int" or "uint", then the
   instance is accepted if and only if it is a JSON number encoding a
   value with zero fractional part. Depending on the value of
   <em>T</em>, this encoded number must additionally fall within a
   particular range:<a class="pilcrow" href="#section-3.3.3-4">¶</a></p>
<span id="name-ranges-for-integer-types"></span><div id="int-ranges">
<table class="center" id="table-2">
            <caption>
<a class="selfRef" href="#table-2">Table 2</a>:
<a class="selfRef" href="#name-ranges-for-integer-types">Ranges for Integer Types</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" colspan="1" rowspan="1">
                  <em>"T"</em>
</th>
                <th class="text-left" colspan="1" rowspan="1">Minimum Value (Inclusive)</th>
                <th class="text-left" colspan="1" rowspan="1">Maximum Value (Inclusive)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">int8</td>
                <td class="text-left" colspan="1" rowspan="1">-128</td>
                <td class="text-left" colspan="1" rowspan="1">127</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">uint8</td>
                <td class="text-left" colspan="1" rowspan="1">0</td>
                <td class="text-left" colspan="1" rowspan="1">255</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">int16</td>
                <td class="text-left" colspan="1" rowspan="1">-32,768</td>
                <td class="text-left" colspan="1" rowspan="1">32,767</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">uint16</td>
                <td class="text-left" colspan="1" rowspan="1">0</td>
                <td class="text-left" colspan="1" rowspan="1">65,535</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">int32</td>
                <td class="text-left" colspan="1" rowspan="1">-2,147,483,648</td>
                <td class="text-left" colspan="1" rowspan="1">2,147,483,647</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">uint32</td>
                <td class="text-left" colspan="1" rowspan="1">0</td>
                <td class="text-left" colspan="1" rowspan="1">4,294,967,295</td>
              </tr>
            </tbody>
          </table>
</div>
<p id="section-3.3.3-6">Note that<a class="pilcrow" href="#section-3.3.3-6">¶</a></p>
<div id="section-3.3.3-7">
<pre class="sourcecode lang-json">   10
</pre><a class="pilcrow" href="#section-3.3.3-7">¶</a>
</div>
<p id="section-3.3.3-8">and<a class="pilcrow" href="#section-3.3.3-8">¶</a></p>
<div id="section-3.3.3-9">
<pre class="sourcecode lang-json">   10.0
</pre><a class="pilcrow" href="#section-3.3.3-9">¶</a>
</div>
<p id="section-3.3.3-10">and<a class="pilcrow" href="#section-3.3.3-10">¶</a></p>
<div id="section-3.3.3-11">
<pre class="sourcecode lang-json">   1.0e1
</pre><a class="pilcrow" href="#section-3.3.3-11">¶</a>
</div>
<p id="section-3.3.3-12">encode values with zero fractional part, whereas<a class="pilcrow" href="#section-3.3.3-12">¶</a></p>
<div id="section-3.3.3-13">
<pre class="sourcecode lang-json">   10.5
</pre><a class="pilcrow" href="#section-3.3.3-13">¶</a>
</div>
<p id="section-3.3.3-14">encodes a number with a non-zero fractional part. Thus, the schema<a class="pilcrow" href="#section-3.3.3-14">¶</a></p>
<div id="section-3.3.3-15">
<pre class="sourcecode lang-json">   {"type": "int8"}
</pre><a class="pilcrow" href="#section-3.3.3-15">¶</a>
</div>
<p id="section-3.3.3-16">accepts<a class="pilcrow" href="#section-3.3.3-16">¶</a></p>
<div id="section-3.3.3-17">
<pre class="sourcecode lang-json">   10
</pre><a class="pilcrow" href="#section-3.3.3-17">¶</a>
</div>
<p id="section-3.3.3-18">and<a class="pilcrow" href="#section-3.3.3-18">¶</a></p>
<div id="section-3.3.3-19">
<pre class="sourcecode lang-json">   10.0
</pre><a class="pilcrow" href="#section-3.3.3-19">¶</a>
</div>
<p id="section-3.3.3-20">and<a class="pilcrow" href="#section-3.3.3-20">¶</a></p>
<div id="section-3.3.3-21">
<pre class="sourcecode lang-json">   1.0e1
</pre><a class="pilcrow" href="#section-3.3.3-21">¶</a>
</div>
<p id="section-3.3.3-22">but rejects<a class="pilcrow" href="#section-3.3.3-22">¶</a></p>
<div id="section-3.3.3-23">
<pre class="sourcecode lang-json">   10.5
</pre><a class="pilcrow" href="#section-3.3.3-23">¶</a>
</div>
<p id="section-3.3.3-24">as well as<a class="pilcrow" href="#section-3.3.3-24">¶</a></p>
<div id="section-3.3.3-25">
<pre class="sourcecode lang-json">   false
</pre><a class="pilcrow" href="#section-3.3.3-25">¶</a>
</div>
<p id="section-3.3.3-26">because "false" is not a number at all.<a class="pilcrow" href="#section-3.3.3-26">¶</a></p>
<p id="section-3.3.3-27">If the instance is not accepted, then the error indicator for
   this case shall have an "instancePath" pointing to the
   instance and a "schemaPath" pointing to the schema member
   with the name "type".<a class="pilcrow" href="#section-3.3.3-27">¶</a></p>
<p id="section-3.3.3-28">For example, the schema<a class="pilcrow" href="#section-3.3.3-28">¶</a></p>
<div id="section-3.3.3-29">
<pre class="sourcecode lang-json">   {"type": "boolean"}
</pre><a class="pilcrow" href="#section-3.3.3-29">¶</a>
</div>
<p id="section-3.3.3-30">accepts<a class="pilcrow" href="#section-3.3.3-30">¶</a></p>
<div id="section-3.3.3-31">
<pre class="sourcecode lang-json">   false
</pre><a class="pilcrow" href="#section-3.3.3-31">¶</a>
</div>
<p id="section-3.3.3-32">but rejects<a class="pilcrow" href="#section-3.3.3-32">¶</a></p>
<div id="section-3.3.3-33">
<pre class="sourcecode lang-json">   127
</pre><a class="pilcrow" href="#section-3.3.3-33">¶</a>
</div>
<p id="section-3.3.3-34">The schema<a class="pilcrow" href="#section-3.3.3-34">¶</a></p>
<div id="section-3.3.3-35">
<pre class="sourcecode lang-json">   {"type": "float32"}
</pre><a class="pilcrow" href="#section-3.3.3-35">¶</a>
</div>
<p id="section-3.3.3-36">accepts<a class="pilcrow" href="#section-3.3.3-36">¶</a></p>
<div id="section-3.3.3-37">
<pre class="sourcecode lang-json">   10.5
</pre><a class="pilcrow" href="#section-3.3.3-37">¶</a>
</div>
<p id="section-3.3.3-38">and<a class="pilcrow" href="#section-3.3.3-38">¶</a></p>
<div id="section-3.3.3-39">
<pre class="sourcecode lang-json">   127
</pre><a class="pilcrow" href="#section-3.3.3-39">¶</a>
</div>
<p id="section-3.3.3-40">but rejects<a class="pilcrow" href="#section-3.3.3-40">¶</a></p>
<div id="section-3.3.3-41">
<pre class="sourcecode lang-json">   false
</pre><a class="pilcrow" href="#section-3.3.3-41">¶</a>
</div>
<p id="section-3.3.3-42">The schema<a class="pilcrow" href="#section-3.3.3-42">¶</a></p>
<div id="section-3.3.3-43">
<pre class="sourcecode lang-json">   {"type": "string"}
</pre><a class="pilcrow" href="#section-3.3.3-43">¶</a>
</div>
<p id="section-3.3.3-44">accepts<a class="pilcrow" href="#section-3.3.3-44">¶</a></p>
<div id="section-3.3.3-45">
<pre class="sourcecode lang-json">   "1985-04-12T23:20:50.52Z"
</pre><a class="pilcrow" href="#section-3.3.3-45">¶</a>
</div>
<p id="section-3.3.3-46">and<a class="pilcrow" href="#section-3.3.3-46">¶</a></p>
<div id="section-3.3.3-47">
<pre class="sourcecode lang-json">   "foo"
</pre><a class="pilcrow" href="#section-3.3.3-47">¶</a>
</div>
<p id="section-3.3.3-48">but rejects<a class="pilcrow" href="#section-3.3.3-48">¶</a></p>
<div id="section-3.3.3-49">
<pre class="sourcecode lang-json">   false
</pre><a class="pilcrow" href="#section-3.3.3-49">¶</a>
</div>
<p id="section-3.3.3-50">The schema<a class="pilcrow" href="#section-3.3.3-50">¶</a></p>
<div id="section-3.3.3-51">
<pre class="sourcecode lang-json">   {"type": "timestamp"}
</pre><a class="pilcrow" href="#section-3.3.3-51">¶</a>
</div>
<p id="section-3.3.3-52">accepts<a class="pilcrow" href="#section-3.3.3-52">¶</a></p>
<div id="section-3.3.3-53">
<pre class="sourcecode lang-json">   "1985-04-12T23:20:50.52Z"
</pre><a class="pilcrow" href="#section-3.3.3-53">¶</a>
</div>
<p id="section-3.3.3-54">but rejects<a class="pilcrow" href="#section-3.3.3-54">¶</a></p>
<div id="section-3.3.3-55">
<pre class="sourcecode lang-json">   "foo"
</pre><a class="pilcrow" href="#section-3.3.3-55">¶</a>
</div>
<p id="section-3.3.3-56">and<a class="pilcrow" href="#section-3.3.3-56">¶</a></p>
<div id="section-3.3.3-57">
<pre class="sourcecode lang-json">   false
</pre><a class="pilcrow" href="#section-3.3.3-57">¶</a>
</div>
<p id="section-3.3.3-58">The schema<a class="pilcrow" href="#section-3.3.3-58">¶</a></p>
<div id="section-3.3.3-59">
<pre class="sourcecode lang-json">   {"type": "boolean", "nullable": true}
</pre><a class="pilcrow" href="#section-3.3.3-59">¶</a>
</div>
<p id="section-3.3.3-60">accepts<a class="pilcrow" href="#section-3.3.3-60">¶</a></p>
<div id="section-3.3.3-61">
<pre class="sourcecode lang-json">   null
</pre><a class="pilcrow" href="#section-3.3.3-61">¶</a>
</div>
<p id="section-3.3.3-62">and<a class="pilcrow" href="#section-3.3.3-62">¶</a></p>
<div id="section-3.3.3-63">
<pre class="sourcecode lang-json">   false
</pre><a class="pilcrow" href="#section-3.3.3-63">¶</a>
</div>
<p id="section-3.3.3-64">but rejects<a class="pilcrow" href="#section-3.3.3-64">¶</a></p>
<div id="section-3.3.3-65">
<pre class="sourcecode lang-json">   127
</pre><a class="pilcrow" href="#section-3.3.3-65">¶</a>
</div>
<p id="section-3.3.3-66">In all of the examples of rejected instances given in this
   section, the error indicator to produce is:<a class="pilcrow" href="#section-3.3.3-66">¶</a></p>
<div id="section-3.3.3-67">
<pre class="sourcecode lang-json">   [{ "instancePath": "", "schemaPath": "/type" }]
</pre><a class="pilcrow" href="#section-3.3.3-67">¶</a>
</div>
</section>
</div>
<div id="semantics-form-enum">
<section id="section-3.3.4">
          <h4 id="name-enum-2">
<a class="section-number selfRef" href="#section-3.3.4">3.3.4. </a><a class="section-name selfRef" href="#name-enum-2">Enum</a>
          </h4>
<p id="section-3.3.4-1">The "enum" form is meant to describe instances whose value
   must be one of a given set of string values. The syntax of the
   "enum" form is described in <a class="xref" href="#syntax-form-enum">Section 2.2.4</a>.<a class="pilcrow" href="#section-3.3.4-1">¶</a></p>
<p id="section-3.3.4-2">If a schema is of the "enum" form, then:<a class="pilcrow" href="#section-3.3.4-2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3.4-3.1">
              <p id="section-3.3.4-3.1.1">If the schema has a member named "nullable" whose value
     is the boolean "true", and the instance is the JSON
     primitive value "null", then the schema accepts the
     instance.<a class="pilcrow" href="#section-3.3.4-3.1.1">¶</a></p>
<p id="section-3.3.4-3.1.2">Otherwise:<a class="pilcrow" href="#section-3.3.4-3.1.2">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-3.3.4-3.1.3.1">Let <em>E</em> be the value of the schema member with the name "enum". The
instance is accepted if and only if it is equal to one of the elements of
<em>E</em>.<a class="pilcrow" href="#section-3.3.4-3.1.3.1">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-3.3.4-4">If the instance is not accepted, then the error indicator for
   this case shall have an "instancePath" pointing to the
   instance and a "schemaPath" pointing to the schema member
   with the name "enum".<a class="pilcrow" href="#section-3.3.4-4">¶</a></p>
<p id="section-3.3.4-5">For example, the schema<a class="pilcrow" href="#section-3.3.4-5">¶</a></p>
<div id="section-3.3.4-6">
<pre class="sourcecode lang-json">   { "enum": ["PENDING", "DONE", "CANCELED"] }
</pre><a class="pilcrow" href="#section-3.3.4-6">¶</a>
</div>
<p id="section-3.3.4-7">accepts<a class="pilcrow" href="#section-3.3.4-7">¶</a></p>
<div id="section-3.3.4-8">
<pre class="sourcecode lang-json">   "PENDING"
</pre><a class="pilcrow" href="#section-3.3.4-8">¶</a>
</div>
<p id="section-3.3.4-9">and<a class="pilcrow" href="#section-3.3.4-9">¶</a></p>
<div id="section-3.3.4-10">
<pre class="sourcecode lang-json">   "DONE"
</pre><a class="pilcrow" href="#section-3.3.4-10">¶</a>
</div>
<p id="section-3.3.4-11">and<a class="pilcrow" href="#section-3.3.4-11">¶</a></p>
<div id="section-3.3.4-12">
<pre class="sourcecode lang-json">   "CANCELED"
</pre><a class="pilcrow" href="#section-3.3.4-12">¶</a>
</div>
<p id="section-3.3.4-13">but rejects all of<a class="pilcrow" href="#section-3.3.4-13">¶</a></p>
<div id="section-3.3.4-14">
<pre class="sourcecode lang-json">   0
</pre><a class="pilcrow" href="#section-3.3.4-14">¶</a>
</div>
<p id="section-3.3.4-15">and<a class="pilcrow" href="#section-3.3.4-15">¶</a></p>
<div id="section-3.3.4-16">
<pre class="sourcecode lang-json">   1
</pre><a class="pilcrow" href="#section-3.3.4-16">¶</a>
</div>
<p id="section-3.3.4-17">and<a class="pilcrow" href="#section-3.3.4-17">¶</a></p>
<div id="section-3.3.4-18">
<pre class="sourcecode lang-json">   2
</pre><a class="pilcrow" href="#section-3.3.4-18">¶</a>
</div>
<p id="section-3.3.4-19">and<a class="pilcrow" href="#section-3.3.4-19">¶</a></p>
<div id="section-3.3.4-20">
<pre class="sourcecode lang-json">   "UNKNOWN"
</pre><a class="pilcrow" href="#section-3.3.4-20">¶</a>
</div>
<p id="section-3.3.4-21">and<a class="pilcrow" href="#section-3.3.4-21">¶</a></p>
<div id="section-3.3.4-22">
<pre class="sourcecode lang-json">   null
</pre><a class="pilcrow" href="#section-3.3.4-22">¶</a>
</div>
<p id="section-3.3.4-23">with the error indicator<a class="pilcrow" href="#section-3.3.4-23">¶</a></p>
<div id="section-3.3.4-24">
<pre class="sourcecode lang-json">   [{ "instancePath": "", "schemaPath": "/enum" }]
</pre><a class="pilcrow" href="#section-3.3.4-24">¶</a>
</div>
<p id="section-3.3.4-25">The schema<a class="pilcrow" href="#section-3.3.4-25">¶</a></p>
<div id="section-3.3.4-26">
<pre class="sourcecode lang-json">   { "enum": ["PENDING", "DONE", "CANCELED"], "nullable": true }
</pre><a class="pilcrow" href="#section-3.3.4-26">¶</a>
</div>
<p id="section-3.3.4-27">accepts<a class="pilcrow" href="#section-3.3.4-27">¶</a></p>
<div id="section-3.3.4-28">
<pre class="sourcecode lang-json">   "PENDING"
</pre><a class="pilcrow" href="#section-3.3.4-28">¶</a>
</div>
<p id="section-3.3.4-29">and<a class="pilcrow" href="#section-3.3.4-29">¶</a></p>
<div id="section-3.3.4-30">
<pre class="sourcecode lang-json">   null
</pre><a class="pilcrow" href="#section-3.3.4-30">¶</a>
</div>
<p id="section-3.3.4-31">but rejects<a class="pilcrow" href="#section-3.3.4-31">¶</a></p>
<div id="section-3.3.4-32">
<pre class="sourcecode lang-json">   1
</pre><a class="pilcrow" href="#section-3.3.4-32">¶</a>
</div>
<p id="section-3.3.4-33">and<a class="pilcrow" href="#section-3.3.4-33">¶</a></p>
<div id="section-3.3.4-34">
<pre class="sourcecode lang-json">   "UNKNOWN"
</pre><a class="pilcrow" href="#section-3.3.4-34">¶</a>
</div>
<p id="section-3.3.4-35">with the error indicator<a class="pilcrow" href="#section-3.3.4-35">¶</a></p>
<div id="section-3.3.4-36">
<pre class="sourcecode lang-json">   [{ "instancePath": "", "schemaPath": "/enum" }]
</pre><a class="pilcrow" href="#section-3.3.4-36">¶</a>
</div>
</section>
</div>
<div id="semantics-form-elements">
<section id="section-3.3.5">
          <h4 id="name-elements-2">
<a class="section-number selfRef" href="#section-3.3.5">3.3.5. </a><a class="section-name selfRef" href="#name-elements-2">Elements</a>
          </h4>
<p id="section-3.3.5-1">The "elements" form is meant to describe instances that
   must be arrays. A further subschema describes the elements of the
   array. The syntax of the "elements" form is described in
   <a class="xref" href="#syntax-form-elements">Section 2.2.5</a>.<a class="pilcrow" href="#section-3.3.5-1">¶</a></p>
<p id="section-3.3.5-2">If a schema is of the "elements" form, then:<a class="pilcrow" href="#section-3.3.5-2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3.5-3.1">
              <p id="section-3.3.5-3.1.1">If the schema has a member named "nullable" whose value
     is the boolean "true", and the instance is the JSON
     primitive value "null", then the schema accepts the
     instance.<a class="pilcrow" href="#section-3.3.5-3.1.1">¶</a></p>
<p id="section-3.3.5-3.1.2">Otherwise:<a class="pilcrow" href="#section-3.3.5-3.1.2">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-3.3.5-3.1.3.1">
                  <p id="section-3.3.5-3.1.3.1.1">Let <em>S</em> be the value of the schema member with the
       name "elements". The instance is accepted if and only if
       all of the following are true:<a class="pilcrow" href="#section-3.3.5-3.1.3.1.1">¶</a></p>
</li>
                <li class="normal ulEmpty" id="section-3.3.5-3.1.3.2">
                  <ul class="normal">
<li class="normal" id="section-3.3.5-3.1.3.2.1.1">The instance is an array. Otherwise, the error indicator
 for this case shall have an "instancePath" pointing to
 the instance and a "schemaPath" pointing to the schema
 member with the name "elements".<a class="pilcrow" href="#section-3.3.5-3.1.3.2.1.1">¶</a>
</li>
                    <li class="normal" id="section-3.3.5-3.1.3.2.1.2">If the instance is an array, then every element of the
 instance must be accepted by <em>S</em>. Otherwise, the error
 indicators for this case are the union of all the errors
 arising from evaluating <em>S</em> against elements of the
 instance.<a class="pilcrow" href="#section-3.3.5-3.1.3.2.1.2">¶</a>
</li>
                  </ul>
</li>
              </ul>
</li>
          </ul>
<p id="section-3.3.5-4">For example, the schema<a class="pilcrow" href="#section-3.3.5-4">¶</a></p>
<div id="section-3.3.5-5">
<pre class="sourcecode lang-json">   {
     "elements": {
       "type": "float32"
     }
   }
</pre><a class="pilcrow" href="#section-3.3.5-5">¶</a>
</div>
<p id="section-3.3.5-6">accepts<a class="pilcrow" href="#section-3.3.5-6">¶</a></p>
<div id="section-3.3.5-7">
<pre class="sourcecode lang-json">   []
</pre><a class="pilcrow" href="#section-3.3.5-7">¶</a>
</div>
<p id="section-3.3.5-8">and<a class="pilcrow" href="#section-3.3.5-8">¶</a></p>
<div id="section-3.3.5-9">
<pre class="sourcecode lang-json">   [1, 2, 3]
</pre><a class="pilcrow" href="#section-3.3.5-9">¶</a>
</div>
<p id="section-3.3.5-10">but rejects<a class="pilcrow" href="#section-3.3.5-10">¶</a></p>
<div id="section-3.3.5-11">
<pre class="sourcecode lang-json">   null
</pre><a class="pilcrow" href="#section-3.3.5-11">¶</a>
</div>
<p id="section-3.3.5-12">with the error indicator<a class="pilcrow" href="#section-3.3.5-12">¶</a></p>
<div id="section-3.3.5-13">
<pre class="sourcecode lang-json">   [{ "instancePath": "", "schemaPath": "/elements" }]
</pre><a class="pilcrow" href="#section-3.3.5-13">¶</a>
</div>
<p id="section-3.3.5-14">and rejects<a class="pilcrow" href="#section-3.3.5-14">¶</a></p>
<div id="section-3.3.5-15">
<pre class="sourcecode lang-json">   [1, 2, "foo", 3, "bar"]
</pre><a class="pilcrow" href="#section-3.3.5-15">¶</a>
</div>
<p id="section-3.3.5-16">with the error indicators<a class="pilcrow" href="#section-3.3.5-16">¶</a></p>
<div id="section-3.3.5-17">
<pre class="sourcecode lang-json">   [
     { "instancePath": "/2", "schemaPath": "/elements/type" },
     { "instancePath": "/4", "schemaPath": "/elements/type" }
   ]
</pre><a class="pilcrow" href="#section-3.3.5-17">¶</a>
</div>
<p id="section-3.3.5-18">The schema<a class="pilcrow" href="#section-3.3.5-18">¶</a></p>
<div id="section-3.3.5-19">
<pre class="sourcecode lang-json">   {
     "elements": {
       "type": "float32"
     },
     "nullable": true
   }
</pre><a class="pilcrow" href="#section-3.3.5-19">¶</a>
</div>
<p id="section-3.3.5-20">accepts<a class="pilcrow" href="#section-3.3.5-20">¶</a></p>
<div id="section-3.3.5-21">
<pre class="sourcecode lang-json">   null
</pre><a class="pilcrow" href="#section-3.3.5-21">¶</a>
</div>
<p id="section-3.3.5-22">and<a class="pilcrow" href="#section-3.3.5-22">¶</a></p>
<div id="section-3.3.5-23">
<pre class="sourcecode lang-json">   []
</pre><a class="pilcrow" href="#section-3.3.5-23">¶</a>
</div>
<p id="section-3.3.5-24">and<a class="pilcrow" href="#section-3.3.5-24">¶</a></p>
<div id="section-3.3.5-25">
<pre class="sourcecode lang-json">   [1, 2, 3]
</pre><a class="pilcrow" href="#section-3.3.5-25">¶</a>
</div>
<p id="section-3.3.5-26">but rejects<a class="pilcrow" href="#section-3.3.5-26">¶</a></p>
<div id="section-3.3.5-27">
<pre class="sourcecode lang-json">   [1, 2, "foo", 3, "bar"]
</pre><a class="pilcrow" href="#section-3.3.5-27">¶</a>
</div>
<p id="section-3.3.5-28">with the error indicators<a class="pilcrow" href="#section-3.3.5-28">¶</a></p>
<div id="section-3.3.5-29">
<pre class="sourcecode lang-json">   [
     { "instancePath": "/2", "schemaPath": "/elements/type" },
     { "instancePath": "/4", "schemaPath": "/elements/type" }
   ]
</pre><a class="pilcrow" href="#section-3.3.5-29">¶</a>
</div>
</section>
</div>
<div id="semantics-form-props">
<section id="section-3.3.6">
          <h4 id="name-properties-2">
<a class="section-number selfRef" href="#section-3.3.6">3.3.6. </a><a class="section-name selfRef" href="#name-properties-2">Properties</a>
          </h4>
<p id="section-3.3.6-1">The "properties" form is meant to describe JSON objects
   being used as a "struct". The syntax of the "properties" form
   is described in <a class="xref" href="#syntax-form-properties">Section 2.2.6</a>.<a class="pilcrow" href="#section-3.3.6-1">¶</a></p>
<p id="section-3.3.6-2">If a schema is of the "properties" form, then:<a class="pilcrow" href="#section-3.3.6-2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3.6-3.1">
              <p id="section-3.3.6-3.1.1">If the schema has a member named "nullable" whose value
     is the boolean "true", and the instance is the JSON
     primitive value "null", then the schema accepts the
     instance.<a class="pilcrow" href="#section-3.3.6-3.1.1">¶</a></p>
<p id="section-3.3.6-3.1.2">Otherwise:<a class="pilcrow" href="#section-3.3.6-3.1.2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3.6-3.1.3.1">
                  <p id="section-3.3.6-3.1.3.1.1">The instance must be an object.<a class="pilcrow" href="#section-3.3.6-3.1.3.1.1">¶</a></p>
<p id="section-3.3.6-3.1.3.1.2">Otherwise, the schema rejects the instance. The error indicator for this
                 case shall have an "instancePath" pointing to the instance,
                 and a "schemaPath" pointing to the schema member with the
                 name "properties" if such a schema member exists; if such a
                 member doesn't exist, "schemaPath" shall point to the schema
                 member with the name "optionalProperties".<a class="pilcrow" href="#section-3.3.6-3.1.3.1.2">¶</a></p>
</li>
                <li class="normal" id="section-3.3.6-3.1.3.2">
                  <p id="section-3.3.6-3.1.3.2.1">If the instance is an object, and the schema has a member
              named "properties", then let <em>P</em> be the value of the
              schema member named "properties". Per <a class="xref" href="#syntax-form-properties">Section 2.2.6</a>, we know
              <em>P</em> is an object. For every member name in <em>P</em>, a
              member of the same name in the instance must exist.<a class="pilcrow" href="#section-3.3.6-3.1.3.2.1">¶</a></p>
<p id="section-3.3.6-3.1.3.2.2"> Otherwise, the schema rejects the instance. The error indicator for this
case shall have an "instancePath" pointing to the instance, and a "schemaPath"
pointing to the member of <em>P</em> failing the requirement just described.<a class="pilcrow" href="#section-3.3.6-3.1.3.2.2">¶</a></p>
</li>
                <li class="normal" id="section-3.3.6-3.1.3.3">
                  <p id="section-3.3.6-3.1.3.3.1">If the instance is an object, then let <em>P</em> be the
       value of the schema member named "properties" (if it
       exists) and <em>O</em> be the value of the schema member named
       "optionalProperties" (if it exists).<a class="pilcrow" href="#section-3.3.6-3.1.3.3.1">¶</a></p>
<p id="section-3.3.6-3.1.3.3.2">For every member <em>I</em> of the instance, find a
       member with the same name as <em>I</em>'s in <em>P</em> or
       <em>O</em>. Per <a class="xref" href="#syntax-form-properties">Section 2.2.6</a>, we know it is not possible for both <em>P</em> and
       <em>O</em> to have such a member. If the "discriminator tag
       exemption" is in effect on <em>I</em> (see <a class="xref" href="#semantics-form-discriminator">Section 3.3.8</a>), then
       ignore <em>I</em>.<a class="pilcrow" href="#section-3.3.6-3.1.3.3.2">¶</a></p>
<p id="section-3.3.6-3.1.3.3.3">Otherwise:<a class="pilcrow" href="#section-3.3.6-3.1.3.3.3">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3.6-3.1.3.3.4.1">
                      <p id="section-3.3.6-3.1.3.3.4.1.1">If no such member in <em>P</em> or <em>O</em> exists and
                  validation is not in "allow additional properties" mode (see
                  <a class="xref" href="#allow-additional-properties">Section 3.1</a>), then the schema rejects the instance.<a class="pilcrow" href="#section-3.3.6-3.1.3.3.4.1.1">¶</a></p>
<p id="section-3.3.6-3.1.3.3.4.1.2">The error indicator for this case has an
   "instancePath" pointing to <em>I</em> and a
   "schemaPath" pointing to the schema.<a class="pilcrow" href="#section-3.3.6-3.1.3.3.4.1.2">¶</a></p>
</li>
                    <li class="normal" id="section-3.3.6-3.1.3.3.4.2">
                      <p id="section-3.3.6-3.1.3.3.4.2.1">If such a member in <em>P</em> or <em>O</em> does exist,
   then call this member <em>S</em>. If <em>S</em> rejects
   <em>I</em>'s value, then the schema rejects the instance.<a class="pilcrow" href="#section-3.3.6-3.1.3.3.4.2.1">¶</a></p>
<p id="section-3.3.6-3.1.3.3.4.2.2">The error indicators for this case are the union of the
   error indicators from evaluating <em>S</em> against <em>I</em>'s value.<a class="pilcrow" href="#section-3.3.6-3.1.3.3.4.2.2">¶</a></p>
</li>
                  </ul>
</li>
              </ul>
</li>
          </ul>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-3.3.6-4.1">
              <p id="section-3.3.6-4.1.1">If an instance is an object, it may have multiple errors arising
   from the second and third bullet in the list above. In this case,
   the error indicators are the union of the errors.<a class="pilcrow" href="#section-3.3.6-4.1.1">¶</a></p>
<p id="section-3.3.6-4.1.2">For example, the schema<a class="pilcrow" href="#section-3.3.6-4.1.2">¶</a></p>
<div id="section-3.3.6-4.1.3">
<pre class="sourcecode lang-json">   {
     "properties": {
       "a": { "type": "string" },
       "b": { "type": "string" }
     },
     "optionalProperties": {
       "c": { "type": "string" },
       "d": { "type": "string" }
     }
   }
</pre><a class="pilcrow" href="#section-3.3.6-4.1.3">¶</a>
</div>
<p id="section-3.3.6-4.1.4">accepts<a class="pilcrow" href="#section-3.3.6-4.1.4">¶</a></p>
<div id="section-3.3.6-4.1.5">
<pre class="sourcecode lang-json">   { "a": "foo", "b": "bar" }
</pre><a class="pilcrow" href="#section-3.3.6-4.1.5">¶</a>
</div>
<p id="section-3.3.6-4.1.6">and<a class="pilcrow" href="#section-3.3.6-4.1.6">¶</a></p>
<div id="section-3.3.6-4.1.7">
<pre class="sourcecode lang-json">   { "a": "foo", "b": "bar", "c": "baz" }
</pre><a class="pilcrow" href="#section-3.3.6-4.1.7">¶</a>
</div>
<p id="section-3.3.6-4.1.8">and<a class="pilcrow" href="#section-3.3.6-4.1.8">¶</a></p>
<div id="section-3.3.6-4.1.9">
<pre class="sourcecode lang-json">   { "a": "foo", "b": "bar", "c": "baz", "d": "quux" }
</pre><a class="pilcrow" href="#section-3.3.6-4.1.9">¶</a>
</div>
<p id="section-3.3.6-4.1.10">and<a class="pilcrow" href="#section-3.3.6-4.1.10">¶</a></p>
<div id="section-3.3.6-4.1.11">
<pre class="sourcecode lang-json">   { "a": "foo", "b": "bar", "d": "quux" }
</pre><a class="pilcrow" href="#section-3.3.6-4.1.11">¶</a>
</div>
<p id="section-3.3.6-4.1.12">but rejects<a class="pilcrow" href="#section-3.3.6-4.1.12">¶</a></p>
<div id="section-3.3.6-4.1.13">
<pre class="sourcecode lang-json">   null
</pre><a class="pilcrow" href="#section-3.3.6-4.1.13">¶</a>
</div>
<p id="section-3.3.6-4.1.14">with the error indicator<a class="pilcrow" href="#section-3.3.6-4.1.14">¶</a></p>
<div id="section-3.3.6-4.1.15">
<pre class="sourcecode lang-json">   [{ "instancePath": "", "schemaPath": "/properties" }]
</pre><a class="pilcrow" href="#section-3.3.6-4.1.15">¶</a>
</div>
<p id="section-3.3.6-4.1.16">and rejects<a class="pilcrow" href="#section-3.3.6-4.1.16">¶</a></p>
<div id="section-3.3.6-4.1.17">
<pre class="sourcecode lang-json">   { "b": 3, "c": 3, "e": 3 }
</pre><a class="pilcrow" href="#section-3.3.6-4.1.17">¶</a>
</div>
<p id="section-3.3.6-4.1.18">with the error indicators<a class="pilcrow" href="#section-3.3.6-4.1.18">¶</a></p>
<div id="section-3.3.6-4.1.19">
<pre class="sourcecode lang-json">   [
     { "instancePath": "",
       "schemaPath": "/properties/a" },
     { "instancePath": "/b",
       "schemaPath": "/properties/b/type" },
     { "instancePath": "/c",
       "schemaPath": "/optionalProperties/c/type" },
     { "instancePath": "/e",
       "schemaPath": "" }
   ]
</pre><a class="pilcrow" href="#section-3.3.6-4.1.19">¶</a>
</div>
<p id="section-3.3.6-4.1.20">If instead the schema had "additionalProperties: true"
   but was otherwise the same:<a class="pilcrow" href="#section-3.3.6-4.1.20">¶</a></p>
<div id="section-3.3.6-4.1.21">
<pre class="sourcecode lang-json">   {
     "properties": {
       "a": { "type": "string" },
       "b": { "type": "string" }
     },
     "optionalProperties": {
       "c": { "type": "string" },
       "d": { "type": "string" }
     },
     "additionalProperties": true
   }
</pre><a class="pilcrow" href="#section-3.3.6-4.1.21">¶</a>
</div>
<p id="section-3.3.6-4.1.22">and the instance remained the same:<a class="pilcrow" href="#section-3.3.6-4.1.22">¶</a></p>
<div id="section-3.3.6-4.1.23">
<pre class="sourcecode lang-json">   { "b": 3, "c": 3, "e": 3 }
</pre><a class="pilcrow" href="#section-3.3.6-4.1.23">¶</a>
</div>
<p id="section-3.3.6-4.1.24">then the error indicators from evaluating the instance against
   the schema would be:<a class="pilcrow" href="#section-3.3.6-4.1.24">¶</a></p>
<div id="section-3.3.6-4.1.25">
<pre class="sourcecode lang-json">   [
     { "instancePath": "",
       "schemaPath": "/properties/a" },
     { "instancePath": "/b",
       "schemaPath": "/properties/b/type" },
     { "instancePath": "/c",
       "schemaPath": "/optionalProperties/c/type" },
   ]
</pre><a class="pilcrow" href="#section-3.3.6-4.1.25">¶</a>
</div>
<p id="section-3.3.6-4.1.26">These are the same errors as before, except the final error
   (associated with the additional member named "e" in the
   instance) is no longer present. This is because
   "additionalProperties: true" enables "allow additional
   properties" mode on the schema.<a class="pilcrow" href="#section-3.3.6-4.1.26">¶</a></p>
<p id="section-3.3.6-4.1.27">Finally, the schema<a class="pilcrow" href="#section-3.3.6-4.1.27">¶</a></p>
<div id="section-3.3.6-4.1.28">
<pre class="sourcecode lang-json">   {
     "nullable": true,
     "properties": {
       "a": { "type": "string" },
       "b": { "type": "string" }
     },
     "optionalProperties": {
       "c": { "type": "string" },
       "d": { "type": "string" }
     },
     "additionalProperties": true
   }
</pre><a class="pilcrow" href="#section-3.3.6-4.1.28">¶</a>
</div>
<p id="section-3.3.6-4.1.29">accepts<a class="pilcrow" href="#section-3.3.6-4.1.29">¶</a></p>
<div id="section-3.3.6-4.1.30">
<pre class="sourcecode lang-json">   null
</pre><a class="pilcrow" href="#section-3.3.6-4.1.30">¶</a>
</div>
<p id="section-3.3.6-4.1.31">but rejects<a class="pilcrow" href="#section-3.3.6-4.1.31">¶</a></p>
<div id="section-3.3.6-4.1.32">
<pre class="sourcecode lang-json">   { "b": 3, "c": 3, "e": 3 }
</pre><a class="pilcrow" href="#section-3.3.6-4.1.32">¶</a>
</div>
<p id="section-3.3.6-4.1.33">with the error indicators<a class="pilcrow" href="#section-3.3.6-4.1.33">¶</a></p>
<div id="section-3.3.6-4.1.34">
<pre class="sourcecode lang-json">   [
     { "instancePath": "",
       "schemaPath": "/properties/a" },
     { "instancePath": "/b",
       "schemaPath": "/properties/b/type" },
     { "instancePath": "/c",
       "schemaPath": "/optionalProperties/c/type" },
   ]
</pre><a class="pilcrow" href="#section-3.3.6-4.1.34">¶</a>
</div>
</li>
          </ul>
</section>
</div>
<div id="semantics-form-values">
<section id="section-3.3.7">
          <h4 id="name-values-2">
<a class="section-number selfRef" href="#section-3.3.7">3.3.7. </a><a class="section-name selfRef" href="#name-values-2">Values</a>
          </h4>
<p id="section-3.3.7-1">The "values" form is meant to describe instances that are
   JSON objects being used as an associative array. The syntax of the
   "values" form is described in <a class="xref" href="#syntax-form-values">Section 2.2.7</a>.<a class="pilcrow" href="#section-3.3.7-1">¶</a></p>
<p id="section-3.3.7-2">If a schema is of the "values" form, then:<a class="pilcrow" href="#section-3.3.7-2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3.7-3.1">
              <p id="section-3.3.7-3.1.1">If the schema has a member named "nullable" whose value
     is the boolean "true", and the instance is the JSON
     primitive value "null", then the schema accepts the
     instance.<a class="pilcrow" href="#section-3.3.7-3.1.1">¶</a></p>
<p id="section-3.3.7-3.1.2">Otherwise:<a class="pilcrow" href="#section-3.3.7-3.1.2">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-3.3.7-3.1.3.1">
                  <p id="section-3.3.7-3.1.3.1.1">Let <em>S</em> be the value of the schema member with the
       name "values". The instance is accepted if and only if
       all of the following are true:<a class="pilcrow" href="#section-3.3.7-3.1.3.1.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3.7-3.1.3.1.2.1">The instance is an object. Otherwise, the error indicator
 for this case shall have an "instancePath" pointing to
 the instance and a "schemaPath" pointing to the schema
 member with the name "values".<a class="pilcrow" href="#section-3.3.7-3.1.3.1.2.1">¶</a>
</li>
                    <li class="normal" id="section-3.3.7-3.1.3.1.2.2">If the instance is an object, then every member value of
 the instance must be accepted by <em>S</em>. Otherwise, the
 error indicators for this case are the union of all the error
 indicators arising from evaluating <em>S</em> against member
 values of the instance.<a class="pilcrow" href="#section-3.3.7-3.1.3.1.2.2">¶</a>
</li>
                  </ul>
</li>
              </ul>
</li>
          </ul>
<p id="section-3.3.7-4">For example, the schema<a class="pilcrow" href="#section-3.3.7-4">¶</a></p>
<div id="section-3.3.7-5">
<pre class="sourcecode lang-json">   {
     "values": {
       "type": "float32"
     }
   }
</pre><a class="pilcrow" href="#section-3.3.7-5">¶</a>
</div>
<p id="section-3.3.7-6">accepts<a class="pilcrow" href="#section-3.3.7-6">¶</a></p>
<div id="section-3.3.7-7">
<pre class="sourcecode lang-json">   {}
</pre><a class="pilcrow" href="#section-3.3.7-7">¶</a>
</div>
<p id="section-3.3.7-8">and<a class="pilcrow" href="#section-3.3.7-8">¶</a></p>
<div id="section-3.3.7-9">
<pre class="sourcecode lang-json">   {"a": 1, "b": 2}
</pre><a class="pilcrow" href="#section-3.3.7-9">¶</a>
</div>
<p id="section-3.3.7-10">but rejects<a class="pilcrow" href="#section-3.3.7-10">¶</a></p>
<div id="section-3.3.7-11">
<pre class="sourcecode lang-json">   null
</pre><a class="pilcrow" href="#section-3.3.7-11">¶</a>
</div>
<p id="section-3.3.7-12">with the error indicator<a class="pilcrow" href="#section-3.3.7-12">¶</a></p>
<div id="section-3.3.7-13">
<pre class="sourcecode lang-json">   [{ "instancePath": "", "schemaPath": "/values" }]
</pre><a class="pilcrow" href="#section-3.3.7-13">¶</a>
</div>
<p id="section-3.3.7-14">and rejects<a class="pilcrow" href="#section-3.3.7-14">¶</a></p>
<div id="section-3.3.7-15">
<pre class="sourcecode lang-json">   { "a": 1, "b": 2, "c": "foo", "d": 3, "e": "bar" }
</pre><a class="pilcrow" href="#section-3.3.7-15">¶</a>
</div>
<p id="section-3.3.7-16">with the error indicators<a class="pilcrow" href="#section-3.3.7-16">¶</a></p>
<div id="section-3.3.7-17">
<pre class="sourcecode lang-json">   [
     { "instancePath": "/c", "schemaPath": "/values/type" },
     { "instancePath": "/e", "schemaPath": "/values/type" }
   ]
</pre><a class="pilcrow" href="#section-3.3.7-17">¶</a>
</div>
<p id="section-3.3.7-18">The schema<a class="pilcrow" href="#section-3.3.7-18">¶</a></p>
<div id="section-3.3.7-19">
<pre class="sourcecode lang-json">   {
     "nullable": true,
     "values": {
       "type": "float32"
     }
   }
</pre><a class="pilcrow" href="#section-3.3.7-19">¶</a>
</div>
<p id="section-3.3.7-20">accepts<a class="pilcrow" href="#section-3.3.7-20">¶</a></p>
<div id="section-3.3.7-21">
<pre class="sourcecode lang-json">   null
</pre><a class="pilcrow" href="#section-3.3.7-21">¶</a>
</div>
<p id="section-3.3.7-22">but rejects<a class="pilcrow" href="#section-3.3.7-22">¶</a></p>
<div id="section-3.3.7-23">
<pre class="sourcecode lang-json">   { "a": 1, "b": 2, "c": "foo", "d": 3, "e": "bar" }
</pre><a class="pilcrow" href="#section-3.3.7-23">¶</a>
</div>
<p id="section-3.3.7-24">with the error indicators<a class="pilcrow" href="#section-3.3.7-24">¶</a></p>
<div id="section-3.3.7-25">
<pre class="sourcecode lang-json">   [
     { "instancePath": "/c", "schemaPath": "/values/type" },
     { "instancePath": "/e", "schemaPath": "/values/type" }
   ]
</pre><a class="pilcrow" href="#section-3.3.7-25">¶</a>
</div>
</section>
</div>
<div id="semantics-form-discriminator">
<section id="section-3.3.8">
          <h4 id="name-discriminator-2">
<a class="section-number selfRef" href="#section-3.3.8">3.3.8. </a><a class="section-name selfRef" href="#name-discriminator-2">Discriminator</a>
          </h4>
<p id="section-3.3.8-1">The "discriminator" form is meant to describe JSON objects
   being used in a fashion similar to a discriminated union construct
   in C-like languages. The syntax of the "discriminator" form
   is described in <a class="xref" href="#syntax-form-discriminator">Section 2.2.8</a>.<a class="pilcrow" href="#section-3.3.8-1">¶</a></p>
<p id="section-3.3.8-2">When a schema is of the "discriminator" form, it validates that:<a class="pilcrow" href="#section-3.3.8-2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3.8-3.1">the instance is an object,<a class="pilcrow" href="#section-3.3.8-3.1">¶</a>
</li>
            <li class="normal" id="section-3.3.8-3.2">the instance has a particular "tag" property,<a class="pilcrow" href="#section-3.3.8-3.2">¶</a>
</li>
            <li class="normal" id="section-3.3.8-3.3">this "tag" property's value is a string within a set of
     valid values, and<a class="pilcrow" href="#section-3.3.8-3.3">¶</a>
</li>
            <li class="normal" id="section-3.3.8-3.4">the instance satisfies another schema, where this other
     schema is chosen based on the value of the "tag" property.<a class="pilcrow" href="#section-3.3.8-3.4">¶</a>
</li>
          </ul>
<p id="section-3.3.8-4">The behavior of the "discriminator" form is more complex than the
   other keywords. Readers familiar with CDDL may find the final
   example in <a class="xref" href="#comparison-with-cddl">Appendix B</a>
   helpful in understanding its behavior. What follows in this section
   is a description of the "discriminator" form's behavior, as well as
   some examples.<a class="pilcrow" href="#section-3.3.8-4">¶</a></p>
<p id="section-3.3.8-5">If a schema is of the "discriminator" form, then:<a class="pilcrow" href="#section-3.3.8-5">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3.8-6.1">Let <em>D</em> be the schema member with the name
     "discriminator".<a class="pilcrow" href="#section-3.3.8-6.1">¶</a>
</li>
            <li class="normal" id="section-3.3.8-6.2">Let <em>M</em> be the schema member with the name
     "mapping".<a class="pilcrow" href="#section-3.3.8-6.2">¶</a>
</li>
            <li class="normal" id="section-3.3.8-6.3">Let <em>I</em> be the instance member whose name equals
     <em>D</em>'s value. <em>I</em> may, for some rejected instances,
     not exist.<a class="pilcrow" href="#section-3.3.8-6.3">¶</a>
</li>
            <li class="normal" id="section-3.3.8-6.4">Let <em>S</em> be the member of <em>M</em> whose name equals
     <em>I</em>'s value. <em>S</em> may, for some rejected instances,
     not exist.<a class="pilcrow" href="#section-3.3.8-6.4">¶</a>
</li>
          </ul>
<p id="section-3.3.8-7">If the schema has a member named "nullable" whose value is
   the boolean "true", and the instance is the JSON primitive
   value "null", then the schema accepts the instance. Otherwise,
   the instance is accepted if and only if all of the following are
   true:<a class="pilcrow" href="#section-3.3.8-7">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3.8-8.1">
              <p id="section-3.3.8-8.1.1">The instance is an object.<a class="pilcrow" href="#section-3.3.8-8.1.1">¶</a></p>
<p id="section-3.3.8-8.1.2">Otherwise, the error indicator for this case shall have an
       "instancePath" pointing to the instance and a
       "schemaPath" pointing to <em>D</em>.<a class="pilcrow" href="#section-3.3.8-8.1.2">¶</a></p>
</li>
            <li class="normal" id="section-3.3.8-8.2">
              <p id="section-3.3.8-8.2.1">If the instance is a JSON object, then <em>I</em> must exist.<a class="pilcrow" href="#section-3.3.8-8.2.1">¶</a></p>
<p id="section-3.3.8-8.2.2">Otherwise, the error indicator for this case shall have an
       "instancePath" pointing to the instance and a
       "schemaPath" pointing to <em>D</em>.<a class="pilcrow" href="#section-3.3.8-8.2.2">¶</a></p>
</li>
            <li class="normal" id="section-3.3.8-8.3">
              <p id="section-3.3.8-8.3.1">If the instance is a JSON object and <em>I</em> exists,
       <em>I</em>'s value must be a string.<a class="pilcrow" href="#section-3.3.8-8.3.1">¶</a></p>
<p id="section-3.3.8-8.3.2">Otherwise, the error indicator for this case shall have an
       "instancePath" pointing to <em>I</em> and a
       "schemaPath" pointing to <em>D</em>.<a class="pilcrow" href="#section-3.3.8-8.3.2">¶</a></p>
</li>
            <li class="normal" id="section-3.3.8-8.4">
              <p id="section-3.3.8-8.4.1">If the instance is a JSON object and <em>I</em> exists and
       has a string value, then <em>S</em> must exist.<a class="pilcrow" href="#section-3.3.8-8.4.1">¶</a></p>
<p id="section-3.3.8-8.4.2">Otherwise, the error indicator for this case shall have an
       "instancePath" pointing to <em>I</em> and a
       "schemaPath" pointing to <em>M</em>.<a class="pilcrow" href="#section-3.3.8-8.4.2">¶</a></p>
</li>
            <li class="normal" id="section-3.3.8-8.5">
              <p id="section-3.3.8-8.5.1">If the instance is a JSON object, <em>I</em> exists, and
       <em>S</em> exists, then the instance must satisfy <em>S</em>'s
       value. Per <a class="xref" href="#syntax">Section 2</a>, we know <em>S</em>'s
       value is a schema of the "properties" form. Apply the
       "discriminator tag exemption" afforded in <a class="xref" href="#semantics-form-props">Section 3.3.6</a> to <em>I</em>
       when evaluating whether the instance satisfies <em>S</em>'s
       value.<a class="pilcrow" href="#section-3.3.8-8.5.1">¶</a></p>
<p id="section-3.3.8-8.5.2">Otherwise, the error indicators for this case shall be error
       indicators from evaluating <em>S</em>'s value against the
       instance, with the "discriminator tag exemption" applied to
       <em>I</em>.<a class="pilcrow" href="#section-3.3.8-8.5.2">¶</a></p>
</li>
          </ul>
<p id="section-3.3.8-9">The list items above are defined in a mutually exclusive way. For
   any given instance and schema, exactly one of the list items above
   will apply.<a class="pilcrow" href="#section-3.3.8-9">¶</a></p>
<p id="section-3.3.8-10">For example, the schema<a class="pilcrow" href="#section-3.3.8-10">¶</a></p>
<div id="section-3.3.8-11">
<pre class="sourcecode lang-json">   {
     "discriminator": "version",
     "mapping": {
       "v1": {
         "properties": {
           "a": { "type": "float32" }
         }
       },
       "v2": {
         "properties": {
           "a": { "type": "string" }
         }
       }
     }
   }
</pre><a class="pilcrow" href="#section-3.3.8-11">¶</a>
</div>
<p id="section-3.3.8-12">rejects<a class="pilcrow" href="#section-3.3.8-12">¶</a></p>
<div id="section-3.3.8-13">
<pre class="sourcecode lang-json">   null
</pre><a class="pilcrow" href="#section-3.3.8-13">¶</a>
</div>
<p id="section-3.3.8-14">with the error indicator<a class="pilcrow" href="#section-3.3.8-14">¶</a></p>
<div id="section-3.3.8-15">
<pre class="sourcecode lang-json">   [{ "instancePath": "", "schemaPath": "/discriminator" }]
</pre><a class="pilcrow" href="#section-3.3.8-15">¶</a>
</div>
<p id="section-3.3.8-16">(This is the case of the instance not being an object.)<a class="pilcrow" href="#section-3.3.8-16">¶</a></p>
<p id="section-3.3.8-17">Also rejected is<a class="pilcrow" href="#section-3.3.8-17">¶</a></p>
<div id="section-3.3.8-18">
<pre class="sourcecode lang-json">   {}
</pre><a class="pilcrow" href="#section-3.3.8-18">¶</a>
</div>
<p id="section-3.3.8-19">with the error indicator<a class="pilcrow" href="#section-3.3.8-19">¶</a></p>
<div id="section-3.3.8-20">
<pre class="sourcecode lang-json">   [{ "instancePath": "", "schemaPath": "/discriminator" }]
</pre><a class="pilcrow" href="#section-3.3.8-20">¶</a>
</div>
<p id="section-3.3.8-21">(This is the case of <em>I</em> not existing.)<a class="pilcrow" href="#section-3.3.8-21">¶</a></p>
<p id="section-3.3.8-22">Also rejected is<a class="pilcrow" href="#section-3.3.8-22">¶</a></p>
<div id="section-3.3.8-23">
<pre class="sourcecode lang-json">   { "version": 1 }
</pre><a class="pilcrow" href="#section-3.3.8-23">¶</a>
</div>
<p id="section-3.3.8-24">with the error indicator<a class="pilcrow" href="#section-3.3.8-24">¶</a></p>
<div id="section-3.3.8-25">
<pre class="sourcecode lang-json">   [
     {
       "instancePath": "/version",
       "schemaPath": "/discriminator"
     }
   ]
</pre><a class="pilcrow" href="#section-3.3.8-25">¶</a>
</div>
<p id="section-3.3.8-26">(This is the case of <em>I</em> existing but not having a string
   value.)<a class="pilcrow" href="#section-3.3.8-26">¶</a></p>
<p id="section-3.3.8-27">Also rejected is<a class="pilcrow" href="#section-3.3.8-27">¶</a></p>
<div id="section-3.3.8-28">
<pre class="sourcecode lang-json">   { "version": "v3" }
</pre><a class="pilcrow" href="#section-3.3.8-28">¶</a>
</div>
<p id="section-3.3.8-29">with the error indicator<a class="pilcrow" href="#section-3.3.8-29">¶</a></p>
<div id="section-3.3.8-30">
<pre class="sourcecode lang-json">   [
     {
       "instancePath": "/version",
       "schemaPath": "/mapping"
     }
   ]
</pre><a class="pilcrow" href="#section-3.3.8-30">¶</a>
</div>
<p id="section-3.3.8-31">(This is the case of <em>I</em> existing and having a string
   value but <em>S</em> not existing.)<a class="pilcrow" href="#section-3.3.8-31">¶</a></p>
<p id="section-3.3.8-32">Also rejected is<a class="pilcrow" href="#section-3.3.8-32">¶</a></p>
<div id="section-3.3.8-33">
<pre class="sourcecode lang-json">   { "version": "v2", "a": 3 }
</pre><a class="pilcrow" href="#section-3.3.8-33">¶</a>
</div>
<p id="section-3.3.8-34">with the error indicator<a class="pilcrow" href="#section-3.3.8-34">¶</a></p>
<div id="section-3.3.8-35">
<pre class="sourcecode lang-json">   [
     {
       "instancePath": "/a",
       "schemaPath": "/mapping/v2/properties/a/type"
     }
   ]
</pre><a class="pilcrow" href="#section-3.3.8-35">¶</a>
</div>
<p id="section-3.3.8-36">(This is the case of <em>I</em> and <em>S</em> existing but the
   instance not satisfying <em>S</em>'s value.)<a class="pilcrow" href="#section-3.3.8-36">¶</a></p>
<p id="section-3.3.8-37">Finally, the schema accepts<a class="pilcrow" href="#section-3.3.8-37">¶</a></p>
<div id="section-3.3.8-38">
<pre class="sourcecode lang-json">   { "version": "v2", "a": "foo" }
</pre><a class="pilcrow" href="#section-3.3.8-38">¶</a>
</div>
<p id="section-3.3.8-39">This instance is accepted even though "version" is not
   mentioned by "/mapping/v2/properties"; the "discriminator tag
   exemption" ensures that "version" is not treated as an
   additional property when evaluating the instance against <em>S</em>'s value.<a class="pilcrow" href="#section-3.3.8-39">¶</a></p>
<p id="section-3.3.8-40">By contrast, consider the same schema but with "nullable"
   being "true". The schema<a class="pilcrow" href="#section-3.3.8-40">¶</a></p>
<div id="section-3.3.8-41">
<pre class="sourcecode lang-json">   {
     "nullable": true,
      "discriminator": "version",
      "mapping": {
        "v1": {
          "properties": {
            "a": { "type": "float32" }
          }
        },
        "v2": {
          "properties": {
            "a": { "type": "string" }
          }
        }
      }
   }
</pre><a class="pilcrow" href="#section-3.3.8-41">¶</a>
</div>
<p id="section-3.3.8-42">accepts<a class="pilcrow" href="#section-3.3.8-42">¶</a></p>
<div id="section-3.3.8-43">
<pre class="sourcecode lang-json">   null
</pre><a class="pilcrow" href="#section-3.3.8-43">¶</a>
</div>
<p id="section-3.3.8-44">To further illustrate the "discriminator" form with examples,
   recall the JTD schema in <a class="xref" href="#syntax-form-discriminator">Section 2.2.8</a>, reproduced here:<a class="pilcrow" href="#section-3.3.8-44">¶</a></p>
<div id="section-3.3.8-45">
<pre class="sourcecode lang-json">   {
     "discriminator": "event_type",
     "mapping": {
       "account_deleted": {
         "properties": {
           "account_id": { "type": "string" }
         }
       },
       "account_payment_plan_changed": {
         "properties": {
           "account_id": { "type": "string" },
           "payment_plan": { "enum": ["FREE", "PAID"] }
         },
         "optionalProperties": {
           "upgraded_by": { "type": "string" }
         }
       }
     }
   }
</pre><a class="pilcrow" href="#section-3.3.8-45">¶</a>
</div>
<p id="section-3.3.8-46">This schema accepts<a class="pilcrow" href="#section-3.3.8-46">¶</a></p>
<div id="section-3.3.8-47">
<pre class="sourcecode lang-json">   { "event_type": "account_deleted", "account_id": "abc-123" }
</pre><a class="pilcrow" href="#section-3.3.8-47">¶</a>
</div>
<p id="section-3.3.8-48">and<a class="pilcrow" href="#section-3.3.8-48">¶</a></p>
<div id="section-3.3.8-49">
<pre class="sourcecode lang-json">   {
     "event_type": "account_payment_plan_changed",
     "account_id": "abc-123",
     "payment_plan": "PAID"
   }
</pre><a class="pilcrow" href="#section-3.3.8-49">¶</a>
</div>
<p id="section-3.3.8-50">and<a class="pilcrow" href="#section-3.3.8-50">¶</a></p>
<div id="section-3.3.8-51">
<pre class="sourcecode lang-json">   {
     "event_type": "account_payment_plan_changed",
     "account_id": "abc-123",
     "payment_plan": "PAID",
     "upgraded_by": "users/mkhwarizmi"
   }
</pre><a class="pilcrow" href="#section-3.3.8-51">¶</a>
</div>
<p id="section-3.3.8-52">but rejects<a class="pilcrow" href="#section-3.3.8-52">¶</a></p>
<div id="section-3.3.8-53">
<pre class="sourcecode lang-json">   {}
</pre><a class="pilcrow" href="#section-3.3.8-53">¶</a>
</div>
<p id="section-3.3.8-54">with the error indicator<a class="pilcrow" href="#section-3.3.8-54">¶</a></p>
<div id="section-3.3.8-55">
<pre class="sourcecode lang-json">   [{ "instancePath": "", "schemaPath": "/discriminator" }]
</pre><a class="pilcrow" href="#section-3.3.8-55">¶</a>
</div>
<p id="section-3.3.8-56">and rejects<a class="pilcrow" href="#section-3.3.8-56">¶</a></p>
<div id="section-3.3.8-57">
<pre class="sourcecode lang-json">   { "event_type": "some_other_event_type" }
</pre><a class="pilcrow" href="#section-3.3.8-57">¶</a>
</div>
<p id="section-3.3.8-58">with the error indicator<a class="pilcrow" href="#section-3.3.8-58">¶</a></p>
<div id="section-3.3.8-59">
<pre class="sourcecode lang-json">   [
     {
       "instancePath": "/event_type",
       "schemaPath": "/mapping"
     }
   ]
</pre><a class="pilcrow" href="#section-3.3.8-59">¶</a>
</div>
<p id="section-3.3.8-60">and rejects<a class="pilcrow" href="#section-3.3.8-60">¶</a></p>
<div id="section-3.3.8-61">
<pre class="sourcecode lang-json">   { "event_type": "account_deleted" }
</pre><a class="pilcrow" href="#section-3.3.8-61">¶</a>
</div>
<p id="section-3.3.8-62">with the error indicator<a class="pilcrow" href="#section-3.3.8-62">¶</a></p>
<div id="section-3.3.8-63">
<pre class="sourcecode lang-json">   [{
     "instancePath": "",
     "schemaPath": "/mapping/account_deleted/properties/account_id"
   }]
</pre><a class="pilcrow" href="#section-3.3.8-63">¶</a>
</div>
<p id="section-3.3.8-64">and rejects<a class="pilcrow" href="#section-3.3.8-64">¶</a></p>
<div id="section-3.3.8-65">
<pre class="sourcecode lang-json">   {
     "event_type": "account_payment_plan_changed",
     "account_id": "abc-123",
     "payment_plan": "PAID",
     "xxx": "asdf"
   }
</pre><a class="pilcrow" href="#section-3.3.8-65">¶</a>
</div>
<p id="section-3.3.8-66">with the error indicator<a class="pilcrow" href="#section-3.3.8-66">¶</a></p>
<div id="section-3.3.8-67">
<pre class="sourcecode lang-json">   [{
     "instancePath": "/xxx",
     "schemaPath": "/mapping/account_payment_plan_changed"
   }]
</pre><a class="pilcrow" href="#section-3.3.8-67">¶</a>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="iana-considerations">
<section id="section-4">
      <h2 id="name-iana-considerations">
<a class="section-number selfRef" href="#section-4">4. </a><a class="section-name selfRef" href="#name-iana-considerations">IANA Considerations</a>
      </h2>
<p id="section-4-1">This document has no IANA actions.<a class="pilcrow" href="#section-4-1">¶</a></p>
</section>
</div>
<div id="security-considerations">
<section id="section-5">
      <h2 id="name-security-considerations">
<a class="section-number selfRef" href="#section-5">5. </a><a class="section-name selfRef" href="#name-security-considerations">Security Considerations</a>
      </h2>
<p id="section-5-1">Implementations of JTD will necessarily be manipulating JSON
      data. Therefore, the security considerations of <span>[<a class="xref" href="#RFC8259">RFC8259</a>]</span> are all relevant here.<a class="pilcrow" href="#section-5-1">¶</a></p>
<p id="section-5-2">Implementations that evaluate user-inputted schemas <span class="bcp14">SHOULD</span> implement
      mechanisms to detect and abort circular references that might cause a
      naive implementation to go into an infinite loop. Without such
      mechanisms, implementations may be vulnerable to denial-of-service
      attacks.<a class="pilcrow" href="#section-5-2">¶</a></p>
</section>
</div>
<section id="section-6">
      <h2 id="name-references">
<a class="section-number selfRef" href="#section-6">6. </a><a class="section-name selfRef" href="#name-references">References</a>
      </h2>
<section id="section-6.1">
        <h3 id="name-normative-references">
<a class="section-number selfRef" href="#section-6.1">6.1. </a><a class="section-name selfRef" href="#name-normative-references">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time class="refDate" datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3339">[RFC3339]</dt>
        <dd>
<span class="refAuthor">Klyne, G.</span><span class="refAuthor"> and C. Newman</span>, <span class="refTitle">"Date and Time on the Internet: Timestamps"</span>, <span class="seriesInfo">RFC 3339</span>, <span class="seriesInfo">DOI 10.17487/RFC3339</span>, <time class="refDate" datetime="2002-07">July 2002</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3339">https://www.rfc-editor.org/info/rfc3339</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4287">[RFC4287]</dt>
        <dd>
<span class="refAuthor">Nottingham, M., Ed.</span><span class="refAuthor"> and R. Sayre, Ed.</span>, <span class="refTitle">"The Atom Syndication Format"</span>, <span class="seriesInfo">RFC 4287</span>, <span class="seriesInfo">DOI 10.17487/RFC4287</span>, <time class="refDate" datetime="2005-12">December 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4287">https://www.rfc-editor.org/info/rfc4287</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6901">[RFC6901]</dt>
        <dd>
<span class="refAuthor">Bryan, P., Ed.</span><span class="refAuthor">, Zyp, K.</span><span class="refAuthor">, and M. Nottingham, Ed.</span>, <span class="refTitle">"JavaScript Object Notation (JSON) Pointer"</span>, <span class="seriesInfo">RFC 6901</span>, <span class="seriesInfo">DOI 10.17487/RFC6901</span>, <time class="refDate" datetime="2013-04">April 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6901">https://www.rfc-editor.org/info/rfc6901</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time class="refDate" datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8259">[RFC8259]</dt>
        <dd>
<span class="refAuthor">Bray, T., Ed.</span>, <span class="refTitle">"The JavaScript Object Notation (JSON) Data Interchange Format"</span>, <span class="seriesInfo">STD 90</span>, <span class="seriesInfo">RFC 8259</span>, <span class="seriesInfo">DOI 10.17487/RFC8259</span>, <time class="refDate" datetime="2017-12">December 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8259">https://www.rfc-editor.org/info/rfc8259</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8610">[RFC8610]</dt>
      <dd>
<span class="refAuthor">Birkholz, H.</span><span class="refAuthor">, Vigano, C.</span><span class="refAuthor">, and C. Bormann</span>, <span class="refTitle">"Concise Data Definition Language (CDDL): A Notational Convention to Express Concise Binary Object Representation (CBOR) and JSON Data Structures"</span>, <span class="seriesInfo">RFC 8610</span>, <span class="seriesInfo">DOI 10.17487/RFC8610</span>, <time class="refDate" datetime="2019-06">June 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8610">https://www.rfc-editor.org/info/rfc8610</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-6.2">
        <h3 id="name-informative-references">
<a class="section-number selfRef" href="#section-6.2">6.2. </a><a class="section-name selfRef" href="#name-informative-references">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.handrews-json-schema">[JSON-SCHEMA]</dt>
        <dd>
<span class="refAuthor">Wright, A.</span><span class="refAuthor">, Andrews, H.</span><span class="refAuthor">, Hutton, B.</span><span class="refAuthor">, and G. Dennis</span>, <span class="refTitle">"JSON Schema: A Media Type for Describing JSON Documents"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-handrews-json-schema-02</span>, <time class="refDate" datetime="2019-09-17">17 September 2019</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-handrews-json-schema-02">https://tools.ietf.org/html/draft-handrews-json-schema-02</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="OPENAPI">[OPENAPI]</dt>
        <dd>
<span class="refAuthor">OpenAPI Initiative</span>, <span class="refTitle">"OpenAPI Specification"</span>, <time class="refDate" datetime="2020-02">February 2020</time>, <span>&lt;<a href="https://spec.openapis.org/oas/v3.0.3">https://spec.openapis.org/oas/v3.0.3</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7071">[RFC7071]</dt>
        <dd>
<span class="refAuthor">Borenstein, N.</span><span class="refAuthor"> and M. Kucherawy</span>, <span class="refTitle">"A Media Type for Reputation Interchange"</span>, <span class="seriesInfo">RFC 7071</span>, <span class="seriesInfo">DOI 10.17487/RFC7071</span>, <time class="refDate" datetime="2013-11">November 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7071">https://www.rfc-editor.org/info/rfc7071</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7493">[RFC7493]</dt>
      <dd>
<span class="refAuthor">Bray, T., Ed.</span>, <span class="refTitle">"The I-JSON Message Format"</span>, <span class="seriesInfo">RFC 7493</span>, <span class="seriesInfo">DOI 10.17487/RFC7493</span>, <time class="refDate" datetime="2015-03">March 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7493">https://www.rfc-editor.org/info/rfc7493</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="other-considerations">
<section id="section-appendix.a">
      <h2 id="name-rationale-for-omitted-featu">
<a class="section-number selfRef" href="#section-appendix.a">Appendix A. </a><a class="section-name selfRef" href="#name-rationale-for-omitted-featu">Rationale for Omitted Features</a>
      </h2>
<p id="section-appendix.a-1">This appendix is not normative.<a class="pilcrow" href="#section-appendix.a-1">¶</a></p>
<p id="section-appendix.a-2">This section describes possible features that are intentionally left
      out of JSON Type Definition and justifies why these features are
      omitted.<a class="pilcrow" href="#section-appendix.a-2">¶</a></p>
<div id="other-considerations-int64">
<section id="section-a.1">
        <h2 id="name-support-for-64-bit-numbers">
<a class="section-number selfRef" href="#section-a.1">A.1. </a><a class="section-name selfRef" href="#name-support-for-64-bit-numbers">Support for 64-Bit Numbers</a>
        </h2>
<p id="section-a.1-1">This document does not allow "int64" or "uint64" as
 values for the JTD "type" keyword (see Sections <a class="xref" href="#syntax-form-type">2.2.3</a> and <a class="xref" href="#semantics-form-type">3.3.3</a>). Such hypothetical
 "int64" or "uint64" types would behave like
 "int32" or "uint32" (respectively) but with the range
 of values associated with 64-bit instead of 32-bit integers. That is:<a class="pilcrow" href="#section-a.1-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-a.1-2.1">
            "int64" would accept numbers between -(2**63) and
   (2**63)-1<a class="pilcrow" href="#section-a.1-2.1">¶</a>
</li>
          <li class="normal" id="section-a.1-2.2">
            "uint64" would accept numbers between 0 and (2**64)-1<a class="pilcrow" href="#section-a.1-2.2">¶</a>
</li>
        </ul>
<p id="section-a.1-3">Users of "int64" and "uint64" would likely expect
 that the full range of signed or unsigned 64-bit integers could
 interoperably be transmitted as JSON without loss of precision. But
 this assumption is likely to be incorrect, for the reasons given in
 <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc7493#section-2.2">Section 2.2</a> of [<a class="xref" href="#RFC7493">RFC7493</a>]</span>.<a class="pilcrow" href="#section-a.1-3">¶</a></p>
<p id="section-a.1-4">"int64" and "uint64" likely would have led users to
 falsely assume that the full range of 64-bit integers can be
 interoperably processed as JSON without loss of precision. To avoid
 leading users astray, JTD omits "int64" and
 "uint64".<a class="pilcrow" href="#section-a.1-4">¶</a></p>
</section>
</div>
<div id="support-for-non-root-definitions">
<section id="section-a.2">
        <h2 id="name-support-for-non-root-defini">
<a class="section-number selfRef" href="#section-a.2">A.2. </a><a class="section-name selfRef" href="#name-support-for-non-root-defini">Support for Non-root Definitions</a>
        </h2>
<p id="section-a.2-1">This document disallows the "definitions" keyword from
 appearing outside of root schemas (see <a class="xref" href="#cddl-schema">Figure 1</a>). Conceivably, this document could have instead
 allowed "definitions" to appear on any schema, even non-root
 ones. Under this alternative design, "ref"s would resolve to a
 definition in the "nearest" (i.e., most nested) schema that both
 contained the "ref" and had a suitably named
 "definitions" member.<a class="pilcrow" href="#section-a.2-1">¶</a></p>
<p id="section-a.2-2">For instance, under this alternative approach, one could define
 schemas like the one in <a class="xref" href="#hypothetical-ref">Figure 3</a>.<a class="pilcrow" href="#section-a.2-2">¶</a></p>
<span id="name-a-hypothetical-schema-had-t"></span><div id="hypothetical-ref">
<figure id="figure-3">
          <div id="section-a.2-3.1">
<pre class="sourcecode lang-json">{
  "properties": {
    "foo": {
      "definitions": {
        "user": { "properties": { "user_id": {"type": "string" }}}
      },
      "ref": "user"
    },
    "bar": {
      "definitions": {
        "user": { "properties": { "user_id": {"type": "string" }}}
      },
      "ref": "user"
    },
    "baz": {
      "definitions": {
        "user": { "properties": { "userId": {"type": "string" }}}
      },
      "ref": "user"
    }
  }
}
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-3">Figure 3</a>:
<a class="selfRef" href="#name-a-hypothetical-schema-had-t">A Hypothetical Schema Had This Document Permitted Non-root
   Definitions. This Is Not a Correct JTD Schema.</a>
          </figcaption></figure>
</div>
<p id="section-a.2-4">If schemas like that in <a class="xref" href="#hypothetical-ref">Figure 3</a> were permitted, code generation from JTD schemas
 would be more difficult, and the generated code would be less useful.<a class="pilcrow" href="#section-a.2-4">¶</a></p>
<p id="section-a.2-5">Code generation would be more difficult because it would force code
 generators to implement a name-mangling scheme for types generated
 from definitions. This additional difficulty is not immense, but it adds
 complexity to an otherwise relatively trivial task.<a class="pilcrow" href="#section-a.2-5">¶</a></p>
<p id="section-a.2-6">Generated code would be less useful because generated, mangled
 struct names are less pithy than human-defined struct names. For
 instance, the "user" definitions in <a class="xref" href="#hypothetical-ref">Figure 3</a> might have been generated
 into types named "PropertiesFooUser",
 "PropertiesBarUser", and "PropertiesBazUser"; obtuse
 names like these are less useful to human-written code than names like
 "User".<a class="pilcrow" href="#section-a.2-6">¶</a></p>
<p id="section-a.2-7">Furthermore, even though "PropertiesFooUser" and
 "PropertiesBarUser" would be essentially identical, they would
 not be interchangeable in many statically typed programming
 languages. A code generator could attempt to circumvent this by
 deduplicating identical definitions, but then the user might be
 confused as to why the subtly distinct "PropertiesBazUser",
 defined from a schema allowing a property named "userId" (not
 "user_id"), was not deduplicated.<a class="pilcrow" href="#section-a.2-7">¶</a></p>
<p id="section-a.2-8">Because there seem to be implementation and usability challenges
 associated with non-root definitions, and because it would be easier
 to later amend JTD to permit for non-root definitions than to later
 amend JTD to prohibit them, this document does not permit non-root
 definitions in JTD schemas.<a class="pilcrow" href="#section-a.2-8">¶</a></p>
</section>
</div>
</section>
</div>
<div id="comparison-with-cddl">
<section id="section-appendix.b">
      <h2 id="name-comparison-with-cddl">
<a class="section-number selfRef" href="#section-appendix.b">Appendix B. </a><a class="section-name selfRef" href="#name-comparison-with-cddl">Comparison with CDDL</a>
      </h2>
<p id="section-appendix.b-1">This appendix is not normative.<a class="pilcrow" href="#section-appendix.b-1">¶</a></p>
<p id="section-appendix.b-2">To aid the reader familiar with CDDL, this section illustrates how
      JTD works by presenting JTD schemas and CDDL schemas that accept and
      reject the same instances.<a class="pilcrow" href="#section-appendix.b-2">¶</a></p>
<p id="section-appendix.b-3">The JTD schema<a class="pilcrow" href="#section-appendix.b-3">¶</a></p>
<div id="section-appendix.b-4">
<pre class="sourcecode lang-json">   {}
</pre><a class="pilcrow" href="#section-appendix.b-4">¶</a>
</div>
<p id="section-appendix.b-5">accepts the same instances as the CDDL rule<a class="pilcrow" href="#section-appendix.b-5">¶</a></p>
<div id="section-appendix.b-6">
<pre class="sourcecode lang-cddl">   root = any
</pre><a class="pilcrow" href="#section-appendix.b-6">¶</a>
</div>
<p id="section-appendix.b-7">The JTD schema<a class="pilcrow" href="#section-appendix.b-7">¶</a></p>
<div id="section-appendix.b-8">
<pre class="sourcecode lang-json">   {
     "definitions": {
       "a": { "elements": { "ref": "b" }},
       "b": { "type": "float32" }
     },
     "elements": {
       "ref": "a"
     }
   }
</pre><a class="pilcrow" href="#section-appendix.b-8">¶</a>
</div>
<p id="section-appendix.b-9">accepts the same instances as the CDDL rule<a class="pilcrow" href="#section-appendix.b-9">¶</a></p>
<div id="section-appendix.b-10">
<pre class="sourcecode lang-cddl">   root = [* a]
   a = [* b]
   b = number
</pre><a class="pilcrow" href="#section-appendix.b-10">¶</a>
</div>
<p id="section-appendix.b-11">The JTD schema<a class="pilcrow" href="#section-appendix.b-11">¶</a></p>
<div id="section-appendix.b-12">
<pre class="sourcecode lang-json">   { "enum": ["PENDING", "DONE", "CANCELED"]}
</pre><a class="pilcrow" href="#section-appendix.b-12">¶</a>
</div>
<p id="section-appendix.b-13">accepts the same instances as the CDDL rule<a class="pilcrow" href="#section-appendix.b-13">¶</a></p>
<div id="section-appendix.b-14">
<pre class="sourcecode lang-cddl">   root = "PENDING" / "DONE" / "CANCELED"
</pre><a class="pilcrow" href="#section-appendix.b-14">¶</a>
</div>
<p id="section-appendix.b-15">The JTD schema<a class="pilcrow" href="#section-appendix.b-15">¶</a></p>
<div id="section-appendix.b-16">
<pre class="sourcecode lang-json">   {"type": "boolean"}
</pre><a class="pilcrow" href="#section-appendix.b-16">¶</a>
</div>
<p id="section-appendix.b-17">accepts the same instances as the CDDL rule<a class="pilcrow" href="#section-appendix.b-17">¶</a></p>
<div id="section-appendix.b-18">
<pre class="sourcecode lang-cddl">   root = bool
</pre><a class="pilcrow" href="#section-appendix.b-18">¶</a>
</div>
<p id="section-appendix.b-19">The JTD schemas:<a class="pilcrow" href="#section-appendix.b-19">¶</a></p>
<div id="section-appendix.b-20">
<pre class="sourcecode lang-json">   {"type": "float32"}
</pre><a class="pilcrow" href="#section-appendix.b-20">¶</a>
</div>
<p id="section-appendix.b-21">and<a class="pilcrow" href="#section-appendix.b-21">¶</a></p>
<div id="section-appendix.b-22">
<pre class="sourcecode lang-json">   {"type": "float64"}
</pre><a class="pilcrow" href="#section-appendix.b-22">¶</a>
</div>
<p id="section-appendix.b-23">both accept the same instances as the CDDL rule<a class="pilcrow" href="#section-appendix.b-23">¶</a></p>
<div id="section-appendix.b-24">
<pre class="sourcecode lang-cddl">   root = number
</pre><a class="pilcrow" href="#section-appendix.b-24">¶</a>
</div>
<p id="section-appendix.b-25">The JTD schema<a class="pilcrow" href="#section-appendix.b-25">¶</a></p>
<div id="section-appendix.b-26">
<pre class="sourcecode lang-json">   {"type": "string"}
</pre><a class="pilcrow" href="#section-appendix.b-26">¶</a>
</div>
<p id="section-appendix.b-27">accepts the same instances as the CDDL rule<a class="pilcrow" href="#section-appendix.b-27">¶</a></p>
<div id="section-appendix.b-28">
<pre class="sourcecode lang-cddl">   root = tstr
</pre><a class="pilcrow" href="#section-appendix.b-28">¶</a>
</div>
<p id="section-appendix.b-29">The JTD schema<a class="pilcrow" href="#section-appendix.b-29">¶</a></p>
<div id="section-appendix.b-30">
<pre class="sourcecode lang-json">   {"type": "timestamp"}
</pre><a class="pilcrow" href="#section-appendix.b-30">¶</a>
</div>
<p id="section-appendix.b-31">accepts the same instances as the CDDL rule<a class="pilcrow" href="#section-appendix.b-31">¶</a></p>
<div id="section-appendix.b-32">
<pre class="sourcecode lang-cddl">   root = tdate
</pre><a class="pilcrow" href="#section-appendix.b-32">¶</a>
</div>
<p id="section-appendix.b-33">The JTD schema<a class="pilcrow" href="#section-appendix.b-33">¶</a></p>
<div id="section-appendix.b-34">
<pre class="sourcecode lang-json">   { "elements": { "type": "float32" }}
</pre><a class="pilcrow" href="#section-appendix.b-34">¶</a>
</div>
<p id="section-appendix.b-35">accepts the same instances as the CDDL rule<a class="pilcrow" href="#section-appendix.b-35">¶</a></p>
<div id="section-appendix.b-36">
<pre class="sourcecode lang-cddl">   root = [* number]
</pre><a class="pilcrow" href="#section-appendix.b-36">¶</a>
</div>
<p id="section-appendix.b-37">The JTD schema<a class="pilcrow" href="#section-appendix.b-37">¶</a></p>
<div id="section-appendix.b-38">
<pre class="sourcecode lang-json">   {
     "properties": {
       "a": { "type": "boolean" },
       "b": { "type": "float32" }
     },
     "optionalProperties": {
       "c": { "type": "string" },
       "d": { "type": "timestamp" }
     }
   }
</pre><a class="pilcrow" href="#section-appendix.b-38">¶</a>
</div>
<p id="section-appendix.b-39">accepts the same instances as the CDDL rule<a class="pilcrow" href="#section-appendix.b-39">¶</a></p>
<div id="section-appendix.b-40">
<pre class="sourcecode lang-cddl">   root = { a: bool, b: number, ? c: tstr, ? d: tdate }
</pre><a class="pilcrow" href="#section-appendix.b-40">¶</a>
</div>
<p id="section-appendix.b-41">The JTD schema<a class="pilcrow" href="#section-appendix.b-41">¶</a></p>
<div id="section-appendix.b-42">
<pre class="sourcecode lang-json">   { "values": { "type": "float32" }}
</pre><a class="pilcrow" href="#section-appendix.b-42">¶</a>
</div>
<p id="section-appendix.b-43">accepts the same instances as the CDDL rule<a class="pilcrow" href="#section-appendix.b-43">¶</a></p>
<div id="section-appendix.b-44">
<pre class="sourcecode lang-cddl">   root = { * tstr =&gt; number }
</pre><a class="pilcrow" href="#section-appendix.b-44">¶</a>
</div>
<p id="section-appendix.b-45">Finally, the JTD schema<a class="pilcrow" href="#section-appendix.b-45">¶</a></p>
<div id="section-appendix.b-46">
<pre class="sourcecode lang-json">   {
     "discriminator": "a",
     "mapping": {
       "foo": {
         "properties": {
           "b": { "type": "float32" }
         }
       },
       "bar": {
         "properties": {
           "b": { "type": "string" }
         }
       }
     }
   }
</pre><a class="pilcrow" href="#section-appendix.b-46">¶</a>
</div>
<p id="section-appendix.b-47">accepts the same instances as the CDDL rule<a class="pilcrow" href="#section-appendix.b-47">¶</a></p>
<div id="section-appendix.b-48">
<pre class="sourcecode lang-cddl">   root = { a: "foo", b: number } / { a: "bar", b: tstr }
</pre><a class="pilcrow" href="#section-appendix.b-48">¶</a>
</div>
</section>
</div>
<div id="examples">
<section id="section-appendix.c">
      <h2 id="name-example">
<a class="section-number selfRef" href="#section-appendix.c">Appendix C. </a><a class="section-name selfRef" href="#name-example">Example</a>
      </h2>
<p id="section-appendix.c-1">This appendix is not normative.<a class="pilcrow" href="#section-appendix.c-1">¶</a></p>
<p id="section-appendix.c-2">As a demonstration of JTD, in <a class="xref" href="#JTD-reputation-object">Figure 4</a> is a JTD schema closely equivalent to the
      plain-English definition "reputation-object" described in
      <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc7071#section-6.2.2">Section 6.2.2</a> of [<a class="xref" href="#RFC7071">RFC7071</a>]</span>:<a class="pilcrow" href="#section-appendix.c-2">¶</a></p>
<span id="name-a-jtd-schema-describing-rep"></span><div id="JTD-reputation-object">
<figure id="figure-4">
        <div id="section-appendix.c-3.1">
<pre class="sourcecode lang-json">{
  "properties": {
    "application": { "type": "string" },
    "reputons": {
      "elements": {
        "additionalProperties": true,
        "properties": {
          "rater": { "type": "string" },
          "assertion": { "type": "string" },
          "rated": { "type": "string" },
          "rating": { "type": "float32" },
        },
        "optionalProperties": {
          "confidence": { "type": "float32" },
          "normal-rating": { "type": "float32" },
          "sample-size": { "type": "float64" },
          "generated": { "type": "float64" },
          "expires": { "type": "float64" }
        }
      }
    }
  }
}
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-4">Figure 4</a>:
<a class="selfRef" href="#name-a-jtd-schema-describing-rep">A JTD Schema Describing "reputation-object" from <span></span></a><a class="relref" href="https://www.rfc-editor.org/rfc/rfc7071#section-6.2.2">Section 6.2.2</a> of [<a class="xref" href="#RFC7071">RFC7071</a>]
        </figcaption></figure>
</div>
<p id="section-appendix.c-4">This schema does not enforce the requirement that
      "sample-size", "generated", and "expires" be
      unbounded positive integers. It does not express the limitation that
      "rating", "confidence", and "normal-rating" should
      not have more than three decimal places of precision.<a class="pilcrow" href="#section-appendix.c-4">¶</a></p>
<p id="section-appendix.c-5">The example in <a class="xref" href="#JTD-reputation-object">Figure 4</a> can be compared against the equivalent example in
      <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8610#appendix-H">Appendix H</a> of [<a class="xref" href="#RFC8610">RFC8610</a>]</span>.<a class="pilcrow" href="#section-appendix.c-5">¶</a></p>
</section>
</div>
<div id="acknowledgments">
<section id="section-appendix.d">
      <h2 id="name-acknowledgments">
<a class="section-name selfRef" href="#name-acknowledgments">Acknowledgments</a>
      </h2>
<p id="section-appendix.d-1"><span class="contact-name">Carsten Bormann</span> provided lots of useful
      guidance and feedback on 
      JTD's design and the structure of this document.<a class="pilcrow" href="#section-appendix.d-1">¶</a></p>
<p id="section-appendix.d-2"><span class="contact-name">Evgeny Poberezkin</span> suggested the addition of
      "nullable" and 
      thoroughly vetted this document for mistakes and opportunities for
      simplification.<a class="pilcrow" href="#section-appendix.d-2">¶</a></p>
<p id="section-appendix.d-3"><span class="contact-name">Tim Bray</span> suggested the current "ref"
      model and the addition 
      of "enum". <span class="contact-name">Anders Rundgren</span> suggested
      extending "type" to 
      have more support for numerical types. <span class="contact-name">James       Manger</span> suggested additional 
      clarifying examples of how integer types work. <span class="contact-name">Adrian       Farrel</span> suggested 
      many improvements to help make this document clearer.<a class="pilcrow" href="#section-appendix.d-3">¶</a></p>
<p id="section-appendix.d-4">Members of the IETF JSON mailing list -- in particular, <span class="contact-name">Pete Cordell</span>, 
      <span class="contact-name">Phillip Hallam-Baker</span>, <span class="contact-name">Nico       Williams</span>, <span class="contact-name">John Cowan</span>, <span class="contact-name">Rob       Sayre</span>, and <span class="contact-name">Erik Wilde</span> -- provided lots of useful
      feedback.<a class="pilcrow" href="#section-appendix.d-4">¶</a></p>
<p id="section-appendix.d-5">OpenAPI's "discriminator" object <span>[<a class="xref" href="#OPENAPI">OPENAPI</a>]</span> inspired the "discriminator" form. <span>[<a class="xref" href="#I-D.handrews-json-schema">JSON-SCHEMA</a>]</span> influenced various
      parts of JTD's early design.<a class="pilcrow" href="#section-appendix.d-5">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="section-appendix.e">
      <h2 id="name-authors-address">
<a class="section-name selfRef" href="#name-authors-address">Author's Address</a>
      </h2>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Ulysse Carion</span></div>
<div class="left" dir="auto"><span class="org">Segment.io, Inc</span></div>
<div class="left" dir="auto"><span class="street-address">100 California Street</span></div>
<div class="left" dir="auto">
<span class="locality">San Francisco</span>, <span class="region">CA</span> <span class="postal-code">94111</span>
</div>
<div class="left" dir="auto"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:ulysse@segment.com">ulysse@segment.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>


</body></html>