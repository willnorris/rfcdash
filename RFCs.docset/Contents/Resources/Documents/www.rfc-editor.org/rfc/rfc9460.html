<!DOCTYPE html>
<html class="RFC" lang="en"><head>
<meta charset="utf-8"/>
<meta content="Common,Latin" name="scripts"/>
<meta content="initial-scale=1.0" name="viewport"/>
<title>RFC 9460: Service Binding and Parameter Specification via the DNS (SVCB and HTTPS Resource Records)</title>
<meta content="Ben Schwartz" name="author"/>
<meta content="Mike Bishop" name="author"/>
<meta content="Erik Nygren" name="author"/>
<meta content='
       This document specifies the "SVCB" ("Service Binding") and "HTTPS" DNS resource record (RR)
types to facilitate the lookup of information needed to make connections
to network services, such as for HTTP origins.  SVCB records
allow a service to be provided from multiple alternative endpoints,
each with associated parameters (such as transport protocol
configuration), and are extensible to support future uses
(such as keys for encrypting the TLS ClientHello).  They also
enable aliasing of apex domains, which is not possible with CNAME.
The HTTPS RR is a variation of SVCB for use with HTTP (see RFC 9110, "HTTP Semantics").
By providing more information to the client before it attempts to
establish a connection, these records offer potential benefits to
both performance and privacy. 
    ' name="description"/>
<meta content="xml2rfc 3.18.2" name="generator"/>
<meta content="multi-CDN" name="keyword"/>
<meta content="HSTS" name="keyword"/>
<meta content="ECH" name="keyword"/>
<meta content="CNAME" name="keyword"/>
<meta content="apex" name="keyword"/>
<meta content="ALPN" name="keyword"/>
<meta content="HTTP/3" name="keyword"/>
<meta content="alias" name="keyword"/>
<meta content="SvcParam" name="keyword"/>
<meta content="AliasMode" name="keyword"/>
<meta content="ServiceMode" name="keyword"/>
<meta content="9460" name="rfc.number"/>
<!-- Generator version information:
  xml2rfc 3.18.2
    Python 3.9.15
    ConfigArgParse 1.5.3
    google-i18n-address 3.0.0
    intervaltree 3.1.0
    Jinja2 3.1.2
    lxml 4.9.0
    platformdirs 3.8.0
    pycountry 22.3.5
    PyYAML 6.0
    requests 2.28.0
    setuptools 44.1.1
    six 1.16.0
    wcwidth 0.2.5
    weasyprint 56.1
-->
<link href="rfc9460.xml" rel="alternate" type="application/rfc+xml"/>
<link href="#copyright" rel="license"/>
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necessary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

:root {
  --font-sans: 'Noto Sans', Arial, Helvetica, sans-serif;
  --font-serif: 'Noto Serif', 'Times', 'Times New Roman', serif;
  --font-mono: 'Roboto Mono', Courier, 'Courier New', monospace;
}

@viewport {
  zoom: 1.0;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: var(--font-sans);
  line-height: 1.6;
  scroll-behavior: smooth;
  overflow-wrap: break-word;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
svg[font-family~="serif" i], svg [font-family~="serif" i] {
  font-family: var(--font-serif);
}
svg[font-family~="sans-serif" i], svg [font-family~="sans-serif" i] {
  font-family: var(--font-sans);
}
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  display: table;
  border: none;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef,
.iref + a[href].internal {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre {
  background-color: #f9f9f9;
  font-family: var(--font-mono);
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
blockquote > *:last-child {
  margin-bottom: 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: var(--font-sans);
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  .breakable pre {
    break-inside: auto;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The following is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
.sourcecode pre,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .artwork > pre,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background slightly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr {
  break-inside: avoid;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottom margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the compact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div.sourcecode:first-child,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type:only-child {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css"/>
<link href="https://datatracker.ietf.org/doc/draft-ietf-dnsop-svcb-https-12" rel="prev"/>
  <link href="https://dx.doi.org/10.17487/rfc9460" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  </head>
<body class="xml2rfc">
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 9460</td>
<td class="center">SVCB and HTTPS RRs for DNS</td>
<td class="right">November 2023</td>
</tr></thead>
<tfoot><tr>
<td class="left">Schwartz, et al.</td>
<td class="center">Standards Track</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div class="document-information" id="external-metadata"></div>
<div class="document-information" id="internal-metadata">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Internet Engineering Task Force (IETF)</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a class="eref" href="https://www.rfc-editor.org/rfc/rfc9460">9460</a></dd>
<dt class="label-category">Category:</dt>
<dd class="category">Standards Track</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time class="published" datetime="2023-11">November 2023</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">B. Schwartz</div>
<div class="org">Meta Platforms, Inc.</div>
</div>
<div class="author">
      <div class="author-name">M. Bishop</div>
<div class="org">Akamai Technologies</div>
</div>
<div class="author">
      <div class="author-name">E. Nygren</div>
<div class="org">Akamai Technologies</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 9460</h1>
<h1 id="title">Service Binding and Parameter Specification via the DNS (SVCB and HTTPS Resource Records)</h1>
<section id="section-abstract">
      <h2 id="abstract"><a class="selfRef" href="#abstract">Abstract</a></h2>
<p id="section-abstract-1">This document specifies the "SVCB" ("Service Binding") and "HTTPS" DNS resource record (RR)
types to facilitate the lookup of information needed to make connections
to network services, such as for HTTP origins.  SVCB records
allow a service to be provided from multiple alternative endpoints,
each with associated parameters (such as transport protocol
configuration), and are extensible to support future uses
(such as keys for encrypting the TLS ClientHello).  They also
enable aliasing of apex domains, which is not possible with CNAME.
The HTTPS RR is a variation of SVCB for use with HTTP (see RFC 9110, "HTTP Semantics").
By providing more information to the client before it attempts to
establish a connection, these records offer potential benefits to
both performance and privacy.<a class="pilcrow" href="#section-abstract-1">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a class="section-name selfRef" href="#name-status-of-this-memo">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This is an Internet Standards Track document.<a class="pilcrow" href="#section-boilerplate.1-1">¶</a></p>
<p id="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.<a class="pilcrow" href="#section-boilerplate.1-2">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc9460">https://www.rfc-editor.org/info/rfc9460</a></span>.<a class="pilcrow" href="#section-boilerplate.1-3">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a class="section-name selfRef" href="#name-copyright-notice">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2023 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a class="pilcrow" href="#section-boilerplate.2-1">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a class="pilcrow" href="#section-boilerplate.2-2">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a class="toplink" href="#" onclick="scroll(0,0)">▲</a><h2 id="name-table-of-contents">
<a class="section-name selfRef" href="#name-table-of-contents">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1"><a class="auto internal xref" href="#section-1">1</a>.  <a class="internal xref" href="#name-introduction">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p class="keepWithNext" id="section-toc.1-1.1.2.1.1"><a class="auto internal xref" href="#section-1.1">1.1</a>.  <a class="internal xref" href="#name-goals">Goals</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p class="keepWithNext" id="section-toc.1-1.1.2.2.1"><a class="auto internal xref" href="#section-1.2">1.2</a>.  <a class="internal xref" href="#name-overview-of-the-svcb-rr">Overview of the SVCB RR</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.3">
                <p class="keepWithNext" id="section-toc.1-1.1.2.3.1"><a class="auto internal xref" href="#section-1.3">1.3</a>.  <a class="internal xref" href="#name-terminology">Terminology</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a class="auto internal xref" href="#section-2">2</a>.  <a class="internal xref" href="#name-the-svcb-record-type">The SVCB Record Type</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a class="auto internal xref" href="#section-2.1">2.1</a>.  <a class="internal xref" href="#name-zone-file-presentation-form">Zone-File Presentation Format</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a class="auto internal xref" href="#section-2.2">2.2</a>.  <a class="internal xref" href="#name-rdata-wire-format">RDATA Wire Format</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3">
                <p id="section-toc.1-1.2.2.3.1"><a class="auto internal xref" href="#section-2.3">2.3</a>.  <a class="internal xref" href="#name-svcb-query-names">SVCB Query Names</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.4">
                <p id="section-toc.1-1.2.2.4.1"><a class="auto internal xref" href="#section-2.4">2.4</a>.  <a class="internal xref" href="#name-interpretation">Interpretation</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.4.2.1">
                    <p id="section-toc.1-1.2.2.4.2.1.1"><a class="auto internal xref" href="#section-2.4.1">2.4.1</a>.  <a class="internal xref" href="#name-svcpriority">SvcPriority</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.4.2.2">
                    <p id="section-toc.1-1.2.2.4.2.2.1"><a class="auto internal xref" href="#section-2.4.2">2.4.2</a>.  <a class="internal xref" href="#name-aliasmode">AliasMode</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.4.2.3">
                    <p id="section-toc.1-1.2.2.4.2.3.1"><a class="auto internal xref" href="#section-2.4.3">2.4.3</a>.  <a class="internal xref" href="#name-servicemode">ServiceMode</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.5">
                <p id="section-toc.1-1.2.2.5.1"><a class="auto internal xref" href="#section-2.5">2.5</a>.  <a class="internal xref" href="#name-special-handling-of-in-targ">Special Handling of "." in TargetName</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.5.2.1">
                    <p id="section-toc.1-1.2.2.5.2.1.1"><a class="auto internal xref" href="#section-2.5.1">2.5.1</a>.  <a class="internal xref" href="#name-aliasmode-2">AliasMode</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.5.2.2">
                    <p id="section-toc.1-1.2.2.5.2.2.1"><a class="auto internal xref" href="#section-2.5.2">2.5.2</a>.  <a class="internal xref" href="#name-servicemode-2">ServiceMode</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a class="auto internal xref" href="#section-3">3</a>.  <a class="internal xref" href="#name-client-behavior">Client Behavior</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a class="auto internal xref" href="#section-3.1">3.1</a>.  <a class="internal xref" href="#name-handling-resolution-failure">Handling Resolution Failures</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a class="auto internal xref" href="#section-3.2">3.2</a>.  <a class="internal xref" href="#name-clients-using-a-proxy">Clients Using a Proxy</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a class="auto internal xref" href="#section-4">4</a>.  <a class="internal xref" href="#name-dns-server-behavior">DNS Server Behavior</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a class="auto internal xref" href="#section-4.1">4.1</a>.  <a class="internal xref" href="#name-authoritative-servers">Authoritative Servers</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a class="auto internal xref" href="#section-4.2">4.2</a>.  <a class="internal xref" href="#name-recursive-resolvers">Recursive Resolvers</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.1">
                    <p id="section-toc.1-1.4.2.2.2.1.1"><a class="auto internal xref" href="#section-4.2.1">4.2.1</a>.  <a class="internal xref" href="#name-dns64">DNS64</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a class="auto internal xref" href="#section-4.3">4.3</a>.  <a class="internal xref" href="#name-general-requirements">General Requirements</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4">
                <p id="section-toc.1-1.4.2.4.1"><a class="auto internal xref" href="#section-4.4">4.4</a>.  <a class="internal xref" href="#name-edns-client-subnet-ecs">EDNS Client Subnet (ECS)</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a class="auto internal xref" href="#section-5">5</a>.  <a class="internal xref" href="#name-performance-optimizations">Performance Optimizations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a class="auto internal xref" href="#section-5.1">5.1</a>.  <a class="internal xref" href="#name-optimistic-pre-connection-a">Optimistic Pre-connection and Connection Reuse</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a class="auto internal xref" href="#section-5.2">5.2</a>.  <a class="internal xref" href="#name-generating-and-using-incomp">Generating and Using Incomplete Responses</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a class="auto internal xref" href="#section-6">6</a>.  <a class="internal xref" href="#name-svcb-compatible-rr-types">SVCB-Compatible RR Types</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a class="auto internal xref" href="#section-7">7</a>.  <a class="internal xref" href="#name-initial-svcparamkeys">Initial SvcParamKeys</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a class="auto internal xref" href="#section-7.1">7.1</a>.  <a class="internal xref" href="#name-alpn-and-no-default-alpn">"alpn" and "no-default-alpn"</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1.2.1">
                    <p id="section-toc.1-1.7.2.1.2.1.1"><a class="auto internal xref" href="#section-7.1.1">7.1.1</a>.  <a class="internal xref" href="#name-representation">Representation</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1.2.2">
                    <p id="section-toc.1-1.7.2.1.2.2.1"><a class="auto internal xref" href="#section-7.1.2">7.1.2</a>.  <a class="internal xref" href="#name-use">Use</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a class="auto internal xref" href="#section-7.2">7.2</a>.  <a class="internal xref" href="#name-port">"port"</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.3">
                <p id="section-toc.1-1.7.2.3.1"><a class="auto internal xref" href="#section-7.3">7.3</a>.  <a class="internal xref" href="#name-ipv4hint-and-ipv6hint">"ipv4hint" and "ipv6hint"</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.4">
                <p id="section-toc.1-1.7.2.4.1"><a class="auto internal xref" href="#section-7.4">7.4</a>.  <a class="internal xref" href="#name-mandatory">"mandatory"</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a class="auto internal xref" href="#section-8">8</a>.  <a class="internal xref" href="#name-servicemode-rr-compatibilit">ServiceMode RR Compatibility and Mandatory Keys</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a class="auto internal xref" href="#section-9">9</a>.  <a class="internal xref" href="#name-using-service-bindings-with">Using Service Bindings with HTTP</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a class="auto internal xref" href="#section-9.1">9.1</a>.  <a class="internal xref" href="#name-query-names-for-https-rrs">Query Names for HTTPS RRs</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a class="auto internal xref" href="#section-9.2">9.2</a>.  <a class="internal xref" href="#name-comparison-with-alt-svc">Comparison with Alt-Svc</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2.2.1">
                    <p id="section-toc.1-1.9.2.2.2.1.1"><a class="auto internal xref" href="#section-9.2.1">9.2.1</a>.  <a class="internal xref" href="#name-alpn-usage">ALPN Usage</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2.2.2">
                    <p id="section-toc.1-1.9.2.2.2.2.1"><a class="auto internal xref" href="#section-9.2.2">9.2.2</a>.  <a class="internal xref" href="#name-untrusted-channels">Untrusted Channels</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2.2.3">
                    <p id="section-toc.1-1.9.2.2.2.3.1"><a class="auto internal xref" href="#section-9.2.3">9.2.3</a>.  <a class="internal xref" href="#name-cache-lifetime">Cache Lifetime</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2.2.4">
                    <p id="section-toc.1-1.9.2.2.2.4.1"><a class="auto internal xref" href="#section-9.2.4">9.2.4</a>.  <a class="internal xref" href="#name-granularity">Granularity</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.3">
                <p id="section-toc.1-1.9.2.3.1"><a class="auto internal xref" href="#section-9.3">9.3</a>.  <a class="internal xref" href="#name-interaction-with-alt-svc">Interaction with Alt-Svc</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.4">
                <p id="section-toc.1-1.9.2.4.1"><a class="auto internal xref" href="#section-9.4">9.4</a>.  <a class="internal xref" href="#name-requiring-server-name-indic">Requiring Server Name Indication</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.5">
                <p id="section-toc.1-1.9.2.5.1"><a class="auto internal xref" href="#section-9.5">9.5</a>.  <a class="internal xref" href="#name-http-strict-transport-secur">HTTP Strict Transport Security (HSTS)</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.6">
                <p id="section-toc.1-1.9.2.6.1"><a class="auto internal xref" href="#section-9.6">9.6</a>.  <a class="internal xref" href="#name-use-of-https-rrs-in-other-p">Use of HTTPS RRs in Other Protocols</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a class="auto internal xref" href="#section-10">10</a>. <a class="internal xref" href="#name-zone-structures">Zone Structures</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a class="auto internal xref" href="#section-10.1">10.1</a>.  <a class="internal xref" href="#name-structuring-zones-for-flexi">Structuring Zones for Flexibility</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a class="auto internal xref" href="#section-10.2">10.2</a>.  <a class="internal xref" href="#name-structuring-zones-for-perfo">Structuring Zones for Performance</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.3">
                <p id="section-toc.1-1.10.2.3.1"><a class="auto internal xref" href="#section-10.3">10.3</a>.  <a class="internal xref" href="#name-operational-considerations">Operational Considerations</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.4">
                <p id="section-toc.1-1.10.2.4.1"><a class="auto internal xref" href="#section-10.4">10.4</a>.  <a class="internal xref" href="#name-examples">Examples</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.4.2.1">
                    <p id="section-toc.1-1.10.2.4.2.1.1"><a class="auto internal xref" href="#section-10.4.1">10.4.1</a>.  <a class="internal xref" href="#name-protocol-enhancements">Protocol Enhancements</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.4.2.2">
                    <p id="section-toc.1-1.10.2.4.2.2.1"><a class="auto internal xref" href="#section-10.4.2">10.4.2</a>.  <a class="internal xref" href="#name-apex-aliasing">Apex Aliasing</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.4.2.3">
                    <p id="section-toc.1-1.10.2.4.2.3.1"><a class="auto internal xref" href="#section-10.4.3">10.4.3</a>.  <a class="internal xref" href="#name-parameter-binding">Parameter Binding</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.4.2.4">
                    <p id="section-toc.1-1.10.2.4.2.4.1"><a class="auto internal xref" href="#section-10.4.4">10.4.4</a>.  <a class="internal xref" href="#name-multi-cdn-configuration">Multi-CDN Configuration</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.4.2.5">
                    <p id="section-toc.1-1.10.2.4.2.5.1"><a class="auto internal xref" href="#section-10.4.5">10.4.5</a>.  <a class="internal xref" href="#name-non-http-uses">Non-HTTP Uses</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a class="auto internal xref" href="#section-11">11</a>. <a class="internal xref" href="#name-interaction-with-other-stan">Interaction with Other Standards</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a class="auto internal xref" href="#section-12">12</a>. <a class="internal xref" href="#name-security-considerations">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a class="auto internal xref" href="#section-13">13</a>. <a class="internal xref" href="#name-privacy-considerations">Privacy Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a class="auto internal xref" href="#section-14">14</a>. <a class="internal xref" href="#name-iana-considerations">IANA Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14.2.1">
                <p id="section-toc.1-1.14.2.1.1"><a class="auto internal xref" href="#section-14.1">14.1</a>.  <a class="internal xref" href="#name-svcb-rr-type">SVCB RR Type</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14.2.2">
                <p id="section-toc.1-1.14.2.2.1"><a class="auto internal xref" href="#section-14.2">14.2</a>.  <a class="internal xref" href="#name-https-rr-type">HTTPS RR Type</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14.2.3">
                <p id="section-toc.1-1.14.2.3.1"><a class="auto internal xref" href="#section-14.3">14.3</a>.  <a class="internal xref" href="#name-new-registry-for-service-pa">New Registry for Service Parameters</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14.2.3.2.1">
                    <p id="section-toc.1-1.14.2.3.2.1.1"><a class="auto internal xref" href="#section-14.3.1">14.3.1</a>.  <a class="internal xref" href="#name-procedure">Procedure</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14.2.3.2.2">
                    <p id="section-toc.1-1.14.2.3.2.2.1"><a class="auto internal xref" href="#section-14.3.2">14.3.2</a>.  <a class="internal xref" href="#name-initial-contents">Initial Contents</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14.2.4">
                <p id="section-toc.1-1.14.2.4.1"><a class="auto internal xref" href="#section-14.4">14.4</a>.  <a class="internal xref" href="#name-other-registry-updates">Other Registry Updates</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a class="auto internal xref" href="#section-15">15</a>. <a class="internal xref" href="#name-references">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15.2.1">
                <p id="section-toc.1-1.15.2.1.1"><a class="auto internal xref" href="#section-15.1">15.1</a>.  <a class="internal xref" href="#name-normative-references">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15.2.2">
                <p id="section-toc.1-1.15.2.2.1"><a class="auto internal xref" href="#section-15.2">15.2</a>.  <a class="internal xref" href="#name-informative-references">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a class="auto internal xref" href="#appendix-A">Appendix A</a>.  <a class="internal xref" href="#name-decoding-text-in-zone-files">Decoding Text in Zone Files</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.1">
                <p id="section-toc.1-1.16.2.1.1"><a class="auto internal xref" href="#appendix-A.1">A.1</a>.  <a class="internal xref" href="#name-decoding-a-comma-separated-">Decoding a Comma-Separated List</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17">
            <p id="section-toc.1-1.17.1"><a class="auto internal xref" href="#appendix-B">Appendix B</a>.  <a class="internal xref" href="#name-http-mapping-summary">HTTP Mapping Summary</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18">
            <p id="section-toc.1-1.18.1"><a class="auto internal xref" href="#appendix-C">Appendix C</a>.  <a class="internal xref" href="#name-comparison-with-alternative">Comparison with Alternatives</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.1">
                <p id="section-toc.1-1.18.2.1.1"><a class="auto internal xref" href="#appendix-C.1">C.1</a>.  <a class="internal xref" href="#name-differences-from-the-srv-rr">Differences from the SRV RR Type</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.2">
                <p id="section-toc.1-1.18.2.2.1"><a class="auto internal xref" href="#appendix-C.2">C.2</a>.  <a class="internal xref" href="#name-differences-from-the-propos">Differences from the Proposed HTTP Record</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.3">
                <p id="section-toc.1-1.18.2.3.1"><a class="auto internal xref" href="#appendix-C.3">C.3</a>.  <a class="internal xref" href="#name-differences-from-the-propose">Differences from the Proposed ANAME Record</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.4">
                <p id="section-toc.1-1.18.2.4.1"><a class="auto internal xref" href="#appendix-C.4">C.4</a>.  <a class="internal xref" href="#name-comparison-with-separate-rr">Comparison with Separate RR Types for AliasMode and ServiceMode</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19">
            <p id="section-toc.1-1.19.1"><a class="auto internal xref" href="#appendix-D">Appendix D</a>.  <a class="internal xref" href="#name-test-vectors">Test Vectors</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.1">
                <p id="section-toc.1-1.19.2.1.1"><a class="auto internal xref" href="#appendix-D.1">D.1</a>.  <a class="internal xref" href="#name-aliasmode-3">AliasMode</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.2">
                <p id="section-toc.1-1.19.2.2.1"><a class="auto internal xref" href="#appendix-D.2">D.2</a>.  <a class="internal xref" href="#name-servicemode-3">ServiceMode</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.3">
                <p id="section-toc.1-1.19.2.3.1"><a class="auto internal xref" href="#appendix-D.3">D.3</a>.  <a class="internal xref" href="#name-failure-cases">Failure Cases</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.20">
            <p id="section-toc.1-1.20.1"><a class="auto internal xref" href="#appendix-E"></a><a class="internal xref" href="#name-acknowledgments-and-related">Acknowledgments and Related Proposals</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.21">
            <p id="section-toc.1-1.21.1"><a class="auto internal xref" href="#appendix-F"></a><a class="internal xref" href="#name-authors-addresses">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a class="section-number selfRef" href="#section-1">1. </a><a class="section-name selfRef" href="#name-introduction">Introduction</a>
      </h2>
<p id="section-1-1">The SVCB ("Service Binding") and HTTPS resource records (RRs) provide clients with complete instructions
for access to a service.  This information enables improved
performance and privacy by avoiding transient connections to a suboptimal
default server, negotiating a preferred protocol, and providing relevant
public keys.<a class="pilcrow" href="#section-1-1">¶</a></p>
<p id="section-1-2">For example, HTTP clients currently resolve only A and/or AAAA records for
the origin hostname, learning only its IP addresses.  If an HTTP client learns
more about the origin before connecting, it may be able to upgrade "http" URLs
to "https", enable HTTP/3 or Encrypted ClientHello <span>[<a class="cite xref" href="#I-D.ietf-tls-esni">ECH</a>]</span>,
or switch to an
operationally preferable endpoint.  It is highly desirable to minimize the
number of round trips and lookups required to
learn this additional information.<a class="pilcrow" href="#section-1-2">¶</a></p>
<p id="section-1-3">The SVCB and HTTPS RRs also help when the operator of a service
wishes to delegate operational control to one or more other domains, e.g.,
aliasing the origin "https://example.com" to a service
operator endpoint at "svc.example.net".  While this case can sometimes
be handled by a CNAME, that does not cover all use cases.  CNAME is also
inadequate when the service operator needs to provide a bound
collection of consistent configuration parameters through the DNS
(such as network location, protocol, and keying information).<a class="pilcrow" href="#section-1-3">¶</a></p>
<p id="section-1-4">This document first describes the SVCB RR as a general-purpose RR that can be applied directly and efficiently to a wide range
of services (<a class="auto internal xref" href="#svcb">Section 2</a>).  It also describes the rules for defining other
SVCB-compatible RR types (<a class="auto internal xref" href="#svcb-compatible">Section 6</a>), starting with the HTTPS
RR type (<a class="auto internal xref" href="#https">Section 9</a>), which provides improved efficiency and convenience
with HTTP by avoiding the need for an Attrleaf label <span>[<a class="cite xref" href="#RFC8552">Attrleaf</a>]</span>
(<a class="auto internal xref" href="#httpsnames">Section 9.1</a>).<a class="pilcrow" href="#section-1-4">¶</a></p>
<p id="section-1-5">The SVCB RR has two modes: 1) "AliasMode", which simply delegates operational
control for a resource and 2) "ServiceMode", which binds together
configuration information for a service endpoint.
ServiceMode provides additional key=value parameters
within each RDATA set.<a class="pilcrow" href="#section-1-5">¶</a></p>
<div id="goals">
<section id="section-1.1">
        <h3 id="name-goals">
<a class="section-number selfRef" href="#section-1.1">1.1. </a><a class="section-name selfRef" href="#name-goals">Goals</a>
        </h3>
<p id="section-1.1-1">The goal of the SVCB RR is to allow clients to resolve a single
additional DNS RR in a way that:<a class="pilcrow" href="#section-1.1-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.1-2.1">Provides alternative endpoints that are authoritative for the service,
along with parameters associated with each of these endpoints.<a class="pilcrow" href="#section-1.1-2.1">¶</a>
</li>
          <li class="normal" id="section-1.1-2.2">Does not assume that all alternative endpoints have the same parameters
or capabilities, or are even
operated by the same entity.  This is important, as DNS does not
provide any way to tie together multiple RRsets for the same name.
For example, if "www.example.com" is a CNAME alias that switches
between one of three Content Delivery Networks (CDNs) or hosting environments, successive queries
for that name may return records that correspond to different environments.<a class="pilcrow" href="#section-1.1-2.2">¶</a>
</li>
          <li class="normal" id="section-1.1-2.3">Enables CNAME-like functionality at a zone apex (such as
"example.com") for participating protocols and generally
enables extending operational authority for a service identified
by a domain name to other instances with alternate names.<a class="pilcrow" href="#section-1.1-2.3">¶</a>
</li>
        </ul>
<p id="section-1.1-3">Additional goals specific to HTTPS RRs and the HTTP use cases include:<a class="pilcrow" href="#section-1.1-3">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.1-4.1">Connecting directly to HTTP/3 (QUIC transport)
alternative endpoints <span>[<a class="cite xref" href="#RFC9114">HTTP/3</a>]</span>.<a class="pilcrow" href="#section-1.1-4.1">¶</a>
</li>
          <li class="normal" id="section-1.1-4.2">Supporting non-default TCP and UDP ports.<a class="pilcrow" href="#section-1.1-4.2">¶</a>
</li>
          <li class="normal" id="section-1.1-4.3">Enabling SRV-like benefits (e.g., apex aliasing, as mentioned above) for HTTP,
where SRV <span>[<a class="cite xref" href="#RFC2782">SRV</a>]</span> has not been widely adopted.<a class="pilcrow" href="#section-1.1-4.3">¶</a>
</li>
          <li class="normal" id="section-1.1-4.4">Providing an indication signaling that the "https" scheme should
          be used instead of "http" for all HTTP requests to this host and port,
          similar to HTTP Strict Transport Security <span>[<a class="cite xref" href="#RFC6797">HSTS</a>]</span> (see
<a class="auto internal xref" href="#hsts">Section 9.5</a>).<a class="pilcrow" href="#section-1.1-4.4">¶</a>
</li>
          <li class="normal" id="section-1.1-4.5">Enabling the conveyance of Encrypted ClientHello keys <span>[<a class="cite xref" href="#I-D.ietf-tls-esni">ECH</a>]</span> associated
with an alternative endpoint.<a class="pilcrow" href="#section-1.1-4.5">¶</a>
</li>
        </ul>
</section>
</div>
<div id="overview-of-the-svcb-rr">
<section id="section-1.2">
        <h3 id="name-overview-of-the-svcb-rr">
<a class="section-number selfRef" href="#section-1.2">1.2. </a><a class="section-name selfRef" href="#name-overview-of-the-svcb-rr">Overview of the SVCB RR</a>
        </h3>
<p id="section-1.2-1">This subsection briefly describes the SVCB RR with forward references to
the full exposition of each component.  (As discussed in <a class="auto internal xref" href="#svcb-compatible">Section 6</a>, this all
applies equally to the HTTPS RR, which shares
the same encoding, format, and high-level semantics.)<a class="pilcrow" href="#section-1.2-1">¶</a></p>
<p id="section-1.2-2">The SVCB RR has two modes: 1) AliasMode (<a class="auto internal xref" href="#alias-mode">Section 2.4.2</a>), which aliases a name
to another name and 2) ServiceMode (<a class="auto internal xref" href="#service-mode">Section 2.4.3</a>), which provides connection
information bound to a service endpoint domain.  Placing both forms in a single
RR type allows clients to
fetch the relevant information with a single query (<a class="auto internal xref" href="#svcb-names">Section 2.3</a>).<a class="pilcrow" href="#section-1.2-2">¶</a></p>
<p id="section-1.2-3">The SVCB RR has two required fields and one optional field.  The fields are:<a class="pilcrow" href="#section-1.2-3">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-1.2-4">
          <dt id="section-1.2-4.1">SvcPriority (<a class="auto internal xref" href="#pri">Section 2.4.1</a>):</dt>
          <dd id="section-1.2-4.2" style="margin-left: 1.5em">The priority of this record (relative to others,
with lower values preferred).  A value of 0 indicates AliasMode.<a class="pilcrow" href="#section-1.2-4.2">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-4.3">TargetName:</dt>
          <dd id="section-1.2-4.4" style="margin-left: 1.5em">The domain name of either the alias target (for
AliasMode) or the alternative endpoint (for ServiceMode).<a class="pilcrow" href="#section-1.2-4.4">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-4.5">SvcParams (optional):</dt>
          <dd id="section-1.2-4.6" style="margin-left: 1.5em">A list of key=value pairs
describing the alternative endpoint at
TargetName (only used in ServiceMode and otherwise ignored).
SvcParams are described in <a class="auto internal xref" href="#presentation">Section 2.1</a>.<a class="pilcrow" href="#section-1.2-4.6">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-1.2-5">Cooperating DNS recursive resolvers will perform subsequent record
resolution (for SVCB, A, and AAAA records) and return them in the
Additional section of the response (<a class="auto internal xref" href="#recursive-behavior">Section 4.2</a>).  Clients either use responses
included in the Additional section returned by the recursive resolver
or perform necessary SVCB, A, and AAAA record resolutions (<a class="auto internal xref" href="#client-behavior">Section 3</a>).  DNS
authoritative servers can attach in-bailiwick SVCB, A, AAAA, and CNAME
records in the Additional section to responses for a SVCB query (<a class="auto internal xref" href="#authoritative-behavior">Section 4.1</a>).<a class="pilcrow" href="#section-1.2-5">¶</a></p>
<p id="section-1.2-6">In ServiceMode, the SvcParams of the SVCB RR
provide an extensible data model for describing alternative
endpoints that are authoritative for a service, along with
parameters associated with each of these alternative endpoints (<a class="auto internal xref" href="#keys">Section 7</a>).<a class="pilcrow" href="#section-1.2-6">¶</a></p>
<p id="section-1.2-7">For HTTP use cases, the HTTPS RR (<a class="auto internal xref" href="#https">Section 9</a>) enables many of the benefits of Alt-Svc
<span>[<a class="cite xref" href="#RFC7838">AltSvc</a>]</span>
without waiting for a full HTTP connection initiation (multiple round trips)
before learning of the preferred alternative,
and without necessarily revealing the user's
intended destination to all entities along the network path.<a class="pilcrow" href="#section-1.2-7">¶</a></p>
</section>
</div>
<div id="terminology">
<section id="section-1.3">
        <h3 id="name-terminology">
<a class="section-number selfRef" href="#section-1.3">1.3. </a><a class="section-name selfRef" href="#name-terminology">Terminology</a>
        </h3>
<p id="section-1.3-1">Terminology in this document is based on the common case where the SVCB record is used to
access a resource identified by a URI whose <code>authority</code> field contains a DNS
hostname as the <code>host</code>.<a class="pilcrow" href="#section-1.3-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.3-2.1">The "service" is the information source identified by the <code>authority</code> and
<code>scheme</code> of the URI, capable of providing access to the resource.  For "https"
URIs, the "service" corresponds to an "origin" <span>[<a class="cite xref" href="#RFC6454">RFC6454</a>]</span>.<a class="pilcrow" href="#section-1.3-2.1">¶</a>
</li>
          <li class="normal" id="section-1.3-2.2">The "service name" is the <code>host</code> portion of the authority.<a class="pilcrow" href="#section-1.3-2.2">¶</a>
</li>
          <li class="normal" id="section-1.3-2.3">The "authority endpoint" is the authority's hostname and a port number implied
by the scheme or specified in the URI.<a class="pilcrow" href="#section-1.3-2.3">¶</a>
</li>
          <li class="normal" id="section-1.3-2.4">An "alternative endpoint" is a hostname, port number, and other associated
instructions to the client on how to reach an instance of a service.<a class="pilcrow" href="#section-1.3-2.4">¶</a>
</li>
        </ul>
<p id="section-1.3-3">Additional DNS terminology intends to be consistent
with <span>[<a class="cite xref" href="#RFC8499">DNSTerm</a>]</span>.<a class="pilcrow" href="#section-1.3-3">¶</a></p>
<p id="section-1.3-4">SVCB is a contraction of "service binding".  The SVCB RR, HTTPS RR,
and future RR types that share SVCB's formats and registry are
collectively known as SVCB-compatible RR types.  The contraction "SVCB" is also
used to refer to this system as a whole.<a class="pilcrow" href="#section-1.3-4">¶</a></p>
<p id="section-1.3-5">The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>",
       "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>",
       "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>",
       "<span class="bcp14">SHOULD NOT</span>",
       "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
       "<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document
       are to be interpreted as described in BCP 14
       <span>[<a class="cite xref" href="#RFC2119">RFC2119</a>]</span> <span>[<a class="cite xref" href="#RFC8174">RFC8174</a>]</span> when, and only
       when, they appear in all capitals, as shown here.<a class="pilcrow" href="#section-1.3-5">¶</a></p>
</section>
</div>
</section>
</div>
<div id="svcb">
<section id="section-2">
      <h2 id="name-the-svcb-record-type">
<a class="section-number selfRef" href="#section-2">2. </a><a class="section-name selfRef" href="#name-the-svcb-record-type">The SVCB Record Type</a>
      </h2>
<p id="section-2-1">The SVCB DNS RR type (RR type 64)
is used to locate alternative endpoints for a service.<a class="pilcrow" href="#section-2-1">¶</a></p>
<p id="section-2-2">The algorithm for resolving SVCB records and associated
address records is specified in <a class="auto internal xref" href="#client-behavior">Section 3</a>.<a class="pilcrow" href="#section-2-2">¶</a></p>
<p id="section-2-3">Other SVCB-compatible RR types
can also be defined as needed (see <a class="auto internal xref" href="#svcb-compatible">Section 6</a>).  In particular, the
HTTPS RR (RR type 65) provides special handling
for the case of "https" origins as described in <a class="auto internal xref" href="#https">Section 9</a>.<a class="pilcrow" href="#section-2-3">¶</a></p>
<p id="section-2-4">SVCB RRs are extensible by a list of SvcParams, which are pairs consisting of a
SvcParamKey and a SvcParamValue. Each SvcParamKey has a presentation name and a
registered number. Values are in a format specific to the SvcParamKey.  Each
SvcParam has a specified presentation format (used in zone files) and
wire encoding
(e.g., domain names, binary data, or numeric values). The initial SvcParamKeys
and their formats are defined in <a class="auto internal xref" href="#keys">Section 7</a>.<a class="pilcrow" href="#section-2-4">¶</a></p>
<div id="presentation">
<section id="section-2.1">
        <h3 id="name-zone-file-presentation-form">
<a class="section-number selfRef" href="#section-2.1">2.1. </a><a class="section-name selfRef" href="#name-zone-file-presentation-form">Zone-File Presentation Format</a>
        </h3>
<p id="section-2.1-1">The presentation format <code>&lt;RDATA&gt;</code> of the record (<span>[<a class="cite xref" href="#RFC1035">RFC1035</a>], <a class="relref" href="https://rfc-editor.org/rfc/rfc1035#section-5.1">Section 5.1</a></span>) has
the form:<a class="pilcrow" href="#section-2.1-1">¶</a></p>
<div class="lang-pseudocode sourcecode" id="section-2.1-2">
<pre>SvcPriority TargetName SvcParams
</pre><a class="pilcrow" href="#section-2.1-2">¶</a>
</div>
<p id="section-2.1-3">The SVCB record is defined specifically within
the Internet ("IN") Class (<span>[<a class="cite xref" href="#RFC1035">RFC1035</a>], <a class="relref" href="https://rfc-editor.org/rfc/rfc1035#section-3.2.4">Section 3.2.4</a></span>).<a class="pilcrow" href="#section-2.1-3">¶</a></p>
<p id="section-2.1-4">SvcPriority is a number in the range 0-65535,
TargetName is a <code>&lt;domain-name&gt;</code> (<span>[<a class="cite xref" href="#RFC1035">RFC1035</a>], <a class="relref" href="https://rfc-editor.org/rfc/rfc1035#section-5.1">Section 5.1</a></span>),
and the SvcParams are a whitespace-separated list with each SvcParam
consisting of a SvcParamKey=SvcParamValue pair or a standalone SvcParamKey.
SvcParamKeys are registered by IANA (<a class="auto internal xref" href="#svcparamregistry">Section 14.3</a>).<a class="pilcrow" href="#section-2.1-4">¶</a></p>
<p id="section-2.1-5">Each SvcParamKey <span class="bcp14">SHALL</span> appear at most once in the SvcParams.
In presentation format, SvcParamKeys are lowercase alphanumeric strings.
Key names contain 1-63 characters from the ranges "a"-"z", "0"-"9", and "-".
In ABNF <span>[<a class="cite xref" href="#RFC5234">RFC5234</a>]</span>,<a class="pilcrow" href="#section-2.1-5">¶</a></p>
<div class="lang-abnf sourcecode" id="section-2.1-6">
<pre>alpha-lc      = %x61-7A   ; a-z
SvcParamKey   = 1*63(alpha-lc / DIGIT / "-")
SvcParam      = SvcParamKey ["=" SvcParamValue]
SvcParamValue = char-string ; See Appendix A.
value         = *OCTET ; Value before key-specific parsing
</pre><a class="pilcrow" href="#section-2.1-6">¶</a>
</div>
<p id="section-2.1-7">The SvcParamValue is parsed using the
character-string decoding algorithm (<a class="auto internal xref" href="#decoding">Appendix A</a>), producing a <code>value</code>.
The <code>value</code> is then validated and converted into wire format in a manner
specific to each key.<a class="pilcrow" href="#section-2.1-7">¶</a></p>
<p id="section-2.1-8">When the optional "=" and SvcParamValue are omitted, the <code>value</code> is
interpreted as empty.<a class="pilcrow" href="#section-2.1-8">¶</a></p>
<p id="section-2.1-9">Arbitrary keys can be represented using the unknown-key presentation format
"keyNNNNN" where NNNNN is the numeric
value of the key type without leading zeros.
A SvcParam in this form <span class="bcp14">SHALL</span> be parsed as specified above, and
the decoded <code>value</code> <span class="bcp14">SHALL</span> be used as its wire-format encoding.<a class="pilcrow" href="#section-2.1-9">¶</a></p>
<p id="section-2.1-10">For some SvcParamKeys, the <code>value</code> corresponds to a list or set of
items.  Presentation formats for such keys <span class="bcp14">SHOULD</span> use a comma-separated list
(<a class="auto internal xref" href="#value-list">Appendix A.1</a>).<a class="pilcrow" href="#section-2.1-10">¶</a></p>
<p id="section-2.1-11">SvcParams in presentation format <span class="bcp14">MAY</span> appear in any order, but keys <span class="bcp14">MUST NOT</span> be
repeated.<a class="pilcrow" href="#section-2.1-11">¶</a></p>
</section>
</div>
<div id="rdata-wire-format">
<section id="section-2.2">
        <h3 id="name-rdata-wire-format">
<a class="section-number selfRef" href="#section-2.2">2.2. </a><a class="section-name selfRef" href="#name-rdata-wire-format">RDATA Wire Format</a>
        </h3>
<p id="section-2.2-1">The RDATA for the SVCB RR consists of:<a class="pilcrow" href="#section-2.2-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2-2.1">a 2-octet field for SvcPriority as an integer in network
byte order.<a class="pilcrow" href="#section-2.2-2.1">¶</a>
</li>
          <li class="normal" id="section-2.2-2.2">the uncompressed, fully qualified TargetName, represented as
a sequence of length-prefixed labels per <span><a class="relref" href="https://rfc-editor.org/rfc/rfc1035#section-3.1">Section 3.1</a> of [<a class="cite xref" href="#RFC1035">RFC1035</a>]</span>.<a class="pilcrow" href="#section-2.2-2.2">¶</a>
</li>
          <li class="normal" id="section-2.2-2.3">the SvcParams, consuming the remainder of the record
(so smaller than 65535 octets and constrained by the RDATA
and DNS message sizes).<a class="pilcrow" href="#section-2.2-2.3">¶</a>
</li>
        </ul>
<p id="section-2.2-3">When the list of SvcParams is non-empty, it contains a series of
SvcParamKey=SvcParamValue pairs, represented as:<a class="pilcrow" href="#section-2.2-3">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2-4.1">a 2-octet field containing the SvcParamKey as an
integer in network byte order.  (See <a class="auto internal xref" href="#iana-keys">Section 14.3.2</a> for the defined values.)<a class="pilcrow" href="#section-2.2-4.1">¶</a>
</li>
          <li class="normal" id="section-2.2-4.2">a 2-octet field containing the length of the SvcParamValue
as an integer between 0 and 65535 in network byte order.<a class="pilcrow" href="#section-2.2-4.2">¶</a>
</li>
          <li class="normal" id="section-2.2-4.3">an octet string of this length whose contents are the SvcParamValue in a
format determined by the SvcParamKey.<a class="pilcrow" href="#section-2.2-4.3">¶</a>
</li>
        </ul>
<p id="section-2.2-5">SvcParamKeys <span class="bcp14">SHALL</span> appear in increasing numeric order.<a class="pilcrow" href="#section-2.2-5">¶</a></p>
<p id="section-2.2-6">Clients <span class="bcp14">MUST</span> consider an RR malformed if:<a class="pilcrow" href="#section-2.2-6">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2-7.1">the end of the RDATA occurs within a SvcParam.<a class="pilcrow" href="#section-2.2-7.1">¶</a>
</li>
          <li class="normal" id="section-2.2-7.2">SvcParamKeys are not in strictly increasing numeric order.<a class="pilcrow" href="#section-2.2-7.2">¶</a>
</li>
          <li class="normal" id="section-2.2-7.3">the SvcParamValue for a SvcParamKey does not have the expected format.<a class="pilcrow" href="#section-2.2-7.3">¶</a>
</li>
        </ul>
<p id="section-2.2-8">Note that the second condition implies that there are no duplicate
SvcParamKeys.<a class="pilcrow" href="#section-2.2-8">¶</a></p>
<p id="section-2.2-9">If any RRs are malformed, the client <span class="bcp14">MUST</span> reject the entire RRset and
fall back to non-SVCB connection establishment.<a class="pilcrow" href="#section-2.2-9">¶</a></p>
</section>
</div>
<div id="svcb-names">
<section id="section-2.3">
        <h3 id="name-svcb-query-names">
<a class="section-number selfRef" href="#section-2.3">2.3. </a><a class="section-name selfRef" href="#name-svcb-query-names">SVCB Query Names</a>
        </h3>
<p id="section-2.3-1">When querying the SVCB RR, a service is translated into a QNAME by prepending
the service name with a label indicating the scheme, prefixed with an underscore,
resulting in a domain name like "_examplescheme.api.example.com.".  This
follows the Attrleaf naming pattern <span>[<a class="cite xref" href="#RFC8552">Attrleaf</a>]</span>, so the scheme <span class="bcp14">MUST</span> be
registered appropriately with IANA (see <a class="auto internal xref" href="#other-standards">Section 11</a>).<a class="pilcrow" href="#section-2.3-1">¶</a></p>
<p id="section-2.3-2">Protocol mapping documents <span class="bcp14">MAY</span> specify additional underscore-prefixed labels
to be prepended.  For schemes that specify a port (<span><a class="relref" href="https://rfc-editor.org/rfc/rfc3986#section-3.2.3">Section 3.2.3</a> of [<a class="cite xref" href="#RFC3986">URI</a>]</span>), one reasonable possibility is to prepend the indicated port
number if a non-default port number is specified.  This document terms this behavior
"Port Prefix Naming" and uses it in the examples throughout.<a class="pilcrow" href="#section-2.3-2">¶</a></p>
<p id="section-2.3-3">See <a class="auto internal xref" href="#httpsnames">Section 9.1</a> for information regarding HTTPS RR behavior.<a class="pilcrow" href="#section-2.3-3">¶</a></p>
<p id="section-2.3-4">When a prior CNAME or SVCB record has aliased to
a SVCB record, each RR <span class="bcp14">SHALL</span> be returned under its own owner name, as in
ordinary CNAME processing (<span>[<a class="cite xref" href="#RFC1034">RFC1034</a>], <a class="relref" href="https://rfc-editor.org/rfc/rfc1034#section-3.6.2">Section 3.6.2</a></span>).  For details, see
the recommendations regarding aliases for clients (<a class="auto internal xref" href="#client-behavior">Section 3</a>),
servers (<a class="auto internal xref" href="#server-behavior">Section 4</a>), and zones (<a class="auto internal xref" href="#zone-structures">Section 10</a>).<a class="pilcrow" href="#section-2.3-4">¶</a></p>
<p id="section-2.3-5">Note that none of these forms alter the origin or authority for validation
purposes.
For example, TLS clients <span class="bcp14">MUST</span> continue to validate TLS certificates
for the original service name.<a class="pilcrow" href="#section-2.3-5">¶</a></p>
<p id="section-2.3-6">As an example, the owner of "example.com" could publish this record:<a class="pilcrow" href="#section-2.3-6">¶</a></p>
<div class="lang-dns-rr sourcecode" id="section-2.3-7">
<pre>_8443._foo.api.example.com. 7200 IN SVCB 0 svc4.example.net.
</pre><a class="pilcrow" href="#section-2.3-7">¶</a>
</div>
<p id="section-2.3-8">This record would indicate that "foo://api.example.com:8443" is aliased to "svc4.example.net".
The owner of "example.net", in turn, could publish this record:<a class="pilcrow" href="#section-2.3-8">¶</a></p>
<div class="lang-dns-rr sourcecode" id="section-2.3-9">
<pre>svc4.example.net.  7200  IN SVCB 3 svc4.example.net. (
    alpn="bar" port="8004" )
</pre><a class="pilcrow" href="#section-2.3-9">¶</a>
</div>
<p id="section-2.3-10">This record would indicate that these services are served on port number 8004,
which supports the protocol "bar" and its associated transport in
addition to the default transport protocol for "foo://".<a class="pilcrow" href="#section-2.3-10">¶</a></p>
<p id="section-2.3-11">(Parentheses are used to ignore a line break in DNS zone-file presentation
format, per <span><a class="relref" href="https://rfc-editor.org/rfc/rfc1035#section-5.1">Section 5.1</a> of [<a class="cite xref" href="#RFC1035">RFC1035</a>]</span>.)<a class="pilcrow" href="#section-2.3-11">¶</a></p>
</section>
</div>
<div id="interpretation">
<section id="section-2.4">
        <h3 id="name-interpretation">
<a class="section-number selfRef" href="#section-2.4">2.4. </a><a class="section-name selfRef" href="#name-interpretation">Interpretation</a>
        </h3>
<div id="pri">
<section id="section-2.4.1">
          <h4 id="name-svcpriority">
<a class="section-number selfRef" href="#section-2.4.1">2.4.1. </a><a class="section-name selfRef" href="#name-svcpriority">SvcPriority</a>
          </h4>
<p id="section-2.4.1-1">When SvcPriority is 0, the SVCB record is in AliasMode (<a class="auto internal xref" href="#alias-mode">Section 2.4.2</a>).
Otherwise, it is in ServiceMode (<a class="auto internal xref" href="#service-mode">Section 2.4.3</a>).<a class="pilcrow" href="#section-2.4.1-1">¶</a></p>
<p id="section-2.4.1-2">Within a SVCB RRset,
all RRs <span class="bcp14">SHOULD</span> have the same mode.
If an RRset contains a record in AliasMode, the recipient <span class="bcp14">MUST</span> ignore
any ServiceMode records in the set.<a class="pilcrow" href="#section-2.4.1-2">¶</a></p>
<p id="section-2.4.1-3">RRsets are explicitly unordered collections, so the
SvcPriority field is used to impose an ordering on SVCB RRs.
A smaller SvcPriority indicates that the domain owner recommends the use of this
record over ServiceMode RRs with a larger SvcPriority value.<a class="pilcrow" href="#section-2.4.1-3">¶</a></p>
<p id="section-2.4.1-4">When receiving an RRset containing multiple SVCB records with the
same SvcPriority value, clients <span class="bcp14">SHOULD</span> apply a random shuffle within a
priority level to the records before using them, to ensure uniform
load balancing.<a class="pilcrow" href="#section-2.4.1-4">¶</a></p>
</section>
</div>
<div id="alias-mode">
<section id="section-2.4.2">
          <h4 id="name-aliasmode">
<a class="section-number selfRef" href="#section-2.4.2">2.4.2. </a><a class="section-name selfRef" href="#name-aliasmode">AliasMode</a>
          </h4>
<p id="section-2.4.2-1">In AliasMode, the SVCB record aliases a service to a
TargetName.  SVCB RRsets <span class="bcp14">SHOULD</span> only have a single RR in AliasMode.  If multiple AliasMode RRs are present, clients or recursive
resolvers <span class="bcp14">SHOULD</span> pick one at random.<a class="pilcrow" href="#section-2.4.2-1">¶</a></p>
<p id="section-2.4.2-2">The primary purpose of AliasMode is to allow aliasing at the zone
apex, where CNAME is not allowed (see, for example, <span>[<a class="cite xref" href="#RFC1912">RFC1912</a>], <a class="relref" href="https://rfc-editor.org/rfc/rfc1912#section-2.4">Section 2.4</a></span>).
In AliasMode, the TargetName will
be the name of a domain that resolves to SVCB,
AAAA, and/or A records.  (See <a class="auto internal xref" href="#svcb-compatible">Section 6</a> for aliasing of SVCB-compatible RR types.)
Unlike CNAME, AliasMode records do not affect the resolution of other RR
types and apply only to a specific service, not an entire domain name.<a class="pilcrow" href="#section-2.4.2-2">¶</a></p>
<p id="section-2.4.2-3">The AliasMode TargetName <span class="bcp14">SHOULD NOT</span> be equal
to the owner name, as this would result in a loop.
In AliasMode, recipients <span class="bcp14">MUST</span> ignore any SvcParams that are present.
Zone-file parsers <span class="bcp14">MAY</span> emit a warning if an AliasMode record has SvcParams.
The use of SvcParams in AliasMode records is currently not defined, but a
future specification could extend AliasMode records to include SvcParams.<a class="pilcrow" href="#section-2.4.2-3">¶</a></p>
<p id="section-2.4.2-4">For example, the operator of "foo://example.com:8080" could
point requests to a service operating at "foosvc.example.net"
by publishing:<a class="pilcrow" href="#section-2.4.2-4">¶</a></p>
<div class="lang-dns-rr sourcecode" id="section-2.4.2-5">
<pre>_8080._foo.example.com. 3600 IN SVCB 0 foosvc.example.net.
</pre><a class="pilcrow" href="#section-2.4.2-5">¶</a>
</div>
<p id="section-2.4.2-6">Using AliasMode maintains a separation of concerns: the owner of
"foosvc.example.net" can add or remove ServiceMode SVCB records without
requiring a corresponding change to "example.com".  Note that if
"foosvc.example.net" promises to always publish a SVCB record, this AliasMode
record can be replaced by a CNAME at the same owner name.<a class="pilcrow" href="#section-2.4.2-6">¶</a></p>
<p id="section-2.4.2-7">AliasMode is especially useful for SVCB-compatible RR types that do not
require an underscore prefix, such as the HTTPS RR type.  For example,
the operator of "https://example.com" could point requests to a server
at "svc.example.net" by publishing this record at the zone apex:<a class="pilcrow" href="#section-2.4.2-7">¶</a></p>
<div class="lang-dns-rr sourcecode" id="section-2.4.2-8">
<pre>example.com. 3600 IN HTTPS 0 svc.example.net.
</pre><a class="pilcrow" href="#section-2.4.2-8">¶</a>
</div>
<p id="section-2.4.2-9">Note that the SVCB record's owner name <span class="bcp14">MAY</span> be the canonical name
of a CNAME record, and the TargetName <span class="bcp14">MAY</span> be the owner of a CNAME
record. Clients and recursive resolvers <span class="bcp14">MUST</span> follow CNAMEs as normal.<a class="pilcrow" href="#section-2.4.2-9">¶</a></p>
<p id="section-2.4.2-10">To avoid unbounded alias chains, clients and recursive resolvers <span class="bcp14">MUST</span> impose a
limit on the total number of SVCB aliases they will follow for each resolution
request.  This limit <span class="bcp14">MUST NOT</span> be zero, i.e., implementations <span class="bcp14">MUST</span> be able to
follow at least one AliasMode record.  The exact value of this limit
is left to implementations.<a class="pilcrow" href="#section-2.4.2-10">¶</a></p>
<p id="section-2.4.2-11">Zones that require following multiple AliasMode records could encounter
compatibility and performance issues.<a class="pilcrow" href="#section-2.4.2-11">¶</a></p>
<p id="section-2.4.2-12">As legacy clients will not know to use this record, service
operators will likely need to retain fallback AAAA and A records
alongside this SVCB record, although in a common case
the target of the SVCB record might offer better performance, and
therefore would be preferable for clients implementing this specification
to use.<a class="pilcrow" href="#section-2.4.2-12">¶</a></p>
<p id="section-2.4.2-13">AliasMode records only apply to queries for the specific RR type.
For example, a SVCB record cannot alias to an HTTPS record or vice versa.<a class="pilcrow" href="#section-2.4.2-13">¶</a></p>
</section>
</div>
<div id="service-mode">
<section id="section-2.4.3">
          <h4 id="name-servicemode">
<a class="section-number selfRef" href="#section-2.4.3">2.4.3. </a><a class="section-name selfRef" href="#name-servicemode">ServiceMode</a>
          </h4>
<p id="section-2.4.3-1">In ServiceMode, the TargetName and SvcParams within each RR
associate an alternative endpoint for the service with its connection
parameters.<a class="pilcrow" href="#section-2.4.3-1">¶</a></p>
<p id="section-2.4.3-2">Each protocol scheme that uses SVCB <span class="bcp14">MUST</span> define a protocol mapping that
explains how SvcParams are applied for connections of that scheme.
Unless specified otherwise by the
protocol mapping, clients <span class="bcp14">MUST</span> ignore any SvcParam that they do
not recognize.<a class="pilcrow" href="#section-2.4.3-2">¶</a></p>
<p id="section-2.4.3-3">Some SvcParams impose requirements on other SvcParams in the RR.  A
ServiceMode RR is called "self-consistent" if its SvcParams all comply with
each other's requirements.  Clients <span class="bcp14">MUST</span> reject any RR whose recognized
SvcParams are not self-consistent and <span class="bcp14">MAY</span> reject the entire RRset.  To
help zone operators avoid this condition, zone-file implementations <span class="bcp14">SHOULD</span>
enforce self-consistency as well.<a class="pilcrow" href="#section-2.4.3-3">¶</a></p>
</section>
</div>
</section>
</div>
<div id="dot">
<section id="section-2.5">
        <h3 id="name-special-handling-of-in-targ">
<a class="section-number selfRef" href="#section-2.5">2.5. </a><a class="section-name selfRef" href="#name-special-handling-of-in-targ">Special Handling of "." in TargetName</a>
        </h3>
<p id="section-2.5-1">If TargetName has the value "." (represented in the wire format as a
zero-length label), special rules apply.<a class="pilcrow" href="#section-2.5-1">¶</a></p>
<div id="aliasdot">
<section id="section-2.5.1">
          <h4 id="name-aliasmode-2">
<a class="section-number selfRef" href="#section-2.5.1">2.5.1. </a><a class="section-name selfRef" href="#name-aliasmode-2">AliasMode</a>
          </h4>
<p id="section-2.5.1-1">For AliasMode SVCB RRs, a TargetName of "." indicates that the service
is not available or does not exist.  This indication is advisory:
clients encountering this indication <span class="bcp14">MAY</span> ignore it and attempt to connect
without the use of SVCB.<a class="pilcrow" href="#section-2.5.1-1">¶</a></p>
</section>
</div>
<div id="servicemode">
<section id="section-2.5.2">
          <h4 id="name-servicemode-2">
<a class="section-number selfRef" href="#section-2.5.2">2.5.2. </a><a class="section-name selfRef" href="#name-servicemode-2">ServiceMode</a>
          </h4>
<p id="section-2.5.2-1">For ServiceMode SVCB RRs, if TargetName has the value ".", then the
owner name of this record <span class="bcp14">MUST</span> be used as the effective TargetName.
If the record has a wildcard owner name in the zone file, the recipient
<span class="bcp14">SHALL</span> use the response's synthesized owner name as the effective TargetName.<a class="pilcrow" href="#section-2.5.2-1">¶</a></p>
<p id="section-2.5.2-2">Here, for example, "svc2.example.net" is the effective TargetName:<a class="pilcrow" href="#section-2.5.2-2">¶</a></p>
<div class="lang-dns-rr sourcecode" id="section-2.5.2-3">
<pre>example.com.      7200  IN HTTPS 0 svc.example.net.
svc.example.net.  7200  IN CNAME svc2.example.net.
svc2.example.net. 7200  IN HTTPS 1 . port=8002
svc2.example.net. 300   IN A     192.0.2.2
svc2.example.net. 300   IN AAAA  2001:db8::2
</pre><a class="pilcrow" href="#section-2.5.2-3">¶</a>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="client-behavior">
<section id="section-3">
      <h2 id="name-client-behavior">
<a class="section-number selfRef" href="#section-3">3. </a><a class="section-name selfRef" href="#name-client-behavior">Client Behavior</a>
      </h2>
<p id="section-3-1">"SVCB resolution" is the process of enumerating and ordering the available endpoints
for a service, as performed by the client.  SVCB resolution is implemented as follows:<a class="pilcrow" href="#section-3-1">¶</a></p>
<ol class="normal type-1" id="section-3-2" start="1" type="1">
<li id="section-3-2.1">Let $QNAME be the service name plus appropriate prefixes for the
scheme (see <a class="auto internal xref" href="#svcb-names">Section 2.3</a>).<a class="pilcrow" href="#section-3-2.1">¶</a>
</li>
        <li id="section-3-2.2">Issue a SVCB query for $QNAME.<a class="pilcrow" href="#section-3-2.2">¶</a>
</li>
        <li id="section-3-2.3">If an AliasMode SVCB record is returned for $QNAME (after following CNAMEs
as normal), set $QNAME to its TargetName (without
additional prefixes) and loop back to Step 2,
subject to chain length limits and loop detection heuristics (see
<a class="auto internal xref" href="#client-failures">Section 3.1</a>).<a class="pilcrow" href="#section-3-2.3">¶</a>
</li>
        <li id="section-3-2.4">If one or more "compatible" (<a class="auto internal xref" href="#mandatory">Section 8</a>) ServiceMode records are returned,
these represent the alternative endpoints. Sort the records by ascending SvcPriority.<a class="pilcrow" href="#section-3-2.4">¶</a>
</li>
        <li id="section-3-2.5">Otherwise, SVCB resolution has failed, and the list of available endpoints is
empty.<a class="pilcrow" href="#section-3-2.5">¶</a>
</li>
      </ol>
<p id="section-3-3">This procedure does not rely on any recursive or authoritative DNS server to
comply with this specification or have any awareness of SVCB.<a class="pilcrow" href="#section-3-3">¶</a></p>
<p id="section-3-4">A client is called "SVCB-optional" if it can connect without the use of
ServiceMode records; otherwise, it is called "SVCB-reliant".  Clients for pre-existing
protocols (e.g., HTTP) <span class="bcp14">SHALL</span> implement SVCB-optional behavior (except as
noted in <a class="auto internal xref" href="#client-failures">Section 3.1</a> or when modified by future specifications).<a class="pilcrow" href="#section-3-4">¶</a></p>
<p id="section-3-5">SVCB-optional clients <span class="bcp14">SHOULD</span> issue in parallel any other DNS queries that might
be needed for connection establishment if the SVCB record is absent, in order to minimize delay
in that case and enable the optimizations discussed in <a class="auto internal xref" href="#optimizations">Section 5</a>.<a class="pilcrow" href="#section-3-5">¶</a></p>
<p id="section-3-6">Once SVCB resolution has concluded, whether successful or not,
if at least one AliasMode record was processed,
SVCB-optional clients <span class="bcp14">SHALL</span> append to the list of endpoints an
endpoint consisting of the final value of $QNAME, the authority
endpoint's port number, and no SvcParams.  (This endpoint will be
attempted before falling back to non-SVCB connection modes.  This ensures that
SVCB-optional clients will make use of an AliasMode record whose TargetName has
A and/or AAAA records but no SVCB records.)<a class="pilcrow" href="#section-3-6">¶</a></p>
<p id="section-3-7">The client proceeds with connection establishment using this list of
endpoints.  Clients <span class="bcp14">SHOULD</span> try higher-priority alternatives first, with
fallback to lower-priority alternatives.  Clients resolve AAAA and/or A
records for the selected TargetName and <span class="bcp14">MAY</span> choose between them using an
approach such as Happy Eyeballs <span>[<a class="cite xref" href="#RFC8305">HappyEyeballsV2</a>]</span>.<a class="pilcrow" href="#section-3-7">¶</a></p>
<p id="section-3-8">If the client is SVCB-optional and connecting using this list of endpoints has
failed, the client now attempts to use non-SVCB connection modes.<a class="pilcrow" href="#section-3-8">¶</a></p>
<p id="section-3-9">Some important optimizations are discussed in <a class="auto internal xref" href="#optimizations">Section 5</a>
to avoid additional latency in comparison to ordinary AAAA/A lookups.<a class="pilcrow" href="#section-3-9">¶</a></p>
<div id="client-failures">
<section id="section-3.1">
        <h3 id="name-handling-resolution-failure">
<a class="section-number selfRef" href="#section-3.1">3.1. </a><a class="section-name selfRef" href="#name-handling-resolution-failure">Handling Resolution Failures</a>
        </h3>
<p id="section-3.1-1">If DNS responses are cryptographically protected (e.g., using DNSSEC or
TLS <span>[<a class="cite xref" href="#RFC7858">DoT</a>]</span> <span>[<a class="cite xref" href="#RFC8484">DoH</a>]</span>) and SVCB resolution fails
due to an authentication error, SERVFAIL response, transport error, or
timeout, the client <span class="bcp14">SHOULD</span> abandon its attempt to reach the service, even
if the client is SVCB-optional.  Otherwise, an active attacker
could mount a downgrade attack by denying the user access to the SvcParams.<a class="pilcrow" href="#section-3.1-1">¶</a></p>
<p id="section-3.1-2">A SERVFAIL error can occur if the domain is DNSSEC-signed, the recursive
resolver is DNSSEC-validating, and the attacker is between the recursive
resolver and the authoritative DNS server.  A transport error or timeout can
occur if an active attacker between the client and the recursive resolver is
selectively dropping SVCB queries or responses, based on their size or
other observable patterns.<a class="pilcrow" href="#section-3.1-2">¶</a></p>
<p id="section-3.1-3">If the client enforces DNSSEC validation on A/AAAA responses, it <span class="bcp14">SHOULD</span>
apply the same validation policy to SVCB.  Otherwise, an attacker could
defeat the A/AAAA protection by forging SVCB responses that direct the
client to other IP addresses.<a class="pilcrow" href="#section-3.1-3">¶</a></p>
<p id="section-3.1-4">If DNS responses are not cryptographically protected, clients <span class="bcp14">MAY</span> treat
SVCB resolution failure as fatal or nonfatal.<a class="pilcrow" href="#section-3.1-4">¶</a></p>
<p id="section-3.1-5">If the client is unable to complete SVCB resolution due to its chain length
limit, the client <span class="bcp14">MUST</span> fall back to the authority endpoint, as if the
service's SVCB record did not exist.<a class="pilcrow" href="#section-3.1-5">¶</a></p>
</section>
</div>
<div id="clients-using-a-proxy">
<section id="section-3.2">
        <h3 id="name-clients-using-a-proxy">
<a class="section-number selfRef" href="#section-3.2">3.2. </a><a class="section-name selfRef" href="#name-clients-using-a-proxy">Clients Using a Proxy</a>
        </h3>
<p id="section-3.2-1">Clients using a domain-oriented transport proxy like HTTP CONNECT
(<span>[<a class="cite xref" href="#RFC7231">RFC7231</a>], <a class="relref" href="https://rfc-editor.org/rfc/rfc7231#section-4.3.6">Section 4.3.6</a></span>) or SOCKS5 <span>[<a class="cite xref" href="#RFC1928">RFC1928</a>]</span> have the option of
using named destinations, in which case the client does not perform
any A or AAAA queries for destination domains.  If the client is configured
to use named
destinations with a proxy that does not provide SVCB query capability
(e.g., through an affiliated DNS resolver), the client would have to perform
SVCB resolution separately, likely disclosing the destinations to additional parties and not just the proxy.
Clients in this configuration <span class="bcp14">SHOULD</span> arrange for a separate SVCB resolution
procedure with appropriate privacy properties.  If this is not possible,
SVCB-optional clients <span class="bcp14">MUST</span> disable SVCB resolution entirely, and SVCB-reliant
clients <span class="bcp14">MUST</span> treat the configuration as invalid.<a class="pilcrow" href="#section-3.2-1">¶</a></p>
<p id="section-3.2-2">If the client does use SVCB and named destinations, the client <span class="bcp14">SHOULD</span> follow
the standard SVCB resolution process, selecting the smallest-SvcPriority
option that is compatible with the client and the proxy.  When connecting
using a SVCB record, clients <span class="bcp14">MUST</span> provide the final TargetName and port to the
proxy, which will perform any required A and AAAA lookups.<a class="pilcrow" href="#section-3.2-2">¶</a></p>
<p id="section-3.2-3">This arrangement has several benefits:<a class="pilcrow" href="#section-3.2-3">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2-4.1">
            <p id="section-3.2-4.1.1">Compared to disabling SVCB:<a class="pilcrow" href="#section-3.2-4.1.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2-4.1.2.1">It allows the client to use the SvcParams, if present, which are
only usable with a specific TargetName.  The SvcParams may
include information that enhances performance (e.g., supported protocols) and privacy.<a class="pilcrow" href="#section-3.2-4.1.2.1">¶</a>
</li>
              <li class="normal" id="section-3.2-4.1.2.2">It allows a service on an apex domain to use aliasing.<a class="pilcrow" href="#section-3.2-4.1.2.2">¶</a>
</li>
            </ul>
</li>
          <li class="normal" id="section-3.2-4.2">
            <p id="section-3.2-4.2.1">Compared to providing the proxy with an IP address:<a class="pilcrow" href="#section-3.2-4.2.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2-4.2.2.1">It allows the proxy to select between IPv4 and IPv6 addresses for the
server according to its configuration.<a class="pilcrow" href="#section-3.2-4.2.2.1">¶</a>
</li>
              <li class="normal" id="section-3.2-4.2.2.2">It ensures that the proxy receives addresses based on its network
geolocation, not the client's.<a class="pilcrow" href="#section-3.2-4.2.2.2">¶</a>
</li>
              <li class="normal" id="section-3.2-4.2.2.3">It enables faster fallback for TCP destinations with multiple addresses
of the same family.<a class="pilcrow" href="#section-3.2-4.2.2.3">¶</a>
</li>
            </ul>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="server-behavior">
<section id="section-4">
      <h2 id="name-dns-server-behavior">
<a class="section-number selfRef" href="#section-4">4. </a><a class="section-name selfRef" href="#name-dns-server-behavior">DNS Server Behavior</a>
      </h2>
<div id="authoritative-behavior">
<section id="section-4.1">
        <h3 id="name-authoritative-servers">
<a class="section-number selfRef" href="#section-4.1">4.1. </a><a class="section-name selfRef" href="#name-authoritative-servers">Authoritative Servers</a>
        </h3>
<p id="section-4.1-1">When replying to a SVCB query, authoritative DNS servers <span class="bcp14">SHOULD</span> return
A, AAAA, and SVCB records in the Additional section for any TargetNames
that are in the zone.  If the zone is signed, the server <span class="bcp14">SHOULD</span> also
include DNSSEC records authenticating the existence or nonexistence of these records
in the Additional section.<a class="pilcrow" href="#section-4.1-1">¶</a></p>
<p id="section-4.1-2">See <a class="auto internal xref" href="#ecs">Section 4.4</a> for exceptions.<a class="pilcrow" href="#section-4.1-2">¶</a></p>
</section>
</div>
<div id="recursive-behavior">
<section id="section-4.2">
        <h3 id="name-recursive-resolvers">
<a class="section-number selfRef" href="#section-4.2">4.2. </a><a class="section-name selfRef" href="#name-recursive-resolvers">Recursive Resolvers</a>
        </h3>
<p id="section-4.2-1">Whether the recursive resolver is aware of SVCB or not, the normal response
construction process used for unknown RR types <span>[<a class="cite xref" href="#RFC3597">RFC3597</a>]</span>
generates the Answer section of the response.
Recursive resolvers that are aware of SVCB <span class="bcp14">SHOULD</span> help the client to
execute the procedure in <a class="auto internal xref" href="#client-behavior">Section 3</a> with minimum overall
latency by incorporating additional useful information into the
Additional section of the response as follows:<a class="pilcrow" href="#section-4.2-1">¶</a></p>
<ol class="normal type-1" id="section-4.2-2" start="1" type="1">
<li id="section-4.2-2.1">Incorporate the results of SVCB resolution.  If the recursive resolver's
local chain length limit (which may be different from the client's limit) has
been reached, terminate.<a class="pilcrow" href="#section-4.2-2.1">¶</a>
</li>
          <li id="section-4.2-2.2">
            <p id="section-4.2-2.2.1">If any of the resolved SVCB records are in AliasMode, choose one of them
at random, and resolve SVCB, A, and AAAA records for its
TargetName.<a class="pilcrow" href="#section-4.2-2.2.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2-2.2.2.1">If any SVCB records are resolved, go to Step 1.<a class="pilcrow" href="#section-4.2-2.2.2.1">¶</a>
</li>
              <li class="normal" id="section-4.2-2.2.2.2">Otherwise, incorporate the results of A and AAAA resolution, and
terminate.<a class="pilcrow" href="#section-4.2-2.2.2.2">¶</a>
</li>
            </ul>
</li>
          <li id="section-4.2-2.3">All the resolved SVCB records are in ServiceMode.  Resolve A and AAAA
queries for each TargetName (or for the owner name if TargetName
is "."), incorporate all the results, and terminate.<a class="pilcrow" href="#section-4.2-2.3">¶</a>
</li>
        </ol>
<p id="section-4.2-3">In this procedure, "resolve" means the resolver's ordinary recursive
resolution procedure, as if processing a query for that RRset.
This includes following any aliases that the resolver would ordinarily
follow (e.g., CNAME, DNAME <span>[<a class="cite xref" href="#RFC6672">DNAME</a>]</span>).  Errors or anomalies in
obtaining additional records <span class="bcp14">MAY</span> cause this process to terminate but
<span class="bcp14">MUST NOT</span> themselves cause the resolver to send a failure response.<a class="pilcrow" href="#section-4.2-3">¶</a></p>
<p id="section-4.2-4">See <a class="auto internal xref" href="#alias-mode">Section 2.4.2</a> for additional safeguards for recursive resolvers
to implement to mitigate loops.<a class="pilcrow" href="#section-4.2-4">¶</a></p>
<p id="section-4.2-5">See <a class="auto internal xref" href="#incomplete-response">Section 5.2</a> for possible optimizations of this procedure.<a class="pilcrow" href="#section-4.2-5">¶</a></p>
<div id="dns64">
<section id="section-4.2.1">
          <h4 id="name-dns64">
<a class="section-number selfRef" href="#section-4.2.1">4.2.1. </a><a class="section-name selfRef" href="#name-dns64">DNS64</a>
          </h4>
<p id="section-4.2.1-1">DNS64 resolvers synthesize responses to AAAA queries for names that only
have an A record (<span><a class="relref" href="https://rfc-editor.org/rfc/rfc6147#section-5.1.7">Section 5.1.7</a> of [<a class="cite xref" href="#RFC6147">RFC6147</a>]</span>).  SVCB-aware DNS64
resolvers <span class="bcp14">SHOULD</span> apply the same synthesis logic when resolving AAAA
records for the TargetName for inclusion in the Additional section (Step 2 in
<a class="auto internal xref" href="#recursive-behavior">Section 4.2</a>) and <span class="bcp14">MAY</span> omit the A records from this section.<a class="pilcrow" href="#section-4.2.1-1">¶</a></p>
<p id="section-4.2.1-2">DNS64 resolvers <span class="bcp14">MUST NOT</span> extrapolate the AAAA synthesis logic to the IP
hints in the SvcParams (<a class="auto internal xref" href="#svcparamkeys-iphints">Section 7.3</a>).  Modifying the IP hints
would break DNSSEC validation for the SVCB record and would not improve
performance when the above recommendation is implemented.<a class="pilcrow" href="#section-4.2.1-2">¶</a></p>
</section>
</div>
</section>
</div>
<div id="general-requirements">
<section id="section-4.3">
        <h3 id="name-general-requirements">
<a class="section-number selfRef" href="#section-4.3">4.3. </a><a class="section-name selfRef" href="#name-general-requirements">General Requirements</a>
        </h3>
<p id="section-4.3-1">Recursive resolvers <span class="bcp14">MUST</span> be able to convey SVCB records with unrecognized
SvcParamKeys.  Resolvers <span class="bcp14">MAY</span> accomplish this by treating
the entire SvcParams portion of the record as opaque, even if the contents
are invalid.  If a recognized SvcParamKey is followed by a value that is
invalid according to the SvcParam's specification, a recursive resolver
<span class="bcp14">MAY</span> report an error such as SERVFAIL instead of returning
the record.
For complex value types whose interpretation might differ
between implementations or have additional future
allowed values added (e.g., URIs or "alpn"), resolvers
<span class="bcp14">SHOULD</span> limit validation to specified constraints.<a class="pilcrow" href="#section-4.3-1">¶</a></p>
<p id="section-4.3-2">When responding to a query that includes the DNSSEC OK bit <span>[<a class="cite xref" href="#RFC3225">RFC3225</a>]</span>,
DNSSEC-capable recursive and authoritative DNS servers <span class="bcp14">MUST</span> accompany
each RRset in the Additional section with the same DNSSEC-related records
that they would send when providing that RRset as an Answer (e.g., RRSIG, NSEC,
NSEC3).<a class="pilcrow" href="#section-4.3-2">¶</a></p>
<p id="section-4.3-3">According to <span><a class="relref" href="https://rfc-editor.org/rfc/rfc2181#section-5.4.1">Section 5.4.1</a> of [<a class="cite xref" href="#RFC2181">RFC2181</a>]</span>, "Unauthenticated RRs received
and cached from ... the additional data section ... should not be cached in
such a way that they would ever be returned as answers to a received query.
They may be returned as additional information where appropriate."
Recursive resolvers therefore <span class="bcp14">MAY</span> cache records from the Additional section
for use in populating Additional section responses and <span class="bcp14">MAY</span> cache them
for general use if they are authenticated by DNSSEC.<a class="pilcrow" href="#section-4.3-3">¶</a></p>
</section>
</div>
<div id="ecs">
<section id="section-4.4">
        <h3 id="name-edns-client-subnet-ecs">
<a class="section-number selfRef" href="#section-4.4">4.4. </a><a class="section-name selfRef" href="#name-edns-client-subnet-ecs">EDNS Client Subnet (ECS)</a>
        </h3>
<p id="section-4.4-1">The EDNS Client Subnet (ECS) option <span>[<a class="cite xref" href="#RFC7871">RFC7871</a>]</span> allows recursive
resolvers to request IP addresses that are suitable for a particular client
IP range.  SVCB records may contain IP addresses (in ipv*hint SvcParams)
or direct users to a subnet-specific TargetName, so recursive resolvers
<span class="bcp14">SHOULD</span> include the same ECS option in SVCB queries as in A/AAAA queries.<a class="pilcrow" href="#section-4.4-1">¶</a></p>
<p id="section-4.4-2">According to <span><a class="relref" href="https://rfc-editor.org/rfc/rfc7871#section-7.3.1">Section 7.3.1</a> of [<a class="cite xref" href="#RFC7871">RFC7871</a>]</span>, "Any records from [the
Additional section] <span class="bcp14">MUST NOT</span> be tied to a network."  Accordingly,
when processing a response whose QTYPE is SVCB-compatible,
resolvers <span class="bcp14">SHOULD</span> treat any records in the Additional section as having
SOURCE PREFIX-LENGTH set to zero and SCOPE PREFIX-LENGTH as specified
in the ECS option.  Authoritative servers <span class="bcp14">MUST</span> omit such records if they are
not suitable for use by any stub resolvers that set SOURCE PREFIX-LENGTH to
zero.  This will cause the resolver to perform a follow-up query that can
receive a properly tailored ECS.  (This is similar to the usage of CNAME with
the ECS option as discussed in <span>[<a class="cite xref" href="#RFC7871">RFC7871</a>], <a class="relref" href="https://rfc-editor.org/rfc/rfc7871#section-7.2.1">Section 7.2.1</a></span>.)<a class="pilcrow" href="#section-4.4-2">¶</a></p>
<p id="section-4.4-3">Authoritative servers that omit Additional records can avoid the added
latency of a follow-up query by following the advice in <a class="auto internal xref" href="#zone-performance">Section 10.2</a>.<a class="pilcrow" href="#section-4.4-3">¶</a></p>
</section>
</div>
</section>
</div>
<div id="optimizations">
<section id="section-5">
      <h2 id="name-performance-optimizations">
<a class="section-number selfRef" href="#section-5">5. </a><a class="section-name selfRef" href="#name-performance-optimizations">Performance Optimizations</a>
      </h2>
<p id="section-5-1">For optimal performance (i.e., minimum connection setup time), clients
<span class="bcp14">SHOULD</span> implement a client-side DNS cache.
Responses in the Additional section of a SVCB response <span class="bcp14">SHOULD</span> be placed
in cache before performing any follow-up queries.
With this behavior, and with conforming DNS servers,
using SVCB does not add network latency to connection setup.<a class="pilcrow" href="#section-5-1">¶</a></p>
<p id="section-5-2">To improve performance when using a non-conforming recursive resolver, clients
<span class="bcp14">SHOULD</span> issue speculative A and/or AAAA queries in parallel with each SVCB
query, based on a predicted value of TargetName (see <a class="auto internal xref" href="#zone-performance">Section 10.2</a>).<a class="pilcrow" href="#section-5-2">¶</a></p>
<p id="section-5-3">After a ServiceMode RRset is received, clients <span class="bcp14">MAY</span> try more than one option
in parallel and <span class="bcp14">MAY</span> prefetch A and AAAA records for multiple TargetNames.<a class="pilcrow" href="#section-5-3">¶</a></p>
<div id="optimistic-pre-connection-and-connection-reuse">
<section id="section-5.1">
        <h3 id="name-optimistic-pre-connection-a">
<a class="section-number selfRef" href="#section-5.1">5.1. </a><a class="section-name selfRef" href="#name-optimistic-pre-connection-a">Optimistic Pre-connection and Connection Reuse</a>
        </h3>
<p id="section-5.1-1">If an address response arrives before the corresponding SVCB response, the
client <span class="bcp14">MAY</span> initiate a connection as if the SVCB query returned NODATA but
<span class="bcp14">MUST NOT</span> transmit any information that could be altered by the SVCB response
until it arrives.  For example, future SvcParamKeys could be defined that
alter the TLS ClientHello.<a class="pilcrow" href="#section-5.1-1">¶</a></p>
<p id="section-5.1-2">Clients
implementing this optimization <span class="bcp14">SHOULD</span> wait for 50 milliseconds before
starting optimistic pre-connection, as per the guidance in
<span>[<a class="cite xref" href="#RFC8305">HappyEyeballsV2</a>]</span>.<a class="pilcrow" href="#section-5.1-2">¶</a></p>
<p id="section-5.1-3">A SVCB record is consistent with a connection
if the client would attempt an equivalent connection when making use of
that record. If a SVCB record is consistent with an active or in-progress
connection C, the client <span class="bcp14">MAY</span> prefer that record and use C as its connection.
For example, suppose the client receives this SVCB RRset for a protocol
that uses TLS over TCP:<a class="pilcrow" href="#section-5.1-3">¶</a></p>
<div class="lang-dns-rr sourcecode" id="section-5.1-4">
<pre>_1234._bar.example.com. 300 IN SVCB 1 svc1.example.net. (
    ipv6hint=2001:db8::1 port=1234 )
                               SVCB 2 svc2.example.net. (
    ipv6hint=2001:db8::2 port=1234 )
</pre><a class="pilcrow" href="#section-5.1-4">¶</a>
</div>
<p id="section-5.1-5">If the client has an in-progress TCP connection to <code>[2001:db8::2]:1234</code>,
it <span class="bcp14">MAY</span> proceed with TLS on that connection, even
though the other record in the RRset has higher priority.<a class="pilcrow" href="#section-5.1-5">¶</a></p>
<p id="section-5.1-6">If none of the SVCB records are consistent
with any active or in-progress connection,
clients proceed with connection establishment as described in
<a class="auto internal xref" href="#client-behavior">Section 3</a>.<a class="pilcrow" href="#section-5.1-6">¶</a></p>
</section>
</div>
<div id="incomplete-response">
<section id="section-5.2">
        <h3 id="name-generating-and-using-incomp">
<a class="section-number selfRef" href="#section-5.2">5.2. </a><a class="section-name selfRef" href="#name-generating-and-using-incomp">Generating and Using Incomplete Responses</a>
        </h3>
<p id="section-5.2-1">When following the procedure in <a class="auto internal xref" href="#recursive-behavior">Section 4.2</a>, recursive
resolvers <span class="bcp14">MAY</span> terminate the procedure early and produce a reply that omits
some of the associated RRsets.  This is <span class="bcp14">REQUIRED</span> when the chain length limit
is reached (Step 1 in <a class="auto internal xref" href="#recursive-behavior">Section 4.2</a>) but might also be appropriate
when the maximum response size is reached or when responding before fully
chasing dependencies would improve performance.  When omitting certain
RRsets, recursive resolvers <span class="bcp14">SHOULD</span> prioritize information for
smaller-SvcPriority records.<a class="pilcrow" href="#section-5.2-1">¶</a></p>
<p id="section-5.2-2">As discussed in <a class="auto internal xref" href="#client-behavior">Section 3</a>, clients <span class="bcp14">MUST</span> be able to fetch additional
information that is required to use a SVCB record, if it is not included
in the initial response.  As a performance optimization, if some of the SVCB
records in the response can be used without requiring additional DNS queries,
the client <span class="bcp14">MAY</span> prefer those records, regardless of their priorities.<a class="pilcrow" href="#section-5.2-2">¶</a></p>
</section>
</div>
</section>
</div>
<div id="svcb-compatible">
<section id="section-6">
      <h2 id="name-svcb-compatible-rr-types">
<a class="section-number selfRef" href="#section-6">6. </a><a class="section-name selfRef" href="#name-svcb-compatible-rr-types">SVCB-Compatible RR Types</a>
      </h2>
<p id="section-6-1">An RR type is called "SVCB-compatible" if it permits an implementation that is
identical to SVCB in its:<a class="pilcrow" href="#section-6-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6-2.1">RDATA presentation format<a class="pilcrow" href="#section-6-2.1">¶</a>
</li>
        <li class="normal" id="section-6-2.2">RDATA wire format<a class="pilcrow" href="#section-6-2.2">¶</a>
</li>
        <li class="normal" id="section-6-2.3">IANA registry used for SvcParamKeys<a class="pilcrow" href="#section-6-2.3">¶</a>
</li>
        <li class="normal" id="section-6-2.4">Authoritative server Additional section processing<a class="pilcrow" href="#section-6-2.4">¶</a>
</li>
        <li class="normal" id="section-6-2.5">Recursive resolution process<a class="pilcrow" href="#section-6-2.5">¶</a>
</li>
        <li class="normal" id="section-6-2.6">Relevant Class (i.e., Internet ("IN") <span>[<a class="cite xref" href="#RFC1035">RFC1035</a>]</span>)<a class="pilcrow" href="#section-6-2.6">¶</a>
</li>
      </ul>
<p id="section-6-3">This allows authoritative and recursive DNS servers to apply identical
processing to all SVCB-compatible RR types.<a class="pilcrow" href="#section-6-3">¶</a></p>
<p id="section-6-4">All other behaviors described as applying to the SVCB RR also apply
to all SVCB-compatible RR types unless explicitly stated otherwise.
When following an AliasMode record (<a class="auto internal xref" href="#alias-mode">Section 2.4.2</a>) of RR type $T, the
follow-up query to the TargetName <span class="bcp14">MUST</span> also be for type $T.<a class="pilcrow" href="#section-6-4">¶</a></p>
<p id="section-6-5">This document defines one SVCB-compatible RR type (other than SVCB itself):
the HTTPS RR type (<a class="auto internal xref" href="#https">Section 9</a>), which avoids Attrleaf label prefixes <span>[<a class="cite xref" href="#RFC8552">Attrleaf</a>]</span> in order to improve
compatibility with wildcards and CNAMEs, which are widely used with HTTP.<a class="pilcrow" href="#section-6-5">¶</a></p>
<p id="section-6-6">Standards authors should consider carefully whether to use SVCB or define a
new SVCB-compatible RR type, as this choice cannot easily be reversed after
deployment.<a class="pilcrow" href="#section-6-6">¶</a></p>
</section>
</div>
<div id="keys">
<section id="section-7">
      <h2 id="name-initial-svcparamkeys">
<a class="section-number selfRef" href="#section-7">7. </a><a class="section-name selfRef" href="#name-initial-svcparamkeys">Initial SvcParamKeys</a>
      </h2>
<p id="section-7-1">A few initial SvcParamKeys are defined here.  These keys are useful for the
"https" scheme, and most are expected to be generally applicable to other
schemes as well.<a class="pilcrow" href="#section-7-1">¶</a></p>
<p id="section-7-2">Each new protocol
mapping document <span class="bcp14">MUST</span> specify which keys are applicable and safe to use.
Protocol mappings <span class="bcp14">MAY</span> alter the interpretation of SvcParamKeys but <span class="bcp14">MUST NOT</span>
alter their presentation or wire formats.<a class="pilcrow" href="#section-7-2">¶</a></p>
<div id="alpn-key">
<section id="section-7.1">
        <h3 id="name-alpn-and-no-default-alpn">
<a class="section-number selfRef" href="#section-7.1">7.1. </a><a class="section-name selfRef" href="#name-alpn-and-no-default-alpn">"alpn" and "no-default-alpn"</a>
        </h3>
<p id="section-7.1-1">The "alpn" and "no-default-alpn" SvcParamKeys together
indicate the set of Application-Layer Protocol Negotiation (ALPN)
protocol identifiers <span>[<a class="cite xref" href="#RFC7301">ALPN</a>]</span>
and associated transport protocols supported by this service endpoint (the
"SVCB ALPN set").<a class="pilcrow" href="#section-7.1-1">¶</a></p>
<p id="section-7.1-2">As with Alt-Svc <span>[<a class="cite xref" href="#RFC7838">AltSvc</a>]</span>, each ALPN protocol identifier is used to
identify the application protocol and associated suite
of protocols supported by the endpoint (the "protocol suite").
The presence of an ALPN protocol identifier in the SVCB ALPN set indicates that this
service endpoint, described by TargetName and the other parameters (e.g.,
"port"), offers service with the protocol suite associated with this ALPN identifier.<a class="pilcrow" href="#section-7.1-2">¶</a></p>
<p id="section-7.1-3">Clients filter the set of ALPN identifiers to match the protocol suites they
support, and this informs the underlying transport protocol used (such
as QUIC over UDP or TLS over TCP).  ALPN protocol identifiers that do not uniquely
identify a protocol suite (e.g., an Identification Sequence that
can be used with both TLS and DTLS) are not compatible with this
SvcParamKey and <span class="bcp14">MUST NOT</span> be included in the SVCB ALPN set.<a class="pilcrow" href="#section-7.1-3">¶</a></p>
<div id="representation">
<section id="section-7.1.1">
          <h4 id="name-representation">
<a class="section-number selfRef" href="#section-7.1.1">7.1.1. </a><a class="section-name selfRef" href="#name-representation">Representation</a>
          </h4>
<p id="section-7.1.1-1">ALPNs are identified by their registered "Identification Sequence"
(<code>alpn-id</code>), which is a sequence of 1-255 octets.<a class="pilcrow" href="#section-7.1.1-1">¶</a></p>
<div class="lang-abnf sourcecode" id="section-7.1.1-2">
<pre>alpn-id = 1*255OCTET
</pre><a class="pilcrow" href="#section-7.1.1-2">¶</a>
</div>
<p id="section-7.1.1-3">For "alpn", the presentation <code>value</code> <span class="bcp14">SHALL</span> be
a comma-separated list (<a class="auto internal xref" href="#value-list">Appendix A.1</a>)
of one or more <code>alpn-id</code>s.  Zone-file implementations <span class="bcp14">MAY</span> disallow the
"," and "\" characters in ALPN IDs instead of implementing the <code>value-list</code> escaping
procedure, relying on the opaque key format (e.g., <code>key1=\002h2</code>) in the
event that these characters are needed.<a class="pilcrow" href="#section-7.1.1-3">¶</a></p>
<p id="section-7.1.1-4">The wire-format value for "alpn" consists of at least one
<code>alpn-id</code> prefixed by its length as a single octet, and these length-value
pairs are concatenated to form the SvcParamValue.  These pairs <span class="bcp14">MUST</span> exactly
fill the SvcParamValue; otherwise, the SvcParamValue is malformed.<a class="pilcrow" href="#section-7.1.1-4">¶</a></p>
<p id="section-7.1.1-5">For "no-default-alpn", the presentation and wire-format values <span class="bcp14">MUST</span> be
empty.  When "no-default-alpn" is specified in an RR,
"alpn" must also be specified in order for the RR
to be "self-consistent" (<a class="auto internal xref" href="#service-mode">Section 2.4.3</a>).<a class="pilcrow" href="#section-7.1.1-5">¶</a></p>
<p id="section-7.1.1-6">Each scheme that uses this SvcParamKey defines a "default set" of ALPN IDs
that are supported by nearly all clients and servers; this set <span class="bcp14">MAY</span>
be empty.  To determine the SVCB ALPN set, the client starts with the list of
<code>alpn-id</code>s from the "alpn" SvcParamKey, and it adds the default set unless the
"no-default-alpn" SvcParamKey is present.<a class="pilcrow" href="#section-7.1.1-6">¶</a></p>
</section>
</div>
<div id="use">
<section id="section-7.1.2">
          <h4 id="name-use">
<a class="section-number selfRef" href="#section-7.1.2">7.1.2. </a><a class="section-name selfRef" href="#name-use">Use</a>
          </h4>
<p id="section-7.1.2-1">To establish a connection to the endpoint, clients <span class="bcp14">MUST</span><a class="pilcrow" href="#section-7.1.2-1">¶</a></p>
<ol class="normal type-1" id="section-7.1.2-2" start="1" type="1">
<li id="section-7.1.2-2.1">Let SVCB-ALPN-Intersection be the set of protocols in the SVCB ALPN set
that the client supports.<a class="pilcrow" href="#section-7.1.2-2.1">¶</a>
</li>
            <li id="section-7.1.2-2.2">Let Intersection-Transports be the set of transports (e.g., TLS, DTLS, QUIC)
implied by the protocols in SVCB-ALPN-Intersection.<a class="pilcrow" href="#section-7.1.2-2.2">¶</a>
</li>
            <li id="section-7.1.2-2.3">For each transport in Intersection-Transports, construct a ProtocolNameList
containing the Identification Sequences of all the client's supported ALPN
protocols for that transport, without regard to the SVCB ALPN set.<a class="pilcrow" href="#section-7.1.2-2.3">¶</a>
</li>
          </ol>
<p id="section-7.1.2-3">For example, if the SVCB ALPN set is ["http/1.1", "h3"] and the client
supports HTTP/1.1, HTTP/2, and HTTP/3, the client could attempt to connect using
TLS over TCP with a ProtocolNameList of ["http/1.1", "h2"] and could also
attempt a connection using QUIC with a ProtocolNameList of ["h3"].<a class="pilcrow" href="#section-7.1.2-3">¶</a></p>
<p id="section-7.1.2-4">Once the client has constructed a ClientHello, protocol negotiation in that
handshake proceeds as specified in <span>[<a class="cite xref" href="#RFC7301">ALPN</a>]</span>, without regard to the SVCB ALPN
set.<a class="pilcrow" href="#section-7.1.2-4">¶</a></p>
<p id="section-7.1.2-5">Clients <span class="bcp14">MAY</span> implement a fallback procedure, using a less-preferred transport
if more-preferred transports fail to connect.  This fallback behavior is
vulnerable to manipulation by a network attacker who blocks the more-preferred
transports, but it may be necessary for compatibility with existing networks.<a class="pilcrow" href="#section-7.1.2-5">¶</a></p>
<p id="section-7.1.2-6">With this procedure in place, an attacker who can modify DNS and network
traffic can prevent a successful transport connection but cannot otherwise
interfere with ALPN protocol selection.  This procedure also ensures that
each ProtocolNameList includes at least one protocol from the SVCB ALPN set.<a class="pilcrow" href="#section-7.1.2-6">¶</a></p>
<p id="section-7.1.2-7">Clients <span class="bcp14">SHOULD NOT</span> attempt connection to a service endpoint whose SVCB
ALPN set does not contain any supported protocols.<a class="pilcrow" href="#section-7.1.2-7">¶</a></p>
<p id="section-7.1.2-8">To ensure
consistency of behavior, clients <span class="bcp14">MAY</span> reject the entire SVCB RRset and fall
back to basic connection establishment if all of the compatible RRs indicate
"no-default-alpn", even if connection could have succeeded using a
non-default ALPN protocol.<a class="pilcrow" href="#section-7.1.2-8">¶</a></p>
<p id="section-7.1.2-9">Zone operators <span class="bcp14">SHOULD</span> ensure that at least one RR in each RRset supports the
default transports.  This enables compatibility with the greatest number of
clients.<a class="pilcrow" href="#section-7.1.2-9">¶</a></p>
</section>
</div>
</section>
</div>
<div id="svcparamkeys-port">
<section id="section-7.2">
        <h3 id="name-port">
<a class="section-number selfRef" href="#section-7.2">7.2. </a><a class="section-name selfRef" href="#name-port">"port"</a>
        </h3>
<p id="section-7.2-1">The "port" SvcParamKey defines the TCP or UDP port
that should be used to reach this alternative endpoint.
If this key is not present, clients <span class="bcp14">SHALL</span> use the authority endpoint's port
number.<a class="pilcrow" href="#section-7.2-1">¶</a></p>
<p id="section-7.2-2">The presentation <code>value</code> of the SvcParamValue is a single decimal integer
between 0 and 65535 in ASCII.  Any other <code>value</code> (e.g., an empty value)
is a syntax error.  To enable simpler parsing, this SvcParamValue <span class="bcp14">MUST NOT</span> contain
escape sequences.<a class="pilcrow" href="#section-7.2-2">¶</a></p>
<p id="section-7.2-3">The wire format of the SvcParamValue
is the corresponding 2-octet numeric value in network byte order.<a class="pilcrow" href="#section-7.2-3">¶</a></p>
<p id="section-7.2-4">If a port-restricting firewall is in place between some client and the service
endpoint, changing the port number might cause that client to lose access to
the service, so operators should exercise caution when using this SvcParamKey
to specify a non-default port.<a class="pilcrow" href="#section-7.2-4">¶</a></p>
</section>
</div>
<div id="svcparamkeys-iphints">
<section id="section-7.3">
        <h3 id="name-ipv4hint-and-ipv6hint">
<a class="section-number selfRef" href="#section-7.3">7.3. </a><a class="section-name selfRef" href="#name-ipv4hint-and-ipv6hint">"ipv4hint" and "ipv6hint"</a>
        </h3>
<p id="section-7.3-1">The "ipv4hint" and "ipv6hint" keys convey IP addresses that clients <span class="bcp14">MAY</span> use to
reach the service.  If A and AAAA records for TargetName are locally
available, the client <span class="bcp14">SHOULD</span> ignore these hints.  Otherwise, clients
<span class="bcp14">SHOULD</span> perform A and/or AAAA queries for TargetName per
<a class="auto internal xref" href="#client-behavior">Section 3</a>, and clients <span class="bcp14">SHOULD</span> use the IP address in those
responses for future connections. Clients <span class="bcp14">MAY</span> opt to terminate any
connections using the addresses in hints and instead switch to the
addresses in response to the TargetName query. Failure to use A and/or
AAAA response addresses could negatively impact load balancing or other
geo-aware features and thereby degrade client performance.<a class="pilcrow" href="#section-7.3-1">¶</a></p>
<p id="section-7.3-2">The presentation <code>value</code> <span class="bcp14">SHALL</span> be a comma-separated list (<a class="auto internal xref" href="#value-list">Appendix A.1</a>)
of one or more IP addresses of the appropriate
family in standard textual format <span>[<a class="cite xref" href="#RFC5952">RFC5952</a>]</span> <span>[<a class="cite xref" href="#RFC4001">RFC4001</a>]</span>.  To enable simpler parsing,
this SvcParamValue <span class="bcp14">MUST NOT</span> contain escape sequences.<a class="pilcrow" href="#section-7.3-2">¶</a></p>
<p id="section-7.3-3">The wire format for each parameter is a sequence of IP addresses in network
byte order (for the respective address family).
Like an A or AAAA RRset, the list of addresses represents an
unordered collection, and clients <span class="bcp14">SHOULD</span> pick addresses to use in a random order.
An empty list of addresses is invalid.<a class="pilcrow" href="#section-7.3-3">¶</a></p>
<p id="section-7.3-4">When selecting between IPv4 and IPv6 addresses to use, clients may use an
approach such as Happy Eyeballs <span>[<a class="cite xref" href="#RFC8305">HappyEyeballsV2</a>]</span>.
When only "ipv4hint" is present, NAT64 clients may synthesize
IPv6 addresses as specified in <span>[<a class="cite xref" href="#RFC7050">RFC7050</a>]</span> or ignore the "ipv4hint" key and
wait for AAAA resolution (<a class="auto internal xref" href="#client-behavior">Section 3</a>).
For best performance, server operators <span class="bcp14">SHOULD</span> include an "ipv6hint" parameter
whenever they include an "ipv4hint" parameter.<a class="pilcrow" href="#section-7.3-4">¶</a></p>
<p id="section-7.3-5">These parameters are intended to minimize additional connection latency
when a recursive resolver is not compliant with the requirements in
<a class="auto internal xref" href="#server-behavior">Section 4</a> and <span class="bcp14">SHOULD NOT</span> be included if most clients are using
compliant recursive resolvers.  When TargetName is the service name
or the owner name (which can be written as "."), server operators
<span class="bcp14">SHOULD NOT</span> include these hints, because they are unlikely to convey any
performance benefit.<a class="pilcrow" href="#section-7.3-5">¶</a></p>
</section>
</div>
<div id="svcparamkey-mandatory">
<section id="section-7.4">
        <h3 id="name-mandatory">
<a class="section-number selfRef" href="#section-7.4">7.4. </a><a class="section-name selfRef" href="#name-mandatory">"mandatory"</a>
        </h3>
<p id="section-7.4-1">See <a class="auto internal xref" href="#mandatory">Section 8</a>.<a class="pilcrow" href="#section-7.4-1">¶</a></p>
</section>
</div>
</section>
</div>
<div id="mandatory">
<section id="section-8">
      <h2 id="name-servicemode-rr-compatibilit">
<a class="section-number selfRef" href="#section-8">8. </a><a class="section-name selfRef" href="#name-servicemode-rr-compatibilit">ServiceMode RR Compatibility and Mandatory Keys</a>
      </h2>
<p id="section-8-1">In a ServiceMode RR, a SvcParamKey is considered "mandatory" if the RR will not
function correctly for clients that ignore this SvcParamKey.  Each SVCB
protocol mapping <span class="bcp14">SHOULD</span> specify a set of keys that are "automatically
mandatory", i.e., mandatory if they are present in an RR.  The SvcParamKey
"mandatory" is used to indicate any mandatory keys for this RR, in addition to
any automatically mandatory keys that are present.<a class="pilcrow" href="#section-8-1">¶</a></p>
<p id="section-8-2">A ServiceMode RR is considered "compatible" by a client if the client
recognizes all the mandatory keys and their values indicate that successful
connection establishment is possible.  Incompatible RRs are ignored (see step 5 of the procedure defined in <a class="auto internal xref" href="#client-behavior">Section 3</a>).<a class="pilcrow" href="#section-8-2">¶</a></p>
<p id="section-8-3">The presentation <code>value</code> <span class="bcp14">SHALL</span> be a comma-separated list
(<a class="auto internal xref" href="#value-list">Appendix A.1</a>) of one or more valid
SvcParamKeys, either by their registered name or in the unknown-key format
(<a class="auto internal xref" href="#presentation">Section 2.1</a>).  Keys <span class="bcp14">MAY</span> appear in any order but <span class="bcp14">MUST NOT</span> appear more
than once.  For self-consistency (<a class="auto internal xref" href="#service-mode">Section 2.4.3</a>), listed keys <span class="bcp14">MUST</span> also
appear in the SvcParams.<a class="pilcrow" href="#section-8-3">¶</a></p>
<p id="section-8-4">To enable simpler parsing, this
SvcParamValue <span class="bcp14">MUST NOT</span> contain escape sequences.<a class="pilcrow" href="#section-8-4">¶</a></p>
<p id="section-8-5">For example, the following is a valid list of SvcParams:<a class="pilcrow" href="#section-8-5">¶</a></p>
<div class="sourcecode" id="section-8-6">
<pre>ipv6hint=... key65333=ex1 key65444=ex2 mandatory=key65444,ipv6hint
</pre><a class="pilcrow" href="#section-8-6">¶</a>
</div>
<p id="section-8-7">In wire format, the keys are represented by their numeric values in
network byte order, concatenated in strictly increasing numeric order.<a class="pilcrow" href="#section-8-7">¶</a></p>
<p id="section-8-8">This SvcParamKey is always automatically mandatory and <span class="bcp14">MUST NOT</span> appear in its
own value-list.  Other automatically mandatory keys <span class="bcp14">SHOULD NOT</span> appear in the
list either.  (Including them wastes space and otherwise has no effect.)<a class="pilcrow" href="#section-8-8">¶</a></p>
</section>
</div>
<div id="https">
<section id="section-9">
      <h2 id="name-using-service-bindings-with">
<a class="section-number selfRef" href="#section-9">9. </a><a class="section-name selfRef" href="#name-using-service-bindings-with">Using Service Bindings with HTTP</a>
      </h2>
<p id="section-9-1">The use of any protocol with SVCB requires a protocol-specific mapping
specification.  This section specifies the mapping for the "http" and "https"
URI schemes <span>[<a class="cite xref" href="#RFC9110">HTTP</a>]</span>.<a class="pilcrow" href="#section-9-1">¶</a></p>
<p id="section-9-2">To enable special handling for HTTP use cases,
the HTTPS RR type is defined as a SVCB-compatible RR type,
specific to the "https" and "http" schemes.  Clients <span class="bcp14">MUST NOT</span>
perform SVCB queries or accept SVCB responses for "https"
or "http" schemes.<a class="pilcrow" href="#section-9-2">¶</a></p>
<p id="section-9-3">The presentation format of the record is:<a class="pilcrow" href="#section-9-3">¶</a></p>
<div class="sourcecode" id="section-9-4">
<pre>Name TTL IN HTTPS SvcPriority TargetName SvcParams
</pre><a class="pilcrow" href="#section-9-4">¶</a>
</div>
<p id="section-9-5">All the SvcParamKeys defined in <a class="auto internal xref" href="#keys">Section 7</a> are permitted for use in
HTTPS RRs.  The default set of ALPN IDs is the single value "http/1.1".
The "automatically mandatory" keys (<a class="auto internal xref" href="#mandatory">Section 8</a>) are "port"
and "no-default-alpn".  (As described in <a class="auto internal xref" href="#mandatory">Section 8</a>, clients must
either implement these keys or ignore any RR in which they appear.)
Clients that restrict the destination port in "https" URIs
(e.g., using the "bad ports" list from <span>[<a class="cite xref" href="#FETCH">FETCH</a>]</span>) <span class="bcp14">SHOULD</span> apply the
same restriction to the "port" SvcParam.<a class="pilcrow" href="#section-9-5">¶</a></p>
<p id="section-9-6">The presence of an HTTPS RR for an origin also indicates
that clients should connect securely and use the "https" scheme, as
discussed in <a class="auto internal xref" href="#hsts">Section 9.5</a>.  This allows HTTPS RRs to apply to
pre-existing "http" scheme URLs, while ensuring that the client uses a
secure and authenticated connection.<a class="pilcrow" href="#section-9-6">¶</a></p>
<p id="section-9-7">The HTTPS RR parallels the concepts
introduced in "HTTP Alternative Services" <span>[<a class="cite xref" href="#RFC7838">AltSvc</a>]</span>.  Clients and servers that implement HTTPS RRs are
not required to implement Alt-Svc.<a class="pilcrow" href="#section-9-7">¶</a></p>
<div id="httpsnames">
<section id="section-9.1">
        <h3 id="name-query-names-for-https-rrs">
<a class="section-number selfRef" href="#section-9.1">9.1. </a><a class="section-name selfRef" href="#name-query-names-for-https-rrs">Query Names for HTTPS RRs</a>
        </h3>
<p id="section-9.1-1">The HTTPS RR uses Port Prefix Naming (<a class="auto internal xref" href="#svcb-names">Section 2.3</a>),
with one modification: if the scheme is "https" and the port is 443,
then the client's original QNAME is
equal to the service name (i.e., the origin's hostname),
without any prefix labels.<a class="pilcrow" href="#section-9.1-1">¶</a></p>
<p id="section-9.1-2">By removing the Attrleaf labels <span>[<a class="cite xref" href="#RFC8552">Attrleaf</a>]</span>
used in SVCB, this construction enables offline DNSSEC signing of
wildcard domains, which are commonly used with HTTP.  Using the
service name as the owner name of the HTTPS record, without prefixes,
also allows the targets of existing CNAME chains
(e.g., CDN hosts) to start returning HTTPS RR responses without
requiring origin domains to configure and maintain an additional
delegation.<a class="pilcrow" href="#section-9.1-2">¶</a></p>
<p id="section-9.1-3">The procedure for following HTTPS AliasMode RRs and CNAME aliases is unchanged from SVCB (as described in Sections <a class="auto internal xref" href="#alias-mode">2.4.2</a> and <a class="auto internal xref" href="#client-behavior">3</a>).<a class="pilcrow" href="#section-9.1-3">¶</a></p>
<p id="section-9.1-4">Clients always convert "http" URLs to "https" before performing an
HTTPS RR query using the process described in <a class="auto internal xref" href="#hsts">Section 9.5</a>, so domain owners
<span class="bcp14">MUST NOT</span> publish HTTPS RRs with a prefix of "_http".<a class="pilcrow" href="#section-9.1-4">¶</a></p>
<p id="section-9.1-5">Note that none of these forms alter the HTTPS origin or authority.
For example, clients <span class="bcp14">MUST</span> continue to validate TLS certificate
hostnames based on the origin.<a class="pilcrow" href="#section-9.1-5">¶</a></p>
</section>
</div>
<div id="comparison-with-alt-svc">
<section id="section-9.2">
        <h3 id="name-comparison-with-alt-svc">
<a class="section-number selfRef" href="#section-9.2">9.2. </a><a class="section-name selfRef" href="#name-comparison-with-alt-svc">Comparison with Alt-Svc</a>
        </h3>
<p id="section-9.2-1">Publishing a ServiceMode HTTPS RR in DNS is intended
to be similar to transmitting an Alt-Svc field value over
HTTP, and receiving an HTTPS RR is intended to be similar to
receiving that field value over HTTP.  However, there are some
differences in the intended client and server behavior.<a class="pilcrow" href="#section-9.2-1">¶</a></p>
<div id="alpn-usage">
<section id="section-9.2.1">
          <h4 id="name-alpn-usage">
<a class="section-number selfRef" href="#section-9.2.1">9.2.1. </a><a class="section-name selfRef" href="#name-alpn-usage">ALPN Usage</a>
          </h4>
<p id="section-9.2.1-1">Unlike Alt-Svc field values, HTTPS RRs can contain multiple ALPN IDs.  The
meaning and use of these IDs are discussed in <a class="auto internal xref" href="#use">Section 7.1.2</a>.<a class="pilcrow" href="#section-9.2.1-1">¶</a></p>
</section>
</div>
<div id="untrusted-channel">
<section id="section-9.2.2">
          <h4 id="name-untrusted-channels">
<a class="section-number selfRef" href="#section-9.2.2">9.2.2. </a><a class="section-name selfRef" href="#name-untrusted-channels">Untrusted Channels</a>
          </h4>
<p id="section-9.2.2-1">HTTPS records do not require or provide any assurance of authenticity.  (DNSSEC
signing and verification, which would provide such assurance, are <span class="bcp14">OPTIONAL</span>.)
The DNS resolution process is modeled as an untrusted channel that might be
controlled by an attacker, so
Alt-Svc parameters that cannot be safely received in this model <span class="bcp14">MUST NOT</span>
have a corresponding defined SvcParamKey.  For example, there is no
SvcParamKey corresponding to the Alt-Svc "persist" parameter, because
this parameter is not safe to accept over an untrusted channel.<a class="pilcrow" href="#section-9.2.2-1">¶</a></p>
</section>
</div>
<div id="cache-lifetime">
<section id="section-9.2.3">
          <h4 id="name-cache-lifetime">
<a class="section-number selfRef" href="#section-9.2.3">9.2.3. </a><a class="section-name selfRef" href="#name-cache-lifetime">Cache Lifetime</a>
          </h4>
<p id="section-9.2.3-1">There is no SvcParamKey corresponding to the Alt-Svc "ma" (max age) parameter.
Instead, server operators encode the expiration time in the DNS TTL.<a class="pilcrow" href="#section-9.2.3-1">¶</a></p>
<p id="section-9.2.3-2">The appropriate TTL value might be different from the "ma" value
used for Alt-Svc, depending on the desired efficiency and
agility.  Some DNS caches incorrectly extend the lifetime of DNS
records beyond the stated TTL, so server operators cannot rely on
HTTPS RRs expiring on time.  Shortening the TTL to compensate
for incorrect caching is <span class="bcp14">NOT RECOMMENDED</span>, as this practice impairs the
performance of correctly functioning caches and does not guarantee
faster expiration from incorrect caches.  Instead, server operators
<span class="bcp14">SHOULD</span> maintain compatibility with expired records until they observe
that nearly all connections have migrated to the new configuration.<a class="pilcrow" href="#section-9.2.3-2">¶</a></p>
</section>
</div>
<div id="granularity">
<section id="section-9.2.4">
          <h4 id="name-granularity">
<a class="section-number selfRef" href="#section-9.2.4">9.2.4. </a><a class="section-name selfRef" href="#name-granularity">Granularity</a>
          </h4>
<p id="section-9.2.4-1">Sending Alt-Svc over HTTP allows the server to tailor the Alt-Svc
field value specifically to the client.  When using an HTTPS RR,
groups of clients will necessarily receive the same SvcParams.
Therefore, HTTPS RRs are not suitable for uses that require
single-client granularity.<a class="pilcrow" href="#section-9.2.4-1">¶</a></p>
</section>
</div>
</section>
</div>
<div id="interaction-with-alt-svc">
<section id="section-9.3">
        <h3 id="name-interaction-with-alt-svc">
<a class="section-number selfRef" href="#section-9.3">9.3. </a><a class="section-name selfRef" href="#name-interaction-with-alt-svc">Interaction with Alt-Svc</a>
        </h3>
<p id="section-9.3-1">Clients that implement support for both Alt-Svc and HTTPS records and
are making a connection based on a cached Alt-Svc response <span class="bcp14">SHOULD</span>
retrieve any HTTPS records for the Alt-Svc alt-authority and ensure that
their connection attempts are consistent with both the Alt-Svc parameters
and any received HTTPS SvcParams.  If present, the HTTPS record's TargetName
and port are used for connection establishment (per <a class="auto internal xref" href="#client-behavior">Section 3</a>).
For example, suppose that
"https://example.com" sends an Alt-Svc field value of:<a class="pilcrow" href="#section-9.3-1">¶</a></p>
<div class="lang-http-message sourcecode" id="section-9.3-2">
<pre>Alt-Svc: h2="alt.example:443", h2="alt2.example:443", h3=":8443"
</pre><a class="pilcrow" href="#section-9.3-2">¶</a>
</div>
<p id="section-9.3-3">The client would retrieve the following HTTPS records:<a class="pilcrow" href="#section-9.3-3">¶</a></p>
<div class="lang-dns-rr sourcecode" id="section-9.3-4">
<pre>alt.example.              IN HTTPS 1 . alpn=h2,h3 foo=...
alt2.example.             IN HTTPS 1 alt2b.example. alpn=h3 foo=...
_8443._https.example.com. IN HTTPS 1 alt3.example. (
    port=9443 alpn=h2,h3 foo=... )
</pre><a class="pilcrow" href="#section-9.3-4">¶</a>
</div>
<p id="section-9.3-5">Based on these inputs, the following connection attempts would always be
allowed:<a class="pilcrow" href="#section-9.3-5">¶</a></p>
<ul class="normal">
<li class="normal" id="section-9.3-6.1">HTTP/2 to <code>alt.example:443</code><a class="pilcrow" href="#section-9.3-6.1">¶</a>
</li>
          <li class="normal" id="section-9.3-6.2">HTTP/3 to <code>alt3.example:9443</code><a class="pilcrow" href="#section-9.3-6.2">¶</a>
</li>
          <li class="normal" id="section-9.3-6.3">Fallback to the client's non-Alt-Svc connection behavior<a class="pilcrow" href="#section-9.3-6.3">¶</a>
</li>
        </ul>
<p id="section-9.3-7">The following connection attempts would not be allowed:<a class="pilcrow" href="#section-9.3-7">¶</a></p>
<ul class="normal">
<li class="normal" id="section-9.3-8.1">HTTP/3 to <code>alt.example:443</code> (not consistent with Alt-Svc)<a class="pilcrow" href="#section-9.3-8.1">¶</a>
</li>
          <li class="normal" id="section-9.3-8.2">Any connection to <code>alt2b.example</code> (no ALPN ID consistent with both the HTTPS
record and Alt-Svc)<a class="pilcrow" href="#section-9.3-8.2">¶</a>
</li>
          <li class="normal" id="section-9.3-8.3">HTTPS over TCP to any port on <code>alt3.example</code> (not consistent with Alt-Svc)<a class="pilcrow" href="#section-9.3-8.3">¶</a>
</li>
        </ul>
<p id="section-9.3-9">Suppose that "foo" is a SvcParamKey that renders the client SVCB-reliant.
The following Alt-Svc-only connection attempts would be allowed only if
the client does not support "foo", as they rely on SVCB-optional fallback
behavior:<a class="pilcrow" href="#section-9.3-9">¶</a></p>
<ul class="normal">
<li class="normal" id="section-9.3-10.1">HTTP/2 to <code>alt2.example:443</code><a class="pilcrow" href="#section-9.3-10.1">¶</a>
</li>
          <li class="normal" id="section-9.3-10.2">HTTP/3 to <code>example.com:8443</code><a class="pilcrow" href="#section-9.3-10.2">¶</a>
</li>
        </ul>
<p id="section-9.3-11">Alt-authorities <span class="bcp14">SHOULD</span> carry the same SvcParams as the origin unless
a deviation is specifically known to be safe.
As noted in <span><a class="relref" href="https://rfc-editor.org/rfc/rfc7838#section-2.4">Section 2.4</a> of [<a class="cite xref" href="#RFC7838">AltSvc</a>]</span>, clients <span class="bcp14">MAY</span> disallow any Alt-Svc
connection according to their own criteria, e.g., disallowing Alt-Svc
connections that lack support for privacy features that are available on
the authority endpoint.<a class="pilcrow" href="#section-9.3-11">¶</a></p>
</section>
</div>
<div id="requiring-server-name-indication">
<section id="section-9.4">
        <h3 id="name-requiring-server-name-indic">
<a class="section-number selfRef" href="#section-9.4">9.4. </a><a class="section-name selfRef" href="#name-requiring-server-name-indic">Requiring Server Name Indication</a>
        </h3>
<p id="section-9.4-1">Clients <span class="bcp14">MUST NOT</span> use an HTTPS RR response unless the
client supports the TLS Server Name Indication (SNI) extension and
indicates the origin name in the TLS ClientHello (which might be
encrypted via a future specification such as <span>[<a class="cite xref" href="#I-D.ietf-tls-esni">ECH</a>]</span>).
This supports the conservation of IP addresses.<a class="pilcrow" href="#section-9.4-1">¶</a></p>
<p id="section-9.4-2">Note that the TLS SNI (and also the HTTP "Host" or ":authority") will indicate
the origin, not the TargetName.<a class="pilcrow" href="#section-9.4-2">¶</a></p>
</section>
</div>
<div id="hsts">
<section id="section-9.5">
        <h3 id="name-http-strict-transport-secur">
<a class="section-number selfRef" href="#section-9.5">9.5. </a><a class="section-name selfRef" href="#name-http-strict-transport-secur">HTTP Strict Transport Security (HSTS)</a>
        </h3>
<p id="section-9.5-1">An HTTPS RR directs the client to communicate with this host only over a
secure transport, similar to HSTS <span>[<a class="cite xref" href="#RFC6797">HSTS</a>]</span>.
Prior to making an "http" scheme request, the client <span class="bcp14">SHOULD</span> perform a lookup
to determine if any HTTPS RRs exist for that origin.  To do so,
the client <span class="bcp14">SHOULD</span> construct a corresponding "https" URL as follows:<a class="pilcrow" href="#section-9.5-1">¶</a></p>
<ol class="normal type-1" id="section-9.5-2" start="1" type="1">
<li id="section-9.5-2.1">Replace the "http" scheme with "https".<a class="pilcrow" href="#section-9.5-2.1">¶</a>
</li>
          <li id="section-9.5-2.2">If the "http" URL explicitly specifies port 80, specify port 443.<a class="pilcrow" href="#section-9.5-2.2">¶</a>
</li>
          <li id="section-9.5-2.3">Do not alter any other aspect of the URL.<a class="pilcrow" href="#section-9.5-2.3">¶</a>
</li>
        </ol>
<p id="section-9.5-3">This construction is equivalent to <span><a class="relref" href="https://rfc-editor.org/rfc/rfc6797#section-8.3">Section 8.3</a> of [<a class="cite xref" href="#RFC6797">HSTS</a>]</span>, Step 5.<a class="pilcrow" href="#section-9.5-3">¶</a></p>
<p id="section-9.5-4">If an HTTPS RR query for this "https" URL returns any AliasMode HTTPS RRs
or any compatible ServiceMode HTTPS RRs (see <a class="auto internal xref" href="#mandatory">Section 8</a>), the client
<span class="bcp14">SHOULD</span> behave as if it has received an HTTP 307 (Temporary Redirect) status code
with this "https" URL in the "Location" field.  (Receipt of an incompatible ServiceMode RR does not
trigger the redirect behavior.)
Because HTTPS RRs are received over an often-insecure channel (DNS),
clients <span class="bcp14">MUST NOT</span> place any more trust in this signal than if they
had received a 307 (Temporary Redirect) response over cleartext HTTP.<a class="pilcrow" href="#section-9.5-4">¶</a></p>
<p id="section-9.5-5">Publishing an HTTPS RR can potentially lead to unexpected results
or a loss in functionality in cases where the "http" resource neither
redirects to the "https" resource nor references the same underlying resource.<a class="pilcrow" href="#section-9.5-5">¶</a></p>
<p id="section-9.5-6">When an "https" connection fails due to an error in the underlying secure
transport, such as an error in certificate validation, some clients
currently offer a "user recourse" that allows the user to bypass the
security error and connect anyway.
When making an "https" scheme request to an origin with an HTTPS RR,
either directly or via the above redirect, such a client <span class="bcp14">MAY</span> remove the user
recourse option.  Origins that publish HTTPS RRs therefore <span class="bcp14">MUST NOT</span> rely
on user recourse for access.  For more information, see Sections <a class="relref" href="https://rfc-editor.org/rfc/rfc6797#section-8.4">8.4</a> and <a class="relref" href="https://rfc-editor.org/rfc/rfc6797#section-12.1">12.1</a> of <span>[<a class="cite xref" href="#RFC6797">HSTS</a>]</span>.<a class="pilcrow" href="#section-9.5-6">¶</a></p>
</section>
</div>
<div id="use-of-https-rrs-in-other-protocols">
<section id="section-9.6">
        <h3 id="name-use-of-https-rrs-in-other-p">
<a class="section-number selfRef" href="#section-9.6">9.6. </a><a class="section-name selfRef" href="#name-use-of-https-rrs-in-other-p">Use of HTTPS RRs in Other Protocols</a>
        </h3>
<p id="section-9.6-1">All HTTP connections to named origins are eligible to use HTTPS RRs, even
when HTTP is used as part of another protocol or without an explicit HTTP-related URI
scheme (<span><a class="relref" href="https://rfc-editor.org/rfc/rfc9110#section-4.2">Section 4.2</a> of [<a class="cite xref" href="#RFC9110">HTTP</a>]</span>).  For example, clients that
support HTTPS RRs and implement <span>[<a class="cite xref" href="#RFC6455">WebSocket</a>]</span> using the altered
opening handshake from <span>[<a class="cite xref" href="#FETCH-WEBSOCKETS">FETCH-WEBSOCKETS</a>]</span> <span class="bcp14">SHOULD</span> use HTTPS RRs
for the <code>requestURL</code>.<a class="pilcrow" href="#section-9.6-1">¶</a></p>
<p id="section-9.6-2">When HTTP is used in a context where URLs or redirects are not applicable
(e.g., connections to an HTTP proxy), clients that find a corresponding HTTPS RR
<span class="bcp14">SHOULD</span> implement security upgrade behavior equivalent to that
specified in
<a class="auto internal xref" href="#hsts">Section 9.5</a>.<a class="pilcrow" href="#section-9.6-2">¶</a></p>
<p id="section-9.6-3">Such protocols <span class="bcp14">MAY</span> define their own SVCB mappings, which <span class="bcp14">MAY</span>
be defined to take precedence over HTTPS RRs.<a class="pilcrow" href="#section-9.6-3">¶</a></p>
</section>
</div>
</section>
</div>
<div id="zone-structures">
<section id="section-10">
      <h2 id="name-zone-structures">
<a class="section-number selfRef" href="#section-10">10. </a><a class="section-name selfRef" href="#name-zone-structures">Zone Structures</a>
      </h2>
<div id="structuring-zones-for-flexibility">
<section id="section-10.1">
        <h3 id="name-structuring-zones-for-flexi">
<a class="section-number selfRef" href="#section-10.1">10.1. </a><a class="section-name selfRef" href="#name-structuring-zones-for-flexi">Structuring Zones for Flexibility</a>
        </h3>
<p id="section-10.1-1">Each ServiceMode RRset can only serve a single scheme.  The scheme is indicated
by the owner name and the RR type.  For the generic SVCB RR type, this means that
each owner name can only be used for a single scheme.  The underscore prefixing
requirement (<a class="auto internal xref" href="#svcb-names">Section 2.3</a>) ensures that this is true for the initial query,
but it is the responsibility of zone owners to choose names that satisfy this
constraint when using aliases, including CNAME and AliasMode records.<a class="pilcrow" href="#section-10.1-1">¶</a></p>
<p id="section-10.1-2">When using the generic SVCB RR type with aliasing, zone owners <span class="bcp14">SHOULD</span> choose alias
target names that indicate the scheme in use (e.g., "foosvc.example.net" for
"foo" schemes).  This will help to avoid confusion when another scheme needs to
be added to the configuration.  When multiple port numbers are in use, it may be
helpful to repeat the prefix labels in the alias target name (e.g.,
"_1234._foo.svc.example.net").<a class="pilcrow" href="#section-10.1-2">¶</a></p>
</section>
</div>
<div id="zone-performance">
<section id="section-10.2">
        <h3 id="name-structuring-zones-for-perfo">
<a class="section-number selfRef" href="#section-10.2">10.2. </a><a class="section-name selfRef" href="#name-structuring-zones-for-perfo">Structuring Zones for Performance</a>
        </h3>
<p id="section-10.2-1">To avoid a delay for clients using a non-conforming recursive resolver,
domain owners <span class="bcp14">SHOULD</span> minimize the use of AliasMode records and <span class="bcp14">SHOULD</span>
choose TargetName according to a predictable convention that is known
to the client, so that clients can issue A and/or AAAA queries for TargetName
in advance (see <a class="auto internal xref" href="#optimizations">Section 5</a>).  Unless otherwise specified, the
convention is to set TargetName to the service name for an initial
ServiceMode record, or to "." if it is reached via an alias.<a class="pilcrow" href="#section-10.2-1">¶</a></p>
<span id="name-foo-fooexamplecom8080-is-av"></span><figure id="figure-1">
          <div class="lang-dns-rr sourcecode" id="section-10.2-2.1">
<pre>$ORIGIN example.com. ; Origin
foo                  3600 IN CNAME foosvc.example.net.
_8080._foo.foo       3600 IN CNAME foosvc.example.net.
bar                   300 IN AAAA 2001:db8::2
_9090._bar.bar       3600 IN SVCB 1 bar key65444=...

$ORIGIN example.net. ; Service provider zone
foosvc               3600 IN SVCB 1 . key65333=...
foosvc                300 IN AAAA 2001:db8::1
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-1">Figure 1</a>:
<a class="selfRef" href="#name-foo-fooexamplecom8080-is-av">"foo://foo.example.com:8080" Is Available at "foosvc.example.net", but "bar://bar.example.com:9090" Is Served Locally</a>
          </figcaption></figure>
<p id="section-10.2-3">Domain owners <span class="bcp14">SHOULD</span> avoid using a TargetName that is below a DNAME, as
this is likely unnecessary and makes responses slower and larger.
Also, zone structures that require following more than eight aliases
(counting both AliasMode and CNAME records) are <span class="bcp14">NOT RECOMMENDED</span>.<a class="pilcrow" href="#section-10.2-3">¶</a></p>
</section>
</div>
<div id="operational-considerations">
<section id="section-10.3">
        <h3 id="name-operational-considerations">
<a class="section-number selfRef" href="#section-10.3">10.3. </a><a class="section-name selfRef" href="#name-operational-considerations">Operational Considerations</a>
        </h3>
<p id="section-10.3-1">Some authoritative DNS servers may not allow A or AAAA records on names
starting with an underscore (e.g., <span>[<a class="cite xref" href="#BIND-CHECK-NAMES">BIND-CHECK-NAMES</a>]</span>).
This could create an operational issue when the TargetName contains an Attrleaf label,
or when using a TargetName of "." if the owner name contains an Attrleaf label.<a class="pilcrow" href="#section-10.3-1">¶</a></p>
</section>
</div>
<div id="examples">
<section id="section-10.4">
        <h3 id="name-examples">
<a class="section-number selfRef" href="#section-10.4">10.4. </a><a class="section-name selfRef" href="#name-examples">Examples</a>
        </h3>
<div id="protocol-enhancements">
<section id="section-10.4.1">
          <h4 id="name-protocol-enhancements">
<a class="section-number selfRef" href="#section-10.4.1">10.4.1. </a><a class="section-name selfRef" href="#name-protocol-enhancements">Protocol Enhancements</a>
          </h4>
<p id="section-10.4.1-1">Consider a simple zone of the form:<a class="pilcrow" href="#section-10.4.1-1">¶</a></p>
<div class="lang-dns-rr sourcecode" id="section-10.4.1-2">
<pre>$ORIGIN simple.example. ; Simple example zone
@ 300 IN A    192.0.2.1
         AAAA 2001:db8::1
</pre><a class="pilcrow" href="#section-10.4.1-2">¶</a>
</div>
<p id="section-10.4.1-3">The domain owner could add this record:<a class="pilcrow" href="#section-10.4.1-3">¶</a></p>
<div class="lang-dns-rr sourcecode" id="section-10.4.1-4">
<pre>@ 7200 IN HTTPS 1 . alpn=h3
</pre><a class="pilcrow" href="#section-10.4.1-4">¶</a>
</div>
<p id="section-10.4.1-5">This record would indicate that "https://simple.example" supports QUIC
in addition to HTTP/1.1 over TLS over TCP (the implicit default).
The record could also include other information (e.g., a non-standard port).
For "https://simple.example:8443", the record would be:<a class="pilcrow" href="#section-10.4.1-5">¶</a></p>
<div class="lang-dns-rr sourcecode" id="section-10.4.1-6">
<pre>_8443._https 7200 IN HTTPS 1 . alpn=h3
</pre><a class="pilcrow" href="#section-10.4.1-6">¶</a>
</div>
<p id="section-10.4.1-7">These records also respectively tell clients to replace the scheme with "https" when
loading "http://simple.example" or "http://simple.example:8443".<a class="pilcrow" href="#section-10.4.1-7">¶</a></p>
</section>
</div>
<div id="apex-aliasing">
<section id="section-10.4.2">
          <h4 id="name-apex-aliasing">
<a class="section-number selfRef" href="#section-10.4.2">10.4.2. </a><a class="section-name selfRef" href="#name-apex-aliasing">Apex Aliasing</a>
          </h4>
<p id="section-10.4.2-1">Consider a zone that is using CNAME aliasing:<a class="pilcrow" href="#section-10.4.2-1">¶</a></p>
<div class="lang-dns-rr sourcecode" id="section-10.4.2-2">
<pre>$ORIGIN aliased.example. ; A zone that is using a hosting service
; Subdomain aliased to a high-performance server pool
www             7200 IN CNAME pool.svc.example.
; Apex domain on fixed IPs because CNAME is not allowed at the apex
@                300 IN A     192.0.2.1
                     IN AAAA  2001:db8::1
</pre><a class="pilcrow" href="#section-10.4.2-2">¶</a>
</div>
<p id="section-10.4.2-3">With HTTPS RRs, the owner of aliased.example could alias the apex by
adding one additional record:<a class="pilcrow" href="#section-10.4.2-3">¶</a></p>
<div class="lang-dns-rr sourcecode" id="section-10.4.2-4">
<pre>@               7200 IN HTTPS 0 pool.svc.example.
</pre><a class="pilcrow" href="#section-10.4.2-4">¶</a>
</div>
<p id="section-10.4.2-5">With this record in place, HTTPS-RR-aware clients will use the same
server pool for aliased.example and www.aliased.example.  (They will
also upgrade "http://aliased.example/..." to "https".)  Non-HTTPS-RR-aware
clients will just ignore the new record.<a class="pilcrow" href="#section-10.4.2-5">¶</a></p>
<p id="section-10.4.2-6">Similar to CNAME, HTTPS RRs have no impact on the origin name.
When connecting, clients will continue to treat the authoritative
origins as "https://www.aliased.example" and "https://aliased.example",
respectively, and will validate TLS server certificates accordingly.<a class="pilcrow" href="#section-10.4.2-6">¶</a></p>
</section>
</div>
<div id="parameter-binding">
<section id="section-10.4.3">
          <h4 id="name-parameter-binding">
<a class="section-number selfRef" href="#section-10.4.3">10.4.3. </a><a class="section-name selfRef" href="#name-parameter-binding">Parameter Binding</a>
          </h4>
<p id="section-10.4.3-1">Suppose that svc.example's primary server pool supports HTTP/3 but its
backup server pool does not.  This can be expressed in the following form:<a class="pilcrow" href="#section-10.4.3-1">¶</a></p>
<div class="lang-dns-rr sourcecode" id="section-10.4.3-2">
<pre>$ORIGIN svc.example. ; A hosting provider
pool  7200 IN HTTPS 1 . alpn=h2,h3
              HTTPS 2 backup alpn=h2 port=8443
pool   300 IN A        192.0.2.2
              AAAA     2001:db8::2
backup 300 IN A        192.0.2.3
              AAAA     2001:db8::3
</pre><a class="pilcrow" href="#section-10.4.3-2">¶</a>
</div>
<p id="section-10.4.3-3">This configuration is entirely compatible with the "apex aliasing" example,
whether the client supports HTTPS RRs or not.  If the client does support
HTTPS RRs, all connections will be upgraded to HTTPS, and clients will
use HTTP/3 if they can.  Parameters are "bound" to each server pool, so
each server pool can have its own protocol, port number, etc.<a class="pilcrow" href="#section-10.4.3-3">¶</a></p>
</section>
</div>
<div id="multicdn">
<section id="section-10.4.4">
          <h4 id="name-multi-cdn-configuration">
<a class="section-number selfRef" href="#section-10.4.4">10.4.4. </a><a class="section-name selfRef" href="#name-multi-cdn-configuration">Multi-CDN Configuration</a>
          </h4>
<p id="section-10.4.4-1">The HTTPS RR is intended to support HTTPS services operated by
multiple independent entities, such as different CDNs or different hosting providers.  This includes
the case where a service is migrated from one operator to another,
as well as the case where the service is multiplexed between
multiple operators for performance, redundancy, etc.<a class="pilcrow" href="#section-10.4.4-1">¶</a></p>
<p id="section-10.4.4-2">This example shows such a configuration, with www.customer.example
having different DNS responses to different queries, either over time
or due to logic within the authoritative DNS server:<a class="pilcrow" href="#section-10.4.4-2">¶</a></p>
<div class="breakable lang-dns-rr sourcecode" id="section-10.4.4-3">
<pre> ; This zone contains/returns different CNAME records
 ; at different points in time.  The RRset for "www" can
 ; only ever contain a single CNAME.

 ; Sometimes the zone has:
 $ORIGIN customer.example.  ; A multi-CDN customer domain
 www 900 IN CNAME cdn1.svc1.example.

 ; and other times it contains:
 $ORIGIN customer.example.
 www 900 IN CNAME customer.svc2.example.

 ; and yet other times it contains:
 $ORIGIN customer.example.
 www 900 IN CNAME cdn3.svc3.example.

 ; With the following remaining constant and always included:
 $ORIGIN customer.example.  ; A multi-CDN customer domain
 ; The apex is also aliased to www to match its configuration.
 @     7200 IN HTTPS 0 www
 ; Non-HTTPS-aware clients use non-CDN IPs.
               A    203.0.113.82
               AAAA 2001:db8:203::2

 ; Resolutions following the cdn1.svc1.example
 ; path use these records.
 ; This CDN uses a different alternative service for HTTP/3.
 $ORIGIN svc1.example.  ; domain for CDN 1
 cdn1     1800 IN HTTPS 1 h3pool alpn=h3
                  HTTPS 2 . alpn=h2
                  A    192.0.2.2
                  AAAA 2001:db8:192::4
 h3pool 300 IN A 192.0.2.3
            AAAA 2001:db8:192:7::3

 ; Resolutions following the customer.svc2.example
 ; path use these records.
 ; Note that this CDN only supports HTTP/2.
 $ORIGIN svc2.example. ; domain operated by CDN 2
 customer 300 IN HTTPS 1 . alpn=h2
           60 IN A    198.51.100.2
                 A    198.51.100.3
                 A    198.51.100.4
                 AAAA 2001:db8:198::7
                 AAAA 2001:db8:198::12

 ; Resolutions following the cdn3.svc3.example
 ; path use these records.
 ; Note that this CDN has no HTTPS records.
 $ORIGIN svc3.example. ; domain operated by CDN 3
 cdn3      60 IN A    203.0.113.8
                 AAAA 2001:db8:113::8
</pre><a class="pilcrow" href="#section-10.4.4-3">¶</a>
</div>
<p id="section-10.4.4-4">Note that in the above example, the different CDNs have different
configurations and different capabilities, but clients will use HTTPS RRs
as a bound-together unit.<a class="pilcrow" href="#section-10.4.4-4">¶</a></p>
<p id="section-10.4.4-5">Domain owners should be cautious when using a multi-CDN configuration, as it
introduces a number of complexities highlighted by this example:<a class="pilcrow" href="#section-10.4.4-5">¶</a></p>
<ul class="normal">
<li class="normal" id="section-10.4.4-6.1">If CDN 1 supports a desired protocol or feature and CDN 2 does not, the
client is vulnerable to
downgrade by a network adversary who forces clients to get CDN 2 records.<a class="pilcrow" href="#section-10.4.4-6.1">¶</a>
</li>
            <li class="normal" id="section-10.4.4-6.2">Aliasing the apex to its subdomain simplifies the zone file but likely
increases resolution latency, especially when using a non-HTTPS-aware
recursive resolver.  An alternative would be to alias the zone
apex directly to a name managed by a CDN.<a class="pilcrow" href="#section-10.4.4-6.2">¶</a>
</li>
            <li class="normal" id="section-10.4.4-6.3">The A, AAAA, and HTTPS resolutions are independent lookups, so resolvers may
observe and follow different CNAMEs to different CDNs.
Clients may thus find that the A and AAAA responses do not correspond to the
TargetName in the HTTPS response; these clients will need to perform additional
queries to retrieve the correct IP addresses.
Including ipv6hint and ipv4hint will reduce the performance
impact of this case.<a class="pilcrow" href="#section-10.4.4-6.3">¶</a>
</li>
            <li class="normal" id="section-10.4.4-6.4">If not all CDNs publish HTTPS records, clients will sometimes
receive NODATA for HTTPS queries (as with cdn3.svc3.example above)
but could receive A/AAAA records from a different CDN.  Clients will
attempt to connect to this CDN without the benefit of its HTTPS
records.<a class="pilcrow" href="#section-10.4.4-6.4">¶</a>
</li>
          </ul>
</section>
</div>
<div id="non-http-uses">
<section id="section-10.4.5">
          <h4 id="name-non-http-uses">
<a class="section-number selfRef" href="#section-10.4.5">10.4.5. </a><a class="section-name selfRef" href="#name-non-http-uses">Non-HTTP Uses</a>
          </h4>
<p id="section-10.4.5-1">For protocols other than HTTP, the SVCB RR and an Attrleaf label <span>[<a class="cite xref" href="#RFC8552">Attrleaf</a>]</span>
will be used.  For example, to reach an example resource of
"baz://api.example.com:8765", the following SVCB
record would be used to alias it to "svc4-baz.example.net.",
which in turn could return AAAA/A records and/or SVCB
records in ServiceMode:<a class="pilcrow" href="#section-10.4.5-1">¶</a></p>
<div class="lang-dns-rr sourcecode" id="section-10.4.5-2">
<pre>_8765._baz.api.example.com. 7200 IN SVCB 0 svc4-baz.example.net.
</pre><a class="pilcrow" href="#section-10.4.5-2">¶</a>
</div>
<p id="section-10.4.5-3">HTTPS RRs use similar Attrleaf labels if the origin contains
a non-default port.<a class="pilcrow" href="#section-10.4.5-3">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="other-standards">
<section id="section-11">
      <h2 id="name-interaction-with-other-stan">
<a class="section-number selfRef" href="#section-11">11. </a><a class="section-name selfRef" href="#name-interaction-with-other-stan">Interaction with Other Standards</a>
      </h2>
<p id="section-11-1">This standard is intended to reduce connection latency and
improve user privacy.  Server operators implementing this standard
<span class="bcp14">SHOULD</span> also implement TLS 1.3 <span>[<a class="cite xref" href="#RFC8446">RFC8446</a>]</span> and
Online Certificate Status Protocol (OCSP) Stapling (i.e., Certificate Status
Request in <span><a class="relref" href="https://rfc-editor.org/rfc/rfc6066#section-8">Section 8</a> of [<a class="cite xref" href="#RFC6066">RFC6066</a>]</span>),
both of which confer substantial performance and privacy
benefits when used in combination with SVCB records.<a class="pilcrow" href="#section-11-1">¶</a></p>
<p id="section-11-2">To realize the greatest privacy benefits, this proposal is intended for
use over a privacy-preserving DNS transport (like DNS over TLS
<span>[<a class="cite xref" href="#RFC7858">DoT</a>]</span> or DNS over HTTPS <span>[<a class="cite xref" href="#RFC8484">DoH</a>]</span>).
However, performance improvements, and some modest privacy improvements,
are possible without the use of those standards.<a class="pilcrow" href="#section-11-2">¶</a></p>
<p id="section-11-3">Any specification for the use of SVCB with a protocol <span class="bcp14">MUST</span> have an entry for its
scheme under the SVCB RR type in the IANA DNS "Underscored and Globally Scoped DNS Node Names" registry <span>[<a class="cite xref" href="#RFC8552">Attrleaf</a>]</span>.  The scheme <span class="bcp14">MUST</span> have an entry in the "Uniform Resource Identifier (URI) Schemes" registry <span>[<a class="cite xref" href="#RFC7595">RFC7595</a>]</span> and <span class="bcp14">MUST</span> have a defined specification for use
with SVCB.<a class="pilcrow" href="#section-11-3">¶</a></p>
</section>
</div>
<div id="security-considerations">
<section id="section-12">
      <h2 id="name-security-considerations">
<a class="section-number selfRef" href="#section-12">12. </a><a class="section-name selfRef" href="#name-security-considerations">Security Considerations</a>
      </h2>
<p id="section-12-1">SVCB/HTTPS RRs permit distribution over untrusted
channels, and clients are <span class="bcp14">REQUIRED</span> to verify that the alternative endpoint
is authoritative for the service (similar to <span><a class="relref" href="https://rfc-editor.org/rfc/rfc7838#section-2.1">Section 2.1</a> of [<a class="cite xref" href="#RFC7838">AltSvc</a>]</span>).
Therefore, DNSSEC signing and validation are <span class="bcp14">OPTIONAL</span> for publishing
and using SVCB and HTTPS RRs.<a class="pilcrow" href="#section-12-1">¶</a></p>
<p id="section-12-2">Clients <span class="bcp14">MUST</span> ensure that their DNS cache is partitioned for each local
network, or flushed on network changes, to prevent a local adversary in one
network from implanting a forged DNS record that allows them to
track users or hinder their connections after they leave that network.<a class="pilcrow" href="#section-12-2">¶</a></p>
<p id="section-12-3">An attacker who can prevent SVCB resolution can deny clients any associated
security benefits.  A hostile recursive resolver can always deny service to
SVCB queries, but network intermediaries can often prevent resolution as well,
even when the client and recursive resolver validate DNSSEC and use a secure
transport.  These downgrade attacks can prevent the "https" upgrade provided by
the HTTPS RR (<a class="auto internal xref" href="#hsts">Section 9.5</a>) and can disable any other protections coordinated via
SvcParams.  To prevent downgrades, <a class="auto internal xref" href="#client-failures">Section 3.1</a>
recommends that clients abandon the connection attempt when such an attack is
detected.<a class="pilcrow" href="#section-12-3">¶</a></p>
<p id="section-12-4">A hostile DNS intermediary might forge AliasMode "." records (<a class="auto internal xref" href="#aliasdot">Section 2.5.1</a>) as
a way to block clients from accessing particular services.  Such an adversary
could already block entire domains by forging erroneous responses, but this
mechanism allows them to target particular protocols or ports within a domain.
Clients that might be subject to such attacks <span class="bcp14">SHOULD</span> ignore AliasMode "."
records.<a class="pilcrow" href="#section-12-4">¶</a></p>
<p id="section-12-5">A hostile DNS intermediary or authoritative server can return SVCB records indicating any IP
address and port number, including IP addresses inside the local network and
port numbers assigned to internal services.  If the attacker can influence the
client's payload (e.g., TLS session ticket contents) and an internal service
has a sufficiently lax parser, the attacker could gain access to the
internal service.  (The same concerns apply to SRV records, HTTP Alt-Svc,
and HTTP redirects.)  As a mitigation, SVCB mapping documents <span class="bcp14">SHOULD</span> indicate
any port number restrictions that are appropriate for the supported transports.<a class="pilcrow" href="#section-12-5">¶</a></p>
</section>
</div>
<div id="privacy-considerations">
<section id="section-13">
      <h2 id="name-privacy-considerations">
<a class="section-number selfRef" href="#section-13">13. </a><a class="section-name selfRef" href="#name-privacy-considerations">Privacy Considerations</a>
      </h2>
<p id="section-13-1">Standard address queries reveal the user's intent to access a particular
domain.  This information is visible to the recursive resolver, and to
many other parties when plaintext DNS transport is used.  SVCB queries,
like queries for SRV records and other specific RR types, additionally
reveal the user's intent to use a particular protocol.  This is not
normally sensitive information, but it should be considered when adding
SVCB support in a new context.<a class="pilcrow" href="#section-13-1">¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-14">
      <h2 id="name-iana-considerations">
<a class="section-number selfRef" href="#section-14">14. </a><a class="section-name selfRef" href="#name-iana-considerations">IANA Considerations</a>
      </h2>
<div id="svcb-rrtype">
<section id="section-14.1">
        <h3 id="name-svcb-rr-type">
<a class="section-number selfRef" href="#section-14.1">14.1. </a><a class="section-name selfRef" href="#name-svcb-rr-type">SVCB RR Type</a>
        </h3>
<p id="section-14.1-1">IANA has registered the following new DNS RR type in the "Resource Record (RR) TYPEs"
registry on the "Domain Name System (DNS) Parameters" page:<a class="pilcrow" href="#section-14.1-1">¶</a></p>
<span class="break"></span><dl class="dlCompact dlParallel" id="section-14.1-2">
          <dt id="section-14.1-2.1">Type:</dt>
          <dd id="section-14.1-2.2" style="margin-left: 1.5em">SVCB<a class="pilcrow" href="#section-14.1-2.2">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-14.1-2.3">Value:</dt>
          <dd id="section-14.1-2.4" style="margin-left: 1.5em">64<a class="pilcrow" href="#section-14.1-2.4">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-14.1-2.5">Meaning:</dt>
          <dd id="section-14.1-2.6" style="margin-left: 1.5em">General-purpose service binding<a class="pilcrow" href="#section-14.1-2.6">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-14.1-2.7">Reference:</dt>
          <dd id="section-14.1-2.8" style="margin-left: 1.5em">RFC 9460<a class="pilcrow" href="#section-14.1-2.8">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="https-rrtype">
<section id="section-14.2">
        <h3 id="name-https-rr-type">
<a class="section-number selfRef" href="#section-14.2">14.2. </a><a class="section-name selfRef" href="#name-https-rr-type">HTTPS RR Type</a>
        </h3>
<p id="section-14.2-1">IANA has registered the following new DNS RR type
   in the "Resource Record (RR) TYPEs" registry
   on the "Domain Name System (DNS) Parameters" page:<a class="pilcrow" href="#section-14.2-1">¶</a></p>
<span class="break"></span><dl class="dlCompact dlParallel" id="section-14.2-2">
          <dt id="section-14.2-2.1">Type:</dt>
          <dd id="section-14.2-2.2" style="margin-left: 1.5em">HTTPS<a class="pilcrow" href="#section-14.2-2.2">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-14.2-2.3">Value:</dt>
          <dd id="section-14.2-2.4" style="margin-left: 1.5em">65<a class="pilcrow" href="#section-14.2-2.4">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-14.2-2.5">Meaning:</dt>
          <dd id="section-14.2-2.6" style="margin-left: 1.5em">SVCB-compatible type for use with HTTP<a class="pilcrow" href="#section-14.2-2.6">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-14.2-2.7">Reference:</dt>
          <dd id="section-14.2-2.8" style="margin-left: 1.5em">RFC 9460<a class="pilcrow" href="#section-14.2-2.8">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="svcparamregistry">
<section id="section-14.3">
        <h3 id="name-new-registry-for-service-pa">
<a class="section-number selfRef" href="#section-14.3">14.3. </a><a class="section-name selfRef" href="#name-new-registry-for-service-pa">New Registry for Service Parameters</a>
        </h3>
<p id="section-14.3-1">IANA has created the "Service Parameter Keys (SvcParamKeys)"
registry in the "Domain Name System (DNS) Parameters" category
on a new page entitled "DNS Service Bindings (SVCB)".  This registry
defines the namespace
for parameters, including string representations and numeric
SvcParamKey values.  This registry is shared with other SVCB-compatible
RR types, such as the HTTPS RR.<a class="pilcrow" href="#section-14.3-1">¶</a></p>
<div id="procedure">
<section id="section-14.3.1">
          <h4 id="name-procedure">
<a class="section-number selfRef" href="#section-14.3.1">14.3.1. </a><a class="section-name selfRef" href="#name-procedure">Procedure</a>
          </h4>
<p id="section-14.3.1-1">A registration <span class="bcp14">MUST</span> include the following fields:<a class="pilcrow" href="#section-14.3.1-1">¶</a></p>
<span class="break"></span><dl class="dlCompact dlParallel" id="section-14.3.1-2">
            <dt id="section-14.3.1-2.1">Number:</dt>
            <dd id="section-14.3.1-2.2" style="margin-left: 1.5em">Wire-format numeric identifier (range 0-65535)<a class="pilcrow" href="#section-14.3.1-2.2">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-14.3.1-2.3">Name:</dt>
            <dd id="section-14.3.1-2.4" style="margin-left: 1.5em">Unique presentation name<a class="pilcrow" href="#section-14.3.1-2.4">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-14.3.1-2.5">Meaning:</dt>
            <dd id="section-14.3.1-2.6" style="margin-left: 1.5em">A short description<a class="pilcrow" href="#section-14.3.1-2.6">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-14.3.1-2.7">Reference:</dt>
            <dd id="section-14.3.1-2.8" style="margin-left: 1.5em">Location of specification or registration source<a class="pilcrow" href="#section-14.3.1-2.8">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-14.3.1-2.9">Change Controller:</dt>
            <dd id="section-14.3.1-2.10" style="margin-left: 1.5em">Person or entity, with contact information if appropriate<a class="pilcrow" href="#section-14.3.1-2.10">¶</a>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-14.3.1-3">The characters in the registered Name field entry <span class="bcp14">MUST</span> be lowercase alphanumeric or "-"
(<a class="auto internal xref" href="#presentation">Section 2.1</a>).  The name <span class="bcp14">MUST NOT</span> start with "key" or "invalid".<a class="pilcrow" href="#section-14.3.1-3">¶</a></p>
<p id="section-14.3.1-4">The registration policy for new entries is Expert Review (<span>[<a class="cite xref" href="#RFC8126">RFC8126</a>], <a class="relref" href="https://rfc-editor.org/rfc/rfc8126#section-4.5">Section 4.5</a></span>).  The designated expert <span class="bcp14">MUST</span> ensure that
the reference is stable and publicly available and that it specifies
how to convert the SvcParamValue's presentation format to wire format.  The
reference <span class="bcp14">MAY</span> be any individual's Internet-Draft or a document from
any other source with similar assurances of stability and availability.
An entry <span class="bcp14">MAY</span> specify a reference of
the form "Same as (other key name)" if it uses the same presentation and wire
formats as an existing key.<a class="pilcrow" href="#section-14.3.1-4">¶</a></p>
<p id="section-14.3.1-5">This arrangement supports the development of new parameters while ensuring that
zone files can be made interoperable.<a class="pilcrow" href="#section-14.3.1-5">¶</a></p>
</section>
</div>
<div id="iana-keys">
<section id="section-14.3.2">
          <h4 id="name-initial-contents">
<a class="section-number selfRef" href="#section-14.3.2">14.3.2. </a><a class="section-name selfRef" href="#name-initial-contents">Initial Contents</a>
          </h4>
<p id="section-14.3.2-1">The "Service Parameter Keys (SvcParamKeys)" registry has been
populated with the following initial registrations:<a class="pilcrow" href="#section-14.3.2-1">¶</a></p>
<table class="center" id="table-1">
            <caption><a class="selfRef" href="#table-1">Table 1</a></caption>
<thead>
              <tr>
                <th class="text-center" colspan="1" rowspan="1">Number</th>
                <th class="text-left" colspan="1" rowspan="1">Name</th>
                <th class="text-left" colspan="1" rowspan="1">Meaning</th>
                <th class="text-left" colspan="1" rowspan="1">Reference</th>
                <th class="text-left" colspan="1" rowspan="1">Change Controller</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">0</td>
                <td class="text-left" colspan="1" rowspan="1">mandatory</td>
                <td class="text-left" colspan="1" rowspan="1">Mandatory keys in this RR</td>
                <td class="text-left" colspan="1" rowspan="1">RFC 9460, <a class="auto internal xref" href="#mandatory">Section 8</a>
</td>
                <td class="text-left" colspan="1" rowspan="1">IETF</td>
              </tr>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">1</td>
                <td class="text-left" colspan="1" rowspan="1">alpn</td>
                <td class="text-left" colspan="1" rowspan="1">Additional supported protocols</td>
                <td class="text-left" colspan="1" rowspan="1">RFC 9460, <a class="auto internal xref" href="#alpn-key">Section 7.1</a>
</td>
                <td class="text-left" colspan="1" rowspan="1">IETF</td>
              </tr>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">2</td>
                <td class="text-left" colspan="1" rowspan="1">no-default-alpn</td>
                <td class="text-left" colspan="1" rowspan="1">No support for default protocol</td>
                <td class="text-left" colspan="1" rowspan="1">RFC 9460, <a class="auto internal xref" href="#alpn-key">Section 7.1</a>
</td>
                <td class="text-left" colspan="1" rowspan="1">IETF</td>
              </tr>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">3</td>
                <td class="text-left" colspan="1" rowspan="1">port</td>
                <td class="text-left" colspan="1" rowspan="1">Port for alternative endpoint</td>
                <td class="text-left" colspan="1" rowspan="1">RFC 9460, <a class="auto internal xref" href="#svcparamkeys-port">Section 7.2</a>
</td>
                <td class="text-left" colspan="1" rowspan="1">IETF</td>
              </tr>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">4</td>
                <td class="text-left" colspan="1" rowspan="1">ipv4hint</td>
                <td class="text-left" colspan="1" rowspan="1">IPv4 address hints</td>
                <td class="text-left" colspan="1" rowspan="1">RFC 9460, <a class="auto internal xref" href="#svcparamkeys-iphints">Section 7.3</a>
</td>
                <td class="text-left" colspan="1" rowspan="1">IETF</td>
              </tr>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">5</td>
                <td class="text-left" colspan="1" rowspan="1">ech</td>
                <td class="text-left" colspan="1" rowspan="1">RESERVED (held for Encrypted ClientHello)</td>
                <td class="text-left" colspan="1" rowspan="1">N/A</td>
                <td class="text-left" colspan="1" rowspan="1">IETF</td>
              </tr>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">6</td>
                <td class="text-left" colspan="1" rowspan="1">ipv6hint</td>
                <td class="text-left" colspan="1" rowspan="1">IPv6 address hints</td>
                <td class="text-left" colspan="1" rowspan="1">RFC 9460, <a class="auto internal xref" href="#svcparamkeys-iphints">Section 7.3</a>
</td>
                <td class="text-left" colspan="1" rowspan="1">IETF</td>
              </tr>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">65280-65534</td>
                <td class="text-left" colspan="1" rowspan="1">N/A</td>
                <td class="text-left" colspan="1" rowspan="1">Reserved for Private Use</td>
                <td class="text-left" colspan="1" rowspan="1">RFC 9460</td>
                <td class="text-left" colspan="1" rowspan="1">IETF</td>
              </tr>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">65535</td>
                <td class="text-left" colspan="1" rowspan="1">N/A</td>
                <td class="text-left" colspan="1" rowspan="1">Reserved ("Invalid key")</td>
                <td class="text-left" colspan="1" rowspan="1">RFC 9460</td>
                <td class="text-left" colspan="1" rowspan="1">IETF</td>
              </tr>
            </tbody>
          </table>
</section>
</div>
</section>
</div>
<div id="other-registry-updates">
<section id="section-14.4">
        <h3 id="name-other-registry-updates">
<a class="section-number selfRef" href="#section-14.4">14.4. </a><a class="section-name selfRef" href="#name-other-registry-updates">Other Registry Updates</a>
        </h3>
<p id="section-14.4-1">Per <span>[<a class="cite xref" href="#RFC8552">Attrleaf</a>]</span>, the following entry has been added to the DNS "Underscored and Globally Scoped DNS Node Names" registry:<a class="pilcrow" href="#section-14.4-1">¶</a></p>
<table class="center" id="table-2">
          <caption><a class="selfRef" href="#table-2">Table 2</a></caption>
<thead>
            <tr>
              <th class="text-left" colspan="1" rowspan="1">RR Type</th>
              <th class="text-left" colspan="1" rowspan="1">_NODE NAME</th>
              <th class="text-left" colspan="1" rowspan="1">Reference</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">HTTPS</td>
              <td class="text-left" colspan="1" rowspan="1">_https</td>
              <td class="text-left" colspan="1" rowspan="1">RFC 9460</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
</section>
</div>
<section id="section-15">
      <h2 id="name-references">
<a class="section-number selfRef" href="#section-15">15. </a><a class="section-name selfRef" href="#name-references">References</a>
      </h2>
<section id="section-15.1">
        <h3 id="name-normative-references">
<a class="section-number selfRef" href="#section-15.1">15.1. </a><a class="section-name selfRef" href="#name-normative-references">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC7301">[ALPN]</dt>
        <dd>
<span class="refAuthor">Friedl, S.</span>, <span class="refAuthor">Popov, A.</span>, <span class="refAuthor">Langley, A.</span>, and <span class="refAuthor">E. Stephan</span>, <span class="refTitle">"Transport Layer Security (TLS) Application-Layer Protocol Negotiation Extension"</span>, <span class="seriesInfo">RFC 7301</span>, <span class="seriesInfo">DOI 10.17487/RFC7301</span>, <time class="refDate" datetime="2014-07">July 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7301">https://www.rfc-editor.org/info/rfc7301</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8552">[Attrleaf]</dt>
        <dd>
<span class="refAuthor">Crocker, D.</span>, <span class="refTitle">"Scoped Interpretation of DNS Resource Records through "Underscored" Naming of Attribute Leaves"</span>, <span class="seriesInfo">BCP 222</span>, <span class="seriesInfo">RFC 8552</span>, <span class="seriesInfo">DOI 10.17487/RFC8552</span>, <time class="refDate" datetime="2019-03">March 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8552">https://www.rfc-editor.org/info/rfc8552</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8484">[DoH]</dt>
        <dd>
<span class="refAuthor">Hoffman, P.</span> and <span class="refAuthor">P. McManus</span>, <span class="refTitle">"DNS Queries over HTTPS (DoH)"</span>, <span class="seriesInfo">RFC 8484</span>, <span class="seriesInfo">DOI 10.17487/RFC8484</span>, <time class="refDate" datetime="2018-10">October 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8484">https://www.rfc-editor.org/info/rfc8484</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7858">[DoT]</dt>
        <dd>
<span class="refAuthor">Hu, Z.</span>, <span class="refAuthor">Zhu, L.</span>, <span class="refAuthor">Heidemann, J.</span>, <span class="refAuthor">Mankin, A.</span>, <span class="refAuthor">Wessels, D.</span>, and <span class="refAuthor">P. Hoffman</span>, <span class="refTitle">"Specification for DNS over Transport Layer Security (TLS)"</span>, <span class="seriesInfo">RFC 7858</span>, <span class="seriesInfo">DOI 10.17487/RFC7858</span>, <time class="refDate" datetime="2016-05">May 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7858">https://www.rfc-editor.org/info/rfc7858</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8305">[HappyEyeballsV2]</dt>
        <dd>
<span class="refAuthor">Schinazi, D.</span> and <span class="refAuthor">T. Pauly</span>, <span class="refTitle">"Happy Eyeballs Version 2: Better Connectivity Using Concurrency"</span>, <span class="seriesInfo">RFC 8305</span>, <span class="seriesInfo">DOI 10.17487/RFC8305</span>, <time class="refDate" datetime="2017-12">December 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8305">https://www.rfc-editor.org/info/rfc8305</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9110">[HTTP]</dt>
        <dd>
<span class="refAuthor">Fielding, R., Ed.</span>, <span class="refAuthor">Nottingham, M., Ed.</span>, and <span class="refAuthor">J. Reschke, Ed.</span>, <span class="refTitle">"HTTP Semantics"</span>, <span class="seriesInfo">STD 97</span>, <span class="seriesInfo">RFC 9110</span>, <span class="seriesInfo">DOI 10.17487/RFC9110</span>, <time class="refDate" datetime="2022-06">June 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9110">https://www.rfc-editor.org/info/rfc9110</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC1034">[RFC1034]</dt>
        <dd>
<span class="refAuthor">Mockapetris, P.</span>, <span class="refTitle">"Domain names - concepts and facilities"</span>, <span class="seriesInfo">STD 13</span>, <span class="seriesInfo">RFC 1034</span>, <span class="seriesInfo">DOI 10.17487/RFC1034</span>, <time class="refDate" datetime="1987-11">November 1987</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc1034">https://www.rfc-editor.org/info/rfc1034</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC1035">[RFC1035]</dt>
        <dd>
<span class="refAuthor">Mockapetris, P.</span>, <span class="refTitle">"Domain names - implementation and specification"</span>, <span class="seriesInfo">STD 13</span>, <span class="seriesInfo">RFC 1035</span>, <span class="seriesInfo">DOI 10.17487/RFC1035</span>, <time class="refDate" datetime="1987-11">November 1987</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc1035">https://www.rfc-editor.org/info/rfc1035</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC1928">[RFC1928]</dt>
        <dd>
<span class="refAuthor">Leech, M.</span>, <span class="refAuthor">Ganis, M.</span>, <span class="refAuthor">Lee, Y.</span>, <span class="refAuthor">Kuris, R.</span>, <span class="refAuthor">Koblas, D.</span>, and <span class="refAuthor">L. Jones</span>, <span class="refTitle">"SOCKS Protocol Version 5"</span>, <span class="seriesInfo">RFC 1928</span>, <span class="seriesInfo">DOI 10.17487/RFC1928</span>, <time class="refDate" datetime="1996-03">March 1996</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc1928">https://www.rfc-editor.org/info/rfc1928</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time class="refDate" datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2181">[RFC2181]</dt>
        <dd>
<span class="refAuthor">Elz, R.</span> and <span class="refAuthor">R. Bush</span>, <span class="refTitle">"Clarifications to the DNS Specification"</span>, <span class="seriesInfo">RFC 2181</span>, <span class="seriesInfo">DOI 10.17487/RFC2181</span>, <time class="refDate" datetime="1997-07">July 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2181">https://www.rfc-editor.org/info/rfc2181</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3225">[RFC3225]</dt>
        <dd>
<span class="refAuthor">Conrad, D.</span>, <span class="refTitle">"Indicating Resolver Support of DNSSEC"</span>, <span class="seriesInfo">RFC 3225</span>, <span class="seriesInfo">DOI 10.17487/RFC3225</span>, <time class="refDate" datetime="2001-12">December 2001</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3225">https://www.rfc-editor.org/info/rfc3225</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3597">[RFC3597]</dt>
        <dd>
<span class="refAuthor">Gustafsson, A.</span>, <span class="refTitle">"Handling of Unknown DNS Resource Record (RR) Types"</span>, <span class="seriesInfo">RFC 3597</span>, <span class="seriesInfo">DOI 10.17487/RFC3597</span>, <time class="refDate" datetime="2003-09">September 2003</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3597">https://www.rfc-editor.org/info/rfc3597</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4001">[RFC4001]</dt>
        <dd>
<span class="refAuthor">Daniele, M.</span>, <span class="refAuthor">Haberman, B.</span>, <span class="refAuthor">Routhier, S.</span>, and <span class="refAuthor">J. Schoenwaelder</span>, <span class="refTitle">"Textual Conventions for Internet Network Addresses"</span>, <span class="seriesInfo">RFC 4001</span>, <span class="seriesInfo">DOI 10.17487/RFC4001</span>, <time class="refDate" datetime="2005-02">February 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4001">https://www.rfc-editor.org/info/rfc4001</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5234">[RFC5234]</dt>
        <dd>
<span class="refAuthor">Crocker, D., Ed.</span> and <span class="refAuthor">P. Overell</span>, <span class="refTitle">"Augmented BNF for Syntax Specifications: ABNF"</span>, <span class="seriesInfo">STD 68</span>, <span class="seriesInfo">RFC 5234</span>, <span class="seriesInfo">DOI 10.17487/RFC5234</span>, <time class="refDate" datetime="2008-01">January 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5234">https://www.rfc-editor.org/info/rfc5234</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5952">[RFC5952]</dt>
        <dd>
<span class="refAuthor">Kawamura, S.</span> and <span class="refAuthor">M. Kawashima</span>, <span class="refTitle">"A Recommendation for IPv6 Address Text Representation"</span>, <span class="seriesInfo">RFC 5952</span>, <span class="seriesInfo">DOI 10.17487/RFC5952</span>, <time class="refDate" datetime="2010-08">August 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5952">https://www.rfc-editor.org/info/rfc5952</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6066">[RFC6066]</dt>
        <dd>
<span class="refAuthor">Eastlake 3rd, D.</span>, <span class="refTitle">"Transport Layer Security (TLS) Extensions: Extension Definitions"</span>, <span class="seriesInfo">RFC 6066</span>, <span class="seriesInfo">DOI 10.17487/RFC6066</span>, <time class="refDate" datetime="2011-01">January 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6066">https://www.rfc-editor.org/info/rfc6066</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6147">[RFC6147]</dt>
        <dd>
<span class="refAuthor">Bagnulo, M.</span>, <span class="refAuthor">Sullivan, A.</span>, <span class="refAuthor">Matthews, P.</span>, and <span class="refAuthor">I. van Beijnum</span>, <span class="refTitle">"DNS64: DNS Extensions for Network Address Translation from IPv6 Clients to IPv4 Servers"</span>, <span class="seriesInfo">RFC 6147</span>, <span class="seriesInfo">DOI 10.17487/RFC6147</span>, <time class="refDate" datetime="2011-04">April 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6147">https://www.rfc-editor.org/info/rfc6147</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7050">[RFC7050]</dt>
        <dd>
<span class="refAuthor">Savolainen, T.</span>, <span class="refAuthor">Korhonen, J.</span>, and <span class="refAuthor">D. Wing</span>, <span class="refTitle">"Discovery of the IPv6 Prefix Used for IPv6 Address Synthesis"</span>, <span class="seriesInfo">RFC 7050</span>, <span class="seriesInfo">DOI 10.17487/RFC7050</span>, <time class="refDate" datetime="2013-11">November 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7050">https://www.rfc-editor.org/info/rfc7050</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7231">[RFC7231]</dt>
        <dd>
<span class="refAuthor">Fielding, R., Ed.</span> and <span class="refAuthor">J. Reschke, Ed.</span>, <span class="refTitle">"Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content"</span>, <span class="seriesInfo">RFC 7231</span>, <span class="seriesInfo">DOI 10.17487/RFC7231</span>, <time class="refDate" datetime="2014-06">June 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7231">https://www.rfc-editor.org/info/rfc7231</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7595">[RFC7595]</dt>
        <dd>
<span class="refAuthor">Thaler, D., Ed.</span>, <span class="refAuthor">Hansen, T.</span>, and <span class="refAuthor">T. Hardie</span>, <span class="refTitle">"Guidelines and Registration Procedures for URI Schemes"</span>, <span class="seriesInfo">BCP 35</span>, <span class="seriesInfo">RFC 7595</span>, <span class="seriesInfo">DOI 10.17487/RFC7595</span>, <time class="refDate" datetime="2015-06">June 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7595">https://www.rfc-editor.org/info/rfc7595</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7871">[RFC7871]</dt>
        <dd>
<span class="refAuthor">Contavalli, C.</span>, <span class="refAuthor">van der Gaast, W.</span>, <span class="refAuthor">Lawrence, D.</span>, and <span class="refAuthor">W. Kumari</span>, <span class="refTitle">"Client Subnet in DNS Queries"</span>, <span class="seriesInfo">RFC 7871</span>, <span class="seriesInfo">DOI 10.17487/RFC7871</span>, <time class="refDate" datetime="2016-05">May 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7871">https://www.rfc-editor.org/info/rfc7871</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8126">[RFC8126]</dt>
        <dd>
<span class="refAuthor">Cotton, M.</span>, <span class="refAuthor">Leiba, B.</span>, and <span class="refAuthor">T. Narten</span>, <span class="refTitle">"Guidelines for Writing an IANA Considerations Section in RFCs"</span>, <span class="seriesInfo">BCP 26</span>, <span class="seriesInfo">RFC 8126</span>, <span class="seriesInfo">DOI 10.17487/RFC8126</span>, <time class="refDate" datetime="2017-06">June 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8126">https://www.rfc-editor.org/info/rfc8126</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time class="refDate" datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8446">[RFC8446]</dt>
        <dd>
<span class="refAuthor">Rescorla, E.</span>, <span class="refTitle">"The Transport Layer Security (TLS) Protocol Version 1.3"</span>, <span class="seriesInfo">RFC 8446</span>, <span class="seriesInfo">DOI 10.17487/RFC8446</span>, <time class="refDate" datetime="2018-08">August 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8446">https://www.rfc-editor.org/info/rfc8446</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6455">[WebSocket]</dt>
      <dd>
<span class="refAuthor">Fette, I.</span> and <span class="refAuthor">A. Melnikov</span>, <span class="refTitle">"The WebSocket Protocol"</span>, <span class="seriesInfo">RFC 6455</span>, <span class="seriesInfo">DOI 10.17487/RFC6455</span>, <time class="refDate" datetime="2011-12">December 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6455">https://www.rfc-editor.org/info/rfc6455</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-15.2">
        <h3 id="name-informative-references">
<a class="section-number selfRef" href="#section-15.2">15.2. </a><a class="section-name selfRef" href="#name-informative-references">Informative References</a>
        </h3>
<dl class="references">
<dt id="RFC7838">[AltSvc]</dt>
        <dd>
<span class="refAuthor">Nottingham, M.</span>, <span class="refAuthor">McManus, P.</span>, and <span class="refAuthor">J. Reschke</span>, <span class="refTitle">"HTTP Alternative Services"</span>, <span class="seriesInfo">RFC 7838</span>, <span class="seriesInfo">DOI 10.17487/RFC7838</span>, <time class="refDate" datetime="2016-04">April 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7838">https://www.rfc-editor.org/info/rfc7838</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-dnsop-aname">[ANAME-DNS-RR]</dt>
        <dd>
<span class="refAuthor">Finch, T.</span>, <span class="refAuthor">Hunt, E.</span>, <span class="refAuthor">van Dijk, P.</span>, <span class="refAuthor">Eden, A.</span>, and <span class="refAuthor">W. Mekking</span>, <span class="refTitle">"Address-specific DNS aliases (ANAME)"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-dnsop-aname-04</span>, <time class="refDate" datetime="2019-07-08">8 July 2019</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-dnsop-aname-04">https://datatracker.ietf.org/doc/html/draft-ietf-dnsop-aname-04</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="BIND-CHECK-NAMES">[BIND-CHECK-NAMES]</dt>
        <dd>
<span class="refAuthor">Internet Systems Consortium</span>, <span class="refTitle">"BIND v9.19.11 Configuration Reference: "check-names""</span>, <time class="refDate" datetime="2023-09">September 2023</time>, <span>&lt;<a href="https://bind9.readthedocs.io/en/v9.19.11/reference.html#namedconf-statement-check-names">https://bind9.readthedocs.io/en/v9.19.11/reference.html#namedconf-statement-check-names</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6672">[DNAME]</dt>
        <dd>
<span class="refAuthor">Rose, S.</span> and <span class="refAuthor">W. Wijngaards</span>, <span class="refTitle">"DNAME Redirection in the DNS"</span>, <span class="seriesInfo">RFC 6672</span>, <span class="seriesInfo">DOI 10.17487/RFC6672</span>, <time class="refDate" datetime="2012-06">June 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6672">https://www.rfc-editor.org/info/rfc6672</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8499">[DNSTerm]</dt>
        <dd>
<span class="refAuthor">Hoffman, P.</span>, <span class="refAuthor">Sullivan, A.</span>, and <span class="refAuthor">K. Fujiwara</span>, <span class="refTitle">"DNS Terminology"</span>, <span class="seriesInfo">BCP 219</span>, <span class="seriesInfo">RFC 8499</span>, <span class="seriesInfo">DOI 10.17487/RFC8499</span>, <time class="refDate" datetime="2019-01">January 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8499">https://www.rfc-editor.org/info/rfc8499</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-tls-esni">[ECH]</dt>
        <dd>
<span class="refAuthor">Rescorla, E.</span>, <span class="refAuthor">Oku, K.</span>, <span class="refAuthor">Sullivan, N.</span>, and <span class="refAuthor">C. A. Wood</span>, <span class="refTitle">"TLS Encrypted Client Hello"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-tls-esni-17</span>, <time class="refDate" datetime="2023-10-09">9 October 2023</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-tls-esni-17">https://datatracker.ietf.org/doc/html/draft-ietf-tls-esni-17</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="FETCH">[FETCH]</dt>
        <dd>
<span class="refAuthor">WHATWG</span>, <span class="refTitle">"Fetch Living Standard"</span>, <time class="refDate" datetime="2023-10">October 2023</time>, <span>&lt;<a href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="FETCH-WEBSOCKETS">[FETCH-WEBSOCKETS]</dt>
        <dd>
<span class="refAuthor">WHATWG</span>, <span class="refTitle">"WebSockets Living Standard"</span>, <time class="refDate" datetime="2023-09">September 2023</time>, <span>&lt;<a href="https://websockets.spec.whatwg.org/">https://websockets.spec.whatwg.org/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6797">[HSTS]</dt>
        <dd>
<span class="refAuthor">Hodges, J.</span>, <span class="refAuthor">Jackson, C.</span>, and <span class="refAuthor">A. Barth</span>, <span class="refTitle">"HTTP Strict Transport Security (HSTS)"</span>, <span class="seriesInfo">RFC 6797</span>, <span class="seriesInfo">DOI 10.17487/RFC6797</span>, <time class="refDate" datetime="2012-11">November 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6797">https://www.rfc-editor.org/info/rfc6797</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.bellis-dnsop-http-record">[HTTP-DNS-RR]</dt>
        <dd>
<span class="refAuthor">Bellis, R.</span>, <span class="refTitle">"A DNS Resource Record for HTTP"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-bellis-dnsop-http-record-00</span>, <time class="refDate" datetime="2018-11-03">3 November 2018</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-bellis-dnsop-http-record-00">https://datatracker.ietf.org/doc/html/draft-bellis-dnsop-http-record-00</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9114">[HTTP/3]</dt>
        <dd>
<span class="refAuthor">Bishop, M., Ed.</span>, <span class="refTitle">"HTTP/3"</span>, <span class="seriesInfo">RFC 9114</span>, <span class="seriesInfo">DOI 10.17487/RFC9114</span>, <time class="refDate" datetime="2022-06">June 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9114">https://www.rfc-editor.org/info/rfc9114</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC1912">[RFC1912]</dt>
        <dd>
<span class="refAuthor">Barr, D.</span>, <span class="refTitle">"Common DNS Operational and Configuration Errors"</span>, <span class="seriesInfo">RFC 1912</span>, <span class="seriesInfo">DOI 10.17487/RFC1912</span>, <time class="refDate" datetime="1996-02">February 1996</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc1912">https://www.rfc-editor.org/info/rfc1912</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6454">[RFC6454]</dt>
        <dd>
<span class="refAuthor">Barth, A.</span>, <span class="refTitle">"The Web Origin Concept"</span>, <span class="seriesInfo">RFC 6454</span>, <span class="seriesInfo">DOI 10.17487/RFC6454</span>, <time class="refDate" datetime="2011-12">December 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6454">https://www.rfc-editor.org/info/rfc6454</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2782">[SRV]</dt>
        <dd>
<span class="refAuthor">Gulbrandsen, A.</span>, <span class="refAuthor">Vixie, P.</span>, and <span class="refAuthor">L. Esibov</span>, <span class="refTitle">"A DNS RR for specifying the location of services (DNS SRV)"</span>, <span class="seriesInfo">RFC 2782</span>, <span class="seriesInfo">DOI 10.17487/RFC2782</span>, <time class="refDate" datetime="2000-02">February 2000</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2782">https://www.rfc-editor.org/info/rfc2782</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3986">[URI]</dt>
      <dd>
<span class="refAuthor">Berners-Lee, T.</span>, <span class="refAuthor">Fielding, R.</span>, and <span class="refAuthor">L. Masinter</span>, <span class="refTitle">"Uniform Resource Identifier (URI): Generic Syntax"</span>, <span class="seriesInfo">STD 66</span>, <span class="seriesInfo">RFC 3986</span>, <span class="seriesInfo">DOI 10.17487/RFC3986</span>, <time class="refDate" datetime="2005-01">January 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3986">https://www.rfc-editor.org/info/rfc3986</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="decoding">
<section id="appendix-A">
      <h2 id="name-decoding-text-in-zone-files">
<a class="section-number selfRef" href="#appendix-A">Appendix A. </a><a class="section-name selfRef" href="#name-decoding-text-in-zone-files">Decoding Text in Zone Files</a>
      </h2>
<p id="appendix-A-1">DNS zone files are capable of representing arbitrary octet sequences in
basic ASCII text, using various delimiters and encodings, according to an algorithm
defined in <span><a class="relref" href="https://rfc-editor.org/rfc/rfc1035#section-5.1">Section 5.1</a> of [<a class="cite xref" href="#RFC1035">RFC1035</a>]</span>.
The following summarizes some allowed inputs to that algorithm, using ABNF:<a class="pilcrow" href="#appendix-A-1">¶</a></p>
<div class="lang-abnf sourcecode" id="appendix-A-2">
<pre>; non-special is VCHAR minus DQUOTE, ";", "(", ")", and "\".
non-special = %x21 / %x23-27 / %x2A-3A / %x3C-5B / %x5D-7E
; non-digit is VCHAR minus DIGIT.
non-digit   = %x21-2F / %x3A-7E
; dec-octet is a number 0-255 as a three-digit decimal number.
dec-octet   = ( "0" / "1" ) 2DIGIT /
              "2" ( ( %x30-34 DIGIT ) / ( "5" %x30-35 ) )
escaped     = "\" ( non-digit / dec-octet )
contiguous  = 1*( non-special / escaped )
quoted      = DQUOTE *( contiguous / ( ["\"] WSP ) ) DQUOTE
char-string = contiguous / quoted
</pre><a class="pilcrow" href="#appendix-A-2">¶</a>
</div>
<p id="appendix-A-3">The decoding algorithm allows <code>char-string</code> to represent any <code>*OCTET</code>,
using quoting to group values (e.g., those with internal whitespace), and
escaping to represent each non-printable octet as a single <code>escaped</code> sequence.
In this document, this algorithm is referred to as "character-string decoding", because
<span><a class="relref" href="https://rfc-editor.org/rfc/rfc1035#section-5.1">Section 5.1</a> of [<a class="cite xref" href="#RFC1035">RFC1035</a>]</span> uses this
algorithm to produce a <code>&lt;character-string&gt;</code>.  Note that while
the length of a <code>&lt;character-string&gt;</code> is limited to 255 octets, the
character-string decoding algorithm can produce output of any length.<a class="pilcrow" href="#appendix-A-3">¶</a></p>
<div id="value-list">
<section id="appendix-A.1">
        <h3 id="name-decoding-a-comma-separated-">
<a class="section-number selfRef" href="#appendix-A.1">A.1. </a><a class="section-name selfRef" href="#name-decoding-a-comma-separated-">Decoding a Comma-Separated List</a>
        </h3>
<p id="appendix-A.1-1">In order to represent lists of items in zone files, this specification uses
comma-separated lists.  When the allowed items in the list cannot contain ","
or "\", this is trivial.  (For simplicity, empty items are not allowed.)
A value-list parser that splits on "," and prohibits items containing "\"
is sufficient to comply with all requirements in this document.  This
corresponds to the <code>simple-comma-separated</code> syntax:<a class="pilcrow" href="#appendix-A.1-1">¶</a></p>
<div class="lang-abnf sourcecode" id="appendix-A.1-2">
<pre>; item-allowed is OCTET minus "," and "\".
item-allowed           = %x00-2B / %x2D-5B / %x5D-FF
simple-item            = 1*item-allowed
simple-comma-separated = [simple-item *("," simple-item)]
</pre><a class="pilcrow" href="#appendix-A.1-2">¶</a>
</div>
<p id="appendix-A.1-3">For implementations that allow "," and "\" in item values, the following
escaping syntax applies:<a class="pilcrow" href="#appendix-A.1-3">¶</a></p>
<div class="lang-abnf sourcecode" id="appendix-A.1-4">
<pre>item            = 1*OCTET
escaped-item    = 1*(item-allowed / "\," / "\\")
comma-separated = [escaped-item *("," escaped-item)]
</pre><a class="pilcrow" href="#appendix-A.1-4">¶</a>
</div>
<p id="appendix-A.1-5">Decoding of value-lists happens after character-string decoding.
For example, consider these <code>char-string</code> SvcParamValues:<a class="pilcrow" href="#appendix-A.1-5">¶</a></p>
<div class="lang-test-vectors sourcecode" id="appendix-A.1-6">
<pre>"part1,part2,part3\\,part4\\\\"
part1\,\p\a\r\t2\044part3\092,part4\092\\
</pre><a class="pilcrow" href="#appendix-A.1-6">¶</a>
</div>
<p id="appendix-A.1-7">These inputs are equivalent: character-string decoding either of them would
produce the same <code>value</code>:<a class="pilcrow" href="#appendix-A.1-7">¶</a></p>
<div class="lang-test-vectors sourcecode" id="appendix-A.1-8">
<pre>part1,part2,part3\,part4\\
</pre><a class="pilcrow" href="#appendix-A.1-8">¶</a>
</div>
<p id="appendix-A.1-9">Applying comma-separated list decoding to this <code>value</code> would produce a list
of three <code>item</code>s:<a class="pilcrow" href="#appendix-A.1-9">¶</a></p>
<div class="lang-test-vectors sourcecode" id="appendix-A.1-10">
<pre>part1
part2
part3,part4\
</pre><a class="pilcrow" href="#appendix-A.1-10">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="http-mapping-summary">
<section id="appendix-B">
      <h2 id="name-http-mapping-summary">
<a class="section-number selfRef" href="#appendix-B">Appendix B. </a><a class="section-name selfRef" href="#name-http-mapping-summary">HTTP Mapping Summary</a>
      </h2>
<p id="appendix-B-1">This table serves as a non-normative summary of the HTTP mapping for SVCB
(<a class="auto internal xref" href="#https">Section 9</a>).  Future protocol mappings may provide a similar summary table.<a class="pilcrow" href="#appendix-B-1">¶</a></p>
<table class="center" id="table-3">
        <caption><a class="selfRef" href="#table-3">Table 3</a></caption>
<tbody>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">
              <strong>Mapped scheme</strong>
</td>
            <td class="text-left" colspan="1" rowspan="1">"https"</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">
              <strong>Other affected schemes</strong>
</td>
            <td class="text-left" colspan="1" rowspan="1">"http", "wss", "ws", (other HTTP-based)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">
              <strong>RR type</strong>
</td>
            <td class="text-left" colspan="1" rowspan="1">HTTPS (65)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">
              <strong>Name prefix</strong>
</td>
            <td class="text-left" colspan="1" rowspan="1">None for port 443, else <code>_$PORT._https</code>
</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">
              <strong>Automatically mandatory keys</strong>
</td>
            <td class="text-left" colspan="1" rowspan="1">
              <code>port</code>, <code>no-default-alpn</code>
</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">
              <strong>SvcParam defaults</strong>
</td>
            <td class="text-left" colspan="1" rowspan="1">
              <code>alpn</code>: ["http/1.1"]</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">
              <strong>Special behaviors</strong>
</td>
            <td class="text-left" colspan="1" rowspan="1">Upgrade from HTTP to HTTPS</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">
              <strong>Keys that records must include</strong>
</td>
            <td class="text-left" colspan="1" rowspan="1">None</td>
          </tr>
        </tbody>
      </table>
</section>
</div>
<div id="comparison-with-alternatives">
<section id="appendix-C">
      <h2 id="name-comparison-with-alternative">
<a class="section-number selfRef" href="#appendix-C">Appendix C. </a><a class="section-name selfRef" href="#name-comparison-with-alternative">Comparison with Alternatives</a>
      </h2>
<p id="appendix-C-1">The SVCB and HTTPS RR types closely resemble,
and are inspired by, some existing
record types and proposals.  One complaint regarding all of the alternatives
is that web clients have seemed unenthusiastic about implementing
them.  The hope here is that an extensible solution that
solves multiple problems will overcome this inertia and have a path
to achieve client implementation.<a class="pilcrow" href="#appendix-C-1">¶</a></p>
<div id="differences-from-the-srv-rr-type">
<section id="appendix-C.1">
        <h3 id="name-differences-from-the-srv-rr">
<a class="section-number selfRef" href="#appendix-C.1">C.1. </a><a class="section-name selfRef" href="#name-differences-from-the-srv-rr">Differences from the SRV RR Type</a>
        </h3>
<p id="appendix-C.1-1">An SRV record <span>[<a class="cite xref" href="#RFC2782">SRV</a>]</span> can perform a function similar
to that of the SVCB record,
informing a client to look in a different location for a service.
However, there are several differences:<a class="pilcrow" href="#appendix-C.1-1">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-C.1-2.1">SRV records are typically mandatory, whereas SVCB is intended to be optional
when used with pre-existing protocols.<a class="pilcrow" href="#appendix-C.1-2.1">¶</a>
</li>
          <li class="normal" id="appendix-C.1-2.2">SRV records cannot instruct the client to switch or upgrade
protocols, whereas SVCB can signal such an upgrade (e.g., to
HTTP/2).<a class="pilcrow" href="#appendix-C.1-2.2">¶</a>
</li>
          <li class="normal" id="appendix-C.1-2.3">SRV records are not extensible, whereas SVCB and HTTPS RRs
can be extended with new parameters.<a class="pilcrow" href="#appendix-C.1-2.3">¶</a>
</li>
          <li class="normal" id="appendix-C.1-2.4">SRV records specify a "weight" for unbalanced randomized load balancing.
SVCB only supports balanced randomized load balancing, although weights
could be added via a future SvcParam.<a class="pilcrow" href="#appendix-C.1-2.4">¶</a>
</li>
        </ul>
</section>
</div>
<div id="differences-from-the-proposed-http-record">
<section id="appendix-C.2">
        <h3 id="name-differences-from-the-propos">
<a class="section-number selfRef" href="#appendix-C.2">C.2. </a><a class="section-name selfRef" href="#name-differences-from-the-propos">Differences from the Proposed HTTP Record</a>
        </h3>
<p id="appendix-C.2-1">Unlike <span>[<a class="cite xref" href="#I-D.bellis-dnsop-http-record">HTTP-DNS-RR</a>]</span>, this approach is
extensible to cover Alt-Svc and Encrypted ClientHello use cases.  Like that
proposal, this addresses the zone-apex CNAME challenge.<a class="pilcrow" href="#appendix-C.2-1">¶</a></p>
<p id="appendix-C.2-2">Like that proposal, it remains necessary to continue to include
address records at the zone apex for legacy clients.<a class="pilcrow" href="#appendix-C.2-2">¶</a></p>
</section>
</div>
<div id="differences-from-the-proposed-aname-record">
<section id="appendix-C.3">
        <h3 id="name-differences-from-the-propose">
<a class="section-number selfRef" href="#appendix-C.3">C.3. </a><a class="section-name selfRef" href="#name-differences-from-the-propose">Differences from the Proposed ANAME Record</a>
        </h3>
<p id="appendix-C.3-1">Unlike <span>[<a class="cite xref" href="#I-D.ietf-dnsop-aname">ANAME-DNS-RR</a>]</span>, this approach is extensible to
cover Alt-Svc and Encrypted ClientHello use cases.  This approach also does not
require any changes or special handling on either authoritative or
primary servers, beyond optionally returning in-bailiwick additional records.<a class="pilcrow" href="#appendix-C.3-1">¶</a></p>
<p id="appendix-C.3-2">Like that proposal, this addresses the zone-apex CNAME challenge
for clients that implement this.<a class="pilcrow" href="#appendix-C.3-2">¶</a></p>
<p id="appendix-C.3-3">However, with this SVCB proposal, it remains necessary to continue
to include address records at the zone apex for legacy clients.
If deployment of this standard is successful, the number of legacy clients
will fall over time.  As the number of legacy clients declines, the operational
effort required to serve these users without the benefit of SVCB indirection
should fall.  Server operators can easily observe how much traffic reaches this
legacy endpoint and may remove the apex's address records if the observed legacy
traffic has fallen to negligible levels.<a class="pilcrow" href="#appendix-C.3-3">¶</a></p>
</section>
</div>
<div id="comparison-with-separate-rr-types-for-aliasmode-and-servicemode">
<section id="appendix-C.4">
        <h3 id="name-comparison-with-separate-rr">
<a class="section-number selfRef" href="#appendix-C.4">C.4. </a><a class="section-name selfRef" href="#name-comparison-with-separate-rr">Comparison with Separate RR Types for AliasMode and ServiceMode</a>
        </h3>
<p id="appendix-C.4-1">Abstractly, functions of AliasMode and ServiceMode are independent,
so it might be tempting to specify them as separate RR types.  However,
this would result in serious performance impairment, because clients
cannot rely on their recursive resolver to follow SVCB aliases (unlike
CNAME).  Thus, clients would have to issue queries for both RR types
in parallel, potentially at each step of the alias chain.  Recursive
resolvers that implement the specification would, upon receipt of a
ServiceMode query, emit both a ServiceMode query and an AliasMode query to
the authoritative DNS server.  Thus, splitting the RR type would double, or in
some cases triple, the load on clients and servers, and would not
reduce implementation complexity.<a class="pilcrow" href="#appendix-C.4-1">¶</a></p>
</section>
</div>
</section>
</div>
<div id="test-vectors">
<section id="appendix-D">
      <h2 id="name-test-vectors">
<a class="section-number selfRef" href="#appendix-D">Appendix D. </a><a class="section-name selfRef" href="#name-test-vectors">Test Vectors</a>
      </h2>
<p id="appendix-D-1">These test vectors only contain the RDATA portion of SVCB/HTTPS records in
presentation format, generic format <span>[<a class="cite xref" href="#RFC3597">RFC3597</a>]</span>, and wire format. The wire
format uses hexadecimal (\xNN) for each non-ASCII byte. As the wire format is
long, it is broken into several lines.<a class="pilcrow" href="#appendix-D-1">¶</a></p>
<div id="aliasmode">
<section id="appendix-D.1">
        <h3 id="name-aliasmode-3">
<a class="section-number selfRef" href="#appendix-D.1">D.1. </a><a class="section-name selfRef" href="#name-aliasmode-3">AliasMode</a>
        </h3>
<span id="name-aliasmode-4"></span><figure id="figure-2">
          <div class="lang-test-vectors sourcecode" id="appendix-D.1-1.1">
<pre>example.com.   HTTPS   0 foo.example.com.

\# 19 (
00 00                                              ; priority
03 66 6f 6f 07 65 78 61 6d 70 6c 65 03 63 6f 6d 00 ; target
)

\x00\x00                                           # priority
\x03foo\x07example\x03com\x00                      # target
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-2">Figure 2</a>:
<a class="selfRef" href="#name-aliasmode-4">AliasMode</a>
          </figcaption></figure>
</section>
</div>
<div id="servicemode-1">
<section id="appendix-D.2">
        <h3 id="name-servicemode-3">
<a class="section-number selfRef" href="#appendix-D.2">D.2. </a><a class="section-name selfRef" href="#name-servicemode-3">ServiceMode</a>
        </h3>
<span id="name-targetname-is"></span><figure id="figure-3">
          <div class="lang-test-vectors sourcecode" id="appendix-D.2-1.1">
<pre>example.com.   SVCB   1 .

\# 3 (
00 01      ; priority
00         ; target (root label)
)

\x00\x01   # priority
\x00       # target (root label)
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-3">Figure 3</a>:
<a class="selfRef" href="#name-targetname-is">TargetName Is "."</a>
          </figcaption></figure>
<span id="name-specifies-a-port"></span><figure id="figure-4">
          <div class="lang-test-vectors sourcecode" id="appendix-D.2-2.1">
<pre>example.com.   SVCB   16 foo.example.com. port=53

\# 25 (
00 10                                              ; priority
03 66 6f 6f 07 65 78 61 6d 70 6c 65 03 63 6f 6d 00 ; target
00 03                                              ; key 3
00 02                                              ; length 2
00 35                                              ; value
)

\x00\x10                                           # priority
\x03foo\x07example\x03com\x00                      # target
\x00\x03                                           # key 3
\x00\x02                                           # length 2
\x00\x35                                           # value
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-4">Figure 4</a>:
<a class="selfRef" href="#name-specifies-a-port">Specifies a Port</a>
          </figcaption></figure>
<span id="name-a-generic-key-and-unquoted-"></span><figure id="figure-5">
          <div class="lang-test-vectors sourcecode" id="appendix-D.2-3.1">
<pre>example.com.   SVCB   1 foo.example.com. key667=hello

\# 28 (
00 01                                              ; priority
03 66 6f 6f 07 65 78 61 6d 70 6c 65 03 63 6f 6d 00 ; target
02 9b                                              ; key 667
00 05                                              ; length 5
68 65 6c 6c 6f                                     ; value
)

\x00\x01                                           # priority
\x03foo\x07example\x03com\x00                      # target
\x02\x9b                                           # key 667
\x00\x05                                           # length 5
hello                                              # value
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-5">Figure 5</a>:
<a class="selfRef" href="#name-a-generic-key-and-unquoted-">A Generic Key and Unquoted Value</a>
          </figcaption></figure>
<span id="name-a-generic-key-and-quoted-va"></span><figure id="figure-6">
          <div class="lang-test-vectors sourcecode" id="appendix-D.2-4.1">
<pre>example.com.   SVCB   1 foo.example.com. key667="hello\210qoo"

\# 32 (
00 01                                              ; priority
03 66 6f 6f 07 65 78 61 6d 70 6c 65 03 63 6f 6d 00 ; target
02 9b                                              ; key 667
00 09                                              ; length 9
68 65 6c 6c 6f d2 71 6f 6f                         ; value
)

\x00\x01                                           # priority
\x03foo\x07example\x03com\x00                      # target
\x02\x9b                                           # key 667
\x00\x09                                           # length 9
hello\xd2qoo                                       # value
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-6">Figure 6</a>:
<a class="selfRef" href="#name-a-generic-key-and-quoted-va">A Generic Key and Quoted Value with a Decimal Escape</a>
          </figcaption></figure>
<span id="name-two-quoted-ipv6-hints"></span><figure id="figure-7">
          <div class="lang-test-vectors sourcecode" id="appendix-D.2-5.1">
<pre>example.com.   SVCB   1 foo.example.com. (
                      ipv6hint="2001:db8::1,2001:db8::53:1"
                      )

\# 55 (
00 01                                              ; priority
03 66 6f 6f 07 65 78 61 6d 70 6c 65 03 63 6f 6d 00 ; target
00 06                                              ; key 6
00 20                                              ; length 32
20 01 0d b8 00 00 00 00 00 00 00 00 00 00 00 01    ; first address
20 01 0d b8 00 00 00 00 00 00 00 00 00 53 00 01    ; second address
)

\x00\x01                                           # priority
\x03foo\x07example\x03com\x00                      # target
\x00\x06                                           # key 6
\x00\x20                                           # length 32
\x20\x01\x0d\xb8\x00\x00\x00\x00
     \x00\x00\x00\x00\x00\x00\x00\x01              # first address
\x20\x01\x0d\xb8\x00\x00\x00\x00
     \x00\x00\x00\x00\x00\x53\x00\x01              # second address
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-7">Figure 7</a>:
<a class="selfRef" href="#name-two-quoted-ipv6-hints">Two Quoted IPv6 Hints</a>
          </figcaption></figure>
<span id="name-an-ipv6-hint-using-the-embe"></span><figure id="figure-8">
          <div class="lang-test-vectors sourcecode" id="appendix-D.2-6.1">
<pre>example.com.   SVCB   1 example.com. (
                        ipv6hint="2001:db8:122:344::192.0.2.33"
                        )
\# 35 (
00 01                                              ; priority
07 65 78 61 6d 70 6c 65 03 63 6f 6d 00             ; target
00 06                                              ; key 6
00 10                                              ; length 16
20 01 0d b8 01 22 03 44 00 00 00 00 c0 00 02 21    ; address
)

\x00\x01                                           # priority
\x07example\x03com\x00                             # target
\x00\x06                                           # key 6
\x00\x10                                           # length 16
\x20\x01\x0d\xb8\x01\x22\x03\x44
     \x00\x00\x00\x00\xc0\x00\x02\x21              # address
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-8">Figure 8</a>:
<a class="selfRef" href="#name-an-ipv6-hint-using-the-embe">An IPv6 Hint Using the Embedded IPv4 Syntax</a>
          </figcaption></figure>
<span id="name-svcparamkey-ordering-is-arb"></span><figure id="figure-9">
          <div class="lang-test-vectors sourcecode" id="appendix-D.2-7.1">
<pre>example.com.   SVCB   16 foo.example.org. (
                      alpn=h2,h3-19 mandatory=ipv4hint,alpn
                      ipv4hint=192.0.2.1
                      )

\# 48 (
00 10                                              ; priority
03 66 6f 6f 07 65 78 61 6d 70 6c 65 03 6f 72 67 00 ; target
00 00                                              ; key 0
00 04                                              ; param length 4
00 01                                              ; value: key 1
00 04                                              ; value: key 4
00 01                                              ; key 1
00 09                                              ; param length 9
02                                                 ; alpn length 2
68 32                                              ; alpn value
05                                                 ; alpn length 5
68 33 2d 31 39                                     ; alpn value
00 04                                              ; key 4
00 04                                              ; param length 4
c0 00 02 01                                        ; param value
)

\x00\x10                                           # priority
\x03foo\x07example\x03org\x00                      # target
\x00\x00                                           # key 0
\x00\x04                                           # param length 4
\x00\x01                                           # value: key 1
\x00\x04                                           # value: key 4
\x00\x01                                           # key 1
\x00\x09                                           # param length 9
\x02                                               # alpn length 2
h2                                                 # alpn value
\x05                                               # alpn length 5
h3-19                                              # alpn value
\x00\x04                                           # key 4
\x00\x04                                           # param length 4
\xc0\x00\x02\x01                                   # param value
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-9">Figure 9</a>:
<a class="selfRef" href="#name-svcparamkey-ordering-is-arb">SvcParamKey Ordering Is Arbitrary in Presentation Format but Sorted in Wire Format</a>
          </figcaption></figure>
<span id="name-an-alpn-value-with-an-escap"></span><figure id="figure-10">
          <div class="lang-test-vectors sourcecode" id="appendix-D.2-8.1">
<pre>example.com.   SVCB   16 foo.example.org. alpn="f\\\\oo\\,bar,h2"
example.com.   SVCB   16 foo.example.org. alpn=f\\\092oo\092,bar,h2

\# 35 (
00 10                                              ; priority
03 66 6f 6f 07 65 78 61 6d 70 6c 65 03 6f 72 67 00 ; target
00 01                                              ; key 1
00 0c                                              ; param length 12
08                                                 ; alpn length 8
66 5c 6f 6f 2c 62 61 72                            ; alpn value
02                                                 ; alpn length 2
68 32                                              ; alpn value
)

\x00\x10                                           # priority
\x03foo\x07example\x03org\x00                      # target
\x00\x01                                           # key 1
\x00\x0c                                           # param length 12
\x08                                               # alpn length 8
f\oo,bar                                           # alpn value
\x02                                               # alpn length 2
h2                                                 # alpn value
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-10">Figure 10</a>:
<a class="selfRef" href="#name-an-alpn-value-with-an-escap">An "alpn" Value with an Escaped Comma and an Escaped Backslash in Two Presentation Formats</a>
          </figcaption></figure>
</section>
</div>
<div id="failure-cases">
<section id="appendix-D.3">
        <h3 id="name-failure-cases">
<a class="section-number selfRef" href="#appendix-D.3">D.3. </a><a class="section-name selfRef" href="#name-failure-cases">Failure Cases</a>
        </h3>
<p id="appendix-D.3-1">This subsection contains test vectors that are not
compliant with this document. The various reasons for non-compliance
are explained with each example.<a class="pilcrow" href="#appendix-D.3-1">¶</a></p>
<span id="name-multiple-instances-of-the-s"></span><figure id="figure-11">
          <div class="lang-dns-rr sourcecode" id="appendix-D.3-2.1">
<pre>example.com.   SVCB   1 foo.example.com. (
                       key123=abc key123=def
                       )
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-11">Figure 11</a>:
<a class="selfRef" href="#name-multiple-instances-of-the-s">Multiple Instances of the Same SvcParamKey</a>
          </figcaption></figure>
<span id="name-missing-svcparamvalues-that"></span><figure id="figure-12">
          <div class="lang-dns-rr sourcecode" id="appendix-D.3-3.1">
<pre>example.com.   SVCB   1 foo.example.com. mandatory
example.com.   SVCB   1 foo.example.com. alpn
example.com.   SVCB   1 foo.example.com. port
example.com.   SVCB   1 foo.example.com. ipv4hint
example.com.   SVCB   1 foo.example.com. ipv6hint
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-12">Figure 12</a>:
<a class="selfRef" href="#name-missing-svcparamvalues-that">Missing SvcParamValues That Must Be Non-Empty</a>
          </figcaption></figure>
<span id="name-the-no-default-alpn-svcpara"></span><figure id="figure-13">
          <div class="lang-dns-rr sourcecode" id="appendix-D.3-4.1">
<pre>example.com.   SVCB   1 foo.example.com. no-default-alpn=abc
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-13">Figure 13</a>:
<a class="selfRef" href="#name-the-no-default-alpn-svcpara">The "no-default-alpn" SvcParamKey Value Must Be Empty</a>
          </figcaption></figure>
<span id="name-a-mandatory-svcparam-is-mis"></span><figure id="figure-14">
          <div class="lang-dns-rr sourcecode" id="appendix-D.3-5.1">
<pre>example.com.   SVCB   1 foo.example.com. mandatory=key123
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-14">Figure 14</a>:
<a class="selfRef" href="#name-a-mandatory-svcparam-is-mis">A Mandatory SvcParam Is Missing</a>
          </figcaption></figure>
<span id="name-the-mandatory-svcparamkey-m"></span><figure id="figure-15">
          <div class="lang-dns-rr sourcecode" id="appendix-D.3-6.1">
<pre>example.com.   SVCB   1 foo.example.com. mandatory=mandatory
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-15">Figure 15</a>:
<a class="selfRef" href="#name-the-mandatory-svcparamkey-m">The "mandatory" SvcParamKey Must Not Be Included in the Mandatory List</a>
          </figcaption></figure>
<span id="name-multiple-instances-of-the-sa"></span><figure id="figure-16">
          <div class="lang-dns-rr sourcecode" id="appendix-D.3-7.1">
<pre>example.com.   SVCB   1 foo.example.com. (
                      mandatory=key123,key123 key123=abc
                      )
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-16">Figure 16</a>:
<a class="selfRef" href="#name-multiple-instances-of-the-sa">Multiple Instances of the Same SvcParamKey in the Mandatory List</a>
          </figcaption></figure>
</section>
</div>
</section>
</div>
<div id="acknowledgments-and-related-proposals">
<section id="appendix-E">
      <h2 id="name-acknowledgments-and-related">
<a class="section-name selfRef" href="#name-acknowledgments-and-related">Acknowledgments and Related Proposals</a>
      </h2>
<p id="appendix-E-1">Over the years, IETF participants have proposed a wide range of solutions to
the "CNAME at the zone apex" challenge, including
<span>[<a class="cite xref" href="#I-D.bellis-dnsop-http-record">HTTP-DNS-RR</a>]</span>,
<span>[<a class="cite xref" href="#I-D.ietf-dnsop-aname">ANAME-DNS-RR</a>]</span>, and others.  The authors are grateful
for their work to elucidate the problem and identify promising strategies to
address it, some of which are reflected in this document.<a class="pilcrow" href="#appendix-E-1">¶</a></p>
<p id="appendix-E-2">Thank you to <span class="contact-name">Ian Swett</span>, <span class="contact-name">Ralf Weber</span>, <span class="contact-name">Jon Reed</span>,
<span class="contact-name">Martin Thomson</span>, <span class="contact-name">Lucas Pardue</span>, <span class="contact-name">Ilari Liusvaara</span>,
<span class="contact-name">Tim Wicinski</span>, <span class="contact-name">Tommy Pauly</span>, <span class="contact-name">Chris Wood</span>, <span class="contact-name">David Benjamin</span>,
<span class="contact-name">Mark Andrews</span>, <span class="contact-name">Emily Stark</span>, <span class="contact-name">Eric Orth</span>, <span class="contact-name">Kyle Rose</span>,
<span class="contact-name">Craig Taylor</span>, <span class="contact-name">Dan McArdle</span>, <span class="contact-name">Brian Dickson</span>,
<span class="contact-name">Willem Toorop</span>, <span class="contact-name">Pieter Lexis</span>, <span class="contact-name">Puneet Sood</span>,
<span class="contact-name">Olivier Poitrey</span>, <span class="contact-name">Mashooq Muhaimen</span>,
<span class="contact-name">Tom Carpay</span>, and many others for their feedback
and suggestions on this document.<a class="pilcrow" href="#appendix-E-2">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-F">
      <h2 id="name-authors-addresses">
<a class="section-name selfRef" href="#name-authors-addresses">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Ben Schwartz</span></div>
<div class="left" dir="auto"><span class="org">Meta Platforms, Inc.</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:ietf@bemasc.net">ietf@bemasc.net</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Mike Bishop</span></div>
<div class="left" dir="auto"><span class="org">Akamai Technologies</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:mbishop@evequefou.be">mbishop@evequefou.be</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Erik Nygren</span></div>
<div class="left" dir="auto"><span class="org">Akamai Technologies</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:erik+ietf@nygren.org">erik+ietf@nygren.org</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>


</body></html>