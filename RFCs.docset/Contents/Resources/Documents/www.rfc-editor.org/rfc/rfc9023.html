<!DOCTYPE html>
<html class="RFC" lang="en"><head>
<meta charset="utf-8"/>
<meta content="Common,Latin" name="scripts"/>
<meta content="initial-scale=1.0" name="viewport"/>
<title>RFC 9023: Deterministic Networking (DetNet) Data Plane: IP over IEEE 802.1 Time‑Sensitive Networking (TSN)</title>
<meta content="Balázs Varga" name="author"/>
<meta content="János Farkas" name="author"/>
<meta content="Andrew G. Malis" name="author"/>
<meta content="Stewart Bryant" name="author"/>
<meta content="
       
     This document specifies the Deterministic Networking IP data plane when
     operating over a Time-Sensitive Networking (TSN) sub-network. This
     document does not define new procedures or processes.  Whenever this
     document makes statements or recommendations, these are taken from
     normative text in the referenced RFCs.
       
    " name="description"/>
<meta content="xml2rfc 3.8.0" name="generator"/>
<meta content="sub-network" name="keyword"/>
<meta content="flow mapping" name="keyword"/>
<meta content="9023" name="rfc.number"/>
<!-- Generator version information:
  xml2rfc 3.8.0
    Python 3.6.10
    appdirs 1.4.4
    ConfigArgParse 1.2.3
    google-i18n-address 2.3.5
    html5lib 1.0.1
    intervaltree 3.0.2
    Jinja2 2.11.2
    kitchen 1.2.6
    lxml 4.4.2
    pycairo 1.19.0
    pycountry 19.8.18
    pyflakes 2.1.1
    PyYAML 5.3.1
    requests 2.22.0
    setuptools 40.6.2
    six 1.14.0
    WeasyPrint 51
-->
<link href="rfc9023.xml" rel="alternate" type="application/rfc+xml"/>
<link href="#copyright" rel="license"/>
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: avoid-page;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css"/>
<link href="https://dx.doi.org/10.17487/rfc9023" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  <link href="https://datatracker.ietf.org/doc/draft-ietf-detnet-ip-over-tsn-07" rel="prev"/>
  </head>
<body>
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 9023</td>
<td class="center">DetNet IP over TSN</td>
<td class="right">June 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Varga, et al.</td>
<td class="center">Informational</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div class="document-information" id="external-metadata"></div>
<div class="document-information" id="internal-metadata">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Internet Engineering Task Force (IETF)</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a class="eref" href="https://www.rfc-editor.org/rfc/rfc9023">9023</a></dd>
<dt class="label-category">Category:</dt>
<dd class="category">Informational</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time class="published" datetime="2021-06">June 2021</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">B. Varga, <span class="editor">Ed.</span>
</div>
<div class="org">Ericsson</div>
</div>
<div class="author">
      <div class="author-name">J. Farkas</div>
<div class="org">Ericsson</div>
</div>
<div class="author">
      <div class="author-name">A. Malis</div>
<div class="org">Malis Consulting</div>
</div>
<div class="author">
      <div class="author-name">S. Bryant</div>
<div class="org">Futurewei Technologies</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 9023</h1>
<h1 id="title">Deterministic Networking (DetNet) Data Plane: IP over IEEE 802.1 Time‑Sensitive Networking (TSN)</h1>
<section id="section-abstract">
      <h2 id="abstract"><a class="selfRef" href="#abstract">Abstract</a></h2>
<p id="section-abstract-1">
     This document specifies the Deterministic Networking IP data plane when
     operating over a Time-Sensitive Networking (TSN) sub-network. This
     document does not define new procedures or processes.  Whenever this
     document makes statements or recommendations, these are taken from
     normative text in the referenced RFCs.<a class="pilcrow" href="#section-abstract-1">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a class="section-name selfRef" href="#name-status-of-this-memo">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This document is not an Internet Standards Track specification; it is
            published for informational purposes.<a class="pilcrow" href="#section-boilerplate.1-1">¶</a></p>
<p id="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by the
            Internet Engineering Steering Group (IESG).  Not all documents
            approved by the IESG are candidates for any level of Internet
            Standard; see Section 2 of RFC 7841.<a class="pilcrow" href="#section-boilerplate.1-2">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc9023">https://www.rfc-editor.org/info/rfc9023</a></span>.<a class="pilcrow" href="#section-boilerplate.1-3">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a class="section-name selfRef" href="#name-copyright-notice">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a class="pilcrow" href="#section-boilerplate.2-1">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a class="pilcrow" href="#section-boilerplate.2-2">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a class="toplink" href="#" onclick="scroll(0,0)">▲</a><h2 id="name-table-of-contents">
<a class="section-name selfRef" href="#name-table-of-contents">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="ulEmpty toc compact">
<li class="ulEmpty toc compact" id="section-toc.1-1.1">
            <p class="keepWithNext" id="section-toc.1-1.1.1"><a class="xref" href="#section-1">1</a>.  <a class="xref" href="#name-introduction">Introduction</a></p>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a class="xref" href="#section-2">2</a>.  <a class="xref" href="#name-terminology">Terminology</a></p>
<ul class="ulEmpty toc compact">
<li class="ulEmpty toc compact" id="section-toc.1-1.2.2.1">
                <p class="keepWithNext" id="section-toc.1-1.2.2.1.1"><a class="xref" href="#section-2.1">2.1</a>.  <a class="xref" href="#name-terms-used-in-this-document">Terms Used in This Document</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.2.2.2">
                <p class="keepWithNext" id="section-toc.1-1.2.2.2.1"><a class="xref" href="#section-2.2">2.2</a>.  <a class="xref" href="#name-abbreviations">Abbreviations</a></p>
</li>
            </ul>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a class="xref" href="#section-3">3</a>.  <a class="xref" href="#name-detnet-ip-data-plane-overvi">DetNet IP Data Plane Overview</a></p>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a class="xref" href="#section-4">4</a>.  <a class="xref" href="#name-detnet-ip-flows-over-an-iee">DetNet IP Flows over an IEEE 802.1 TSN Sub-network</a></p>
<ul class="ulEmpty toc compact">
<li class="ulEmpty toc compact" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a class="xref" href="#section-4.1">4.1</a>.  <a class="xref" href="#name-functions-for-detnet-flow-t">Functions for DetNet Flow to TSN Stream Mapping</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a class="xref" href="#section-4.2">4.2</a>.  <a class="xref" href="#name-tsn-requirements-of-ip-detn">TSN Requirements of IP DetNet Nodes</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a class="xref" href="#section-4.3">4.3</a>.  <a class="xref" href="#name-service-protection-within-t">Service Protection within the TSN Sub-network</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.4.2.4">
                <p id="section-toc.1-1.4.2.4.1"><a class="xref" href="#section-4.4">4.4</a>.  <a class="xref" href="#name-aggregation-during-detnet-f">Aggregation during DetNet Flow to TSN Stream Mapping</a></p>
</li>
            </ul>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a class="xref" href="#section-5">5</a>.  <a class="xref" href="#name-management-and-control-impl">Management and Control Implications</a></p>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a class="xref" href="#section-6">6</a>.  <a class="xref" href="#name-security-considerations">Security Considerations</a></p>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a class="xref" href="#section-7">7</a>.  <a class="xref" href="#name-iana-considerations">IANA Considerations</a></p>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a class="xref" href="#section-8">8</a>.  <a class="xref" href="#name-references">References</a></p>
<ul class="ulEmpty toc compact">
<li class="ulEmpty toc compact" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a class="xref" href="#section-8.1">8.1</a>.  <a class="xref" href="#name-normative-references">Normative References</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a class="xref" href="#section-8.2">8.2</a>.  <a class="xref" href="#name-informative-references">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a class="xref" href="#section-appendix.a"></a><a class="xref" href="#name-acknowledgements">Acknowledgements</a></p>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a class="xref" href="#section-appendix.b"></a><a class="xref" href="#name-authors-addresses">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="sec_intro">
<section id="section-1">
      <h2 id="name-introduction">
<a class="section-number selfRef" href="#section-1">1. </a><a class="section-name selfRef" href="#name-introduction">Introduction</a>
      </h2>
<p id="section-1-1">
        Deterministic Networking (DetNet) is a service that can be offered by a network to DetNet flows.
        DetNet provides these flows extremely low packet-loss rates and assured maximum end-to-end
        delivery latency.  General background and concepts of DetNet can
        be found in the DetNet Architecture <span>[<a class="xref" href="#RFC8655">RFC8655</a>]</span>.<a class="pilcrow" href="#section-1-1">¶</a></p>
<p id="section-1-2">
        <span>[<a class="xref" href="#RFC8939">RFC8939</a>]</span> specifies the DetNet data plane operation for IP
        hosts and routers that provide DetNet service to IP-encapsulated
        data.  This document focuses on the scenario where DetNet IP nodes
 are interconnected by a Time-Sensitive Networking (TSN) sub-network.<a class="pilcrow" href="#section-1-2">¶</a></p>
<p id="section-1-3">
        The DetNet Architecture decomposes the DetNet-related data plane
        functions into two sub-layers: a service sub-layer and a forwarding
        sub-layer.  The service sub-layer is used to provide DetNet service
        protection and reordering. The forwarding sub-layer is used to provide
        congestion protection (low loss, assured latency, and limited
        reordering). As described in <span>[<a class="xref" href="#RFC8939">RFC8939</a>]</span>, no DetNet-specific headers are added to support
        DetNet IP flows. So, only the forwarding sub-layer functions can be
        supported inside the DetNet IP domain. 


Service protection can be
        provided on a per-sub-network basis as shown here for the IEEE 802.1
        TSN sub-network scenario.<a class="pilcrow" href="#section-1-3">¶</a></p>
</section>
</div>
<section id="section-2">
      <h2 id="name-terminology">
<a class="section-number selfRef" href="#section-2">2. </a><a class="section-name selfRef" href="#name-terminology">Terminology</a>
      </h2>
<section id="section-2.1">
        <h3 id="name-terms-used-in-this-document">
<a class="section-number selfRef" href="#section-2.1">2.1. </a><a class="section-name selfRef" href="#name-terms-used-in-this-document">Terms Used in This Document</a>
        </h3>
<p id="section-2.1-1">
          This document uses the terminology and concepts established in the
          DetNet Architecture <span>[<a class="xref" href="#RFC8655">RFC8655</a>]</span>.
          TSN-specific terms are defined by the TSN Task Group of the IEEE 802.1 Working
          Group.  The reader is assumed to be familiar with these documents
          and their terminology.<a class="pilcrow" href="#section-2.1-1">¶</a></p>
</section>
<section id="section-2.2">
        <h3 id="name-abbreviations">
<a class="section-number selfRef" href="#section-2.2">2.2. </a><a class="section-name selfRef" href="#name-abbreviations">Abbreviations</a>
        </h3>
<p id="section-2.2-1">
          The following abbreviations are used in this document:<a class="pilcrow" href="#section-2.2-1">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2.2-2">
          <dt id="section-2.2-2.1">DetNet</dt>
          <dd id="section-2.2-2.2" style="margin-left: 7.0em">Deterministic Networking<a class="pilcrow" href="#section-2.2-2.2">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.2-2.3">FRER</dt>
          <dd id="section-2.2-2.4" style="margin-left: 7.0em">Frame Replication and Elimination for Redundancy (TSN
          function)<a class="pilcrow" href="#section-2.2-2.4">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.2-2.5">L2</dt>
          <dd id="section-2.2-2.6" style="margin-left: 7.0em">Layer 2<a class="pilcrow" href="#section-2.2-2.6">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.2-2.7">L3</dt>
          <dd id="section-2.2-2.8" style="margin-left: 7.0em">Layer 3<a class="pilcrow" href="#section-2.2-2.8">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.2-2.9">TSN</dt>
          <dd id="section-2.2-2.10" style="margin-left: 7.0em">Time-Sensitive Networking; TSN is a Task Group of the IEEE
            802.1 Working Group.<a class="pilcrow" href="#section-2.2-2.10">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</section>
<div id="sec_dt_dp">
<section id="section-3">
      <h2 id="name-detnet-ip-data-plane-overvi">
<a class="section-number selfRef" href="#section-3">3. </a><a class="section-name selfRef" href="#name-detnet-ip-data-plane-overvi">DetNet IP Data Plane Overview</a>
      </h2>
<p id="section-3-1">
        <span>[<a class="xref" href="#RFC8939">RFC8939</a>]</span> describes how IP is used by
        DetNet nodes, i.e., hosts and routers, to identify DetNet flows and
        provide a DetNet service. From a data plane perspective, an end-to-end
        IP model is followed.  DetNet uses flow identification based on
        a "6-tuple", where "6-tuple" refers to information carried in IP- and
        higher-layer protocol headers as defined in <span>[<a class="xref" href="#RFC8939">RFC8939</a>]</span>.<a class="pilcrow" href="#section-3-1">¶</a></p>
<p id="section-3-2">
        DetNet flow aggregation may be enabled via the use of
        wildcards, masks, prefixes, and ranges. IP tunnels may also be
        used to support flow aggregation. In these cases, it is
        expected that DetNet-aware intermediate nodes will provide
        DetNet service assurance on the aggregate through resource
        allocation and congestion control mechanisms.<a class="pilcrow" href="#section-3-2">¶</a></p>
<p id="section-3-3">
        Congestion protection, latency control, and the resource allocation
        (queuing, policing, and shaping) are supported using the underlying
        link / sub-net-specific mechanisms.  Service protections
        (packet-replication and packet-elimination functions) are not provided
        at the IP DetNet layer end to end due to the lack of unified
        end-to-end sequencing information that would be available for
        intermediate nodes.  However, such service protection can be provided
        per underlying L2 link and per sub-network.<a class="pilcrow" href="#section-3-3">¶</a></p>
<p id="section-3-4">
   DetNet routers ensure that DetNet service requirements are met per hop by
   allocating local resources, by both receiving and transmitting, and by
   mapping the service requirements of each flow to appropriate sub-network
   mechanisms. Such mappings are sub-network technology specific.  DetNet
   nodes interconnected by a TSN sub-network are the primary focus of this
   document. The mapping of DetNet IP flows to TSN Streams and TSN protection
   mechanisms are covered in <a class="xref" href="#mapping-tsn">Section 4</a>.<a class="pilcrow" href="#section-3-4">¶</a></p>
</section>
</div>
<div id="mapping-tsn">
<section id="section-4">
      <h2 id="name-detnet-ip-flows-over-an-iee">
<a class="section-number selfRef" href="#section-4">4. </a><a class="section-name selfRef" href="#name-detnet-ip-flows-over-an-iee">DetNet IP Flows over an IEEE 802.1 TSN Sub-network</a>
      </h2>
<p id="section-4-1">
        This section covers how DetNet IP flows operate over an IEEE 802.1 TSN
        sub-network.  <a class="xref" href="#fig_ip_detnet_to_tsn">Figure 1</a>
        illustrates such a scenario where two IP (DetNet) nodes are
        interconnected by a TSN sub-network.  Dotted lines around the Service
        components of the IP (DetNet) nodes indicate that they are DetNet
        service aware but do not perform any DetNet service sub-layer
        function.  Node-1 is single homed and Node-2 is dual homed to the TSN
        sub-network, and they are treated as Talker or Listener inside the TSN
        sub-network. Note that from the TSN perspective, dual-homed
        characteristics of Talker or Listener nodes are transparent to the IP
        Layer.<a class="pilcrow" href="#section-4-1">¶</a></p>
<span id="name-detnet-enabled-ip-network-o"></span><div id="fig_ip_detnet_to_tsn">
<figure id="figure-1">
        <div class="artwork art-text alignLeft" id="section-4-2.1">
<pre>    IP (DetNet)                   IP (DetNet)
      Node-1                        Node-2

   ............                  ............
&lt;--: Service  :-- DetNet flow ---: Service  :--&gt;
   +----------+                  +----------+
   |Forwarding|                  |Forwarding|
   +--------.-+    &lt;-TSN Str-&gt;   +-.-----.--+
             \      ,-------.     /     /
              +----[ TSN Sub-]---+     /
                   [ Network ]--------+
                    `-------'
&lt;----------------- DetNet IP -----------------&gt;
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-1">Figure 1</a>:
<a class="selfRef" href="#name-detnet-enabled-ip-network-o">DetNet-Enabled IP Network over a TSN Sub-network</a>
        </figcaption></figure>
</div>
<p id="section-4-3">
        At the time of this writing, 
 the Time-Sensitive Networking (TSN) Task Group of the IEEE 802.1
        Working Group have defined (and are defining) a number of
        amendments to <span>[<a class="xref" href="#IEEE8021Q">IEEE8021Q</a>]</span> that
        provide zero congestion loss and bounded latency in bridged
        networks. Furthermore, <span>[<a class="xref" href="#IEEE8021CB">IEEE8021CB</a>]</span>
 defines frame replication and elimination
        functions for reliability that should prove both compatible with
        and useful to DetNet networks.  All these functions have to
        identify flows that require TSN treatment.<a class="pilcrow" href="#section-4-3">¶</a></p>
<p id="section-4-4">
        TSN capabilities of the TSN sub-network are made available for IP
        (DetNet) flows via the protocol interworking function described in Annex C.5 of
        <span>[<a class="xref" href="#IEEE8021CB">IEEE8021CB</a>]</span>. For example,
        applied on the TSN edge port it can convert an ingress unicast 
 IP (DetNet) flow to use a specific L2 multicast destination 
 Media Access Control (MAC) address and a VLAN in order to forward the packet through a 
 specific path inside the bridged network. 
 A similar interworking function pair at the 
 other end of the TSN sub-network would restore the packet to its 
 original L2 destination MAC address and VLAN.<a class="pilcrow" href="#section-4-4">¶</a></p>
<p id="section-4-5">
        Placement of TSN functions depends on the TSN capabilities of
        nodes. IP (DetNet) nodes may or may not support TSN functions. For a
        given TSN Stream (i.e., a mapped DetNet flow), an IP (DetNet) node is
        treated as a Talker or a Listener inside the TSN sub-network.<a class="pilcrow" href="#section-4-5">¶</a></p>
<section id="section-4.1">
        <h3 id="name-functions-for-detnet-flow-t">
<a class="section-number selfRef" href="#section-4.1">4.1. </a><a class="section-name selfRef" href="#name-functions-for-detnet-flow-t">Functions for DetNet Flow to TSN Stream Mapping</a>
        </h3>
<p id="section-4.1-1">
              Mapping of a DetNet IP flow to a TSN Stream is provided via the
              combination of a passive and an active Stream identification
              function that operate at the frame level (Layer 2). The passive
              Stream identification function is used to catch the 6-tuple of a
              DetNet IP flow, and the active Stream identification function is
              used to modify the Ethernet header according to the ID of the
              mapped TSN Stream.<a class="pilcrow" href="#section-4.1-1">¶</a></p>
<p id="section-4.1-2">
   Clause 6.7 of <span>[<a class="xref" href="#IEEE8021CB">IEEE8021CB</a>]</span> defines an IP Stream
   identification function that can be used as a
   passive function for IP DetNet flows using UDP or
   TCP. Clause 6.8 of <span>[<a class="xref" href="#IEEEP8021CBdb">IEEEP8021CBdb</a>]</span> defines a Mask-and-Match Stream
   identification function that can be used as a
   passive function for any IP DetNet flows.<a class="pilcrow" href="#section-4.1-2">¶</a></p>
<p id="section-4.1-3">
   Clause 6.6 of <span>[<a class="xref" href="#IEEE8021CB">IEEE8021CB</a>]</span> defines an Active Destination MAC
   and VLAN Stream identification function that can
   replace some Ethernet header fields: (1) the
   destination MAC address, (2) the VLAN-ID, and (3)
   priority parameters with alternate
   values. Replacement is provided for the frame passed
   down the stack from the upper layers or up the stack
   from the lower layers.<a class="pilcrow" href="#section-4.1-3">¶</a></p>
<p id="section-4.1-4">
              Active Destination MAC and VLAN Stream identification can be
              used within a Talker to set flow identity or within a Listener to
              recover the original addressing information. It can be used also
              in a TSN bridge that is providing translation as a proxy service
              for an End System.<a class="pilcrow" href="#section-4.1-4">¶</a></p>
</section>
<section id="section-4.2">
        <h3 id="name-tsn-requirements-of-ip-detn">
<a class="section-number selfRef" href="#section-4.2">4.2. </a><a class="section-name selfRef" href="#name-tsn-requirements-of-ip-detn">TSN Requirements of IP DetNet Nodes</a>
        </h3>
<p id="section-4.2-1">
              This section covers the required behavior of a TSN-aware DetNet
              node using a TSN sub-network. The implementation of TSN
              packet-processing functions must be compliant with the relevant
              IEEE 802.1 standards.<a class="pilcrow" href="#section-4.2-1">¶</a></p>
<p id="section-4.2-2">
              From the TSN sub-network perspective, DetNet IP nodes are treated
              as a Talker or Listener that may be (1) TSN unaware or (2)
              TSN aware.<a class="pilcrow" href="#section-4.2-2">¶</a></p>
<p id="section-4.2-3">
              In cases of TSN-unaware IP DetNet nodes, the TSN relay nodes
              within the TSN sub-network must modify the Ethernet
              encapsulation of the DetNet IP flow (e.g., MAC translation,
              VLAN-ID setting, sequence number addition, etc.) to allow proper
              TSN-specific handling inside the sub-network.  There are no
              requirements defined for TSN-unaware IP DetNet nodes in this
              document.<a class="pilcrow" href="#section-4.2-3">¶</a></p>
<p id="section-4.2-4">
              IP (DetNet) nodes being TSN aware can be treated as a
              combination of a TSN-unaware Talker/Listener and a TSN relay, as
              shown in <a class="xref" href="#fig_ip_with_tsn">Figure 2</a>.  In
              such cases, the IP (DetNet) node must provide the TSN
              sub-network-specific Ethernet encapsulation over the link(s)
              towards the sub-network.<a class="pilcrow" href="#section-4.2-4">¶</a></p>
<span id="name-ip-detnet-node-with-tsn-fun"></span><div id="fig_ip_with_tsn">
<figure id="figure-2">
          <div class="artwork art-text alignLeft" id="section-4.2-5.1">
<pre>               IP (DetNet)
                  Node
   &lt;----------------------------------&gt;

   ............
&lt;--: Service  :-- DetNet flow ------------------
   +----------+
   |Forwarding|
   +----------+    +---------------+
   |    L2    |    | L2 Relay with |&lt;--- TSN ---
   |          |    | TSN function  |    Stream
   +-----.----+    +--.------.---.-+
          \__________/        \   \______
                               \_________
    TSN-unaware
     Talker /          TSN Bridge
     Listener             Relay
                                       &lt;----- TSN Sub-network -----
   &lt;------- TSN-aware Tlk/Lstn -------&gt;
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-2">Figure 2</a>:
<a class="selfRef" href="#name-ip-detnet-node-with-tsn-fun">IP (DetNet) Node with TSN Functions</a>
          </figcaption></figure>
</div>
<p id="section-4.2-6">
   A TSN-aware IP (DetNet) node implementation must
   support the Stream identification TSN component for
   recognizing flows.<a class="pilcrow" href="#section-4.2-6">¶</a></p>
<p id="section-4.2-7">
              A Stream identification component must be able to instantiate
              the following: (1) Active Destination MAC and VLAN Stream
              identification, (2) IP Stream identification, (3) Mask-and-Match
              Stream identification, and (4) the related managed objects in
              Clause 9 of <span>[<a class="xref" href="#IEEE8021CB">IEEE8021CB</a>]</span> and
              <span>[<a class="xref" href="#IEEEP8021CBdb">IEEEP8021CBdb</a>]</span>.<a class="pilcrow" href="#section-4.2-7">¶</a></p>
<p id="section-4.2-8">

   A TSN-aware IP (DetNet) node implementation must support the 
   Sequencing function and the Sequence encode/decode function as 
   defined in Clauses 7.4 and 7.6 of <span>[<a class="xref" href="#IEEE8021CB">IEEE8021CB</a>]</span> if FRER 
   is used inside the TSN sub-network.<a class="pilcrow" href="#section-4.2-8">¶</a></p>
<p id="section-4.2-9">
              The Sequence encode/decode function must support the Redundancy
              tag (R-TAG) format as per Clause 7.8 of <span>[<a class="xref" href="#IEEE8021CB">IEEE8021CB</a>]</span>.<a class="pilcrow" href="#section-4.2-9">¶</a></p>
<p id="section-4.2-10">
   A TSN-aware IP (DetNet) node implementation must support the 
   Stream splitting 
   function and the Individual recovery function as defined in Clauses 7.7 and 7.5 of
   <span>[<a class="xref" href="#IEEE8021CB">IEEE8021CB</a>]</span> when the node is 
   a replication or elimination point for FRER.<a class="pilcrow" href="#section-4.2-10">¶</a></p>
</section>
<section id="section-4.3">
        <h3 id="name-service-protection-within-t">
<a class="section-number selfRef" href="#section-4.3">4.3. </a><a class="section-name selfRef" href="#name-service-protection-within-t">Service Protection within the TSN Sub-network</a>
        </h3>
<p id="section-4.3-1">
              TSN Streams supporting DetNet flows may use FRER as defined in Clause 8 of
   <span>[<a class="xref" href="#IEEE8021CB">IEEE8021CB</a>]</span> based on the
              loss service requirements of the TSN Stream, which is derived
              from the DetNet service requirements of the DetNet mapped flow.
              The specific operation of FRER is not modified by the use of
              DetNet and follows <span>[<a class="xref" href="#IEEE8021CB">IEEE8021CB</a>]</span>.<a class="pilcrow" href="#section-4.3-1">¶</a></p>
<p id="section-4.3-2">
              The FRER function and the provided service recovery are available
              only within the TSN sub-network, as the TSN Stream ID and the TSN
              sequence number are not valid outside the sub-network.  An IP
              (DetNet) node represents an L3 border and as such, it terminates
              all related information elements encoded in the L2 frames.<a class="pilcrow" href="#section-4.3-2">¶</a></p>
</section>
<section id="section-4.4">
        <h3 id="name-aggregation-during-detnet-f">
<a class="section-number selfRef" href="#section-4.4">4.4. </a><a class="section-name selfRef" href="#name-aggregation-during-detnet-f">Aggregation during DetNet Flow to TSN Stream Mapping</a>
        </h3>
<p id="section-4.4-1">
 Implementations of this document shall use management
 and control information to map a DetNet flow to a TSN
 Stream. N:1 mapping (aggregating DetNet flows in a
 single TSN Stream) shall be supported. The management
 or control function that provisions flow mapping shall
 ensure that adequate resources are allocated and
 configured to provide proper service requirements of
 the mapped flows.<a class="pilcrow" href="#section-4.4-1">¶</a></p>
</section>
</section>
</div>
<section id="section-5">
      <h2 id="name-management-and-control-impl">
<a class="section-number selfRef" href="#section-5">5. </a><a class="section-name selfRef" href="#name-management-and-control-impl">Management and Control Implications</a>
      </h2>
<p id="section-5-1">
 DetNet flows and TSN Stream-mapping-related information
 are required only for TSN-aware IP (DetNet)
 nodes. From the data plane perspective, there is no
 practical difference based on the origin of
 flow-mapping-related information (management plane or
 control plane).<a class="pilcrow" href="#section-5-1">¶</a></p>
<p id="section-5-2">
            The following summarizes the set of information that is needed to
            configure DetNet IP over TSN:<a class="pilcrow" href="#section-5-2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5-3.1">DetNet-IP-related configuration information according to the
        DetNet role of the DetNet IP node, as per <span>[<a class="xref" href="#RFC8939">RFC8939</a>]</span>.<a class="pilcrow" href="#section-5-3.1">¶</a>
</li>
        <li class="normal" id="section-5-3.2">TSN-related configuration information according to the TSN role of
        the DetNet IP node, as per <span>[<a class="xref" href="#IEEE8021Q">IEEE8021Q</a>]</span>, <span>[<a class="xref" href="#IEEE8021CB">IEEE8021CB</a>]</span>, and
        <span>[<a class="xref" href="#IEEEP8021CBdb">IEEEP8021CBdb</a>]</span>.<a class="pilcrow" href="#section-5-3.2">¶</a>
</li>
        <li class="normal" id="section-5-3.3">Mapping between DetNet IP flow(s) and TSN Stream(s). DetNet IP
        flow identification is summarized in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8939#section-5.1">Section 5.1</a> of [<a class="xref" href="#RFC8939">RFC8939</a>]</span> and includes all wildcards, port
        ranges, and the ability to ignore specific IP fields. Information on
        TSN Stream identification information is defined in <span>[<a class="xref" href="#IEEE8021CB">IEEE8021CB</a>]</span> and <span>[<a class="xref" href="#IEEEP8021CBdb">IEEEP8021CBdb</a>]</span>. Note that managed
        objects for TSN Stream identification can be found in <span>[<a class="xref" href="#IEEEP8021CBcv">IEEEP8021CBcv</a>]</span>.<a class="pilcrow" href="#section-5-3.3">¶</a>
</li>
      </ul>
<p id="section-5-4">
            This information must be provisioned per DetNet flow.<a class="pilcrow" href="#section-5-4">¶</a></p>
<p id="section-5-5">
 Mappings between DetNet and TSN management and control planes are 
 out of scope of this document. Some of the challenges are 
 highlighted below.<a class="pilcrow" href="#section-5-5">¶</a></p>
<p id="section-5-6">
 TSN-aware IP DetNet nodes are members of both the
 DetNet domain and the TSN sub-network.  Within the TSN
 sub-network, the TSN-aware IP (DetNet) node has a
 TSN-aware Talker/Listener role, so TSN-specific
 management and control plane functionalities must be
 implemented.  There are many similarities in the
 management plane techniques used in DetNet and TSN,
 but that is not the case for the control plane
 protocols. For example, RSVP-TE and the Multiple
 Stream Registration Protocol (MSRP) of IEEE 802.1 behave
 differently. Therefore, management and control plane
 design is an important aspect of scenarios where
 mapping between DetNet and TSN is required.<a class="pilcrow" href="#section-5-6">¶</a></p>
<p id="section-5-7">


 In order to use a TSN sub-network between DetNet nodes, DetNet-specific
 information must be converted to TSN sub-network-specific information.


DetNet flow ID and flow-related parameters/requirements must be converted to a
TSN Stream ID and stream-related parameters/requirements. Note that, as the
TSN sub-network is just a portion of the end-to-end DetNet path (i.e., single
hop from an IP perspective), some parameters (e.g., delay) may differ
significantly. Other parameters (like bandwidth) also may have to be tuned due
to the L2 encapsulation used within the TSN sub-network.<a class="pilcrow" href="#section-5-7">¶</a></p>
<p id="section-5-8">
       In some cases, it may be challenging to determine some TSN
       Stream-related information. For example, on a TSN-aware IP
       (DetNet) node that acts as a Talker, it is quite obvious which
       DetNet node is the Listener of the mapped TSN Stream (i.e., the
       IP next-hop). However, it may not be trivial to locate the
       point/interface where that Listener is connected to the TSN
       sub-network. Such attributes may require interaction between
       control and management plane functions and between DetNet and
       TSN domains.<a class="pilcrow" href="#section-5-8">¶</a></p>
<p id="section-5-9">
       Mapping between DetNet flow identifiers and TSN Stream
       identifiers, if not provided explicitly, can be done by a
       TSN-aware IP (DetNet) node locally based on information provided
       for configuration of the TSN Stream identification functions (IP
       Stream identification, Mask-and-Match Stream identification, and
       the active Stream identification function).<a class="pilcrow" href="#section-5-9">¶</a></p>
<p id="section-5-10">
       Triggering the setup/modification of a TSN Stream in the
       TSN sub-network is an example where management and/or
       control plane interactions are required between the DetNet
       and TSN sub-network. TSN-unaware IP (DetNet) nodes make
       such a triggering even more complicated, as they are fully
       unaware of the sub-network and run independently.<a class="pilcrow" href="#section-5-10">¶</a></p>
<p id="section-5-11">
       Configuration of TSN-specific functions (e.g., FRER)
       inside the TSN sub-network is a TSN-domain-specific decision 
   and may not be visible in the DetNet domain.<a class="pilcrow" href="#section-5-11">¶</a></p>
</section>
<section id="section-6">
      <h2 id="name-security-considerations">
<a class="section-number selfRef" href="#section-6">6. </a><a class="section-name selfRef" href="#name-security-considerations">Security Considerations</a>
      </h2>
<p id="section-6-1">
   Security considerations for DetNet are described in detail in
   <span>[<a class="xref" href="#I-D.ietf-detnet-security">DETNET-SECURITY</a>]</span>. General security considerations
      are described in <span>[<a class="xref" href="#RFC8655">RFC8655</a>]</span>. 
   Considerations specific to the DetNet IP data plane are summarized in 
   <span>[<a class="xref" href="#RFC8939">RFC8939</a>]</span>. 

   This section discusses security considerations that are specific 
   to the DetNet IP-over-TSN sub-network scenario.<a class="pilcrow" href="#section-6-1">¶</a></p>
<p id="section-6-2">
   The sub-network between DetNet nodes needs to be subject to
   appropriate confidentiality. Additionally, knowledge of what
   DetNet/TSN services are provided by a sub-network may supply
   information that can be used in a variety of security attacks. The
   ability to modify information exchanges between connected DetNet
   nodes may result in bogus operations. Therefore, it is important
   that the interface between DetNet nodes and the TSN sub-network are
   subject to authorization, authentication, and encryption.<a class="pilcrow" href="#section-6-2">¶</a></p>
<p id="section-6-3">
   The TSN sub-network operates at Layer 2, so various security mechanisms 
   defined by IEEE can be used to secure the connection between the DetNet 
   nodes (e.g., encryption may be provided using MACsec 
   <span>[<a class="xref" href="#IEEE802.1AE-2018">IEEE802.1AE-2018</a>]</span>).<a class="pilcrow" href="#section-6-3">¶</a></p>
</section>
<div id="iana">
<section id="section-7">
      <h2 id="name-iana-considerations">
<a class="section-number selfRef" href="#section-7">7. </a><a class="section-name selfRef" href="#name-iana-considerations">IANA Considerations</a>
      </h2>
<p id="section-7-1">
 This document has no IANA actions.<a class="pilcrow" href="#section-7-1">¶</a></p>
</section>
</div>
<section id="section-8">
      <h2 id="name-references">
<a class="section-number selfRef" href="#section-8">8. </a><a class="section-name selfRef" href="#name-references">References</a>
      </h2>
<section id="section-8.1">
        <h3 id="name-normative-references">
<a class="section-number selfRef" href="#section-8.1">8.1. </a><a class="section-name selfRef" href="#name-normative-references">Normative References</a>
        </h3>
<dl class="references">
<dt id="IEEE8021CB">[IEEE8021CB]</dt>
        <dd>
<span class="refAuthor">IEEE</span>, <span class="refTitle">"IEEE Standard for Local and metropolitan area networks--Frame Replication and Elimination for Reliability"</span>, <span class="refContent">IEEE 802.1CB-2017</span>, <span class="seriesInfo">DOI 10.1109/IEEESTD.2017.8091139</span>, <time class="refDate" datetime="2017-10">October 2017</time>, <span>&lt;<a href="https://standards.ieee.org/standard/802_1CB-2017.html">https://standards.ieee.org/standard/802_1CB-2017.html</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="IEEEP8021CBdb">[IEEEP8021CBdb]</dt>
        <dd>
<span class="refAuthor">IEEE</span>, <span class="refTitle">"Draft Standard for Local and metropolitan area networks -- Frame Replication and Elimination for Reliability -- Amendment: Extended Stream Identification Functions"</span>, <span class="refContent">IEEE P802.1CBdb / D1.3</span>, <time class="refDate" datetime="2021-04">April 2021</time>, <span>&lt;<a href="https://1.ieee802.org/tsn/802-1cbdb/">https://1.ieee802.org/tsn/802-1cbdb/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8655">[RFC8655]</dt>
        <dd>
<span class="refAuthor">Finn, N.</span>, <span class="refAuthor">Thubert, P.</span>, <span class="refAuthor">Varga, B.</span>, and <span class="refAuthor">J. Farkas</span>, <span class="refTitle">"Deterministic Networking Architecture"</span>, <span class="seriesInfo">RFC 8655</span>, <span class="seriesInfo">DOI 10.17487/RFC8655</span>, <time class="refDate" datetime="2019-10">October 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8655">https://www.rfc-editor.org/info/rfc8655</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8939">[RFC8939]</dt>
      <dd>
<span class="refAuthor">Varga, B., Ed.</span>, <span class="refAuthor">Farkas, J.</span>, <span class="refAuthor">Berger, L.</span>, <span class="refAuthor">Fedyk, D.</span>, and <span class="refAuthor">S. Bryant</span>, <span class="refTitle">"Deterministic Networking (DetNet) Data Plane: IP"</span>, <span class="seriesInfo">RFC 8939</span>, <span class="seriesInfo">DOI 10.17487/RFC8939</span>, <time class="refDate" datetime="2020-11">November 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8939">https://www.rfc-editor.org/info/rfc8939</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-8.2">
        <h3 id="name-informative-references">
<a class="section-number selfRef" href="#section-8.2">8.2. </a><a class="section-name selfRef" href="#name-informative-references">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-detnet-security">[DETNET-SECURITY]</dt>
        <dd>
<span class="refAuthor">Grossman, E., Ed.</span>, <span class="refAuthor">Mizrahi, T.</span>, and <span class="refAuthor">A. Hacker</span>, <span class="refTitle">"Deterministic Networking (DetNet) Security Considerations"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-detnet-security-16</span>, <time class="refDate" datetime="2021-03">March 2021</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-detnet-security-16">https://tools.ietf.org/html/draft-ietf-detnet-security-16</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="IEEE802.1AE-2018">[IEEE802.1AE-2018]</dt>
        <dd>
<span class="refAuthor">IEEE</span>, <span class="refTitle">"IEEE Standard for Local and metropolitan area networks--Media Access Control (MAC) Security"</span>, <span class="refContent">IEEE 802.1AE-2018</span>, <span class="seriesInfo">DOI 10.1109/IEEESTD.2018.8585421</span>, <time class="refDate" datetime="2018-12">December 2018</time>, <span>&lt;<a href="https://ieeexplore.ieee.org/document/8585421">https://ieeexplore.ieee.org/document/8585421</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="IEEE8021Q">[IEEE8021Q]</dt>
        <dd>
<span class="refAuthor">IEEE</span>, <span class="refTitle">"IEEE Standard for Local and Metropolitan Area Network--Bridges and Bridged Networks"</span>, <span class="refContent">IEEE Std 802.1Q-2018</span>, <span class="seriesInfo">DOI 10.1109/IEEESTD.2018.8403927</span>, <time class="refDate" datetime="2018-07">July 2018</time>, <span>&lt;<a href="https://ieeexplore.ieee.org/document/8403927">https://ieeexplore.ieee.org/document/8403927</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="IEEEP8021CBcv">[IEEEP8021CBcv]</dt>
      <dd>
<span class="refAuthor">IEEE 802.1</span>, <span class="refTitle">"Draft Standard for Local and metropolitan area networks--Frame Replication and Elimination for Reliability--Amendment: Information Model, YANG Data Model and Management Information Base Module"</span>, <span class="refContent">IEEE P802.1CBcv, Draft 1.1</span>, <time class="refDate" datetime="2021-02">February 2021</time>, <span>&lt;<a href="https://1.ieee802.org/tsn/802-1cbcv/">https://1.ieee802.org/tsn/802-1cbcv/</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="acks">
<section id="section-appendix.a">
      <h2 id="name-acknowledgements">
<a class="section-name selfRef" href="#name-acknowledgements">Acknowledgements</a>
      </h2>
<p id="section-appendix.a-1">
 The authors wish to thank <span class="contact-name">Norman Finn</span>,
 <span class="contact-name">Lou Berger</span>, <span class="contact-name">Craig   Gunther</span>, <span class="contact-name">Christophe Mangin</span>, and
 <span class="contact-name">Jouni Korhonen</span> for their various
 contributions to this work.<a class="pilcrow" href="#section-appendix.a-1">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="section-appendix.b">
      <h2 id="name-authors-addresses">
<a class="section-name selfRef" href="#name-authors-addresses">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Balázs Varga (<span class="role">editor</span>)</span></div>
<div class="left" dir="auto"><span class="org">Ericsson</span></div>
<div class="left" dir="auto"><span class="locality">Budapest</span></div>
<div class="left" dir="auto"><span class="street-address">Magyar Tudosok krt. 11.</span></div>
<div class="left" dir="auto"><span class="postal-code">1117</span></div>
<div class="left" dir="auto"><span class="country-name">Hungary</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:balazs.a.varga@ericsson.com">balazs.a.varga@ericsson.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">János Farkas</span></div>
<div class="left" dir="auto"><span class="org">Ericsson</span></div>
<div class="left" dir="auto"><span class="locality">Budapest</span></div>
<div class="left" dir="auto"><span class="street-address">Magyar Tudosok krt. 11.</span></div>
<div class="left" dir="auto"><span class="postal-code">1117</span></div>
<div class="left" dir="auto"><span class="country-name">Hungary</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:janos.farkas@ericsson.com">janos.farkas@ericsson.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Andrew G. Malis</span></div>
<div class="left" dir="auto"><span class="org">Malis Consulting</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:agmalis@gmail.com">agmalis@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Stewart Bryant</span></div>
<div class="left" dir="auto"><span class="org">Futurewei Technologies</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:sb@stewartbryant.com">sb@stewartbryant.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>


</body></html>