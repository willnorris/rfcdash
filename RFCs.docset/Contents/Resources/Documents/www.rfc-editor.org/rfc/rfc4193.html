<html><head></head><body><pre>Network Working Group                                          R. Hinden
Request for Comments: 4193                                         Nokia
Category: Standards Track                                    B. Haberman
                                                                 JHU-APL
                                                            October 2005


                  <span class="h1">Unique Local IPv6 Unicast Addresses</span>

Status of This Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (2005).

Abstract

   This document defines an IPv6 unicast address format that is globally
   unique and is intended for local communications, usually inside of a
   site.  These addresses are not expected to be routable on the global
   Internet.

Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-2">2</a>
   <a href="#section-2">2</a>. Acknowledgements ................................................<a href="#page-3">3</a>
   <a href="#section-3">3</a>. Local IPv6 Unicast Addresses ....................................<a href="#page-3">3</a>
      <a href="#section-3.1">3.1</a>. Format .....................................................<a href="#page-3">3</a>
           <a href="#section-3.1.1">3.1.1</a>. Background ..........................................<a href="#page-4">4</a>
      <a href="#section-3.2">3.2</a>. Global ID ..................................................<a href="#page-4">4</a>
           <a href="#section-3.2.1">3.2.1</a>. Locally Assigned Global IDs .........................<a href="#page-5">5</a>
           <a href="#section-3.2.2">3.2.2</a>. Sample Code for Pseudo-Random Global ID Algorithm ...<a href="#page-5">5</a>
           <a href="#section-3.2.3">3.2.3</a>. Analysis of the Uniqueness of Global IDs ............<a href="#page-6">6</a>
      <a href="#section-3.3">3.3</a>. Scope Definition ...........................................<a href="#page-6">6</a>
   <a href="#section-4">4</a>. Operational Guidelines ..........................................<a href="#page-7">7</a>
      <a href="#section-4.1">4.1</a>. Routing ....................................................<a href="#page-7">7</a>
      <a href="#section-4.2">4.2</a>. Renumbering and Site Merging ...............................<a href="#page-7">7</a>
      <a href="#section-4.3">4.3</a>. Site Border Router and Firewall Packet Filtering ...........<a href="#page-8">8</a>
      <a href="#section-4.4">4.4</a>. DNS Issues .................................................<a href="#page-8">8</a>
      <a href="#section-4.5">4.5</a>. Application and Higher Level Protocol Issues ...............<a href="#page-9">9</a>
      <a href="#section-4.6">4.6</a>. Use of Local IPv6 Addresses for Local Communication ........<a href="#page-9">9</a>
      <a href="#section-4.7">4.7</a>. Use of Local IPv6 Addresses with VPNs .....................<a href="#page-10">10</a>



<span class="grey">Hinden &amp; Haberman           Standards Track                     [Page 1]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-2"></span>
<span class="grey"><a href="./rfc4193">RFC 4193</a>          Unique Local IPv6 Unicast Addresses       October 2005</span>


   <a href="#section-5">5</a>. Global Routing Considerations ..................................<a href="#page-11">11</a>
      <a href="#section-5.1">5.1</a>. From the Standpoint of the Internet .......................<a href="#page-11">11</a>
      <a href="#section-5.2">5.2</a>. From the Standpoint of a Site .............................<a href="#page-11">11</a>
   <a href="#section-6">6</a>. Advantages and Disadvantages ...................................<a href="#page-12">12</a>
      <a href="#section-6.1">6.1</a>. Advantages ................................................<a href="#page-12">12</a>
      <a href="#section-6.2">6.2</a>. Disadvantages .............................................<a href="#page-13">13</a>
   <a href="#section-7">7</a>. Security Considerations ........................................<a href="#page-13">13</a>
   <a href="#section-8">8</a>. IANA Considerations ............................................<a href="#page-13">13</a>
   <a href="#section-9">9</a>. References .....................................................<a href="#page-13">13</a>
      <a href="#section-9.1">9.1</a>. Normative References ......................................<a href="#page-13">13</a>
      <a href="#section-9.2">9.2</a>. Informative References ....................................<a href="#page-14">14</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" id="section-1">1</a>.  Introduction</span>

   This document defines an IPv6 unicast address format that is globally
   unique and is intended for local communications [<a href="#ref-IPV6" title='"Internet Protocol, Version 6 (IPv6) Specification"'>IPV6</a>].  These
   addresses are called Unique Local IPv6 Unicast Addresses and are
   abbreviated in this document as Local IPv6 addresses.  They are not
   expected to be routable on the global Internet.  They are routable
   inside of a more limited area such as a site.  They may also be
   routed between a limited set of sites.

   Local IPv6 unicast addresses have the following characteristics:

      - Globally unique prefix (with high probability of uniqueness).

      - Well-known prefix to allow for easy filtering at site
        boundaries.

      - Allow sites to be combined or privately interconnected without
        creating any address conflicts or requiring renumbering of
        interfaces that use these prefixes.

      - Internet Service Provider independent and can be used for
        communications inside of a site without having any permanent or
        intermittent Internet connectivity.

      - If accidentally leaked outside of a site via routing or DNS,
        there is no conflict with any other addresses.

      - In practice, applications may treat these addresses like global
        scoped addresses.

   This document defines the format of Local IPv6 addresses, how to
   allocate them, and usage considerations including routing, site
   border routers, DNS, application support, VPN usage, and guidelines
   for how to use for local communication inside a site.




<span class="grey">Hinden &amp; Haberman           Standards Track                     [Page 2]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-3"></span>
<span class="grey"><a href="./rfc4193">RFC 4193</a>          Unique Local IPv6 Unicast Addresses       October 2005</span>


   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [<a href="./rfc2119" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.%20%20Acknowledgements"></a><a class="selflink" href="#section-2" id="section-2">2</a>.  Acknowledgements</span>

   The underlying idea of creating Local IPv6 addresses described in
   this document has been proposed a number of times by a variety of
   people.  The authors of this document do not claim exclusive credit.
   Credit goes to Brian Carpenter, Christian Huitema, Aidan Williams,
   Andrew White, Charlie Perkins, and many others.  The authors would
   also like to thank Brian Carpenter, Charlie Perkins, Harald
   Alvestrand, Keith Moore, Margaret Wasserman, Shannon Behrens, Alan
   Beard, Hans Kruse, Geoff Huston, Pekka Savola, Christian Huitema, Tim
   Chown, Steve Bellovin, Alex Zinin, Tony Hain, Bill Fenner, Sam
   Hartman, and Elwyn Davies for their comments and suggestions on this
   document.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.%20%20Local%20IPv6%20Unicast%20Addresses"></a><a class="selflink" href="#section-3" id="section-3">3</a>.  Local IPv6 Unicast Addresses</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.1.%20%20Format"></a><a class="selflink" href="#section-3.1" id="section-3.1">3.1</a>.  Format</span>

   The Local IPv6 addresses are created using a pseudo-randomly
   allocated global ID.  They have the following format:

      | 7 bits |1|  40 bits   |  16 bits  |          64 bits           |
      +--------+-+------------+-----------+----------------------------+
      | Prefix |L| Global ID  | Subnet ID |        Interface ID        |
      +--------+-+------------+-----------+----------------------------+

   Where:

      Prefix            FC00::/7 prefix to identify Local IPv6 unicast
                        addresses.

      L                 Set to 1 if the prefix is locally assigned.
                        Set to 0 may be defined in the future.  See
                        <a href="#section-3.2">Section 3.2</a> for additional information.

      Global ID         40-bit global identifier used to create a
                        globally unique prefix.  See <a href="#section-3.2">Section 3.2</a> for
                        additional information.

      Subnet ID         16-bit Subnet ID is an identifier of a subnet
                        within the site.

      Interface ID      64-bit Interface ID as defined in [<a href="#ref-ADDARCH" title='"Internet Protocol Version 6 (IPv6) Addressing Architecture"'>ADDARCH</a>].




<span class="grey">Hinden &amp; Haberman           Standards Track                     [Page 3]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-4"></span>
<span class="grey"><a href="./rfc4193">RFC 4193</a>          Unique Local IPv6 Unicast Addresses       October 2005</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.1.1.%20%20Background"></a><a class="selflink" href="#section-3.1.1" id="section-3.1.1">3.1.1</a>.  Background</span>

   There were a range of choices available when choosing the size of the
   prefix and Global ID field length.  There is a direct tradeoff
   between having a Global ID field large enough to support foreseeable
   future growth and not using too much of the IPv6 address space
   needlessly.  A reasonable way of evaluating a specific field length
   is to compare it to a projected 2050 world population of 9.3 billion
   [<a href="#ref-POPUL" title='"World Population Data Sheet of the Population Reference Bureau 2002"'>POPUL</a>] and the number of resulting /48 prefixes per person.  A range
   of prefix choices is shown in the following table:

    Prefix  Global ID     Number of          Prefixes    % of IPv6
            Length        /48 Prefixes       per Person  Address Space

    /11       37           137,438,953,472     15         0.049%
    /10       38           274,877,906,944     30         0.098%
    /9        39           549,755,813,888     59         0.195%
    /8        40         1,099,511,627,776    118         0.391%
    /7        41         2,199,023,255,552    236         0.781%
    /6        42         4,398,046,511,104    473         1.563%

   A very high utilization ratio of these allocations can be assumed
   because the Global ID field does not require internal structure, and
   there is no reason to be able to aggregate the prefixes.

   The authors believe that a /7 prefix resulting in a 41-bit Global ID
   space (including the L bit) is a good choice.  It provides for a
   large number of assignments (i.e., 2.2 trillion) and at the same time
   uses less than .8% of the total IPv6 address space.  It is unlikely
   that this space will be exhausted.  If more than this were to be
   needed, then additional IPv6 address space could be allocated for
   this purpose.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.2.%20%20Global%20ID"></a><a class="selflink" href="#section-3.2" id="section-3.2">3.2</a>.  Global ID</span>

   The allocation of Global IDs is pseudo-random [<a href="#ref-RANDOM" title='"Randomness Requirements for Security"'>RANDOM</a>].  They MUST
   NOT be assigned sequentially or with well-known numbers.  This is to
   ensure that there is not any relationship between allocations and to
   help clarify that these prefixes are not intended to be routed
   globally.  Specifically, these prefixes are not designed to
   aggregate.

   This document defines a specific local method to allocate Global IDs,
   indicated by setting the L bit to 1.  Another method, indicated by
   clearing the L bit, may be defined later.  Apart from the allocation
   method, all Local IPv6 addresses behave and are treated identically.





<span class="grey">Hinden &amp; Haberman           Standards Track                     [Page 4]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-5"></span>
<span class="grey"><a href="./rfc4193">RFC 4193</a>          Unique Local IPv6 Unicast Addresses       October 2005</span>


   The local assignments are self-generated and do not need any central
   coordination or assignment, but have an extremely high probability of
   being unique.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.2.1.%20%20Locally%20Assigned%20Global%20IDs"></a><a class="selflink" href="#section-3.2.1" id="section-3.2.1">3.2.1</a>.  Locally Assigned Global IDs</span>

   Locally assigned Global IDs MUST be generated with a pseudo-random
   algorithm consistent with [<a href="#ref-RANDOM" title='"Randomness Requirements for Security"'>RANDOM</a>].  <a href="#section-3.2.2">Section 3.2.2</a> describes a
   suggested algorithm.  It is important that all sites generating
   Global IDs use a functionally similar algorithm to ensure there is a
   high probability of uniqueness.

   The use of a pseudo-random algorithm to generate Global IDs in the
   locally assigned prefix gives an assurance that any network numbered
   using such a prefix is highly unlikely to have that address space
   clash with any other network that has another locally assigned prefix
   allocated to it.  This is a particularly useful property when
   considering a number of scenarios including networks that merge,
   overlapping VPN address space, or hosts mobile between such networks.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.2.2.%20%20Sample%20Code%20for%20Pseudo-Random%20Global%20ID%20Algorithm"></a><a class="selflink" href="#section-3.2.2" id="section-3.2.2">3.2.2</a>.  Sample Code for Pseudo-Random Global ID Algorithm</span>

   The algorithm described below is intended to be used for locally
   assigned Global IDs.  In each case the resulting global ID will be
   used in the appropriate prefix as defined in <a href="#section-3.2">Section 3.2</a>.

     1) Obtain the current time of day in 64-bit NTP format [<a href="#ref-NTP" title='"Network Time Protocol (Version 3) Specification, Implementation and Analysis"'>NTP</a>].

     2) Obtain an EUI-64 identifier from the system running this
        algorithm.  If an EUI-64 does not exist, one can be created from
        a 48-bit MAC address as specified in [<a href="#ref-ADDARCH" title='"Internet Protocol Version 6 (IPv6) Addressing Architecture"'>ADDARCH</a>].  If an EUI-64
        cannot be obtained or created, a suitably unique identifier,
        local to the node, should be used (e.g., system serial number).

     3) Concatenate the time of day with the system-specific identifier
        in order to create a key.

     4) Compute an SHA-1 digest on the key as specified in [<a href="#ref-FIPS" title='"Federal Information Processing Standards Publication"'>FIPS</a>, <a href="#ref-SHA1" title='"US Secure Hash Algorithm 1 (SHA1)"'>SHA1</a>];
        the resulting value is 160 bits.

     5) Use the least significant 40 bits as the Global ID.

     6) Concatenate FC00::/7, the L bit set to 1, and the 40-bit Global
        ID to create a Local IPv6 address prefix.

   This algorithm will result in a Global ID that is reasonably unique
   and can be used to create a locally assigned Local IPv6 address
   prefix.



<span class="grey">Hinden &amp; Haberman           Standards Track                     [Page 5]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-6"></span>
<span class="grey"><a href="./rfc4193">RFC 4193</a>          Unique Local IPv6 Unicast Addresses       October 2005</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.2.3.%20%20Analysis%20of%20the%20Uniqueness%20of%20Global%20IDs"></a><a class="selflink" href="#section-3.2.3" id="section-3.2.3">3.2.3</a>.  Analysis of the Uniqueness of Global IDs</span>

   The selection of a pseudo random Global ID is similar to the
   selection of an SSRC identifier in RTP/RTCP defined in Section 8.1 of
   [<a href="#ref-RTP" title='"RTP: A Transport Protocol for Real-Time Applications"'>RTP</a>].  This analysis is adapted from that document.

   Since Global IDs are chosen randomly (and independently), it is
   possible that separate networks have chosen the same Global ID.  For
   any given network, with one or more random Global IDs, that has
   inter-connections to other such networks, having a total of N such
   IDs, the probability that two or more of these IDs will collide can
   be approximated using the formula:

      P = 1 - exp(-N**2 / 2**(L+1))

   where P is the probability of collision, N is the number of
   interconnected Global IDs, and L is the length of the Global ID.

   The following table shows the probability of a collision for a range
   of connections using a 40-bit Global ID field.

      Connections      Probability of Collision

          2                1.81*10^-12
         10                4.54*10^-11
        100                4.54*10^-09
       1000                4.54*10^-07
      10000                4.54*10^-05

   Based on this analysis, the uniqueness of locally generated Global
   IDs is adequate for sites planning a small to moderate amount of
   inter-site communication using locally generated Global IDs.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.3.%20%20Scope%20Definition"></a><a class="selflink" href="#section-3.3" id="section-3.3">3.3</a>.  Scope Definition</span>

   By default, the scope of these addresses is global.  That is, they
   are not limited by ambiguity like the site-local addresses defined in
   [<a href="#ref-ADDARCH" title='"Internet Protocol Version 6 (IPv6) Addressing Architecture"'>ADDARCH</a>].  Rather, these prefixes are globally unique, and as such,
   their applicability is greater than site-local addresses.  Their
   limitation is in the routability of the prefixes, which is limited to
   a site and any explicit routing agreements with other sites to
   propagate them (also see <a href="#section-4.1">Section 4.1</a>).  Also, unlike site-locals, a
   site may have more than one of these prefixes and use them at the
   same time.







<span class="grey">Hinden &amp; Haberman           Standards Track                     [Page 6]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-7"></span>
<span class="grey"><a href="./rfc4193">RFC 4193</a>          Unique Local IPv6 Unicast Addresses       October 2005</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.%20%20Operational%20Guidelines"></a><a class="selflink" href="#section-4" id="section-4">4</a>.  Operational Guidelines</span>

   The guidelines in this section do not require any change to the
   normal routing and forwarding functionality in an IPv6 host or
   router.  These are configuration and operational usage guidelines.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.1.%20%20Routing"></a><a class="selflink" href="#section-4.1" id="section-4.1">4.1</a>.  Routing</span>

   Local IPv6 addresses are designed to be routed inside of a site in
   the same manner as other types of unicast addresses.  They can be
   carried in any IPv6 routing protocol without any change.

   It is expected that they would share the same Subnet IDs with
   provider-based global unicast addresses, if they were being used
   concurrently [<a href="#ref-GLOBAL" title='"IPv6 Global Unicast Address Format"'>GLOBAL</a>].

   The default behavior of exterior routing protocol sessions between
   administrative routing regions must be to ignore receipt of and not
   advertise prefixes in the FC00::/7 block.  A network operator may
   specifically configure prefixes longer than FC00::/7 for inter-site
   communication.

   If BGP is being used at the site border with an ISP, the default BGP
   configuration must filter out any Local IPv6 address prefixes, both
   incoming and outgoing.  It must be set both to keep any Local IPv6
   address prefixes from being advertised outside of the site as well as
   to keep these prefixes from being learned from another site.  The
   exception to this is if there are specific /48 or longer routes
   created for one or more Local IPv6 prefixes.

   For link-state IGPs, it is suggested that a site utilizing IPv6 local
   address prefixes be contained within one IGP domain or area.  By
   containing an IPv6 local address prefix to a single link-state area
   or domain, the distribution of prefixes can be controlled.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.2.%20%20Renumbering%20and%20Site%20Merging"></a><a class="selflink" href="#section-4.2" id="section-4.2">4.2</a>.  Renumbering and Site Merging</span>

   The use of Local IPv6 addresses in a site results in making
   communication that uses these addresses independent of renumbering a
   site's provider-based global addresses.

   When merging multiple sites, the addresses created with these
   prefixes are unlikely to need to be renumbered because all of the
   addresses have a high probability of being unique.  Routes for each
   specific prefix would have to be configured to allow routing to work
   correctly between the formerly separate sites.





<span class="grey">Hinden &amp; Haberman           Standards Track                     [Page 7]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-8"></span>
<span class="grey"><a href="./rfc4193">RFC 4193</a>          Unique Local IPv6 Unicast Addresses       October 2005</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.3.%20%20Site%20Border%20Router%20and%20Firewall%20Packet%20Filtering"></a><a class="selflink" href="#section-4.3" id="section-4.3">4.3</a>.  Site Border Router and Firewall Packet Filtering</span>

   While no serious harm will be done if packets with these addresses
   are sent outside of a site via a default route, it is recommended
   that routers be configured by default to keep any packets with Local
   IPv6 addresses from leaking outside of the site and to keep any site
   prefixes from being advertised outside of their site.

   Site border routers and firewalls should be configured to not forward
   any packets with Local IPv6 source or destination addresses outside
   of the site, unless they have been explicitly configured with routing
   information about specific /48 or longer Local IPv6 prefixes.  This
   will ensure that packets with Local IPv6 destination addresses will
   not be forwarded outside of the site via a default route.  The
   default behavior of these devices should be to install a "reject"
   route for these prefixes.  Site border routers should respond with
   the appropriate ICMPv6 Destination Unreachable message to inform the
   source that the packet was not forwarded. [<a href="#ref-ICMPV6" title='"Internet Control Message Protocol (ICMPv6) for the Internet Protocol Version 6 (IPv6) Specification"'>ICMPV6</a>].  This feedback is
   important to avoid transport protocol timeouts.

   Routers that maintain peering arrangements between Autonomous Systems
   throughout the Internet should obey the recommendations for site
   border routers, unless configured otherwise.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.4.%20%20DNS%20Issues"></a><a class="selflink" href="#section-4.4" id="section-4.4">4.4</a>.  DNS Issues</span>

   At the present time, AAAA and PTR records for locally assigned local
   IPv6 addresses are not recommended to be installed in the global DNS.

   For background on this recommendation, one of the concerns about
   adding AAAA and PTR records to the global DNS for locally assigned
   Local IPv6 addresses stems from the lack of complete assurance that
   the prefixes are unique.  There is a small possibility that the same
   locally assigned IPv6 Local addresses will be used by two different
   organizations both claiming to be authoritative with different
   contents.  In this scenario, it is likely there will be a connection
   attempt to the closest host with the corresponding locally assigned
   IPv6 Local address.  This may result in connection timeouts,
   connection failures indicated by ICMP Destination Unreachable
   messages, or successful connections to the wrong host.  Due to this
   concern, adding AAAA records for these addresses to the global DNS is
   thought to be unwise.

   Reverse (address-to-name) queries for locally assigned IPv6 Local
   addresses MUST NOT be sent to name servers for the global DNS, due to
   the load that such queries would create for the authoritative name
   servers for the ip6.arpa zone.  This form of query load is not
   specific to locally assigned Local IPv6 addresses; any current form



<span class="grey">Hinden &amp; Haberman           Standards Track                     [Page 8]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-9"></span>
<span class="grey"><a href="./rfc4193">RFC 4193</a>          Unique Local IPv6 Unicast Addresses       October 2005</span>


   of local addressing creates additional load of this kind, due to
   reverse queries leaking out of the site.  However, since allowing
   such queries to escape from the site serves no useful purpose, there
   is no good reason to make the existing load problems worse.

   The recommended way to avoid sending such queries to nameservers for
   the global DNS is for recursive name server implementations to act as
   if they were authoritative for an empty d.f.ip6.arpa zone and return
   RCODE 3 for any such query.  Implementations that choose this
   strategy should allow it to be overridden, but returning an RCODE 3
   response for such queries should be the default, both because this
   will reduce the query load problem and also because, if the site
   administrator has not set up the reverse tree corresponding to the
   locally assigned IPv6 Local addresses in use, returning RCODE 3 is in
   fact the correct answer.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.5.%20%20Application%20and%20Higher%20Level%20Protocol%20Issues"></a><a class="selflink" href="#section-4.5" id="section-4.5">4.5</a>.  Application and Higher Level Protocol Issues</span>

   Application and other higher level protocols can treat Local IPv6
   addresses in the same manner as other types of global unicast
   addresses.  No special handling is required.  This type of address
   may not be reachable, but that is no different from other types of
   IPv6 global unicast address.  Applications need to be able to handle
   multiple addresses that may or may not be reachable at any point in
   time.  In most cases, this complexity should be hidden in APIs.

   From a host's perspective, the difference between Local IPv6 and
   other types of global unicast addresses shows up as different
   reachability and could be handled by default in that way.  In some
   cases, it is better for nodes and applications to treat them
   differently from global unicast addresses.  A starting point might be
   to give them preference over global unicast, but fall back to global
   unicast if a particular destination is found to be unreachable.  Much
   of this behavior can be controlled by how they are allocated to nodes
   and put into the DNS.  However, it is useful if a host can have both
   types of addresses and use them appropriately.

   Note that the address selection mechanisms of [<a href="#ref-ADDSEL" title='"Default Address Selection for Internet Protocol version 6 (IPv6)"'>ADDSEL</a>], and in
   particular the policy override mechanism replacing default address
   selection, are expected to be used on a site where Local IPv6
   addresses are configured.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.6.%20%20Use%20of%20Local%20IPv6%20Addresses%20for%20Local%20Communication"></a><a class="selflink" href="#section-4.6" id="section-4.6">4.6</a>.  Use of Local IPv6 Addresses for Local Communication</span>

   Local IPv6 addresses, like global scope unicast addresses, are only
   assigned to nodes if their use has been enabled (via IPv6 address
   autoconfiguration [<a href="#ref-ADDAUTO" title='"IPv6 Stateless Address Autoconfiguration"'>ADDAUTO</a>], DHCPv6 [<a href="#ref-DHCP6" title='"Dynamic Host Configuration Protocol for IPv6 (DHCPv6)"'>DHCP6</a>], or manually).  They are




<span class="grey">Hinden &amp; Haberman           Standards Track                     [Page 9]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-10"></span>
<span class="grey"><a href="./rfc4193">RFC 4193</a>          Unique Local IPv6 Unicast Addresses       October 2005</span>


   not created automatically in the way that IPv6 link-local addresses
   are and will not appear or be used unless they are purposely
   configured.

   In order for hosts to autoconfigure Local IPv6 addresses, routers
   have to be configured to advertise Local IPv6 /64 prefixes in router
   advertisements, or a DHCPv6 server must have been configured to
   assign them.  In order for a node to learn the Local IPv6 address of
   another node, the Local IPv6 address must have been installed in a
   naming system (e.g., DNS, proprietary naming system, etc.)  For these
   reasons, controlling their usage in a site is straightforward.

   To limit the use of Local IPv6 addresses the following guidelines
   apply:

      - Nodes that are to only be reachable inside of a site:  The local
        DNS should be configured to only include the Local IPv6
        addresses of these nodes.  Nodes with only Local IPv6 addresses
        must not be installed in the global DNS.

      - Nodes that are to be limited to only communicate with other
        nodes in the site:  These nodes should be set to only
        autoconfigure Local IPv6 addresses via [<a href="#ref-ADDAUTO" title='"IPv6 Stateless Address Autoconfiguration"'>ADDAUTO</a>] or to only
        receive Local IPv6 addresses via [<a href="#ref-DHCP6" title='"Dynamic Host Configuration Protocol for IPv6 (DHCPv6)"'>DHCP6</a>].  Note: For the case
        where both global and Local IPv6 prefixes are being advertised
        on a subnet, this will require a switch in the devices to only
        autoconfigure Local IPv6 addresses.

      - Nodes that are to be reachable from inside of the site and from
        outside of the site:  The DNS should be configured to include
        the global addresses of these nodes.  The local DNS may be
        configured to also include the Local IPv6 addresses of these
        nodes.

      - Nodes that can communicate with other nodes inside of the site
        and outside of the site: These nodes should autoconfigure global
        addresses via [<a href="#ref-ADDAUTO" title='"IPv6 Stateless Address Autoconfiguration"'>ADDAUTO</a>] or receive global address via [<a href="#ref-DHCP6" title='"Dynamic Host Configuration Protocol for IPv6 (DHCPv6)"'>DHCP6</a>].
        They may also obtain Local IPv6 addresses via the same
        mechanisms.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.7.%20%20Use%20of%20Local%20IPv6%20Addresses%20with%20VPNs"></a><a class="selflink" href="#section-4.7" id="section-4.7">4.7</a>.  Use of Local IPv6 Addresses with VPNs</span>

   Local IPv6 addresses can be used for inter-site Virtual Private
   Networks (VPN) if appropriate routes are set up.  Because the
   addresses are unique, these VPNs will work reliably and without the
   need for translation.  They have the additional property that they
   will continue to work if the individual sites are renumbered or
   merged.



<span class="grey">Hinden &amp; Haberman           Standards Track                    [Page 10]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-11"></span>
<span class="grey"><a href="./rfc4193">RFC 4193</a>          Unique Local IPv6 Unicast Addresses       October 2005</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.%20%20Global%20Routing%20Considerations"></a><a class="selflink" href="#section-5" id="section-5">5</a>.  Global Routing Considerations</span>

   <a href="#section-4.1">Section 4.1</a> provides operational guidelines that forbid default
   routing of local addresses between sites.  Concerns were raised to
   the IPv6 working group and to the IETF as a whole that sites may
   attempt to use local addresses as globally routed provider-
   independent addresses.  This section describes why using local
   addresses as globally-routed provider-independent addresses is
   unadvisable.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.1.%20%20From%20the%20Standpoint%20of%20the%20Internet"></a><a class="selflink" href="#section-5.1" id="section-5.1">5.1</a>.  From the Standpoint of the Internet</span>

   There is a mismatch between the structure of IPv6 local addresses and
   the normal IPv6 wide area routing model.  The /48 prefix of an IPv6
   local addresses fits nowhere in the normal hierarchy of IPv6 unicast
   addresses.  Normal IPv6 unicast addresses can be routed
   hierarchically down to physical subnet (link) level and only have to
   be flat-routed on the physical subnet.  IPv6 local addresses would
   have to be flat-routed even over the wide area Internet.

   Thus, packets whose destination address is an IPv6 local address
   could be routed over the wide area only if the corresponding /48
   prefix were carried by the wide area routing protocol in use, such as
   BGP.  This contravenes the operational assumption that long prefixes
   will be aggregated into many fewer short prefixes, to limit the table
   size and convergence time of the routing protocol.  If a network uses
   both normal IPv6 addresses [<a href="#ref-ADDARCH" title='"Internet Protocol Version 6 (IPv6) Addressing Architecture"'>ADDARCH</a>] and IPv6 local addresses, these
   types of addresses will certainly not aggregate with each other,
   since they differ from the most significant bit onwards.  Neither
   will IPv6 local addresses aggregate with each other, due to their
   random bit patterns.  This means that there would be a very
   significant operational penalty for attempting to use IPv6 local
   address prefixes generically with currently known wide area routing
   technology.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.2.%20%20From%20the%20Standpoint%20of%20a%20Site"></a><a class="selflink" href="#section-5.2" id="section-5.2">5.2</a>.  From the Standpoint of a Site</span>

   There are a number of design factors in IPv6 local addresses that
   reduce the likelihood that IPv6 local addresses will be used as
   arbitrary global unicast addresses.  These include:

      - The default rules to filter packets and routes make it very
        difficult to use IPv6 local addresses for arbitrary use across
        the Internet.  For a site to use them as general purpose unicast
        addresses, it would have to make sure that the default rules
        were not being used by all other sites and intermediate ISPs
        used for their current and future communication.




<span class="grey">Hinden &amp; Haberman           Standards Track                    [Page 11]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-12"></span>
<span class="grey"><a href="./rfc4193">RFC 4193</a>          Unique Local IPv6 Unicast Addresses       October 2005</span>


      - They are not mathematically guaranteed to be unique and are not
        registered in public databases.  Collisions, while highly
        unlikely, are possible and a collision can compromise the
        integrity of the communications.  The lack of public
        registration creates operational problems.

      - The addresses are allocated randomly.  If a site had multiple
        prefixes that it wanted to be used globally, the cost of
        advertising them would be very high because they could not be
        aggregated.

      - They have a long prefix (i.e., /48) so a single local address
        prefix doesn't provide enough address space to be used
        exclusively by the largest organizations.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.%20%20Advantages%20and%20Disadvantages"></a><a class="selflink" href="#section-6" id="section-6">6</a>.  Advantages and Disadvantages</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.1.%20%20Advantages"></a><a class="selflink" href="#section-6.1" id="section-6.1">6.1</a>.  Advantages</span>

   This approach has the following advantages:

      - Provides Local IPv6 prefixes that can be used independently of
        any provider-based IPv6 unicast address allocations.  This is
        useful for sites not always connected to the Internet or sites
        that wish to have a distinct prefix that can be used to localize
        traffic inside of the site.

      - Applications can treat these addresses in an identical manner as
        any other type of global IPv6 unicast addresses.

      - Sites can be merged without any renumbering of the Local IPv6
        addresses.

      - Sites can change their provider-based IPv6 unicast address
        without disrupting any communication that uses Local IPv6
        addresses.

      - Well-known prefix that allows for easy filtering at site
        boundary.

      - Can be used for inter-site VPNs.

      - If accidently leaked outside of a site via routing or DNS, there
        is no conflict with any other addresses.







<span class="grey">Hinden &amp; Haberman           Standards Track                    [Page 12]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-13"></span>
<span class="grey"><a href="./rfc4193">RFC 4193</a>          Unique Local IPv6 Unicast Addresses       October 2005</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.2.%20%20Disadvantages"></a><a class="selflink" href="#section-6.2" id="section-6.2">6.2</a>.  Disadvantages</span>

   This approach has the following disadvantages:

      - Not possible to route Local IPv6 prefixes on the global Internet
        with current routing technology.  Consequentially, it is
        necessary to have the default behavior of site border routers to
        filter these addresses.

      - There is a very low probability of non-unique locally assigned
        Global IDs being generated by the algorithm in <a href="#section-3.2.3">Section 3.2.3</a>.
        This risk can be ignored for all practical purposes, but it
        leads to a theoretical risk of clashing address prefixes.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/7.%20%20Security%20Considerations"></a><a class="selflink" href="#section-7" id="section-7">7</a>.  Security Considerations</span>

   Local IPv6 addresses do not provide any inherent security to the
   nodes that use them.  They may be used with filters at site
   boundaries to keep Local IPv6 traffic inside of the site, but this is
   no more or less secure than filtering any other type of global IPv6
   unicast addresses.

   Local IPv6 addresses do allow for address-based security mechanisms,
   including IPsec, across end to end VPN connections.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/8.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-8" id="section-8">8</a>.  IANA Considerations</span>

   The IANA has assigned the FC00::/7 prefix to "Unique Local Unicast".

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/9.%20%20References"></a><a class="selflink" href="#section-9" id="section-9">9</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/9.1.%20%20Normative%20References"></a><a class="selflink" href="#section-9.1" id="section-9.1">9.1</a>.  Normative References</span>

   [<a id="ref-ADDARCH">ADDARCH</a>]  Hinden, R. and S. Deering, "Internet Protocol Version 6
             (IPv6) Addressing Architecture", <a href="./rfc3513">RFC 3513</a>, April 2003.

   [<a id="ref-FIPS">FIPS</a>]    "Federal Information Processing Standards Publication",
             (FIPS PUB) 180-1, Secure Hash Standard, 17 April 1995.

   [<a id="ref-GLOBAL">GLOBAL</a>]  Hinden, R., Deering, S., and E. Nordmark, "IPv6 Global
             Unicast Address Format", <a href="./rfc3587">RFC 3587</a>, August 2003.

   [<a id="ref-ICMPV6">ICMPV6</a>]  Conta, A. and S. Deering, "Internet Control Message
             Protocol (ICMPv6) for the Internet Protocol Version 6
             (IPv6) Specification", <a href="./rfc2463">RFC 2463</a>, December 1998.






<span class="grey">Hinden &amp; Haberman           Standards Track                    [Page 13]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-14"></span>
<span class="grey"><a href="./rfc4193">RFC 4193</a>          Unique Local IPv6 Unicast Addresses       October 2005</span>


   [<a id="ref-IPV6">IPV6</a>]    Deering, S. and R. Hinden, "Internet Protocol, Version 6
             (IPv6) Specification", <a href="./rfc2460">RFC 2460</a>, December 1998.

   [<a id="ref-NTP">NTP</a>]     Mills, D., "Network Time Protocol (Version 3)
             Specification, Implementation and Analysis", <a href="./rfc1305">RFC 1305</a>,
             March 1992.

   [<a id="ref-RANDOM">RANDOM</a>]  Eastlake, D., 3rd, Schiller, J., and S. Crocker,
             "Randomness Requirements for Security", <a href="https://www.rfc-editor.org/bcp/bcp106">BCP 106</a>, <a href="./rfc4086">RFC 4086</a>,
             June 2005.

   [<a id="ref-RFC2119">RFC2119</a>] Bradner, S., "Key words for use in RFCs to Indicate
             Requirement Levels", <a href="https://www.rfc-editor.org/bcp/bcp14">BCP 14</a>, <a href="./rfc2119">RFC 2119</a>, March 1997.

   [<a id="ref-SHA1">SHA1</a>]    Eastlake 3rd, D. and P. Jones, "US Secure Hash Algorithm 1
             (SHA1)", <a href="./rfc3174">RFC 3174</a>, September 2001.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/9.2.%20%20Informative%20References"></a><a class="selflink" href="#section-9.2" id="section-9.2">9.2</a>.  Informative References</span>

   [<a id="ref-ADDAUTO">ADDAUTO</a>] Thomson, S. and T. Narten, "IPv6 Stateless Address
             Autoconfiguration", <a href="./rfc2462">RFC 2462</a>, December 1998.

   [<a id="ref-ADDSEL">ADDSEL</a>]  Draves, R., "Default Address Selection for Internet
             Protocol version 6 (IPv6)", <a href="./rfc3484">RFC 3484</a>, February 2003.

   [<a id="ref-DHCP6">DHCP6</a>]   Droms, R., Bound, J., Volz, B., Lemon, T., Perkins, C., and
             M. Carney, "Dynamic Host Configuration Protocol for IPv6
             (DHCPv6)", <a href="./rfc3315">RFC 3315</a>, July 2003.

   [<a id="ref-POPUL">POPUL</a>]   Population Reference Bureau, "World Population Data Sheet
             of the Population Reference Bureau 2002",  August 2002.

   [<a id="ref-RTP">RTP</a>]     Schulzrinne, H.,  Casner, S., Frederick, R., and V.
             Jacobson, "RTP: A Transport Protocol for Real-Time
             Applications", STD 64, <a href="./rfc3550">RFC 3550</a>, July 2003.
















<span class="grey">Hinden &amp; Haberman           Standards Track                    [Page 14]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-15"></span>
<span class="grey"><a href="./rfc4193">RFC 4193</a>          Unique Local IPv6 Unicast Addresses       October 2005</span>


Authors' Addresses

   Robert M. Hinden
   Nokia
   313 Fairchild Drive
   Mountain View, CA 94043
   USA

   Phone: +1 650 625-2004
   EMail: bob.hinden@nokia.com


   Brian Haberman
   Johns Hopkins University
   Applied Physics Lab
   11100 Johns Hopkins Road
   Laurel, MD 20723
   USA

   Phone: +1 443 778 1319
   EMail: brian@innovationslab.net






























<span class="grey">Hinden &amp; Haberman           Standards Track                    [Page 15]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-16"></span>
<span class="grey"><a href="./rfc4193">RFC 4193</a>          Unique Local IPv6 Unicast Addresses       October 2005</span>


Full Copyright Statement

   Copyright (C) The Internet Society (2005).

   This document is subject to the rights, licenses and restrictions
   contained in <a href="https://www.rfc-editor.org/bcp/bcp78">BCP 78</a>, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in <a href="https://www.rfc-editor.org/bcp/bcp78">BCP 78</a> and <a href="https://www.rfc-editor.org/bcp/bcp79">BCP 79</a>.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   <a href="http://www.ietf.org/ipr">http://www.ietf.org/ipr</a>.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at ietf-
   ipr@ietf.org.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.







Hinden &amp; Haberman           Standards Track                    [Page 16]
</pre>
</body></html>